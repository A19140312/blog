<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Idea-MacÊøÄÊ¥ª]]></title>
    <url>%2FIdea%2FIdea-Activation%2F</url>
    <content type="text"><![CDATA[È¶ñÂÖà‰∏ãËΩΩjarÂåÖÔºöÁôæÂ∫¶ÁΩëÁõòÈìæÊé• ÂØÜÁ†Å:b8ye Â∞ÜÂÖ∂ÊîæÂà∞ÂêàÈÄÇÁöÑÊñá‰ª∂Â§π ËøõÂÖ•ideaÔºàÈ¶ñÊ¨°ËøõÂÖ•ÂèØ‰ª•ÈÄâÊã©ÂÖçË¥π30Â§©ÔºåÊøÄÊ¥ªÁ†ÅÂ§±ÊïàÂêéËøõÂÖ•ÂÖçË¥π30ÂàÜÈíüÔºâÂ¶ÇÊûúÊ≤°ÊúâÈ°πÁõÆÈöè‰æøÂª∫‰∏™È°πÁõÆÔºåÁÇπÂáªËèúÂçïÊ†è Help -&gt; Edit Custom VM Options Ê≥®ÊÑèÔºöÂàáËÆ∞‰∏ÄÂÆöË¶ÅÈÄöËøá IDEA Êù•‰øÆÊîπ .vmoptions Êñá‰ª∂Ôºå‰∏çË¶ÅÊâãÂä®Áõ¥Êé•Âéª‰øÆÊîπÔºåÁé∞Âú® IDEA ÈíàÂØπÂèçÁ†¥Ëß£Â∑≤ÁªèË∂äÊù•Ë∂ä‰∏•Ê†º Âú®Êú´Â∞æÊ∑ªÂä†Ë∑ØÂæÑÔºö-javaagent:/Users/XXXX/XXXX/jetbrainsCrack.jar Ê≥®ÊÑèÔºöË°•‰∏ÅÂÖ®Ë∑ØÂæÑ‰∏≠‰∏çË¶ÅÂåÖÂê´‰∏≠ÊñáÔºåÂê¶ÂàôÔºåÂèØËÉΩÂØºËá¥Á†¥Ëß£Â§±Ë¥•ÔºÅ ÈáçÂêØideaÔºÅÔºÅÔºÅ‰∏ÄÂÆöË¶ÅÈáçÂêØ ÈáçÂêØÂÆåÊàêÂêéÔºåÂºÄÂßãÂ°´ÂÖ•ÊøÄÊ¥ªÁ†ÅÔºåÁÇπÂáªËèúÂçïÊ†è Help -&gt; Register: 1A82DEE284F-eyJsaWNlbnNlSWQiOiJBODJERUUyODRGIiwibGljZW5zZWVOYW1lIjoiaHR0cHM6Ly96aGlsZS5pbyIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiJVbmxpbWl0ZWQgbGljZW5zZSB0aWxsIGVuZCBvZiB0aGUgY2VudHVyeS4iLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUlMwIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiV1MiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSRCIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlJDIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiREMiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJEQiIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlJNIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiRE0iLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJBQyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkRQTiIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkdPIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUFMiLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJDTCIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlBDIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUlNVIiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In1dLCJoYXNoIjoiODkwNzA3MC8wIiwiZ3JhY2VQZXJpb2REYXlzIjowLCJhdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlLCJpc0F1dG9Qcm9sb25nYXRlZCI6ZmFsc2V9-5epo90Xs7KIIBb8ckoxnB/AZQ8Ev7rFrNqwFhBAsQYsQyhvqf1FcYdmlecFWJBHSWZU9b41kvsN4bwAHT5PiznOTmfvGv1MuOzMO0VOXZlc+edepemgpt+t3GUHvfGtzWFYeKeyCk+CLA9BqUzHRTgl2uBoIMNqh5izlDmejIwUHLl39QOyzHiTYNehnVN7GW5+QUeimTr/koVUgK8xofu59Tv8rcdiwIXwTo71LcU2z2P+T3R81fwKkt34evy7kRch4NIQUQUno//Pl3V0rInm3B2oFq9YBygPUdBUbdH/KHROyohZRD8SaZJO6kUT0BNvtDPKF4mCT1saWM38jkw==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5ndaik1GD0nyTdqkZgURQZGW+RGxCdBITPXIwpjhhaD0SXGa4XSZBEBoiPdY6XV6pOfUJeyfi9dXsY4MmT0D+sKoST3rSw96xaf9FXPvOjn4prMTdj3Ji3CyQrGWeQU2nzYqFrp1QYNLAbaViHRKuJrYHI6GCvqCbJe0LQ8qqUiVMA9wG/PQwScpNmTF9Kp2Iej+Z5OUxF33zzm+vg/nYV31HLF7fJUAplI/1nM+ZG8K+AXWgYKChtknl3sW9PCQa3a3imPL9GVToUNxc0wcuTil8mqveWcSQCHYxsIaUajWLpFzoO2AhK4mfYBSStAqEjoXRTuj17mo8Q6M2SHOcwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQBonMu8oa3vmNAa4RQP8gPGlX3SQaA3WCRUAj6Zrlk8AesKV1YSkh5D2l+yUk6njysgzfr1bIR5xF8eup5xXc4/G7NtVYRSMvrd6rfQcHOyK5UFJLm+8utmyMIDrZOzLQuTsT8NxFpbCVCfV5wNRu4rChrCuArYVGaKbmp9ymkw1PU6+HoO5i2wU3ikTmRv8IRjrlSStyNzXpnPTwt7bja19ousk56r40SmlmC04GdDHErr0ei2UbjUua5kw71Qn9g02tL9fERI2sSRjQrvPbn9INwRWl5+k05mlKekbtbu2ev2woJFZK4WEXAd/GaAdeZZdumv8T2idDFL7cAirJwcrbfpawPeXr52oKTPnXfi0l5+g9Gnt/wfiXCrPElX6ycTR6iL3GC2VR4jTz6YatT4Ntz59/THOT7NJQhr6AyLkhhJCdkzE2cob/KouVp4ivV7Q3Fc6HX7eepHAAF/DpxwgOrg9smX6coXLgfp0b1RU2u/tUNID04rpNxTMueTtrT8WSskqvaJd3RH8r7cnRj6Y2hltkja82HlpDURDxDTRvv+krbwMr26SB/40BjpMUrDRCeKuiBahC0DCoU/4+ze1l94wVUhdkCfL0GpJrMSCDEK+XEurU18Hb7WT+ThXbkdl6VpFdHsRvqAnhR2g4b+Qzgidmuky5NUZVfEaZqV/g== 13AGXEJXFK9-eyJsaWNlbnNlSWQiOiIzQUdYRUpYRks5IiwibGljZW5zZWVOYW1lIjoiaHR0cHM6Ly96aGlsZS5pbyIsImFzc2lnbmVlTmFtZSI6IiIsImFzc2lnbmVlRW1haWwiOiIiLCJsaWNlbnNlUmVzdHJpY3Rpb24iOiIiLCJjaGVja0NvbmN1cnJlbnRVc2UiOmZhbHNlLCJwcm9kdWN0cyI6W3siY29kZSI6IklJIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkFDIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkRQTiIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJQUyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJHTyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJETSIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJDTCIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSUzAiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUkMiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUkQiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUEMiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUk0iLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiV1MiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiREIiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiREMiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiUlNVIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9XSwiaGFzaCI6IjEyNzk2ODc3LzAiLCJncmFjZVBlcmlvZERheXMiOjcsImF1dG9Qcm9sb25nYXRlZCI6ZmFsc2UsImlzQXV0b1Byb2xvbmdhdGVkIjpmYWxzZX0=-WGTHs6XpDhr+uumvbwQPOdlxWnQwgnGaL4eRnlpGKApEEkJyYvNEuPWBSrQkPmVpim/8Sab6HV04Dw3IzkJT0yTc29sPEXBf69+7y6Jv718FaJu4MWfsAk/ZGtNIUOczUQ0iGKKnSSsfQ/3UoMv0q/yJcfvj+me5Zd/gfaisCCMUaGjB/lWIPpEPzblDtVJbRexB1MALrLCEoDv3ujcPAZ7xWb54DiZwjYhQvQ+CvpNNF2jeTku7lbm5v+BoDsdeRq7YBt9ANLUKPr2DahcaZ4gctpHZXhG96IyKx232jYq9jQrFDbQMtVr3E+GsCekMEWSD//dLT+HuZdc1sAIYrw==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5ndaik1GD0nyTdqkZgURQZGW+RGxCdBITPXIwpjhhaD0SXGa4XSZBEBoiPdY6XV6pOfUJeyfi9dXsY4MmT0D+sKoST3rSw96xaf9FXPvOjn4prMTdj3Ji3CyQrGWeQU2nzYqFrp1QYNLAbaViHRKuJrYHI6GCvqCbJe0LQ8qqUiVMA9wG/PQwScpNmTF9Kp2Iej+Z5OUxF33zzm+vg/nYV31HLF7fJUAplI/1nM+ZG8K+AXWgYKChtknl3sW9PCQa3a3imPL9GVToUNxc0wcuTil8mqveWcSQCHYxsIaUajWLpFzoO2AhK4mfYBSStAqEjoXRTuj17mo8Q6M2SHOcwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQBonMu8oa3vmNAa4RQP8gPGlX3SQaA3WCRUAj6Zrlk8AesKV1YSkh5D2l+yUk6njysgzfr1bIR5xF8eup5xXc4/G7NtVYRSMvrd6rfQcHOyK5UFJLm+8utmyMIDrZOzLQuTsT8NxFpbCVCfV5wNRu4rChrCuArYVGaKbmp9ymkw1PU6+HoO5i2wU3ikTmRv8IRjrlSStyNzXpnPTwt7bja19ousk56r40SmlmC04GdDHErr0ei2UbjUua5kw71Qn9g02tL9fERI2sSRjQrvPbn9INwRWl5+k05mlKekbtbu2ev2woJFZK4WEXAd/GaAdeZZdumv8T2idDFL7cAirJwcrbfpawPeXr52oKTPnXfi0l5+g9Gnt/wfiXCrPElX6ycTR6iL3GC2VR4jTz6YatT4Ntz59/THOT7NJQhr6AyLkhhJCdkzE2cob/KouVp4ivV7Q3Fc6HX7eepHAAF/DpxwgOrg9smX6coXLgfp0b1RU2u/tUNID04rpNxTMueTtrT8WSskqvaJd3RH8r7cnRj6Y2hltkja82HlpDURDxDTRvv+krbwMr26SB/40BjpMUrDRCeKuiBahC0DCoU/4+ze1l94wVUhdkCfL0GpJrMSCDEK+XEurU18Hb7WT+ThXbkdl6VpFdHsRvqAnhR2g4b+Qzgidmuky5NUZVfEaZqV/g== 1KNBB2QUUR1-eyJsaWNlbnNlSWQiOiJLTkJCMlFVVVIxIiwibGljZW5zZWVOYW1lIjoiZ2hib2tlIiwiYXNzaWduZWVOYW1lIjoiIiwiYXNzaWduZWVFbWFpbCI6IiIsImxpY2Vuc2VSZXN0cmljdGlvbiI6IiIsImNoZWNrQ29uY3VycmVudFVzZSI6ZmFsc2UsInByb2R1Y3RzIjpbeyJjb2RlIjoiSUkiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiQUMiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In0seyJjb2RlIjoiRFBOIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlBTIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkdPIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkRNIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IkNMIiwiZmFsbGJhY2tEYXRlIjoiMjA4OS0wNy0wNyIsInBhaWRVcFRvIjoiMjA4OS0wNy0wNyJ9LHsiY29kZSI6IlJTMCIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSQyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSRCIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJQQyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSTSIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJXUyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJEQiIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJEQyIsImZhbGxiYWNrRGF0ZSI6IjIwODktMDctMDciLCJwYWlkVXBUbyI6IjIwODktMDctMDcifSx7ImNvZGUiOiJSU1UiLCJmYWxsYmFja0RhdGUiOiIyMDg5LTA3LTA3IiwicGFpZFVwVG8iOiIyMDg5LTA3LTA3In1dLCJoYXNoIjoiMTI3OTY4NzcvMCIsImdyYWNlUGVyaW9kRGF5cyI6NywiYXV0b1Byb2xvbmdhdGVkIjpmYWxzZSwiaXNBdXRvUHJvbG9uZ2F0ZWQiOmZhbHNlfQ==-1iV7BA/baNqv0Q5yUnAphUmh66QhkDRX+qPL09ICuEicBqiPOBxmVLLCVUpkxhrNyfmOtat2LcHwcX/NHkYXdoW+6aS0S388xe1PV2oodiPBhFlEaOac42UQLgP4EidfGQSvKwC9tR1zL5b2CJPQKZ7iiHh/iKBQxP6OBMUP1T7j3Fe1rlxfYPc92HRZf6cO+C0+buJP5ERZkyIn5ZrVM4TEnWrRHbpL8SVNq4yqfc+NwoRzRSNC++81VDS3AXv9c91YeZJz6JXO7AokIk54wltr42FLNuKbozvB/HCxV9PA5vIiM+kZY1K0w5ytgxEYKqA87adA7R5xL/crpaMxHQ==-MIIElTCCAn2gAwIBAgIBCTANBgkqhkiG9w0BAQsFADAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBMB4XDTE4MTEwMTEyMjk0NloXDTIwMTEwMjEyMjk0NlowaDELMAkGA1UEBhMCQ1oxDjAMBgNVBAgMBU51c2xlMQ8wDQYDVQQHDAZQcmFndWUxGTAXBgNVBAoMEEpldEJyYWlucyBzLnIuby4xHTAbBgNVBAMMFHByb2QzeS1mcm9tLTIwMTgxMTAxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA5ndaik1GD0nyTdqkZgURQZGW+RGxCdBITPXIwpjhhaD0SXGa4XSZBEBoiPdY6XV6pOfUJeyfi9dXsY4MmT0D+sKoST3rSw96xaf9FXPvOjn4prMTdj3Ji3CyQrGWeQU2nzYqFrp1QYNLAbaViHRKuJrYHI6GCvqCbJe0LQ8qqUiVMA9wG/PQwScpNmTF9Kp2Iej+Z5OUxF33zzm+vg/nYV31HLF7fJUAplI/1nM+ZG8K+AXWgYKChtknl3sW9PCQa3a3imPL9GVToUNxc0wcuTil8mqveWcSQCHYxsIaUajWLpFzoO2AhK4mfYBSStAqEjoXRTuj17mo8Q6M2SHOcwIDAQABo4GZMIGWMAkGA1UdEwQCMAAwHQYDVR0OBBYEFGEpG9oZGcfLMGNBkY7SgHiMGgTcMEgGA1UdIwRBMD+AFKOetkhnQhI2Qb1t4Lm0oFKLl/GzoRykGjAYMRYwFAYDVQQDDA1KZXRQcm9maWxlIENBggkA0myxg7KDeeEwEwYDVR0lBAwwCgYIKwYBBQUHAwEwCwYDVR0PBAQDAgWgMA0GCSqGSIb3DQEBCwUAA4ICAQBonMu8oa3vmNAa4RQP8gPGlX3SQaA3WCRUAj6Zrlk8AesKV1YSkh5D2l+yUk6njysgzfr1bIR5xF8eup5xXc4/G7NtVYRSMvrd6rfQcHOyK5UFJLm+8utmyMIDrZOzLQuTsT8NxFpbCVCfV5wNRu4rChrCuArYVGaKbmp9ymkw1PU6+HoO5i2wU3ikTmRv8IRjrlSStyNzXpnPTwt7bja19ousk56r40SmlmC04GdDHErr0ei2UbjUua5kw71Qn9g02tL9fERI2sSRjQrvPbn9INwRWl5+k05mlKekbtbu2ev2woJFZK4WEXAd/GaAdeZZdumv8T2idDFL7cAirJwcrbfpawPeXr52oKTPnXfi0l5+g9Gnt/wfiXCrPElX6ycTR6iL3GC2VR4jTz6YatT4Ntz59/THOT7NJQhr6AyLkhhJCdkzE2cob/KouVp4ivV7Q3Fc6HX7eepHAAF/DpxwgOrg9smX6coXLgfp0b1RU2u/tUNID04rpNxTMueTtrT8WSskqvaJd3RH8r7cnRj6Y2hltkja82HlpDURDxDTRvv+krbwMr26SB/40BjpMUrDRCeKuiBahC0DCoU/4+ze1l94wVUhdkCfL0GpJrMSCDEK+XEurU18Hb7WT+ThXbkdl6VpFdHsRvqAnhR2g4b+Qzgidmuky5NUZVfEaZqV/g== ÊàñËÄÖÈöè‰æøÂú®ÁΩë‰∏äÊâæ‰∏™ÊøÄÊ¥ªÁ†Å ÁÇπÂáªÊøÄÊ¥ªÔºåÂèØ‰ª•ÁúãÂà∞ÊøÄÊ¥ªÊó•ÊúüÂà∞2089Âπ¥]]></content>
      <categories>
        <category>Idea</category>
      </categories>
      <tags>
        <tag>Idea</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVA-ÂÜÖÂ≠òÊ®°Âûã]]></title>
    <url>%2FJAVA%2FJava-MemoryModel%2F</url>
    <content type="text"><![CDATA[JVMÂÜÖÂ≠òÊ®°ÂûãÁÇπÂáªËøôÈáåÊü•ÁúãËøôÁØáÊñáÁ´† JavaÂÜÖÂ≠òÊ®°ÂûãJavaÂÜÖÂ≠òÊ®°Âûã(Java Memory ModelÔºåÁÆÄÁß∞JMM)ÔºåÊú¨Ë∫´ÊòØÁßçÊäΩË±°ÁöÑÊ¶ÇÂøµÔºåÂπ∂‰∏çÊòØÂÉèÁ°¨‰ª∂Êû∂ÊûÑ‰∏ÄÊ†∑ÁúüÂÆûÂ≠òÂú®ÁöÑÔºõÂÆÉÊèèËø∞ÁöÑÊòØ‰∏ÄÁªÑËßÑÂàôÊàñËßÑËåÉÔºåÈÄöËøáËøôÁªÑËßÑËåÉÂÆö‰πâ‰∫ÜÁ®ãÂ∫è‰∏≠ÂêÑ‰∏™ÂèòÈáè(ÂåÖÊã¨ÂÆû‰æãÂ≠óÊÆµ„ÄÅÈùôÊÄÅÂ≠óÊÆµÂíåÊûÑÊàêÊï∞ÁªÑÂØπË±°ÁöÑÂÖÉÁ¥†)ÁöÑËÆøÈóÆÊñπÂºè„ÄÇ ‰∏ªÂÜÖÂ≠òÔºöÂÖ±‰∫´ÁöÑ‰ø°ÊÅØ Â∑•‰ΩúÂÜÖÂ≠òÔºöÁßÅÊúâ‰ø°ÊÅØÔºåÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÁõ¥Êé•ÂàÜÈÖçÂà∞Â∑•‰ΩúÂÜÖÂ≠òÔºåÂºïÁî®ÁöÑÂú∞ÂùÄÂ≠òÊîæÂú®Â∑•‰ΩúÂÜÖÂ≠òÔºåÂºïÁî®ÁöÑÂØπË±°Â≠òÊîæÂú®Â†Ü‰∏≠ Â∑•‰ΩúÊñπÂºèÔºö Á∫øÁ®ã‰øÆÊîπÁßÅÊúâÊï∞ÊçÆÔºåÁõ¥Êé•Âú®Â∑•‰ΩúÁ©∫Èó¥‰øÆÊîπ Á∫øÁ®ã‰øÆÊîπÂÖ±‰∫´Êï∞ÊçÆÔºåÊääÊï∞ÊçÆÂ§çÂà∂Âà∞Â∑•‰ΩúÁ©∫Èó¥‰∏≠ÂéªÔºåÂú®Â∑•‰ΩúÁ©∫Èó¥‰∏≠‰øÆÊîπÔºå‰øÆÊîπÂÆåÊàê‰ª•ÂêéÔºåÂà∑Êñ∞ÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ Á°¨‰ª∂Êû∂ÊûÑ Â§öCPUÔºö‰∏Ä‰∏™Áé∞‰ª£ËÆ°ÁÆóÊú∫ÈÄöÂ∏∏Áî±‰∏§‰∏™ÊàñËÄÖÂ§ö‰∏™CPU„ÄÇÂÖ∂‰∏≠‰∏Ä‰∫õCPUËøòÊúâÂ§öÊ†∏„ÄÇ‰ªéËøô‰∏ÄÁÇπÂèØ‰ª•ÁúãÂá∫ÔºåÂú®‰∏Ä‰∏™Êúâ‰∏§‰∏™ÊàñËÄÖÂ§ö‰∏™CPUÁöÑÁé∞‰ª£ËÆ°ÁÆóÊú∫‰∏äÂêåÊó∂ËøêË°åÂ§ö‰∏™Á∫øÁ®ãÊòØÂèØËÉΩÁöÑ„ÄÇÊØè‰∏™CPUÂú®Êüê‰∏ÄÊó∂ÂàªËøêË°å‰∏Ä‰∏™Á∫øÁ®ãÊòØÊ≤°ÊúâÈóÆÈ¢òÁöÑ„ÄÇËøôÊÑèÂë≥ÁùÄÔºåÂ¶ÇÊûú‰Ω†ÁöÑJavaÁ®ãÂ∫èÊòØÂ§öÁ∫øÁ®ãÁöÑÔºåÂú®‰Ω†ÁöÑJavaÁ®ãÂ∫è‰∏≠ÊØè‰∏™CPU‰∏ä‰∏Ä‰∏™Á∫øÁ®ãÂèØËÉΩÂêåÊó∂ÔºàÂπ∂ÂèëÔºâÊâßË°å„ÄÇ CPUÂØÑÂ≠òÂô®ÔºöÊØè‰∏™CPUÈÉΩÂåÖÂê´‰∏ÄÁ≥ªÂàóÁöÑÂØÑÂ≠òÂô®ÔºåÂÆÉ‰ª¨ÊòØCPUÂÜÖÂÜÖÂ≠òÁöÑÂü∫Á°Ä„ÄÇCPUÂú®ÂØÑÂ≠òÂô®‰∏äÊâßË°åÊìç‰ΩúÁöÑÈÄüÂ∫¶ËøúÂ§ß‰∫éÂú®‰∏ªÂ≠ò‰∏äÊâßË°åÁöÑÈÄüÂ∫¶„ÄÇËøôÊòØÂõ†‰∏∫CPUËÆøÈóÆÂØÑÂ≠òÂô®ÁöÑÈÄüÂ∫¶ËøúÂ§ß‰∫é‰∏ªÂ≠ò„ÄÇ È´òÈÄüÁºìÂ≠òcacheÔºöÁî±‰∫éËÆ°ÁÆóÊú∫ÁöÑÂ≠òÂÇ®ËÆæÂ§á‰∏éÂ§ÑÁêÜÂô®ÁöÑËøêÁÆóÈÄüÂ∫¶‰πãÈó¥ÊúâÁùÄÂá†‰∏™Êï∞ÈáèÁ∫ßÁöÑÂ∑ÆË∑ùÔºåÊâÄ‰ª•Áé∞‰ª£ËÆ°ÁÆóÊú∫Á≥ªÁªüÈÉΩ‰∏çÂæó‰∏çÂä†ÂÖ•‰∏ÄÂ±ÇËØªÂÜôÈÄüÂ∫¶Â∞ΩÂèØËÉΩÊé•ËøëÂ§ÑÁêÜÂô®ËøêÁÆóÈÄüÂ∫¶ÁöÑÈ´òÈÄüÁºìÂ≠òÔºàCacheÔºâÊù•‰Ωú‰∏∫ÂÜÖÂ≠ò‰∏éÂ§ÑÁêÜÂô®‰πãÈó¥ÁöÑÁºìÂÜ≤ÔºöÂ∞ÜËøêÁÆóÈúÄË¶Å‰ΩøÁî®Âà∞ÁöÑÊï∞ÊçÆÂ§çÂà∂Âà∞ÁºìÂ≠ò‰∏≠ÔºåËÆ©ËøêÁÆóËÉΩÂø´ÈÄüËøõË°åÔºåÂΩìËøêÁÆóÁªìÊùüÂêéÂÜç‰ªéÁºìÂ≠òÂêåÊ≠•ÂõûÂÜÖÂ≠ò‰πã‰∏≠ÔºåËøôÊ†∑Â§ÑÁêÜÂô®Â∞±Êó†È°ªÁ≠âÂæÖÁºìÊÖ¢ÁöÑÂÜÖÂ≠òËØªÂÜô‰∫Ü„ÄÇCPUËÆøÈóÆÁºìÂ≠òÂ±ÇÁöÑÈÄüÂ∫¶Âø´‰∫éËÆøÈóÆ‰∏ªÂ≠òÁöÑÈÄüÂ∫¶Ôºå‰ΩÜÈÄöÂ∏∏ÊØîËÆøÈóÆÂÜÖÈÉ®ÂØÑÂ≠òÂô®ÁöÑÈÄüÂ∫¶ËøòË¶ÅÊÖ¢‰∏ÄÁÇπ„ÄÇÊØè‰∏™CPUÂèØËÉΩÊúâ‰∏Ä‰∏™CPUÁºìÂ≠òÂ±ÇÔºå‰∏Ä‰∫õCPUËøòÊúâÂ§öÂ±ÇÁºìÂ≠ò„ÄÇÂú®Êüê‰∏ÄÊó∂ÂàªÔºå‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÁºìÂ≠òË°åÔºàcache linesÔºâÂèØËÉΩË¢´ËØªÂà∞ÁºìÂ≠òÔºå‰∏Ä‰∏™ÊàñËÄÖÂ§ö‰∏™ÁºìÂ≠òË°åÂèØËÉΩÂÜçË¢´Âà∑Êñ∞Âõû‰∏ªÂ≠ò„ÄÇ ÂÜÖÂ≠òÔºö‰∏Ä‰∏™ËÆ°ÁÆóÊú∫ËøòÂåÖÂê´‰∏Ä‰∏™‰∏ªÂ≠ò„ÄÇÊâÄÊúâÁöÑCPUÈÉΩÂèØ‰ª•ËÆøÈóÆ‰∏ªÂ≠ò„ÄÇ‰∏ªÂ≠òÈÄöÂ∏∏ÊØîCPU‰∏≠ÁöÑÁºìÂ≠òÂ§ßÂæóÂ§ö„ÄÇ Ëøê‰ΩúÂéüÁêÜÔºöÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ãÔºåÂΩì‰∏Ä‰∏™CPUÈúÄË¶ÅËØªÂèñ‰∏ªÂ≠òÊó∂ÔºåÂÆÉ‰ºöÂ∞Ü‰∏ªÂ≠òÁöÑÈÉ®ÂàÜËØªÂà∞CPUÁºìÂ≠ò‰∏≠„ÄÇÂÆÉÁîöËá≥ÂèØËÉΩÂ∞ÜÁºìÂ≠ò‰∏≠ÁöÑÈÉ®ÂàÜÂÜÖÂÆπËØªÂà∞ÂÆÉÁöÑÂÜÖÈÉ®ÂØÑÂ≠òÂô®‰∏≠ÔºåÁÑ∂ÂêéÂú®ÂØÑÂ≠òÂô®‰∏≠ÊâßË°åÊìç‰Ωú„ÄÇÂΩìCPUÈúÄË¶ÅÂ∞ÜÁªìÊûúÂÜôÂõûÂà∞‰∏ªÂ≠ò‰∏≠ÂéªÊó∂ÔºåÂÆÉ‰ºöÂ∞ÜÂÜÖÈÉ®ÂØÑÂ≠òÂô®ÁöÑÂÄºÂà∑Êñ∞Âà∞ÁºìÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÂú®Êüê‰∏™Êó∂Èó¥ÁÇπÂ∞ÜÂÄºÂà∑Êñ∞Âõû‰∏ªÂ≠ò„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºö ÊÄªÁ∫øÂä†ÈîÅ ‰ΩÜÊòØÈôç‰ΩéCPUÁöÑÂêûÂêêÈáè ÁºìÂ≠ò‰∏äÁöÑ‰∏ÄËá¥ÊÄßÂçèËÆÆ ÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆ(MESI)Â§öÊ†∏CPUÁ°¨‰ª∂Êû∂ÊûÑÂéÇÂïÜÔºåËÆæËÆ°‰πãÂàùÂ∞±È¢ÑÊµãÂà∞Â§öÁ∫øÁ®ãÊìç‰ΩúÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÁöÑÈóÆÈ¢òÔºåÂõ†Ê≠§Âá∫Áé∞‰∫Ü‚Äî‚ÄîÁºìÂ≠ò‰∏ÄËá¥ÊÄßÂçèËÆÆ„ÄÇ ‰∏çÂêåÁöÑCPUÁ°¨‰ª∂Áîü‰∫ßÂéÇÂïÜÔºåÂÖ∑‰ΩìÁöÑÂÆûÁé∞‰∏ç‰∏ÄÊ†∑„ÄÇIntelÁöÑMESIÂçèËÆÆÊúÄÂá∫Âêç„ÄÇMESIÂçèËÆÆÊñáÊ°£Ôºöhttps://en.wikipedia.org/wiki/MESI_protocol Âú®MESIÂçèËÆÆ‰∏≠ÔºåÊØè‰∏™Cache lineÊúâ4‰∏™Áä∂ÊÄÅÔºåÂèØÁî®2‰∏™bitË°®Á§∫ÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØÔºö M(Modified): ËøôË°åÊï∞ÊçÆÊúâÊïàÔºåÊï∞ÊçÆË¢´‰øÆÊîπ‰∫ÜÔºåÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÔºåÊï∞ÊçÆÂè™Â≠òÂú®‰∫éÊú¨Cache‰∏≠„ÄÇ E(Exclusive): ËøôË°åÊï∞ÊçÆÊúâÊïàÔºåÊï∞ÊçÆÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÔºåÊï∞ÊçÆÂè™Â≠òÂú®‰∫éÊú¨Cache‰∏≠„ÄÇ S(Shared): ËøôË°åÊï∞ÊçÆÊúâÊïàÔºåÊï∞ÊçÆÂíåÂÜÖÂ≠ò‰∏≠ÁöÑÊï∞ÊçÆ‰∏ÄËá¥ÔºåÊï∞ÊçÆÂ≠òÂú®‰∫éÂæàÂ§öCache‰∏≠„ÄÇ I(Invalid): ËøôË°åÊï∞ÊçÆÊó†Êïà„ÄÇ EÁä∂ÊÄÅÁ§∫‰æãÂ¶Ç‰∏ãÔºöÂè™ÊúâCore 0ËÆøÈóÆÂèòÈáèxÔºåÂÆÉÁöÑCache lineÁä∂ÊÄÅ‰∏∫E(Exclusive)„ÄÇ SÁä∂ÊÄÅÁ§∫‰æãÂ¶Ç‰∏ãÔºö3‰∏™CoreÈÉΩËÆøÈóÆÂèòÈáèxÔºåÂÆÉ‰ª¨ÂØπÂ∫îÁöÑCache line‰∏∫S(Shared)Áä∂ÊÄÅ„ÄÇ MÁä∂ÊÄÅÂíåIÁä∂ÊÄÅÁ§∫‰æãÂ¶Ç‰∏ãÔºöCore 0‰øÆÊîπ‰∫ÜxÁöÑÂÄº‰πãÂêéÔºåËøô‰∏™Cache lineÂèòÊàê‰∫ÜM(Modified)Áä∂ÊÄÅÔºåÂÖ∂‰ªñCoreÂØπÂ∫îÁöÑCache lineÂèòÊàê‰∫ÜI(Invalid)Áä∂ÊÄÅ Êúâ‰∫ÜMESIÔºå‰∏∫‰ªÄ‰πàËøòÈúÄË¶ÅJMMÔºüÊó¢ÁÑ∂Êúâ‰∫ÜMESIÂçèËÆÆÔºåÊòØ‰∏çÊòØÂ∞±‰∏çÈúÄË¶ÅvolatileÁöÑÂèØËßÅÊÄßËØ≠‰πâ‰∫ÜÔºüÂΩìÁÑ∂‰∏çÊòØÔºåËøòÊúâ‰ª•‰∏ãÈóÆÈ¢òÔºö Âπ∂‰∏çÊòØÊâÄÊúâÁöÑÁ°¨‰ª∂Êû∂ÊûÑÈÉΩÊèê‰æõ‰∫ÜÁõ∏ÂêåÁöÑ‰∏ÄËá¥ÊÄß‰øùËØÅÔºå‰∏çÂêåÁöÑÁ°¨‰ª∂ÂéÇÂïÜÂÆûÁé∞‰∏çÂêåÔºåJVMÈúÄË¶ÅvolatileÁªü‰∏ÄËØ≠‰πâ„ÄÇ ÂèØËßÅÊÄßÈóÆÈ¢ò‰∏ç‰ªÖ‰ªÖÂ±ÄÈôê‰∫éCPUÁºìÂ≠òÂÜÖÔºåJVMËá™Â∑±Áª¥Êä§ÁöÑÂÜÖÂ≠òÊ®°Âûã(JMM)‰∏≠‰πüÊúâÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇ‰ΩøÁî®volatileÂÅöÊ†áËÆ∞ÔºåÂèØ‰ª•Ëß£ÂÜ≥JVMÂ±ÇÈù¢ÁöÑÂèØËßÅÊÄßÈóÆÈ¢ò„ÄÇ JavaÁ∫øÁ®ã‰∏éÁ°¨‰ª∂Â§ÑÁêÜÂô®JavaÁ∫øÁ®ãÁöÑÂÆûÁé∞ÊòØÂü∫‰∫é‰∏ÄÂØπ‰∏ÄÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØÈÄöËøáËØ≠Ë®ÄÁ∫ßÂà´Â±ÇÈù¢Á®ãÂ∫èÂéªÈó¥Êé•Ë∞ÉÁî®Á≥ªÁªüÂÜÖÊ†∏ÁöÑÁ∫øÁ®ãÊ®°ÂûãÔºåÂç≥Êàë‰ª¨Âú®‰ΩøÁî®JavaÁ∫øÁ®ãÊó∂ÔºåJavaËôöÊãüÊú∫ÂÜÖÈÉ®ÊòØËΩ¨ËÄåË∞ÉÁî®ÂΩìÂâçÊìç‰ΩúÁ≥ªÁªüÁöÑÂÜÖÊ†∏Á∫øÁ®ãÊù•ÂÆåÊàêÂΩìÂâç‰ªªÂä°„ÄÇÂ¶ÇÂõæÊâÄÁ§∫ÔºåÊØè‰∏™Á∫øÁ®ãÊúÄÁªàÈÉΩ‰ºöÊò†Â∞ÑÂà∞CPU‰∏≠ËøõË°åÂ§ÑÁêÜÔºåÂ¶ÇÊûúCPUÂ≠òÂú®Â§öÊ†∏ÔºåÈÇ£‰πà‰∏Ä‰∏™CPUÂ∞ÜÂèØ‰ª•Âπ∂Ë°åÊâßË°åÂ§ö‰∏™Á∫øÁ®ã‰ªªÂä°„ÄÇ JavaÂÜÖÂ≠òÊ®°Âûã‰∏éÁ°¨‰ª∂ÂÜÖÂ≠òÊû∂ÊûÑÁöÑÂÖ≥Á≥ªÂ§öÁ∫øÁ®ãÁöÑÊâßË°åÊúÄÁªàÈÉΩ‰ºöÊò†Â∞ÑÂà∞Á°¨‰ª∂Â§ÑÁêÜÂô®‰∏äËøõË°åÊâßË°åÔºå‰ΩÜJavaÂÜÖÂ≠òÊ®°ÂûãÂíåÁ°¨‰ª∂ÂÜÖÂ≠òÊû∂ÊûÑÂπ∂‰∏çÂÆåÂÖ®‰∏ÄËá¥„ÄÇÂØπ‰∫éÁ°¨‰ª∂ÂÜÖÂ≠òÊù•ËØ¥Âè™ÊúâÂØÑÂ≠òÂô®„ÄÅÁºìÂ≠òÂÜÖÂ≠ò„ÄÅ‰∏ªÂÜÖÂ≠òÁöÑÊ¶ÇÂøµÔºåÂπ∂Ê≤°ÊúâÂ∑•‰ΩúÂÜÖÂ≠ò(Á∫øÁ®ãÁßÅÊúâÊï∞ÊçÆÂå∫Âüü)Âíå‰∏ªÂÜÖÂ≠ò(Â†ÜÂÜÖÂ≠ò)‰πãÂàÜÔºå‰πüÂ∞±ÊòØËØ¥JavaÂÜÖÂ≠òÊ®°ÂûãÂØπÂÜÖÂ≠òÁöÑÂàíÂàÜÂØπÁ°¨‰ª∂ÂÜÖÂ≠òÂπ∂Ê≤°Êúâ‰ªª‰ΩïÂΩ±Âìç,‰∏çÁÆ°ÊòØÂ∑•‰ΩúÂÜÖÂ≠òÁöÑÊï∞ÊçÆËøòÊòØ‰∏ªÂÜÖÂ≠òÁöÑÊï∞ÊçÆÔºåÂØπ‰∫éËÆ°ÁÆóÊú∫Á°¨‰ª∂Êù•ËØ¥ÈÉΩ‰ºöÂ≠òÂÇ®Âú®ËÆ°ÁÆóÊú∫‰∏ªÂÜÖÂ≠ò‰∏≠ÔºåÂΩìÁÑ∂‰πüÊúâÂèØËÉΩÂ≠òÂÇ®Âà∞CPUÁºìÂ≠òÊàñËÄÖÂØÑÂ≠òÂô®‰∏≠ÔºåÂõ†Ê≠§ÊÄª‰Ωì‰∏äÊù•ËØ¥ÔºåJavaÂÜÖÂ≠òÊ®°ÂûãÂíåËÆ°ÁÆóÊú∫Á°¨‰ª∂ÂÜÖÂ≠òÊû∂ÊûÑÊòØ‰∏Ä‰∏™Áõ∏‰∫í‰∫§ÂèâÁöÑÂÖ≥Á≥ªÔºåÊòØ‰∏ÄÁßçÊäΩË±°Ê¶ÇÂøµÂàíÂàÜ‰∏éÁúüÂÆûÁâ©ÁêÜÁ°¨‰ª∂ÁöÑ‰∫§Âèâ„ÄÇ JavaÂÜÖÂ≠òÊ®°ÂûãÁöÑÂøÖË¶ÅÊÄßÂ¶Ç‰∏ãÂõæÔºå‰∏ªÂÜÖÂ≠ò‰∏≠Â≠òÂú®‰∏Ä‰∏™ÂÖ±‰∫´ÂèòÈáèxÔºåÁé∞Âú®ÊúâAÂíåB‰∏§Á∫øÁ®ãÂàÜÂà´ÂØπËØ•ÂèòÈáèx=1ËøõË°åÊìç‰Ωú,AÁ∫øÁ®ãÊÉ≥Ë¶Å‰øÆÊîπxÁöÑÂÄº‰∏∫2ÔºåËÄåBÁ∫øÁ®ãÂç¥ÊÉ≥Ë¶ÅËØªÂèñxÁöÑÂÄº,ÈÇ£‰πàBÁ∫øÁ®ãËØªÂèñÂà∞Âà∞ÊòØ1ËøòÊòØ2Âë¢ÔºüÁ≠îÊ°àÔºöÈÉΩÂèØËÉΩÔºåËøôÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºåËøô‰πüÂ∞±ÊòØÊâÄË∞ìÁöÑÁ∫øÁ®ãÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ‰∏∫‰∫ÜËß£ÂÜ≥Á±ª‰ºº‰∏äËø∞ÁöÑÈóÆÈ¢òÔºåJVMÂÆö‰πâ‰∫Ü‰∏ÄÁªÑËßÑÂàôÔºåÈÄöËøáËøôÁªÑËßÑÂàôÊù•ÂÜ≥ÂÆö‰∏Ä‰∏™Á∫øÁ®ãÂØπÂÖ±‰∫´ÂèòÈáèÁöÑÂÜôÂÖ•‰ΩïÊó∂ÂØπÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂèØËßÅ„ÄÇ JMMÂØπ‰∏â‰∏™ÁâπÂæÅÁöÑ‰øùËØÅÂéüÂ≠êÊÄßÊìç‰Ωú‰∏çÂèØÂàÜÂâ≤ X=10 Â¶ÇÊûúÊòØÁßÅÊúâÊï∞ÊçÆÂÖ∑ÊúâÂéüÂ≠êÊÄßÔºåÂ¶ÇÊûúÊòØÂÖ±‰∫´Êï∞ÊçÆÊ≤°ÂéüÂ≠êÊÄßÔºàÈúÄË¶ÅÂÖàÊää10ËØªÂà∞ÂÖ±‰∫´Á©∫Èó¥ÂÜçÊää10ÂÜôÂÖ•xÔºâ Y=x Ê≤°ÊúâÂéüÂ≠êÊÄß ÊääÊï∞ÊçÆXËØªÂà∞Â∑•‰ΩúÁ©∫Èó¥ÔºàÂéüÂ≠êÊÄßÔºâ ÊääXÁöÑÂÄºÂÜôÂà∞YÔºàÂéüÂ≠êÊÄßÔºâ I++ Ê≤°ÊúâÂéüÂ≠êÊÄß ËØªiÂà∞Â∑•‰ΩúÁ©∫Èó¥ +1 Âà∑Êñ∞ÁªìÊûúÂà∞ÂÜÖÂ≠ò Â§ö‰∏™ÂéüÂ≠êÊÄßÁöÑÊìç‰ΩúÂêàÂπ∂Âà∞‰∏ÄËµ∑Ê≤°ÊúâÂéüÂ≠êÊÄß,‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáSynchronizedÂíåJUC‰∏≠LockÁöÑlockÊù•‰øùËØÅÂéüÂ≠êÊÄß„ÄÇ ÂèØËßÅÊÄßÁ∫øÁ®ãÂè™ËÉΩÊìç‰ΩúËá™Â∑±Â∑•‰ΩúÁ©∫Èó¥‰∏≠ÁöÑÊï∞ÊçÆÔºåÂΩì‰∏Ä‰∏™Á∫øÁ®ã‰øÆÊîπ‰∫ÜÊüê‰∏™ÂÖ±‰∫´ÂèòÈáèÁöÑÂÄºÔºåÂÖ∂‰ªñÁ∫øÁ®ãÊòØÂê¶ËÉΩÂ§üÈ©¨‰∏äÂæóÁü•Ëøô‰∏™‰øÆÊîπÁöÑÂÄº„ÄÇ Volatile:Âú®JMMÊ®°Âûã‰∏äÂÆûÁé∞MESIÂçèËÆÆ Synchronized:Âä†ÈîÅ JUC LockÁöÑlockÊúâÂ∫èÊÄßÊúâÂ∫èÊÄßÊòØÊåáÂØπ‰∫éÂçïÁ∫øÁ®ãÁöÑÊâßË°å‰ª£Á†ÅÔºåÊàë‰ª¨ÊÄªÊòØËÆ§‰∏∫‰ª£Á†ÅÁöÑÊâßË°åÊòØÊåâÈ°∫Â∫è‰æùÊ¨°ÊâßË°åÁöÑÔºåÂØπ‰∫éÂçïÁ∫øÁ®ãËÄåË®ÄÁ°ÆÂÆûÂ¶ÇÊ≠§Ôºå‰ΩÜÂØπ‰∫éÂ§öÁ∫øÁ®ãÁéØÂ¢ÉÔºåÂàôÂèØËÉΩÂá∫Áé∞‰π±Â∫èÁé∞Ë±°ÔºåÂõ†‰∏∫Á®ãÂ∫èÁºñËØëÊàêÊú∫Âô®Á†ÅÊåá‰ª§ÂêéÂèØËÉΩ‰ºöÂá∫Áé∞Êåá‰ª§ÈáçÊéíÁé∞Ë±°ÔºåÈáçÊéíÂêéÁöÑÊåá‰ª§‰∏éÂéüÊåá‰ª§ÁöÑÈ°∫Â∫èÊú™ÂøÖ‰∏ÄËá¥„ÄÇ Volatile Synchronized Happens-beforeÂéüÂàô Á®ãÂ∫èÊ¨°Â∫èÂéüÂàôÔºåÂç≥Âú®‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÂøÖÈ°ª‰øùËØÅËØ≠‰πâ‰∏≤Ë°åÊÄßÔºå‰πüÂ∞±ÊòØËØ¥ÊåâÁÖß‰ª£Á†ÅÈ°∫Â∫èÊâßË°å„ÄÇ ÈîÅÂÆöÂéüÂàôÔºöÂêé‰∏ÄÊ¨°Âä†ÈîÅÂøÖÈ°ªÁ≠âÂâç‰∏ÄÊ¨°Ëß£ÈîÅ VolatileÂéüÂàôÔºövolatileÂèòÈáèÁöÑÂÜôÔºåÂÖàÂèëÁîü‰∫éËØªÔºåËøô‰øùËØÅ‰∫ÜvolatileÂèòÈáèÁöÑÂèØËßÅÊÄßÔºåÁÆÄÂçïÁöÑÁêÜËß£Â∞±ÊòØÔºåvolatileÂèòÈáèÂú®ÊØèÊ¨°Ë¢´Á∫øÁ®ãËÆøÈóÆÊó∂ÔºåÈÉΩÂº∫Ëø´‰ªé‰∏ªÂÜÖÂ≠ò‰∏≠ËØªËØ•ÂèòÈáèÁöÑÂÄºÔºåËÄåÂΩìËØ•ÂèòÈáèÂèëÁîüÂèòÂåñÊó∂ÔºåÂèà‰ºöÂº∫Ëø´Â∞ÜÊúÄÊñ∞ÁöÑÂÄºÂà∑Êñ∞Âà∞‰∏ªÂÜÖÂ≠òÔºå‰ªª‰ΩïÊó∂ÂàªÔºå‰∏çÂêåÁöÑÁ∫øÁ®ãÊÄªÊòØËÉΩÂ§üÁúãÂà∞ËØ•ÂèòÈáèÁöÑÊúÄÊñ∞ÂÄº„ÄÇ ‰º†ÈÄíÂéüÂàôÔºöAÂÖà‰∫éB ÔºåBÂÖà‰∫éC ÈÇ£‰πàAÂøÖÁÑ∂ÂÖà‰∫éC Á∫øÁ®ãÂêØÂä®ËßÑÂàôÔºöÂ¶ÇÊûúÁ∫øÁ®ãAÂú®ÊâßË°åÁ∫øÁ®ãBÁöÑstartÊñπÊ≥ï‰πãÂâç‰øÆÊîπ‰∫ÜÂÖ±‰∫´ÂèòÈáèÁöÑÂÄºÔºåÈÇ£‰πàÂΩìÁ∫øÁ®ãBÊâßË°åstartÊñπÊ≥ïÊó∂ÔºåÁ∫øÁ®ãAÂØπÂÖ±‰∫´ÂèòÈáèÁöÑ‰øÆÊîπÂØπÁ∫øÁ®ãBÂèØËßÅ Á∫øÁ®ãÁªàÊ≠¢ËßÑÂàôÔºöÂÅáËÆæÂú®Á∫øÁ®ãBÁªàÊ≠¢‰πãÂâçÔºå‰øÆÊîπ‰∫ÜÂÖ±‰∫´ÂèòÈáèÔºåÁ∫øÁ®ãA‰ªéÁ∫øÁ®ãBÁöÑjoinÊñπÊ≥ïÊàêÂäüËøîÂõûÂêéÔºåÁ∫øÁ®ãBÂØπÂÖ±‰∫´ÂèòÈáèÁöÑ‰øÆÊîπÂ∞ÜÂØπÁ∫øÁ®ãAÂèØËßÅ„ÄÇ Á∫øÁ®ã‰∏≠Êñ≠ËßÑÂàôÔºöÂØπÁ∫øÁ®ã interrupt()ÊñπÊ≥ïÁöÑË∞ÉÁî®ÂÖàË°åÂèëÁîü‰∫éË¢´‰∏≠Êñ≠Á∫øÁ®ãÁöÑ‰ª£Á†ÅÊ£ÄÊµãÂà∞‰∏≠Êñ≠‰∫ã‰ª∂ÁöÑÂèëÁîüÔºåÂèØ‰ª•ÈÄöËøáThread.interrupted()ÊñπÊ≥ïÊ£ÄÊµãÁ∫øÁ®ãÊòØÂê¶‰∏≠Êñ≠„ÄÇ ÂØπË±°ÁªàÁªìËßÑÂàôÔºöÂØπË±°ÁöÑÊûÑÈÄ†ÂáΩÊï∞ÊâßË°åÔºåÁªìÊùüÂÖà‰∫éfinalize()ÊñπÊ≥ï]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>Âπ∂Âèë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaËôöÊãüÊú∫]]></title>
    <url>%2FJVM%2FJVM-Fundamentals%2F</url>
    <content type="text"><![CDATA[JavaËôöÊãüÊú∫(java virtual machineÔºåJVM)Ôºå‰∏ÄÁßçËÉΩÂ§üËøêË°åjavaÂ≠óËäÇÁ†ÅÁöÑËôöÊãüÊú∫„ÄÇ‰Ωú‰∏∫‰∏ÄÁßçÁºñÁ®ãËØ≠Ë®ÄÁöÑËôöÊãüÊú∫ÔºåÂÆûÈôÖ‰∏ä‰∏çÂè™ÊòØ‰∏ìÁî®‰∫éJavaËØ≠Ë®ÄÔºåÂè™Ë¶ÅÁîüÊàêÁöÑÁºñËØëÊñá‰ª∂ÂåπÈÖçJVMÂØπÂä†ËΩΩÁºñËØëÊñá‰ª∂Ê†ºÂºèË¶ÅÊ±ÇÔºå‰ªª‰ΩïËØ≠Ë®ÄÈÉΩÂèØ‰ª•Áî±JVMÁºñËØëËøêË°å„ÄÇ ÊØîÂ¶Çkotlin„ÄÅscalaÁ≠â„ÄÇ JVMÂü∫Êú¨ÁªìÊûÑJVMÁî±‰∏â‰∏™‰∏ªË¶ÅÁöÑÂ≠êÁ≥ªÁªüÊûÑÊàê Á±ªÂä†ËΩΩÂ≠êÁ≥ªÁªü ËøêË°åÊó∂Êï∞ÊçÆÂå∫(ÂÜÖÂ≠òÁªìÊûÑ) ÊâßË°åÂºïÊìé Á±ªÂä†ËΩΩÊú∫Âà∂Á±ªÁöÑÁîüÂëΩÂë®Êúü Âä†ËΩΩÔºöÂ∞Ü.classÊñá‰ª∂‰ªéÁ£ÅÁõòËØªÂà∞ÂÜÖÂ≠ò ÈÄöËøáÁ±ªÁöÑÂÖ®ÈôêÂÆöÂêç(com.xxx.xxx)+Á±ªÂä†ËΩΩÂô®Á°ÆÂÆöÂîØ‰∏ÄÁöÑÁ±ªÔºåÊù•Ëé∑ÂèñÂÆö‰πâÊ≠§Á±ªÁöÑ‰∫åËøõÂà∂Â≠óËäÇÊµÅ Â∞ÜËøô‰∏™Á±ªÂ≠óËäÇÊµÅ‰ª£Ë°®ÁöÑÈùôÊÄÅÂ≠òÂÇ®ÁªìÊûÑËΩ¨‰∏∫ÊñπÊ≥ïÂå∫ÁöÑËøêË°åÊó∂Êï∞ÊçÆÁªìÊûÑ Âú®Â†Ü‰∏≠ÁîüÊàê‰∏Ä‰∏™‰ª£Ë°®Ê≠§Á±ªÁöÑjava.lang.ClassÂØπË±°Ôºå‰Ωú‰∏∫ËÆøÈóÆÊñπÊ≥ïÂå∫Ëøô‰∫õÊï∞ÊçÆÁªìÊûÑÁöÑÂÖ•Âè£„ÄÇ ËøûÊé• È™åËØÅÔºöÈ™åËØÅÂ≠óËäÇÁ†ÅÊñá‰ª∂ÁöÑÊ≠£Á°ÆÊÄß Êñá‰ª∂Ê†ºÂºèÈ™åËØÅÔºöÂü∫‰∫éÂ≠óËäÇÊµÅÈ™åËØÅ„ÄÇ ÂÖÉÊï∞ÊçÆÈ™åËØÅÔºöÂü∫‰∫éÊñπÊ≥ïÂå∫ÁöÑÂ≠òÂÇ®ÁªìÊûÑÈ™åËØÅ„ÄÇ Â≠óËäÇÁ†ÅÈ™åËØÅÔºöÂü∫‰∫éÊñπÊ≥ïÂå∫ÁöÑÂ≠òÂÇ®ÁªìÊûÑÈ™åËØÅ„ÄÇ Á¨¶Âè∑ÂºïÁî®È™åËØÅÔºöÂü∫‰∫éÊñπÊ≥ïÂå∫ÁöÑÂ≠òÂÇ®ÁªìÊûÑÈ™åËØÅ„ÄÇ ÂáÜÂ§áÔºöÁªôÁ±ªÁöÑÈùôÊÄÅÂèòÈáèÂàÜÈÖçÂÜÖÂ≠òÔºåÂπ∂Ëµã‰∫àÈªòËÆ§ÂÄºÔºà‰∏çÂåÖÊã¨ÂÆû‰æãÂèòÈáèÔºâ public static int value = 123; //Ê≠§Êó∂Âú®ÂáÜÂ§áÈò∂ÊÆµËøáÂêéÁöÑÂàùÂßãÂÄº‰∏∫0ËÄå‰∏çÊòØ123ÔºåÂú®ÂàùÂßãÂåñËøáÁ®ãÊâç‰ºöË¢´ËµãÂÄº‰∏∫123 public static final int value = 123;//valueÁöÑÂÄºÂú®ÂáÜÂ§áÈò∂ÊÆµËøáÂêéÂ∞±ÊòØ123„ÄÇ Ëß£ÊûêÔºöÁ±ªË£ÖËΩΩÂô®Ë£ÖÂÖ•Á±ªÊâÄÂºïÁî®ÁöÑÂÖ∂ÂÆÉÊâÄÊúâÁ±ª ÂàùÂßãÂåñÔºö‰∏∫Á±ªÁöÑÈùôÊÄÅÂèòÈáèËµã‰∫àÊ≠£Á°ÆÁöÑÂàùÂßãÂÄºÔºå‰∏äËø∞ÁöÑÂáÜÂ§áÈò∂ÊÆµ‰∏∫ÈùôÊÄÅÂèòÈáèËµã‰∫àÁöÑÊòØËôöÊãüÊú∫ÈªòËÆ§ÁöÑÂàùÂßãÂÄºÔºåÊ≠§Â§ÑËµã‰∫àÁöÑÊâçÊòØÁ®ãÂ∫èÁºñÂÜôËÄÖ‰∏∫ÂèòÈáèÂàÜÈÖçÁöÑÁúüÊ≠£ÁöÑÂàùÂßãÂÄºÔºåÊâßË°åÈùôÊÄÅ‰ª£Á†ÅÂùó ‰ΩøÁî® Âç∏ËΩΩ Á±ªÂä†ËΩΩÂô®ÁöÑÁßçÁ±ªÊÄª‰Ωì‰∏äÂàÜ‰∏∫‰∏§ÁßçÔºöÂêØÂä®Á±ªÂä†ËΩΩÂô®ÔºàC++ÂÆûÁé∞Ôºâ Âíå ÂÖ∂‰ªñÁ±ªÂä†ËΩΩÂô®ÔºàJAVAÂÆûÁé∞Ôºâ ÂêØÂä®Á±ªÂä†ËΩΩÂô®(Bootstrap ClassLoader)Ë¥üË¥£Âä†ËΩΩJREÁöÑÊ†∏ÂøÉÁ±ªÂ∫ìÔºåÂ¶ÇJREÁõÆÊ†á‰∏ãÁöÑrt.jarÔºåcharsets.jarÁ≠â Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®(Extension ClassLoader)Ë¥üË¥£Âä†ËΩΩJREÊâ©Â±ïÁõÆÂΩïext‰∏≠jarÁ±ªÂåÖ Á≥ªÁªüÁ±ªÂä†ËΩΩÂô®(Application ClassLoader)Ë¥üË¥£Âä†ËΩΩClassPathË∑ØÂæÑ‰∏ãÁöÑÁ±ªÂåÖ Áî®Êà∑Ëá™ÂÆö‰πâÂä†ËΩΩÂô®(User ClassLoader)Ë¥üË¥£Âä†ËΩΩÁî®Êà∑Ëá™ÂÆö‰πâË∑ØÂæÑ‰∏ãÁöÑÁ±ªÂåÖ Á±ªÂä†ËΩΩÊú∫Âà∂ÂÖ®ÁõòË¥üË¥£ÂßîÊâòÊú∫Âà∂ÂΩì‰∏Ä‰∏™ClassLoaderÂä†ËΩΩ‰∏Ä‰∏™Á±ªÁöÑÊó∂ÂÄôÔºåÈô§ÈùûÊòæÁ§∫ÁöÑ‰ΩøÁî®Âè¶‰∏Ä‰∏™ClassLoaderÔºåËØ•Á±ªÊâÄ‰æùËµñÂíåÂºïÁî®ÁöÑÁ±ª‰πüÁî±Ëøô‰∏™ ClassLoaderËΩΩÂÖ• Âèå‰∫≤ÂßîÊ¥æÊú∫Âà∂ÊåáÂÖàÂßîÊâòÁà∂Á±ªÂä†ËΩΩÂô®ÂØªÊâæÁõÆÊ†áÁ±ªÔºåÂú®Êâæ‰∏çÂà∞ÁöÑÊÉÖÂÜµ‰∏ãÔºåÂú®Ëá™Â∑±ÁöÑË∑ØÂæÑ‰∏≠Êü•ÊâæÂπ∂ËΩΩÂÖ•ÁõÆÊ†áÁ±ª ÂΩìÊúâÁ±ªÈúÄË¶ÅÂä†ËΩΩÔºåÁ≥ªÁªüÁ±ªÂä†ËΩΩÂô®ÂÖàÂà§Êñ≠ÊúâÊ≤°ÊúâÁà∂Á±ªÔºåÊúâ‰∫§ÁªôÊâ©Â±ïÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®Âà§Êñ≠ÊúâÊ≤°ÊúâÁà∂Á±ªÔºåÊúâ‰∫§ÁªôÂêØÂä®Á±ªÂä†ËΩΩÂô® ÂêØÂä®Á±ªÂä†ËΩΩÂô®Ê≤°ÊúâÁà∂Á±ªÔºåÂéªÂÆûÈôÖÂä†ËΩΩËØ•Á±ªÔºåËØ•Á±ª‰∏çÊòØJREÂåÖ‰∏ãÁöÑÁ±ªÔºå‰∫§ÁªôÂ≠êÁ±ªÊâ©Â±ïÁ±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩ Êâ©Â±ïÁ±ªÂä†ËΩΩÂô®ÂéªÂä†ËΩΩËØ•Á±ªÔºåÂèëÁé∞ËØ•Á±ª‰∏çÊòØext‰∏≠ÁöÑÂåÖÔºå‰∫§ÁªôÁ≥ªÁªüÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩ Á≥ªÁªüÁ±ªÂä†ËΩΩÂô®Âä†ËΩΩÔºåÂèëÁé∞ÊòØclassPathË∑ØÂæÑ‰∏ãÁöÑÂåÖÔºåËøõË°åÂä†ËΩΩ„ÄÇ Âèå‰∫≤ÂßîÊ¥æÊ®°ÂºèÁöÑ‰ºòÂäø Ê≤ôÁÆ±ÂÆâÂÖ®Êú∫Âà∂:ÊØîÂ¶ÇËá™Â∑±ÂÜôÁöÑString.classÁ±ª‰∏ç‰ºöË¢´Âä†ËΩΩÔºåËøôÊ†∑ÂèØ‰ª•Èò≤Ê≠¢Ê†∏ÂøÉÂ∫ìË¢´ÈöèÊÑèÁØ°Êîπ ÈÅøÂÖçÁ±ªÁöÑÈáçÂ§çÂä†ËΩΩ:ÂΩìÁà∂ClassLoaderÂ∑≤ÁªèÂä†ËΩΩ‰∫ÜËØ•Á±ªÁöÑÊó∂ÂÄôÔºåÂ∞±‰∏çÈúÄË¶ÅÂ≠êClassLoaderÂÜçÂä†ËΩΩ‰∏ÄÊ¨° ‰∏∫‰ªÄ‰πàË¶ÅÊâìÁ†¥Âèå‰∫≤ÂßîÊ¥æÊ®°Âºè‰æãÂ¶ÇÔºötomcatTomcatÊòØ‰∏™webÂÆπÂô®,ÂèØËÉΩÈúÄË¶ÅÈÉ®ÁΩ≤‰∏§‰∏™Â∫îÁî®Á®ãÂ∫èÔºå‰∏çÂêåÁöÑÂ∫îÁî®Á®ãÂ∫èÂèØËÉΩ‰ºö‰æùËµñÂêå‰∏Ä‰∏™Á¨¨‰∏âÊñπÁ±ªÂ∫ìÁöÑ‰∏çÂêåÁâàÊú¨Ôºå‰∏çËÉΩË¶ÅÊ±ÇÂêå‰∏Ä‰∏™Á±ªÂ∫ìÂú®Âêå‰∏Ä‰∏™ÊúçÂä°Âô®Âè™Êúâ‰∏Ä‰ªΩÔºåÂõ†Ê≠§Ë¶Å‰øùËØÅÊØè‰∏™Â∫îÁî®Á®ãÂ∫èÁöÑÁ±ªÂ∫ìÈÉΩÊòØÁã¨Á´ãÁöÑÔºå‰øùËØÅÁõ∏‰∫íÈöîÁ¶ª„ÄÇÂ¶ÇÊûú‰ΩøÁî®ÈªòËÆ§ÁöÑÁ±ªÂä†ËΩΩÂô®Êú∫Âà∂ÔºåÈÇ£‰πàÊòØÊó†Ê≥ïÂä†ËΩΩ‰∏§‰∏™Áõ∏ÂêåÁ±ªÂ∫ìÁöÑ‰∏çÂêåÁâàÊú¨ÁöÑÔºåÈªòËÆ§ÁöÑÁ±ªÂä†ËΩΩÂô®ÊòØ‰∏çÁÆ°‰Ω†ÊòØ‰ªÄ‰πàÁâàÊú¨ÁöÑÔºåÂè™Âú®‰πé‰Ω†ÁöÑÂÖ®ÈôêÂÆöÁ±ªÂêçÔºåÂπ∂‰∏îÂè™Êúâ‰∏Ä‰ªΩ„ÄÇ Â¶Ç‰ΩïÊâìÁ†¥Âèå‰∫≤ÂßîÊ¥æÊ®°Âºè ÁªßÊâøClassLoader ÈáçÂÜôfindClass()ÊñπÊ≥ï ÈáçÂÜôloadClass()ÊñπÊ≥ï ËøêË°åÊó∂Êï∞ÊçÆÂå∫(ÂÜÖÂ≠òÁªìÊûÑ) ËôöÊãüÊú∫Ê†àjavaËôöÊãüÊú∫Ê†àÊòØÁ∫øÁ®ãÁßÅÊúâÁöÑÔºåÊØè‰∏™ÊñπÊ≥ïÊâßË°åÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Ê†àÂ∏ßÔºåÊ†àÂ∏ßÂåÖÂê´Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂä®ÊÄÅËøûÊé•„ÄÅÊñπÊ≥ïÂá∫Âè£Á≠â„ÄÇ Ê†à‰∏éÊ†àÂ∏ßÊØè‰∏Ä‰∏™ÊñπÊ≥ïÁöÑÊâßË°åÂà∞ÊâßË°åÂÆåÊàêÔºåÂØπÂ∫îÁùÄ‰∏Ä‰∏™Ê†àÂ∏ßÂú®ËôöÊãüÊú∫‰∏≠‰ªéÂÖ•Ê†àÂà∞Âá∫Ê†àÁöÑËøáÁ®ã„ÄÇjavaËôöÊãüÊú∫Ê†àÊ†àÈ°∂ÁöÑÊ†àÂ∏ßÂ∞±ÊòØÂΩìÂâçÊâßË°åÊñπÊ≥ïÁöÑÊ†àÂ∏ß„ÄÇPCÂØÑÂ≠òÂô®‰ºöÊåáÂêëËØ•Âú∞ÂùÄ„ÄÇÂΩìËøô‰∏™ÊñπÊ≥ïË∞ÉÁî®ÂÖ∂‰ªñÊñπÊ≥ïÁöÑÊó∂ÂÄô‰πÖ‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊ†àÂ∏ßÔºåËøô‰∏™Êñ∞ÁöÑÊ†àÂ∏ß‰ºöË¢´ÊñπÊ≥ïJavaËôöÊãüÊú∫Ê†àÁöÑÊ†àÈ°∂ÔºåÂèò‰∏∫ÂΩìÂâçÁöÑÊ¥ªÂä®Ê†àÔºåÂú®ÂΩìÂâçÂè™ÊúâÂΩìÂâçÊ¥ªÂä®Ê†àÁöÑÊú¨Âú∞ÂèòÈáèÊâçËÉΩË¢´‰ΩøÁî®ÔºåÂΩìËøô‰∏™Ê†àÂ∏ßÊâÄÊúâÊåá‰ª§ÈÉΩÂÆåÊàêÁöÑÊó∂ÂÄôÔºåËøô‰∏™Ê†àÂ∏ßË¢´ÁßªÈô§Ôºå‰πãÂâçÁöÑÊ†àÂ∏ßÂèò‰∏∫Ê¥ªÂä®Ê†àÔºåÂâçÈù¢ÁßªÈô§Ê†àÂ∏ßÁöÑËøîÂõûÂÄºÂèò‰∏∫Ëøô‰∏™Ê†àÂ∏ßÁöÑ‰∏Ä‰∏™Êìç‰ΩúÊï∞„ÄÇ Ê†àÂ∏ßÊ†àÂ∏ßÂåÖÂê´Â±ÄÈÉ®ÂèòÈáèË°®„ÄÅÊìç‰ΩúÊï∞Ê†à„ÄÅÂä®ÊÄÅËøûÊé•„ÄÅÊñπÊ≥ïËøîÂõûÂú∞ÂùÄ Â±ÄÈÉ®ÂèòÈáèË°® Â±ÄÈÉ®ÂèòÈáèË°®ÊòØÂèòÈáèÂÄºÁöÑÂ≠òÂÇ®Á©∫Èó¥ÔºåÁî®‰∫éÂ≠òÊîæÊñπÊ≥ïÂèÇÊï∞ÂíåÊñπÊ≥ïÂÜÖÈÉ®ÂÆö‰πâÁöÑÂ±ÄÈÉ®ÂèòÈáè„ÄÇÂú®javaÁºñËØëÊàêclassÊñá‰ª∂ÁöÑÊó∂ÂÄôÔºåÂ∞±Âú®ÊñπÊ≥ïÁöÑCodeÂ±ûÊÄßÁöÑmax_localsÊï∞ÊçÆÈ°π‰∏≠Á°ÆÂÆöËØ•ÊñπÊ≥ïÈúÄË¶ÅÂàÜÈÖçÁöÑÊúÄÂ§ßÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂÆπÈáè„ÄÇ Â±ÄÈÉ®ÂèòÈáèË°®ÁöÑÂÆπÈáè‰ª•ÂèòÈáèÊßΩÔºàSlotÔºâ‰∏∫ÊúÄÂ∞èÂçï‰ΩçÔºå32‰ΩçËôöÊãüÊú∫‰∏≠‰∏Ä‰∏™SlotÂèØ‰ª•Â≠òÊîæ32‰ΩçÔºà4 Â≠óËäÇÔºâ‰ª•ÂÜÖÁöÑÊï∞ÊçÆÁ±ªÂûãÔºà boolean„ÄÅbyte„ÄÅchar„ÄÅshort„ÄÅint„ÄÅfloat„ÄÅreferenceÂíåreturnAddressÂÖ´ÁßçÔºâ ÂØπ‰∫é64‰ΩçÈïøÂ∫¶ÁöÑÊï∞ÊçÆÁ±ªÂûãÔºàlongÔºådoubleÔºâÔºåËôöÊãüÊú∫‰ºö‰ª•È´ò‰ΩçÂØπÈΩêÊñπÂºè‰∏∫ÂÖ∂ÂàÜÈÖç‰∏§‰∏™ËøûÁª≠ÁöÑSlotÁ©∫Èó¥Ôºå‰πüÂ∞±ÊòØÁõ∏ÂΩì‰∫éÊää‰∏ÄÊ¨°longÂíådoubleÊï∞ÊçÆÁ±ªÂûãËØªÂÜôÂàÜÂâ≤Êàê‰∏∫‰∏§Ê¨°32‰ΩçËØªÂÜô„ÄÇ referenceÁ±ªÂûãËôöÊãüÊú∫ËßÑËåÉÊ≤°ÊúâÊòéÁ°ÆËØ¥ÊòéÂÆÉÁöÑÈïøÂ∫¶Ôºå‰ΩÜ‰∏ÄËà¨Êù•ËØ¥ÔºåËôöÊãüÊú∫ÂÆûÁé∞Ëá≥Â∞ëÈÉΩÂ∫îÂΩìËÉΩ‰ªéÊ≠§ÂºïÁî®‰∏≠Áõ¥Êé•ÊàñËÄÖÈó¥Êé•Âú∞Êü•ÊâæÂà∞ÂØπË±°Âú®JavaÂ†Ü‰∏≠ÁöÑËµ∑ÂßãÂú∞ÂùÄÁ¥¢ÂºïÂíåÊñπÊ≥ïÂå∫‰∏≠ÁöÑÂØπË±°Á±ªÂûãÊï∞ÊçÆ„ÄÇ SlotÊòØÂèØ‰ª•ÈáçÁî®ÁöÑÔºåÂΩìSlot‰∏≠ÁöÑÂèòÈáèË∂ÖÂá∫‰∫Ü‰ΩúÁî®ÂüüÔºåÈÇ£‰πà‰∏ã‰∏ÄÊ¨°ÂàÜÈÖçSlotÁöÑÊó∂ÂÄôÔºåÂ∞Ü‰ºöË¶ÜÁõñÂéüÊù•ÁöÑÊï∞ÊçÆ„ÄÇSlotÂØπÂØπË±°ÁöÑÂºïÁî®‰ºöÂΩ±ÂìçGCÔºàË¶ÅÊòØË¢´ÂºïÁî®ÔºåÂ∞Ü‰∏ç‰ºöË¢´ÂõûÊî∂Ôºâ„ÄÇ Á≥ªÁªü‰∏ç‰ºö‰∏∫Â±ÄÈÉ®ÂèòÈáèËµã‰∫àÂàùÂßãÂÄºÔºàÂÆû‰æãÂèòÈáèÂíåÁ±ªÂèòÈáèÈÉΩ‰ºöË¢´Ëµã‰∫àÂàùÂßãÂÄºÔºâ„ÄÇ‰πüÂ∞±ÊòØËØ¥‰∏çÂ≠òÂú®Á±ªÂèòÈáèÈÇ£Ê†∑ÁöÑÂáÜÂ§áÈò∂ÊÆµ„ÄÇ Êìç‰ΩúÊï∞Ê†à Êìç‰ΩúÊï∞Ê†àÂíåÂ±ÄÈÉ®ÂèòÈáèË°®‰∏ÄÊ†∑ÔºåÂú®ÁºñËØëÊó∂ÊúüÂ∞±Â∑≤ÁªèÁ°ÆÂÆö‰∫ÜËØ•ÊñπÊ≥ïÊâÄÈúÄË¶ÅÂàÜÈÖçÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®ÁöÑÊúÄÂ§ßÂÆπÈáè„ÄÇ Êìç‰ΩúÊï∞Ê†àÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†ÂèØÁî®ÊòØ‰ªªÊÑèÁöÑJavaÊï∞ÊçÆÁ±ªÂûãÔºåÂåÖÊã¨longÂíådouble„ÄÇ32‰ΩçÊï∞ÊçÆÁ±ªÂûãÊâÄÂç†ÁöÑÊ†àÂÆπÈáè‰∏∫1Ôºå64‰ΩçÊï∞ÊçÆÁ±ªÂûãÂç†Áî®ÁöÑÊ†àÂÆπÈáè‰∏∫2„ÄÇ ÂΩì‰∏Ä‰∏™ÊñπÊ≥ïÂàöÂàöÂºÄÂßãÊâßË°åÁöÑÊó∂ÂÄôÔºåËøô‰∏™ÊñπÊ≥ïÁöÑÊìç‰ΩúÊï∞Ê†àÊòØÁ©∫ÁöÑÔºåÂú®ÊñπÊ≥ïÊâßË°åÁöÑËøáÁ®ã‰∏≠Ôºå‰ºöÊúâÂêÑÁßçÂ≠óËäÇÁ†ÅÊåá‰ª§ÂæÄÊìç‰ΩúÊï∞Ê†à‰∏≠ÂÜôÂÖ•ÂíåÊèêÂèñÂÜÖÂÆπÔºå‰πüÂ∞±ÊòØÂá∫Ê†à / ÂÖ•Ê†àÊìç‰ΩúÔºà‰æãÂ¶ÇÔºöÂú®ÂÅöÁÆóÊúØËøêÁÆóÁöÑÊó∂ÂÄôÊòØÈÄöËøáÊìç‰ΩúÊï∞Ê†àÊù•ËøõË°åÁöÑÔºåÂèàÊàñËÄÖÂú®Ë∞ÉÁî®ÂÖ∂ÂÆÉÊñπÊ≥ïÁöÑÊó∂ÂÄôÊòØÈÄöËøáÊìç‰ΩúÊï∞Ê†àÊù•ËøõË°åÂèÇÊï∞‰º†ÈÄíÁöÑÔºâ„ÄÇ Âä®ÊÄÅËøûÊé•Áõ¥Êé•ÂºïÁî®ÔºöÊúâÂÖ∑‰ΩìÂºïÁî®Âú∞ÂùÄÁöÑÊåáÈíàÔºåË¢´ÂºïÁî®ÁöÑÁ±ª„ÄÅÊñπÊ≥ïÊàñËÄÖÂèòÈáèÂ∑≤ÁªèË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠Á¨¶Âè∑ÂºïÁî®ÔºöÂç≥Áî®Áî®Â≠óÁ¨¶‰∏≤Á¨¶Âè∑ÁöÑÂΩ¢ÂºèÊù•Ë°®Á§∫ÂºïÁî®ÔºåÂÖ∂ÂÆûË¢´ÂºïÁî®ÁöÑÁ±ª„ÄÅÊñπÊ≥ïÊàñËÄÖÂèòÈáèËøòÊ≤°ÊúâË¢´Âä†ËΩΩÂà∞ÂÜÖÂ≠ò‰∏≠„ÄÇ‰∏æ‰∏™‰æãÂ≠êÔºö 123456789/*** Á¨¶Âè∑ÂºïÁî®*/String str = "abc";System.out.println("str=" + str);/*** Áõ¥Êé•ÂºïÁî®*/System.out.println("str=" + "abc"); Âä®ÊÄÅÈìæÊé•ÔºöÂú®Á®ãÂ∫èËøêË°åËøáÁ®ã‰∏≠ÔºåÁî±Á¨¶Âè∑ÂºïÁî®ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®„ÄÇÈùôÊÄÅÈìæÊé•ÔºöÂú®Á±ªÂä†ËΩΩËøáÁ®ã‰∏≠ÔºåÁî±Á¨¶Âè∑ÂºïÁî®ËΩ¨Âåñ‰∏∫Áõ¥Êé•ÂºïÁî®„ÄÇ ÊñπÊ≥ïËøîÂõûÂú∞ÂùÄÂΩì‰∏Ä‰∏™ÊñπÊ≥ïÂºÄÂßãÊâßË°åÊó∂ÔºåÂèØËÉΩÊúâ‰∏§ÁßçÊñπÂºèÈÄÄÂá∫ËØ•ÊñπÊ≥ïÔºö Ê≠£Â∏∏ÂÆåÊàêÂá∫Âè£ Ê≠£Â∏∏ÂÆåÊàêÂá∫Âè£ÊòØÊåáÊñπÊ≥ïÊ≠£Â∏∏ÂÆåÊàêÂπ∂ÈÄÄÂá∫ÔºåÊ≤°ÊúâÊäõÂá∫‰ªª‰ΩïÂºÇÂ∏∏(ÂåÖÊã¨JavaËôöÊãüÊú∫ÂºÇÂ∏∏‰ª•ÂèäÊâßË°åÊó∂ÈÄöËøáthrowËØ≠Âè•ÊòæÁ§∫ÊäõÂá∫ÁöÑÂºÇÂ∏∏)„ÄÇÂ¶ÇÊûúÂΩìÂâçÊñπÊ≥ïÊ≠£Â∏∏ÂÆåÊàêÔºåÂàôÊ†πÊçÆÂΩìÂâçÊñπÊ≥ïËøîÂõûÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§ÔºåËøôÊó∂ÊúâÂèØËÉΩ‰ºöÊúâËøîÂõûÂÄº‰º†ÈÄíÁªôÊñπÊ≥ïË∞ÉÁî®ËÄÖ(Ë∞ÉÁî®ÂÆÉÁöÑÊñπÊ≥ï)ÔºåÊàñËÄÖÊó†ËøîÂõûÂÄº„ÄÇÂÖ∑‰ΩìÊòØÂê¶ÊúâËøîÂõûÂÄº‰ª•ÂèäËøîÂõûÂÄºÁöÑÊï∞ÊçÆÁ±ªÂûãÂ∞ÜÊ†πÊçÆËØ•ÊñπÊ≥ïËøîÂõûÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§Á°ÆÂÆö„ÄÇ ÂºÇÂ∏∏ÂÆåÊàêÂá∫Âè£ ÂºÇÂ∏∏ÂÆåÊàêÂá∫Âè£ÊòØÊåáÊñπÊ≥ïÊâßË°åËøáÁ®ã‰∏≠ÈÅáÂà∞ÂºÇÂ∏∏ÔºåÂπ∂‰∏îËøô‰∏™ÂºÇÂ∏∏Âú®ÊñπÊ≥ï‰ΩìÂÜÖÈÉ®Ê≤°ÊúâÂæóÂà∞Â§ÑÁêÜÔºåÂØºËá¥ÊñπÊ≥ïÈÄÄÂá∫„ÄÇ Êó†ËÆ∫ÊñπÊ≥ïÈááÁî®‰ΩïÁßçÊñπÂºèÈÄÄÂá∫ÔºåÂú®ÊñπÊ≥ïÈÄÄÂá∫ÂêéÈÉΩÈúÄË¶ÅËøîÂõûÂà∞ÊñπÊ≥ïË¢´Ë∞ÉÁî®ÁöÑ‰ΩçÁΩÆÔºåÁ®ãÂ∫èÊâçËÉΩÁªßÁª≠ÊâßË°åÔºåÊñπÊ≥ïËøîÂõûÊó∂ÂèØËÉΩÈúÄË¶ÅÂú®ÂΩìÂâçÊ†àÂ∏ß‰∏≠‰øùÂ≠ò‰∏Ä‰∫õ‰ø°ÊÅØÔºåÁî®Êù•Â∏Æ‰ªñÊÅ¢Â§çÂÆÉÁöÑ‰∏äÂ±ÇÊñπÊ≥ïÊâßË°åÁä∂ÊÄÅ„ÄÇÊñπÊ≥ïÈÄÄÂá∫ËøáÁ®ãÂÆûÈôÖ‰∏äÂ∞±Á≠âÂêå‰∫éÊääÂΩìÂâçÊ†àÂ∏ßÂá∫Ê†àÔºåÂõ†Ê≠§ÈÄÄÂá∫ÂèØ‰ª•ÊâßË°åÁöÑÊìç‰ΩúÊúâÔºöÊÅ¢Â§ç‰∏äÂ±ÇÊñπÊ≥ïÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®ÂíåÊìç‰ΩúÊï∞Ê†àÔºåÊääËøîÂõûÂÄº(Â¶ÇÊûúÊúâÁöÑËØù)ÂéãÂ¶ÇË∞ÉÁî®ËÄÖÁöÑÊìç‰ΩúÊï∞Ê†à‰∏≠ÔºåË∞ÉÊï¥PCËÆ°Êï∞Âô®ÁöÑÂÄº‰ª•ÊåáÂêëÊñπÊ≥ïË∞ÉÁî®Êåá‰ª§ÂêéÁöÑ‰∏ã‰∏ÄÊù°Êåá‰ª§„ÄÇ‰∏ÄËà¨Êù•ËØ¥ÔºåÊñπÊ≥ïÊ≠£Â∏∏ÈÄÄÂá∫Êó∂ÔºåË∞ÉÁî®ËÄÖÁöÑPCËÆ°Êï∞ÂÄºÂèØ‰ª•‰Ωú‰∏∫ËøîÂõûÂú∞ÂùÄÔºåÊ†àÂ∏ß‰∏≠ÂèØËÉΩ‰øùÂ≠òÊ≠§ËÆ°Êï∞ÂÄº„ÄÇËÄåÊñπÊ≥ïÂºÇÂ∏∏ÈÄÄÂá∫Êó∂ÔºåËøîÂõûÂú∞ÂùÄÊòØÈÄöËøáÂºÇÂ∏∏Â§ÑÁêÜÂô®Ë°®Á°ÆÂÆöÁöÑÔºåÊ†àÂ∏ß‰∏≠‰∏ÄËà¨‰∏ç‰ºö‰øùÂ≠òÊ≠§ÈÉ®ÂàÜ‰ø°ÊÅØ„ÄÇ 123456789101112public class Demo &#123; public int math()&#123; int a = 1; int b = 2; int c = (a + b)*10; return c; &#125; public static void main(String[] args) &#123; Demo demo = new Demo(); demo.math(); &#125;&#125; ÂΩìÊâßË°åüëÜDemoÁöÑmathÊñπÊ≥ïÊó∂Ôºå‰∏ªÁ∫øÁ®ãÂÜÖÂ≠ò‰ºöÂ¶Ç‰ΩïÊìç‰ΩúÁ¨¨‰∏ÄÊ≠•ÔºåÁé∞Â∞Ü1ÊîæÂÖ•Êìç‰ΩúÊï∞Ê†àÁ¨¨‰∫åÊ≠•ÔºåÂ∞Ü1ÊîæÂÖ•Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠Á¨¨‰∏Ä‰∏™ÊßΩÈáåÁ¨¨‰∏âÊ≠•ÔºåÁ¨¨ÂõõÊ≠•Âêå‰∏äÔºåÊúÄÁªàÂ∞Ü2ÊîæÂÖ•Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠Á¨¨‰∫å‰∏™ÊßΩÈáåÁ¨¨‰∫îÊ≠•ÔºåÂ∞Ü1Â§çÂà∂‰∏Ä‰ªΩÊîæÂÖ•Êìç‰ΩúÊï∞Ê†àÁöÑÊ†àÈ°∂Á¨¨ÂÖ≠Ê≠•ÔºåÂ∞Ü2Â§çÂà∂‰∏Ä‰ªΩÊîæÂÖ•Êìç‰ΩúÊï∞Ê†àÁöÑÊ†àÈ°∂Á¨¨‰∏ÉÊ≠•ÔºåÂ∞Ü2Ôºå1ÂºπÂá∫Êìç‰ΩúÊï∞Ê†à‰∫§ÁªôcpuÂéªËøêÁÆóÂæóÂà∞3ÔºåÊîæÂà∞Êìç‰ΩúÊï∞Ê†àÁöÑÊ†àÈ°∂Á¨¨ÂÖ´Ê≠•Ôºå‰ªéÂ∏∏ÈáèÊ±†Ôºà-128ÔΩû127ÔºâÈáåÊãøÂà∞10ÔºåÊîæÂÖ•Êìç‰ΩúÊï∞Ê†àÈ°∂Á¨¨‰πùÊ≠•ÔºåÂºπÂá∫10Ôºå3‰∫§ÁªôcpuÂéªËøêÁÆóÂæóÂà∞30ÔºåÊîæÂà∞Êìç‰ΩúÊï∞Ê†àÁöÑÊ†àÈ°∂Ôºàjvm1.6ÂºÄÂßãËøõË°å‰∫ÜÊåá‰ª§‰ºòÂåñÔºåÁ¨¨8„ÄÅ9Ê≠•ÂêàÂπ∂Êàê‰∫Ü‰∏ÄÊ≠•Êìç‰ΩúÔºâÁ¨¨ÂçÅÊ≠•ÔºåÂ∞Ü30ÊîæÂà∞Â±ÄÈÉ®ÂèòÈáèË°®‰∏≠Á¨¨3‰∏™ÊßΩÈáå„ÄÇÁ¨¨ÂçÅ‰∏ÄÊ≠•ÔºåÂ∞Ü30Â§çÂà∂‰∏Ä‰ªΩÊîæÂÖ•Êìç‰ΩúÊï∞Ê†àÁ¨¨Ê†àÈ°∂„ÄÇÁ¨¨ÂçÅ‰∫åÊ≠•ÔºåÂ∞Ü30ÂºπÂá∫Êìç‰ΩúÊï∞Ê†àÔºåÈÄöËøáËøîÂõûÂú∞ÂùÄËøîÂõû„ÄÇ Á®ãÂ∫èËÆ°Êï∞Âô®Â∞±ÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊåáÂêëÊñπÊ≥ïÂå∫‰∏≠ÁöÑÊñπÊ≥ïÂ≠óËäÇÁ†Å(Áî®Êù•Â≠òÂÇ®ÊåáÂêë‰∏ã‰∏ÄË∑≥Êåá‰ª§ÁöÑÂú∞ÂùÄÔºå‰πüÂ∞±ÊòØÂΩìÂâçÁ∫øÁ®ãÂ∞ÜË¶ÅÊâßË°åÁöÑÊåá‰ª§‰ª£Á†Å)ÔºåÁî±ÊâßË°åÂºïÊìéËØªÂèñ‰∏ã‰∏ÄÊù°Êåá‰ª§ÔºåÊòØ‰∏Ä‰∏™ÈùûÂ∏∏Â∞èÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°ÔºåÁî®Êù•‰øùËØÅÁ∫øÁ®ãÈó¥ÂàáÊç¢ÂêéÊ≠£Á°ÆÊâßË°å„ÄÇ Êú¨Âú∞ÊñπÊ≥ïÊ†àÂíåÊ†à‰ΩúÁî®ÂæàÁõ∏‰ººÔºåÂå∫Âà´‰∏çËøáÊòØJavaÊ†à‰∏∫JVMÊâßË°åJavaÊñπÊ≥ïÊúçÂä°ÔºåËÄåÊú¨Âú∞ÊñπÊ≥ïÊ†à‰∏∫JVMÊâßË°ånativeÊñπÊ≥ïÊúçÂä°„ÄÇÁôªËÆ∞nativeÊñπÊ≥ïÔºåÂú®Execution EngineÊâßË°åÊó∂Âä†ËΩΩÊú¨Âú∞ÊñπÊ≥ïÂ∫ì„ÄÇ ÊñπÊ≥ïÂå∫ÔºàÊ∞∏‰πÖ‰ª£/ÊåÅ‰πÖ‰ª£ÔºåÂÖÉÁ©∫Èó¥ÔºâÁ±ªÁöÑÊâÄÊúâÂ≠óÊÆµÂíåÊñπÊ≥ïÂ≠óËäÇÁ†ÅÔºå‰ª•Âèä‰∏Ä‰∫õÁâπÊÆäÊñπÊ≥ïÂ¶ÇÊûÑÈÄ†ÂáΩÊï∞ÔºåÊé•Âè£‰ª£Á†Å‰πüÂú®ËøôÈáåÂÆö‰πâ„ÄÇÁÆÄÂçïÊù•ËØ¥ÔºåÊâÄÊúâÂÆö‰πâÁöÑÊñπÊ≥ïÁöÑ‰ø°ÊÅØÈÉΩ‰øùÂ≠òÂú®ËØ•Âå∫ÂüüÔºåÈùôÊÄÅÂèòÈáè+Â∏∏Èáè+Á±ª‰ø°ÊÅØ(ÊûÑÈÄ†ÊñπÊ≥ï/Êé•Âè£ÂÆö‰πâ)+ËøêË°åÊó∂Â∏∏ÈáèÊ±†ÈÉΩÂ≠òÂú®ÊñπÊ≥ïÂå∫‰∏≠ÔºåËôΩÁÑ∂JavaËôöÊãüÊú∫ËßÑËåÉÊääÊñπÊ≥ïÂå∫ÊèèËø∞‰∏∫Â†ÜÁöÑ‰∏Ä‰∏™ÈÄªËæëÈÉ®ÂàÜÔºå‰ΩÜÊòØÂÆÉÂç¥Êúâ‰∏Ä‰∏™Âà´ÂêçÂè´ÂÅöNon-Heap(ÈùûÂ†Ü)ÔºåÁõÆÁöÑÂ∫îËØ•ÊòØ‰∏∫‰∫ÜÂíåJavaÁöÑÂ†ÜÂå∫ÂàÜÂºÄ(jdk1.8‰ª•ÂâçhotspotËôöÊãüÊú∫Âè´Ê∞∏‰πÖ‰ª£„ÄÅÊåÅ‰πÖ‰ª£Ôºåjdk1.8Êó∂Âè´ÂÖÉÁ©∫Èó¥) Ê∞∏‰πÖ‰ª£ÂíåÂÖÉÁ©∫Èó¥Âå∫Âà´Âú®‰∫éÂÖÉÊï∞ÊçÆÂå∫‰∏çÂú®ËôöÊãüÊú∫ÂΩì‰∏≠ÔºåËÄåÊòØÁî®ÁöÑÊú¨Âú∞ÂÜÖÂ≠òÔºåÊ∞∏‰πÖ‰ª£Âú®ËôöÊãüÊú∫ÂΩì‰∏≠ÔºåÊ∞∏‰πÖ‰ª£ÈÄªËæëÁªìÊûÑ‰∏ä‰πüÂ±û‰∫éÂ†ÜÔºå‰ΩÜÊòØÁâ©ÁêÜ‰∏ä‰∏çÂ±û‰∫é„ÄÇ ‰∏∫‰ªÄ‰πàÁßªÈô§‰∫ÜÊ∞∏‰πÖ‰ª£?ÂèÇËÄÉÂÆòÊñπËß£Èáähttp://openjdk.java.net/jeps/122Â§ßÊ¶ÇÊÑèÊÄùÊòØÁßªÈô§Ê∞∏‰πÖ‰ª£ÊòØ‰∏∫ËûçÂêàHotSpot‰∏é JRockitËÄåÂÅöÂá∫ÁöÑÂä™ÂäõÔºåÂõ†‰∏∫JRockitÊ≤°ÊúâÊ∞∏‰πÖ‰ª£Ôºå‰∏çÈúÄË¶ÅÈÖçÁΩÆÊ∞∏‰πÖ‰ª£„ÄÇ Â†ÜËôöÊãüÊú∫ÂêØÂä®Êó∂Ëá™Âä®ÂàÜÈÖçÂàõÂª∫ÔºåÁî®‰∫éÂ≠òÊîæÂØπË±°ÁöÑÂÆû‰æãÔºåÂá†‰πéÊâÄÊúâÂØπË±°ÈÉΩÂú®Â†Ü‰∏äÂàÜÈÖçÂÜÖÂ≠òÔºåÂΩìÂØπË±°Êó†Ê≥ïÂú®ËØ•Á©∫Èó¥Áî≥ËØ∑Âà∞ÂÜÖÂ≠òÊòØÂ∞ÜÊäõÂá∫OutOfMemoryErrorÂºÇÂ∏∏„ÄÇÂêåÊó∂‰πüÊòØÂûÉÂúæÊî∂ÈõÜÂô®ÁÆ°ÁêÜÁöÑ‰∏ªË¶ÅÂå∫Âüü„ÄÇ Êñ∞Áîü‰ª£(Young Generation)Á±ªÂá∫Áîü„ÄÅÊàêÈïø„ÄÅÊ∂à‰∫°ÁöÑÂå∫ÂüüÔºå‰∏Ä‰∏™Á±ªÂú®ËøôÈáå‰∫ßÁîüÔºåÂ∫îÁî®ÔºåÊúÄÂêéË¢´ÂûÉÂúæÂõûÊî∂Âô®Êî∂ÈõÜÔºåÁªìÊùüÁîüÂëΩ„ÄÇÊñ∞Áîü‰ª£ÂàÜ‰∏∫‰∏§ÈÉ®ÂàÜ:‰ºäÁî∏Âå∫(Eden space)ÂíåÂπ∏Â≠òËÄÖÂå∫(Survivor space)ÔºåÊâÄÊúâÁöÑÁ±ªÈÉΩÊòØÂú®‰ºäÁî∏Âå∫Ë¢´newÂá∫Êù•ÁöÑ„ÄÇÂπ∏Â≠òÂå∫(Survivor space):ÂàÜ‰∏∫FromÂíåToÂå∫,TOÂå∫Ê∞∏Ëøú‰øùÊåÅÁ©∫„ÄÇÂΩìEdenÂå∫ÁöÑÁ©∫Èó¥Áî®ÂÆåÊòØÔºåÁ®ãÂ∫èÂèàÈúÄË¶ÅÂàõÂª∫ÂØπË±°ÔºåJVMÁöÑÂûÉÂúæÂõûÊî∂Âô®Â∞ÜEdenÂå∫ËøõË°åÂûÉÂúæÂõûÊî∂(Minor GC)ÔºåÂ∞ÜEdenÂå∫‰∏≠ÁöÑ‰∏çÂÜçË¢´ÂÖ∂ÂÆÉÂØπË±°Â∫îÁî®ÁöÑÂØπË±°ËøõË°åÈîÄÊØÅ„ÄÇÁÑ∂ÂêéÂ∞ÜEdenÂå∫‰∏≠Ââ©‰ΩôÁöÑÂØπË±°ÁßªÂà∞From SurvivorÂå∫„ÄÇËã•From SurvivorÂå∫‰πüÊª°‰∫ÜÔºåÂÜçÂØπËØ•Âå∫ËøõË°åÂûÉÂúæÂõûÊî∂ÔºåÁÑ∂ÂêéÁßªÂä®Âà∞To SurvivorÂå∫ÔºåFromÂå∫‰∏∫Á©∫ÂêéÔºåÂ∞ÜToÂíåFromÂå∫ËΩ¨Êç¢Ôºå‰øùËØÅToÂå∫‰∏∫Á©∫ÔºåÂπ∂‰∏îÂØπË±°Âπ¥ÈæÑÂä†‰∏Ä„ÄÇÂΩìÂØπË±°Âπ¥ÈæÑÈªòËÆ§Âä†Âà∞15ÔºàÂõ†‰∏∫ÂØπË±°Â§¥Âè™Êúâ4‰∏™bitsÊòØÂ≠òÂØπË±°Âπ¥ÈæÑÔºåÊúÄÂ§ß‰∏∫15ÔºâÊó∂Â∞ÜÂâ©‰∏ãÁöÑÂØπË±°ÁßªÂà∞ËÄÅÂπ¥‰ª£„ÄÇ ËÄÅÂπ¥‰ª£(Old Generation)Êñ∞Áîü‰ª£ÁªèËøáÂ§öÊ¨°GC‰ªçÁÑ∂Â≠òË¥ßÁöÑÂØπË±°ÁßªÂä®Âà∞ËÄÅÂπ¥Âå∫„ÄÇËã•ËÄÅÂπ¥‰ª£‰πüÊª°‰∫ÜÔºåËøôÊó∂ÂÄôÂ∞ÜÂèëÁîüMajor GC(‰πüÂèØ‰ª•Âè´Full GC)Ôºå ËøõË°åËÄÅÂπ¥Âå∫ÁöÑÂÜÖÂ≠òÊ∏ÖÁêÜ„ÄÇËã•ËÄÅÂπ¥Âå∫ÊâßË°å‰∫ÜFull GC‰πãÂêéÂèëÁé∞‰æùÁÑ∂Êó†Ê≥ïËøõË°åÂØπË±°ÁöÑ‰øùÂ≠òÔºåÂ∞±‰ºöÊäõÂá∫ OOM(OutOfMemoryError)ÂºÇÂ∏∏. GCÁÆóÊ≥ïÂíåÊî∂ÈõÜÂô®Âá†ÁßçÂ∏∏ËßÅGCÔºöMinorGC/YoungGC Êñ∞Áîü‰ª£OldGC CMSÁâπÊúâFullGC/MajorGC ÂõûÊî∂ÊâÄÊúâMixedGCÔºàFullGC+YoungGCÔºâ G1ÁâπÊúâ Â¶Ç‰ΩïÂà§Êñ≠ÂØπË±°ÂèØ‰ª•Ë¢´ÂõûÊî∂Â†Ü‰∏≠Âá†‰πéÊîæÁùÄÊâÄÊúâÁöÑÂØπË±°ÂÆû‰æãÔºåÂØπÂ†ÜÂûÉÂúæÂõûÊî∂ÂâçÁöÑÁ¨¨‰∏ÄÊ≠•Â∞±ÊòØË¶ÅÂà§Êñ≠Âì™‰∫õÂØπË±°Â∑≤ÁªèÊ≠ª‰∫°(Âç≥‰∏çËÉΩÂÜçË¢´‰ªª‰ΩïÈÄîÂæÑ‰ΩøÁî®ÁöÑÂØπË±°) ÂºïÁî®ËÆ°Êï∞Ê≥ïÁªôÂØπË±°Ê∑ªÂä†‰∏Ä‰∏™ÂºïÁî®ËÆ°Êï∞Âô®ÔºåÊØèÂΩìÊúâ‰∏Ä‰∏™Âú∞ÊñπÂºïÁî®ÔºåËÆ°Êï∞Âô®Â∞±Âä†1„ÄÇÂΩìÂºïÁî®Â§±ÊïàÔºåËÆ°Êï∞Âô®Â∞±Âáè1„ÄÇ‰ªª‰ΩïÊó∂ÂÄôËÆ°Êï∞Âô®‰∏∫0 ÁöÑÂØπË±°Â∞±ÊòØ‰∏çÂèØËÉΩÂÜçË¢´‰ΩøÁî®ÁöÑ„ÄÇ Ëøô‰∏™ÊñπÊ≥ïÂÆûÁé∞ÁÆÄÂçïÔºåÊïàÁéáÈ´òÔºå‰ΩÜÊòØÁõÆÂâç‰∏ªÊµÅÁöÑËôöÊãüÊú∫‰∏≠Ê≤°ÊúâÈÄâÊã©Ëøô‰∏™ÁÆóÊ≥ïÊù•ÁÆ°ÁêÜÂÜÖÂ≠òÔºåÊúÄ‰∏ªË¶ÅÁöÑÂéüÂõ†ÊòØÂÆÉÂæàÈöæËß£ÂÜ≥ÂØπË±°‰πãÂâçÁõ∏‰∫íÂæ™ÁéØÂºïÁî®ÁöÑÈóÆÈ¢ò„ÄÇÊâÄË∞ìÂØπË±°‰πãÈó¥ÁöÑÁõ∏‰∫íÂºïÁî®ÈóÆÈ¢òÔºåÈÄöËøá‰∏ãÈù¢‰ª£Á†ÅÊâÄÁ§∫:Èô§‰∫ÜÂØπË±°aÂíåbÁõ∏‰∫íÂºïÁî®ÁùÄÂØπÊñπ‰πãÂ§ñÔºåËøô‰∏§‰∏™ÂØπË±°‰πãÈó¥ÂÜçÊó†‰ªª‰ΩïÂºïÁî®„ÄÇ‰ΩÜÊòØÂÆÉ‰ª¨Âõ†‰∏∫‰∫íÁõ∏ÂºïÁî®ÂØπÊñπÔºåÂØºËá¥ÂÆÉ‰ª¨ÁöÑÂºïÁî®ËÆ°Êï∞Âô®ÈÉΩ‰∏ç‰∏∫0Ôºå‰∫éÊòØÂºïÁî®ËÆ°Êï∞Âô®Ê≥ïÊó†Ê≥ïÈÄöÁü•GCÂõûÊî∂Âô®ÂõûÊî∂ÂÆÉ‰ª¨„ÄÇ 1234567891011public class CounterGC&#123; Object instance = null; public static void main(String[] args)&#123; CounterGC a = new CounterGC(); CounterGC b = new CounterGC(); a.instance = b; b.instance = a; a = null; b = null; &#125;&#125; ÂèØËææÊÄßÂàÜÊûêÁÆóÊ≥ïËøô‰∏™ÁÆóÊ≥ïÁöÑÂü∫Êú¨ÊÄùÊÉ≥Â∞±ÊòØÈÄöËøá‰∏ÄÁ≥ªÂàóÁöÑÁß∞‰∏∫‚ÄùGC Roots‚ÄùÁöÑÂØπË±°‰Ωú‰∏∫Ëµ∑ÁÇπÔºå‰ªéËøô‰∫õËäÇÁÇπÂºÄÂßãÂêë‰∏ãÊêúÁ¥¢ÔºåËäÇÁÇπÊâÄËµ∞ËøáÁöÑË∑ØÂæÑÁß∞‰∏∫ÂºïÁî®ÈìæÔºåÂΩì‰∏Ä‰∏™ÂØπË±°Âà∞GC RootsÊ≤°Êúâ‰ªª‰ΩïÂºïÁî®ÈìæÁõ∏ËøûÁöÑËØùÔºåÂàôËØÅÊòéÊ≠§ÂØπË±°Êó∂‰∏çÂèØÁî®ÁöÑ„ÄÇ GC RootsÊ†πËäÇÁÇπ:Á±ªÂä†ËΩΩÂô®„ÄÅThread„ÄÅËôöÊãüÊú∫Ê†àÁöÑÂ±ÄÈÉ®ÂèòÈáèË°®„ÄÅstaticÊàêÂëò„ÄÅÂ∏∏ÈáèÂºïÁî®„ÄÅÊú¨Âú∞ÊñπÊ≥ïÊ†àÁöÑÂèòÈáèÁ≠âÁ≠â. Â¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™Â∏∏ÈáèÊòØÂ∫üÂºÉÂ∏∏ÈáèËøêË°åÊó∂Â∏∏ÈáèÊ±†‰∏ªË¶ÅÂõûÊî∂ÁöÑÊòØÂ∫üÂºÉÁöÑÂ∏∏Èáè„ÄÇÈÇ£‰πàÔºåÊàë‰ª¨ÊÄé‰πàÂà§Êñ≠‰∏Ä‰∏™Â∏∏ÈáèÊó∂Â∫üÂºÉÂ∏∏ÈáèÂë¢?ÂÅáÂ¶ÇÂú®Â∏∏ÈáèÊ±†‰∏≠Â≠òÂú®Â≠óÁ¨¶‰∏≤‚Äùabc‚ÄùÔºåÂ¶ÇÊûúÂΩìÂâçÊ≤°Êúâ‰ªª‰ΩïStringÂØπË±°ÂºïÁî®ËØ•Â≠óÁ¨¶‰∏≤Â∏∏ÈáèÁöÑËØùÔºåÂ∞±ËØ¥ÊòéÂ∏∏Èáè‚Äùabc‚ÄùÂ∞±ÊòØÂ∫üÂºÉÂ∏∏ÈáèÔºåÂ¶ÇÊûúËøôÊó∂ÂèëÁîüÂÜÖÂ≠òÂõûÊî∂ÁöÑËØùËÄå‰∏îÊúâÂøÖË¶ÅÁöÑËØùÔºàÂÜÖÂ≠ò‰∏çÂ§üÁî®Êó∂Êâç‰ºöÂèëÁîüÂõûÊî∂ÔºâÔºå‚Äùabc‚Äù‰ºöË¢´Á≥ªÁªüÊ∏ÖÁêÜÂá∫Â∏∏ÈáèÊ±†„ÄÇ Â¶Ç‰ΩïÂà§Êñ≠‰∏Ä‰∏™Á±ªÊòØÊó†Áî®ÁöÑÁ±ªÈúÄË¶ÅÊª°Ë∂≥‰ª•‰∏ã‰∏â‰∏™Êù°‰ª∂: ËØ•Á±ªÊâÄÊúâÁöÑÂÆû‰æãÈÉΩÂ∑≤ÁªèË¢´ÂõûÊî∂Ôºå‰πüÂ∞±ÊòØ Java Â†Ü‰∏≠‰∏çÂ≠òÂú®ËØ•Á±ªÁöÑ‰ªª‰ΩïÂÆû‰æã„ÄÇ Âä†ËΩΩËØ•Á±ªÁöÑ ClassLoader Â∑≤ÁªèË¢´ÂõûÊî∂„ÄÇ ËØ•Á±ªÂØπÂ∫îÁöÑ java.lang.Class ÂØπË±°Ê≤°ÊúâÂú®‰ªª‰ΩïÂú∞ÊñπË¢´ÂºïÁî®ÔºåÊó†Ê≥ïÂú®‰ªª‰ΩïÂú∞ÊñπÈÄöËøáÂèçÂ∞ÑËÆøÈóÆËØ•Á±ªÁöÑÊñπÊ≥ï„ÄÇËôöÊãüÊú∫ÂèØ‰ª•ÂØπÊª°Ë∂≥‰∏äËø∞3‰∏™Êù°‰ª∂ÁöÑÊó†Áî®Á±ªËøõË°åÂõûÊî∂ÔºåËøôÈáå‰ªÖ‰ªÖÊòØ‚ÄùÂèØ‰ª•‚ÄúÔºåËÄåÂπ∂‰∏çÊòØÂíåÂØπË±°‰∏ÄÊ†∑‰∏çÈÄÇÁî®‰∫ÜÂ∞±ÂøÖÁÑ∂‰ºöË¢´ÂõûÊî∂„ÄÇ ÂûÉÂúæÂõûÊî∂ÁÆóÊ≥ï Ê†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ïÂÆÉÊòØÊúÄÂü∫Á°ÄÁöÑÊî∂ÈõÜÁÆóÊ≥ïÔºåËøô‰∏™ÁÆóÊ≥ïÂàÜ‰∏∫‰∏§‰∏™Èò∂ÊÆµÔºåÊ†áËÆ∞ÂíåÊ∏ÖÈô§„ÄÇÈ¶ñÂÖàÊ†áËÆ∞Âá∫ÊâÄÊúâÈúÄË¶ÅÂõûÊî∂ÁöÑÂØπË±°ÔºåÂú®Ê†áËÆ∞ÂÆåÊàêÂêéÁªü‰∏ÄÂõûÊî∂ÊâÄÊúâË¢´Ê†áËÆ∞ÁöÑÂØπË±°„ÄÇÂÆÉÊúâ‰∏§‰∏™‰∏çË∂≥ÁöÑÂú∞Êñπ: ÊïàÁéáÈóÆÈ¢òÔºåÊ†áËÆ∞ÂíåÊ∏ÖÈô§‰∏§‰∏™ËøáÁ®ãÁöÑÊïàÁéáÈÉΩ‰∏çÈ´ò; Á©∫Èó¥ÈóÆÈ¢òÔºåÊ†áËÆ∞Ê∏ÖÈô§Âêé‰ºö‰∫ßÁîüÂ§ßÈáè‰∏çËøûÁª≠ÁöÑÁ¢éÁâá; Â§çÂà∂ÁÆóÊ≥ï‰∏∫‰∫ÜËß£ÂÜ≥ÊïàÁéáÈóÆÈ¢òÔºåÂ§çÂà∂ÁÆóÊ≥ïÂá∫Áé∞‰∫Ü„ÄÇÂÆÉÂèØ‰ª•ÊääÂÜÖÂ≠òÂàÜ‰∏∫Â§ßÂ∞èÁõ∏ÂêåÁöÑ‰∏§ÂùóÔºåÊØèÊ¨°Âè™‰ΩøÁî®ÂÖ∂‰∏≠ÁöÑ‰∏ÄÂùó„ÄÇÂΩìËøô‰∏ÄÂùóÁöÑÂÜÖÂ≠ò‰ΩøÁî®ÂÆåÂêéÔºåÂ∞±Â∞ÜËøòÂ≠òÊ¥ªÁöÑÂØπË±°Â§çÂà∂Âà∞Âè¶‰∏ÄÂùóÂå∫ÔºåÁÑ∂ÂêéÂÜçÊää‰ΩøÁî®ÁöÑÁ©∫Èó¥‰∏ÄÊ¨°Ê∏ÖÁêÜÊéâ„ÄÇËøôÊ†∑Â∞±‰ΩøÊØèÊ¨°ÁöÑÂÜÖÂ≠òÂõûÊî∂ÈÉΩÊòØÂØπÂÜÖÂ≠òÂå∫Èó¥ÁöÑ‰∏ÄÂçäËøõË°åÂõûÊî∂ Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ïÊ†πÊçÆËÄÅÂπ¥‰ª£ÁöÑÁâπÁÇπÊèêÂá∫ÁöÑ‰∏ÄÁßçÊ†áËÆ∞ÁÆóÊ≥ïÔºåÊ†áËÆ∞ËøáÁ®ãÂíå‚ÄúÊ†áËÆ∞-Ê∏ÖÈô§‚ÄùÁÆóÊ≥ï‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÂêéÁª≠Ê≠•È™§‰∏çÊòØÁõ¥Êé•ÂØπÂèØÂõûÊî∂ÂØπË±°ËøõË°åÂõûÊî∂ÔºåËÄåÊòØËÆ©ÊâÄÊúâÂ≠òÊ¥ªÁöÑÂØπË±°Âêë‰∏ÄÊÆµÁßªÂä®ÔºåÁÑ∂ÂêéÁõ¥Êé•Ê∏ÖÁêÜÊéâËæπÁïå‰ª•Â§ñÁöÑÂÜÖÂ≠ò ÂàÜ‰ª£Êî∂ÈõÜÁÆóÊ≥ïÁé∞Âú®ÁöÑÂïÜÁî®ËôöÊãüÊú∫ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®Âü∫Êú¨ÈÉΩÈááÁî®‚ÄùÂàÜ‰ª£Êî∂ÈõÜ‚ÄùÁÆóÊ≥ïÔºåËøôÁßçÁÆóÊ≥ïÂ∞±ÊòØÊ†πÊçÆÂØπË±°Â≠òÊ¥ªÂë®ÊúüÁöÑ‰∏çÂêåÂ∞ÜÂÜÖÂ≠òÂàÜ‰∏∫Âá†Âùó„ÄÇ‰∏ÄËà¨Â∞ÜjavaÂ†ÜÂàÜ‰∏∫Êñ∞Áîü‰ª£ÂíåËÄÅÂπ¥‰ª£ÔºåËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•Ê†πÊçÆÂêÑ‰∏™Âπ¥‰ª£ÁöÑÁâπÁÇπÈÄâÊã©ÂêàÈÄÇÁöÑÂûÉÂúæÊî∂ÈõÜÁÆóÊ≥ï„ÄÇÂú®Êñ∞Áîü‰ª£‰∏≠ÔºåÊØèÊ¨°Êî∂ÈõÜÈÉΩÊúâÂ§ßÈáèÂØπË±°Ê≠ªÂéªÔºåÊâÄ‰ª•ÂèØ‰ª•ÈÄâÊã©Â§çÂà∂ÁÆóÊ≥ïÔºåÂè™Ë¶Å‰ªòÂá∫Â∞ëÈáèÂØπË±°ÁöÑÂ§çÂà∂ÊàêÊú¨Â∞±ÂèØ‰ª•ÂÆåÊàêÊØèÊ¨°ÂûÉÂúæÊî∂ÈõÜ„ÄÇËÄåËÄÅÂπ¥‰ª£ÁöÑÂØπË±°Â≠òÊ¥ªÂá†ÁéáÊó∂ÊØîËæÉÈ´òÁöÑÔºåËÄå‰∏îÊ≤°ÊúâÈ¢ùÂ§ñÁöÑÁ©∫Èó¥ÂØπÂÆÉËøõË°åÂàÜÈÖçÊãÖ‰øùÔºåÂ∞±ÂøÖÈ°ªÈÄâÊã©‚ÄúÊ†áËÆ∞-Ê∏ÖÈô§‚ÄùÊàñ ËÄÖ‚ÄúÊ†áËÆ∞-Êï¥ÁêÜ‚ÄùÁÆóÊ≥ïËøõË°åÂûÉÂúæÊî∂ÈõÜ„ÄÇ ÂûÉÂúæÊî∂ÈõÜÂô® SerialÊî∂ÈõÜÂô®Serial(‰∏≤Ë°å)Êî∂ÈõÜÂô®Êî∂ÈõÜÂô®ÊòØÊúÄÂü∫Êú¨„ÄÅÂéÜÂè≤ÊúÄÊÇ†‰πÖÁöÑÂûÉÂúæÊî∂ÈõÜÂô®‰∫Ü„ÄÇÂ§ßÂÆ∂ÁúãÂêçÂ≠óÂ∞±Áü•ÈÅìËøô‰∏™Êî∂ÈõÜÂô®ÊòØ‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÊî∂ÈõÜÂô®‰∫Ü„ÄÇÂÆÉÁöÑÂçïÁ∫øÁ®ãÁöÑÊÑè‰πâ‰∏ç‰ªÖ‰ªÖÊÑèÂë≥ÁùÄÂÆÉÂè™‰ºö‰ΩøÁî®‰∏ÄÊù°ÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂéªÂÆåÊàêÂûÉÂúæÊî∂ÈõÜÂ∑•‰ΩúÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÂÆÉÂú®ËøõË°åÂûÉÂúæÊî∂ÈõÜÂ∑•‰ΩúÁöÑÊó∂ÂÄôÂøÖÈ°ªÊöÇÂÅúÂÖ∂‰ªñÊâÄÊúâÁöÑÂ∑•‰ΩúÁ∫øÁ®ã( ‚ÄúStop The World‚Äù )ÔºåÁõ¥Âà∞ÂÆÉÊî∂ÈõÜÁªìÊùü„ÄÇÊñ∞Áîü‰ª£ÈááÁî®Â§çÂà∂ÁÆóÊ≥ïÔºåËÄÅÂπ¥‰ª£ÈááÁî®Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇËôöÊãüÊú∫ÁöÑËÆæËÆ°ËÄÖ‰ª¨ÂΩìÁÑ∂Áü•ÈÅìStop The WorldÂ∏¶Êù•ÁöÑ‰∏çËâØÁî®Êà∑‰ΩìÈ™åÔºåÊâÄ‰ª•Âú®ÂêéÁª≠ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®ËÆæËÆ°‰∏≠ÂÅúÈ°øÊó∂Èó¥Âú®‰∏çÊñ≠Áº©Áü≠(‰ªçÁÑ∂ËøòÊúâÂÅúÈ°øÔºåÂØªÊâæÊúÄ‰ºòÁßÄÁöÑÂûÉÂúæÊî∂ÈõÜÂô®ÁöÑËøáÁ®ã‰ªçÁÑ∂Âú®ÁªßÁª≠)„ÄÇ‰ΩÜÊòØSerialÊî∂ÈõÜÂô®ÊúâÊ≤°Êúâ‰ºò‰∫éÂÖ∂‰ªñÂûÉÂúæÊî∂ÈõÜÂô®ÁöÑÂú∞ÊñπÂë¢?ÂΩìÁÑ∂ÊúâÔºåÂÆÉÁÆÄÂçïËÄåÈ´òÊïà(‰∏éÂÖ∂‰ªñÊî∂ÈõÜÂô®ÁöÑÂçïÁ∫øÁ®ãÁõ∏ÊØî)„ÄÇ SerialÊî∂ÈõÜÂô®Áî±‰∫éÊ≤°ÊúâÁ∫øÁ®ã‰∫§‰∫íÁöÑÂºÄÈîÄÔºåËá™ÁÑ∂ÂèØ‰ª•Ëé∑ÂæóÂæàÈ´òÁöÑÂçïÁ∫øÁ®ãÊî∂ÈõÜÊïàÁéá„ÄÇSerialÊî∂ÈõÜÂô®ÂØπ‰∫éËøêË°åÂú®ClientÊ®°Âºè‰∏ãÁöÑËôöÊãüÊú∫Êù•ËØ¥ÊòØ‰∏™‰∏çÈîôÁöÑÈÄâÊã©„ÄÇ ParNewÊî∂ÈõÜÂô®ParNewÊî∂ÈõÜÂô®ÂÖ∂ÂÆûÂ∞±ÊòØSerialÊî∂ÈõÜÂô®ÁöÑÂ§öÁ∫øÁ®ãÁâàÊú¨ÔºåÈô§‰∫Ü‰ΩøÁî®Â§öÁ∫øÁ®ãËøõË°åÂûÉÂúæÊî∂ÈõÜÂ§ñÔºåÂÖ∂‰ΩôË°å‰∏∫(ÊéßÂà∂ÂèÇÊï∞„ÄÅÊî∂ÈõÜÁÆóÊ≥ï„ÄÅÂõûÊî∂Á≠ñÁï•Á≠âÁ≠â)ÂíåSerialÊî∂ÈõÜÂô®ÂÆåÂÖ®‰∏ÄÊ†∑„ÄÇÊñ∞Áîü‰ª£ÈááÁî®Â§çÂà∂ÁÆóÊ≥ïÔºåËÄÅÂπ¥‰ª£ÈááÁî®Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇÂÆÉÊòØËÆ∏Â§öËøêË°åÂú®ServerÊ®°Âºè‰∏ãÁöÑËôöÊãüÊú∫ÁöÑÈ¶ñË¶ÅÈÄâÊã©ÔºåÈô§‰∫ÜSerialÊî∂ÈõÜÂô®Â§ñÔºåÂè™ÊúâÂÆÉËÉΩ‰∏éCMSÊî∂ÈõÜÂô®(ÁúüÊ≠£ÊÑè‰πâ‰∏äÁöÑÂπ∂ÂèëÊî∂ÈõÜÂô®ÔºåÂêéÈù¢‰ºö‰ªãÁªçÂà∞)ÈÖçÂêàÂ∑•‰Ωú„ÄÇ Parallel ScavengeÊî∂ÈõÜÂô®(JDK1.8)Parallel Scavenge Êî∂ÈõÜÂô®Á±ª‰ºº‰∫éParNewÊî∂ÈõÜÂô®„ÄÇParallel ScavengeÊî∂ÈõÜÂô®ÂÖ≥Ê≥®ÁÇπÊòØÂêûÂêêÈáè(È´òÊïàÁéáÁöÑÂà©Áî®CPU)„ÄÇÊâÄË∞ìÂêûÂêêÈáèÂ∞±ÊòØCPU‰∏≠Áî®‰∫éËøêË°åÁî®Êà∑‰ª£Á†ÅÁöÑÊó∂Èó¥‰∏éCPUÊÄªÊ∂àËÄóÊó∂Èó¥ÁöÑÊØîÂÄº„ÄÇCMSÁ≠âÂûÉÂúæÊî∂ÈõÜÂô®ÁöÑÂÖ≥Ê≥®ÁÇπÊõ¥Â§öÁöÑÊòØÁî®Êà∑Á∫øÁ®ãÁöÑÂÅúÈ°øÊó∂Èó¥(ÊèêÈ´òÁî®Êà∑‰ΩìÈ™å)„ÄÇ Parallel ScavengeÊî∂ÈõÜÂô®Êèê‰æõ‰∫ÜÂæàÂ§öÂèÇÊï∞‰æõÁî®Êà∑ÊâæÂà∞ÊúÄÂêàÈÄÇÁöÑÂÅúÈ°øÊó∂Èó¥ÊàñÊúÄÂ§ßÂêûÂêêÈáèÔºåÂ¶ÇÊûúÂØπ‰∫éÊî∂ÈõÜÂô®Ëøê‰Ωú‰∏çÂ§™‰∫ÜËß£ÁöÑËØùÔºåÊâãÂ∑•‰ºòÂåñÂ≠òÂú®ÁöÑËØùÂèØ‰ª•ÈÄâÊã©ÊääÂÜÖÂ≠òÁÆ°ÁêÜ‰ºòÂåñ‰∫§ÁªôËôöÊãüÊú∫ÂéªÂÆåÊàê‰πüÊòØ‰∏Ä‰∏™‰∏çÈîôÁöÑÈÄâÊã©„ÄÇÊñ∞Áîü‰ª£ÈááÁî®Â§çÂà∂ÁÆóÊ≥ïÔºåËÄÅÂπ¥‰ª£ÈááÁî®Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇ Serial OldÊî∂ÈõÜÂô®SerialÊî∂ÈõÜÂô®ÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨ÔºåÂÆÉÂêåÊ†∑ÊòØ‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÊî∂ÈõÜÂô®ÔºåÈááÁî®Ê†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇÂÆÉ‰∏ªË¶ÅÊúâ‰∏§Â§ßÁî®ÈÄî:‰∏ÄÁßçÁî®ÈÄîÊòØÂú®JDK1.5‰ª•Âèä‰ª•ÂâçÁöÑÁâàÊú¨ ‰∏≠‰∏éParallel ScavengeÊî∂ÈõÜÂô®Êê≠ÈÖç‰ΩøÁî®ÔºåÂè¶‰∏ÄÁßçÁî®ÈÄîÊòØ‰Ωú‰∏∫CMSÊî∂ÈõÜÂô®ÁöÑÂêéÂ§áÊñπÊ°à„ÄÇ Parallel OldÊî∂ÈõÜÂô®Parallel ScavengeÊî∂ÈõÜÂô®ÁöÑËÄÅÂπ¥‰ª£ÁâàÊú¨„ÄÇ‰ΩøÁî®Â§öÁ∫øÁ®ãÂíåÊ†áËÆ∞-Êï¥ÁêÜÁÆóÊ≥ï„ÄÇÂú®Ê≥®ÈáçÂêûÂêêÈáè‰ª•ÂèäCPUËµÑÊ∫êÁöÑÂú∫ÂêàÔºåÈÉΩÂèØ‰ª•‰ºòÂÖàËÄÉËôë Parallel ScavengeÊî∂ÈõÜÂô®ÂíåParallel OldÊî∂ÈõÜÂô®„ÄÇ CMSÊî∂ÈõÜÂô®Âπ∂Ë°åÂíåÂπ∂ÂèëÊ¶ÇÂøµË°•ÂÖÖ: Âπ∂Ë°å(Parallel) :ÊåáÂ§öÊù°ÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂπ∂Ë°åÂ∑•‰ΩúÔºå‰ΩÜÊ≠§Êó∂Áî®Êà∑Á∫øÁ®ã‰ªçÁÑ∂Â§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅ„ÄÇ Âπ∂Âèë(Concurrent):ÊåáÁî®Êà∑Á∫øÁ®ã‰∏éÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ãÂêåÊó∂ÊâßË°å(‰ΩÜ‰∏ç‰∏ÄÂÆöÊòØÂπ∂Ë°åÔºåÂèØËÉΩ‰ºö‰∫§ÊõøÊâßË°å)ÔºåÁî®Êà∑Á®ãÂ∫è Âú®ÁªßÁª≠ËøêË°åÔºåËÄåÂûÉÂúæÊî∂ÈõÜÂô®ËøêË°åÂú®Âè¶‰∏Ä‰∏™CPU‰∏ä„ÄÇ CMS(Concurrent Mark Sweep)Êî∂ÈõÜÂô®ÊòØ‰∏ÄÁßç‰ª•Ëé∑ÂèñÊúÄÁü≠ÂõûÊî∂ÂÅúÈ°øÊó∂Èó¥‰∏∫ÁõÆÊ†áÁöÑÊî∂ÈõÜÂô®„ÄÇÂÆÉËÄåÈùûÂ∏∏Á¨¶ÂêàÂú®Ê≥®ÈáçÁî®Êà∑‰ΩìÈ™åÁöÑÂ∫îÁî®‰∏ä‰ΩøÁî®„ÄÇCMS(Concurrent Mark Sweep)Êî∂ÈõÜÂô®ÊòØHotSpotËôöÊãüÊú∫Á¨¨‰∏ÄÊ¨æÁúüÊ≠£ÊÑè‰πâ‰∏äÁöÑÂπ∂ÂèëÊî∂ÈõÜÂô®ÔºåÂÆÉÁ¨¨‰∏ÄÊ¨°ÂÆûÁé∞‰∫ÜËÆ©ÂûÉÂúæÊî∂ÈõÜÁ∫øÁ®ã‰∏éÁî®Êà∑Á∫øÁ®ã(Âü∫Êú¨‰∏ä)ÂêåÊó∂Â∑•‰Ωú„ÄÇ ‰ªéÂêçÂ≠ó‰∏≠ÁöÑMark SweepËøô‰∏§‰∏™ËØçÂèØ‰ª•ÁúãÂá∫ÔºåCMSÊî∂ÈõÜÂô®ÊòØ‰∏ÄÁßçÊ†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ïÂÆûÁé∞ÁöÑÔºåÂÆÉÁöÑËøê‰ΩúËøáÁ®ãÁõ∏ÊØî‰∫éÂâçÈù¢Âá†ÁßçÂûÉÂúæÊî∂ÈõÜÂô®Êù•ËØ¥Êõ¥Âä†Â§çÊùÇ‰∏Ä‰∫õ„ÄÇÊï¥‰∏™ËøáÁ®ãÂàÜ‰∏∫Âõõ‰∏™Ê≠•È™§: ÂàùÂßãÊ†áËÆ∞(CMS initial mark): ÊöÇÂÅúÊâÄÊúâÁöÑÂÖ∂‰ªñÁ∫øÁ®ãÔºåÂπ∂ËÆ∞ÂΩï‰∏ãÁõ¥Êé•‰∏érootÁõ∏ËøûÁöÑÂØπË±°ÔºåÈÄüÂ∫¶ÂæàÂø´ Âπ∂ÂèëÊ†áËÆ∞(CMS concurrent mark): ÂêåÊó∂ÂºÄÂêØGCÂíåÁî®Êà∑Á∫øÁ®ãÔºåÁî®‰∏Ä‰∏™Èó≠ÂåÖÁªìÊûÑÂéªËÆ∞ÂΩïÂèØËææÂØπË±°„ÄÇ‰ΩÜÂú®Ëøô‰∏™Èò∂ÊÆµÁªìÊùüÔºåËøô‰∏™Èó≠ÂåÖÁªìÊûÑÂπ∂‰∏çËÉΩ‰øùËØÅÂåÖÂê´ÂΩìÂâçÊâÄÊúâÁöÑÂèØËææÂØπË±°„ÄÇÂõ†‰∏∫Áî®Êà∑Á∫øÁ®ãÂèØËÉΩ‰ºö‰∏çÊñ≠ÁöÑÊõ¥Êñ∞ÂºïÁî®ÂüüÔºåÊâÄ‰ª•GC Á∫øÁ®ãÊó†Ê≥ï‰øùËØÅÂèØËææÊÄßÂàÜÊûêÁöÑÂÆûÊó∂ÊÄß„ÄÇÊâÄ‰ª•Ëøô‰∏™ÁÆóÊ≥ïÈáå‰ºöË∑üË∏™ËÆ∞ÂΩïËøô‰∫õÂèëÁîüÂºïÁî®Êõ¥Êñ∞ÁöÑÂú∞Êñπ„ÄÇ ÈáçÊñ∞Ê†áËÆ∞(CMS remark): ÈáçÊñ∞Ê†áËÆ∞Èò∂ÊÆµÂ∞±ÊòØ‰∏∫‰∫Ü‰øÆÊ≠£Âπ∂ÂèëÊ†áËÆ∞ÊúüÈó¥Âõ†‰∏∫Áî®Êà∑Á®ãÂ∫èÁªßÁª≠ËøêË°åËÄåÂØºËá¥Ê†áËÆ∞‰∫ßÁîüÂèòÂä®ÁöÑÈÇ£‰∏ÄÈÉ®ÂàÜÂØπË±°ÁöÑÊ†áËÆ∞ËÆ∞ÂΩïÔºåËøô‰∏™Èò∂ÊÆµÁöÑÂÅúÈ°øÊó∂Èó¥‰∏ÄËà¨‰ºöÊØîÂàùÂßãÊ†áËÆ∞Èò∂ÊÆµÁöÑÊó∂Èó¥Á®çÈïøÔºåËøúËøúÊØîÂπ∂ÂèëÊ†áËÆ∞Èò∂ ÊÆµÊó∂Èó¥Áü≠ Âπ∂ÂèëÊ∏ÖÈô§(CMS concurrent sweep): ÂºÄÂêØÁî®Êà∑Á∫øÁ®ãÔºåÂêåÊó∂GCÁ∫øÁ®ãÂºÄÂßãÂØπ‰∏∫Ê†áËÆ∞ÁöÑÂå∫ÂüüÂÅöÊ∏ÖÊâ´„ÄÇCMS‰∏ªË¶Å‰ºòÁÇπ:Âπ∂ÂèëÊî∂ÈõÜ„ÄÅ‰ΩéÂÅúÈ°ø„ÄÇ‰ΩÜÊòØÂÆÉÊúâ‰∏ãÈù¢‰∏â‰∏™ÊòéÊòæÁöÑÁº∫ÁÇπ: ÂØπCPUËµÑÊ∫êÊïèÊÑü; Êó†Ê≥ïÂ§ÑÁêÜÊµÆÂä®ÂûÉÂúæ; ÂÆÉ‰ΩøÁî®ÁöÑÂõûÊî∂ÁÆóÊ≥ï-Ê†áËÆ∞-Ê∏ÖÈô§ÁÆóÊ≥ï‰ºöÂØºËá¥Êî∂ÈõÜÁªìÊùüÊó∂‰ºöÊúâÂ§ßÈáèÁ©∫Èó¥Á¢éÁâá‰∫ßÁîü„ÄÇ G1Êî∂ÈõÜÂô®G1 (Garbage-First)ÊòØ‰∏ÄÊ¨æÈù¢ÂêëÊúçÂä°Âô®ÁöÑÂûÉÂúæÊî∂ÈõÜÂô®,‰∏ªË¶ÅÈíàÂØπÈÖçÂ§áÂ§öÈ¢óÂ§ÑÁêÜÂô®ÂèäÂ§ßÂÆπÈáèÂÜÖÂ≠òÁöÑÊú∫Âô®. ‰ª•ÊûÅÈ´òÊ¶ÇÁéáÊª°Ë∂≥ GCÂÅúÈ°øÊó∂Èó¥Ë¶ÅÊ±ÇÁöÑÂêåÊó∂,ËøòÂÖ∑Â§áÈ´òÂêûÂêêÈáèÊÄßËÉΩÁâπÂæÅ.Ë¢´ËßÜ‰∏∫JDK1.7‰∏≠HotSpotËôöÊãüÊú∫ÁöÑ‰∏Ä‰∏™ÈáçË¶ÅËøõÂåñÁâπÂæÅ„ÄÇÂÆÉÂÖ∑Â§á‰∏Ä‰∏ãÁâπÁÇπ: Âπ∂Ë°å‰∏éÂπ∂Âèë:G1ËÉΩÂÖÖÂàÜÂà©Áî®CPU„ÄÅÂ§öÊ†∏ÁéØÂ¢É‰∏ãÁöÑÁ°¨‰ª∂‰ºòÂäøÔºå‰ΩøÁî®Â§ö‰∏™CPU(CPUÊàñËÄÖCPUÊ†∏ÂøÉ)Êù•Áº©Áü≠Stop- The-WorldÂÅúÈ°øÊó∂Èó¥„ÄÇÈÉ®ÂàÜÂÖ∂‰ªñÊî∂ÈõÜÂô®ÂéüÊú¨ÈúÄË¶ÅÂÅúÈ°øJavaÁ∫øÁ®ãÊâßË°åÁöÑGCÂä®‰ΩúÔºåG1Êî∂ÈõÜÂô®‰ªçÁÑ∂ÂèØ‰ª•ÈÄöËøáÂπ∂ÂèëÁöÑÊñπÂºèËÆ©javaÁ®ãÂ∫èÁªßÁª≠ÊâßË°å ÂàÜ‰ª£Êî∂ÈõÜ:ËôΩÁÑ∂G1ÂèØ‰ª•‰∏çÈúÄË¶ÅÂÖ∂‰ªñÊî∂ÈõÜÂô®ÈÖçÂêàÂ∞±ËÉΩÁã¨Á´ãÁÆ°ÁêÜÊï¥‰∏™GCÂ†ÜÔºå‰ΩÜÊòØËøòÊòØ‰øùÁïô‰∫ÜÂàÜ‰ª£ÁöÑÊ¶ÇÂøµ„ÄÇ Á©∫Èó¥Êï¥ Âêà:‰∏éCMSÁöÑ‚ÄúÊ†áËÆ∞‚ÄìÊ∏ÖÁêÜ‚ÄùÁÆóÊ≥ï‰∏çÂêåÔºåG1‰ªéÊï¥‰ΩìÊù•ÁúãÊòØÂü∫‰∫éÊ†áËÆ∞Êï¥ÁêÜÁÆóÊ≥ïÂÆûÁé∞ÁöÑÊî∂ÈõÜÂô®;‰ªéÂ±ÄÈÉ®‰∏äÊù•ÁúãÊòØÂü∫‰∫éÊ†áËÆ∞Â§çÂà∂ÁÆóÊ≥ïÂÆûÁé∞ÁöÑ ÂèØÈ¢ÑÊµãÁöÑÂÅúÈ°ø:ËøôÊòØG1Áõ∏ÂØπ‰∫éCMSÁöÑÂè¶‰∏Ä‰∏™Â§ß‰ºòÂäøÔºåÈôç‰ΩéÂÅúÈ°øÊó∂Èó¥ÊòØG1 Âíå CMS ÂÖ±ÂêåÁöÑÂÖ≥Ê≥®ÁÇπÔºå‰ΩÜG1Èô§‰∫ÜËøΩÊ±Ç‰ΩéÂÅúÈ°øÂ§ñÔºåËøòËÉΩÂª∫Á´ãÂèØÈ¢ÑÊµãÁöÑÂÅúÈ°øÊó∂Èó¥Ê®°ÂûãÔºåËÉΩËÆ©‰ΩøÁî®ËÄÖÊòéÁ°ÆÊåáÂÆöÂú®‰∏Ä‰∏™ÈïøÂ∫¶‰∏∫MÊØ´ÁßíÁöÑÊó∂Èó¥ÁâáÊÆµÂÜÖ G1Êî∂ÈõÜÂô®ÁöÑËøê‰ΩúÂ§ßËá¥ÂàÜ‰∏∫‰ª•‰∏ãÂá†‰∏™Ê≠•È™§: ÂàùÂßãÊ†áËÆ∞ Âπ∂ÂèëÊ†áËÆ∞ ÊúÄÁªàÊ†áËÆ∞ Á≠õÈÄâÂõûÊî∂ G1Êî∂ÈõÜÂô®Âú®ÂêéÂè∞Áª¥Êä§‰∫Ü‰∏Ä‰∏™‰ºòÂÖàÂàóË°®ÔºåÊØèÊ¨°Ê†πÊçÆÂÖÅËÆ∏ÁöÑÊî∂ÈõÜÊó∂Èó¥Ôºå‰ºòÂÖàÈÄâÊã©ÂõûÊî∂‰ª∑ÂÄºÊúÄÂ§ßÁöÑRegion(Ëøô‰πüÂ∞±ÊòØÂÆÉÁöÑÂêç Â≠óGarbage-FirstÁöÑÁî±Êù•)„ÄÇËøôÁßç‰ΩøÁî®RegionÂàíÂàÜÂÜÖÂ≠òÁ©∫Èó¥‰ª•ÂèäÊúâ‰ºòÂÖàÁ∫ßÁöÑÂå∫ÂüüÂõûÊî∂ÊñπÂºèÔºå‰øùËØÅ‰∫ÜGFÊî∂ÈõÜÂô®Âú®ÊúâÈôêÊó∂Èó¥ÂÜÖÂèØ‰ª•Â∞ΩÂèØËÉΩÈ´òÁöÑÊî∂ÈõÜÊïàÁéá(ÊääÂÜÖÂ≠òÂåñÊï¥‰∏∫Èõ∂)„ÄÇ ÊÄé‰πàÈÄâÊã©ÂûÉÂúæÊî∂ÈõÜÂô®?ÔºàÂ∞ΩÈáèÁî±JVMËá™Â∑±ÈÄâÊã©Ôºâ ‰ºòÂÖàË∞ÉÊï¥Â†ÜÁöÑÂ§ßÂ∞èËÆ©ÊúçÂä°Âô®Ëá™Â∑±Êù•ÈÄâÊã© Â¶ÇÊûúÂÜÖÂ≠òÂ∞è‰∫é100mÔºå‰ΩøÁî®‰∏≤Ë°åÊî∂ÈõÜÂô® Â¶ÇÊûúÊòØÂçïÊ†∏ÔºåÂπ∂‰∏îÊ≤°ÊúâÂÅúÈ°øÊó∂Èó¥ÁöÑË¶ÅÊ±ÇÔºå‰∏≤Ë°åÊàñJVMËá™Â∑±ÈÄâÊã© Â¶ÇÊûúÂÖÅËÆ∏ÂÅúÈ°øÊó∂Èó¥Ë∂ÖËøá1ÁßíÔºåÈÄâÊã©Âπ∂Ë°åÊàñËÄÖJVMËá™Â∑±ÈÄâ Â¶ÇÊûúÂìçÂ∫îÊó∂Èó¥ÊúÄÈáçË¶ÅÔºåÂπ∂‰∏î‰∏çËÉΩË∂ÖËøá1ÁßíÔºå‰ΩøÁî®Âπ∂ÂèëÊî∂ÈõÜÂô®ÂÆòÊñπÊé®ËçêZGC(javaÊúÄÊñ∞ÁâàÊú¨ÂûÉÂúæÊî∂Âô®Âô®ÔºåÂèØÈ¢ÑÊµãÁöÑÂÅúÈ°øÊúÄ‰Ωé2ms)ÔºåÊÄßËÉΩÈ´ò„ÄÇ JDKÊÄßËÉΩË∞É‰ºòÁõëÊéßÂ∑•ÂÖ∑ËôöÊãüÊú∫ÂèÇÊï∞ÂàÜÊûêÁΩëÁ´ôÔºöhttps://www.perfma.com/product/opts jpsÊòæÁ§∫ÂΩìÂâçÁ≥ªÁªüÁöÑjavaËøõÁ®ãÊÉÖÂÜµ 123456gdeMacBook-Pro:~ g$ jps94673 AppServiceApplication5499555011 RemoteMavenServer3694696 AppServiceApplication96956 Jps (Á©∫ÁôΩÁöÑ54995ÊòØidea) JinfoÊü•ÁúãÊ≠£Âú®ËøêË°åÁöÑJavaÁ®ãÂ∫èÁöÑÊâ©Â±ïÂèÇÊï∞ Êü•ÁúãJVMÁöÑÂèÇÊï∞123gdeMacBook-Pro:~ g$ jinfo -flags 94673VM Flags:-XX:-BytecodeVerificationLocal -XX:-BytecodeVerificationRemote -XX:CICompilerCount=4 -XX:ConcGCThreads=3 -XX:G1ConcRefinementThreads=10 -XX:G1HeapRegionSize=1048576 -XX:GCDrainStackTargetSize=64 -XX:InitialHeapSize=268435456 -XX:+ManagementServer -XX:MarkStackSize=4194304 -XX:MaxHeapSize=4294967296 -XX:MaxNewSize=2576351232 -XX:MinHeapDeltaBytes=1048576 -XX:NonNMethodCodeHeapSize=7549744 -XX:NonProfiledCodeHeapSize=244108496 -XX:ProfiledCodeHeapSize=0 -XX:ReservedCodeCacheSize=251658240 -XX:+SegmentedCodeCache -XX:TieredStopAtLevel=1 -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC Êü•ÁúãjavaÁ≥ªÁªüÂ±ûÊÄß1jinfo -sysprops 94673 JstatjstatÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÂ†ÜÂÜÖÂ≠òÂêÑÈÉ®ÂàÜÁöÑ‰ΩøÁî®ÈáèÔºå‰ª•ÂèäÂä†ËΩΩÁ±ªÁöÑÊï∞Èáè„ÄÇÂëΩ‰ª§Ê†ºÂºè:jstat [-ÂëΩ‰ª§ÈÄâÈ°π] [vmid] [Èó¥ÈöîÊó∂Èó¥/ÊØ´Áßí] [Êü•ËØ¢Ê¨°Êï∞] 123gdeMacBook-Pro:~ g$ jstat -gc 94673 S0C S1C S0U S1U EC EU OC OU MC MU CCSC CCSU YGC YGCT FGC FGCT CGC CGCT GCT 0.0 2048.0 0.0 2048.0 96256.0 68608.0 163840.0 132934.6 131280.0 127368.5 14720.0 13850.3 185 1.219 0 0.000 112 0.661 1.880 S0CÔºöÁ¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞è S1CÔºöÁ¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑÂ§ßÂ∞è S0UÔºöÁ¨¨‰∏Ä‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞è S1UÔºöÁ¨¨‰∫å‰∏™Âπ∏Â≠òÂå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞è ECÔºö‰ºäÁî∏Âõ≠Âå∫ÁöÑÂ§ßÂ∞è EUÔºö‰ºäÁî∏Âõ≠Âå∫ÁöÑ‰ΩøÁî®Â§ßÂ∞è OCÔºöËÄÅÂπ¥‰ª£Â§ßÂ∞è OUÔºöËÄÅÂπ¥‰ª£‰ΩøÁî®Â§ßÂ∞è MCÔºöÊñπÊ≥ïÂå∫Â§ßÂ∞è MUÔºöÊñπÊ≥ïÂå∫‰ΩøÁî®Â§ßÂ∞è CCSC:ÂéãÁº©Á±ªÁ©∫Èó¥Â§ßÂ∞è CCSU:ÂéãÁº©Á±ªÁ©∫Èó¥‰ΩøÁî®Â§ßÂ∞è YGCÔºöÂπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞ YGCTÔºöÂπ¥ËΩª‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥ FGCÔºöËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê¨°Êï∞ FGCTÔºöËÄÅÂπ¥‰ª£ÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊó∂Èó¥ GCTÔºöÂûÉÂúæÂõûÊî∂Ê∂àËÄóÊÄªÊó∂Èó¥ JmapÂèØ‰ª•Áî®Êù•Êü•ÁúãÂÜÖÂ≠ò‰ø°ÊÅØ Â†ÜÁöÑÂØπË±°ÁªüËÆ°1gdeMacBook-Pro:~ g$ jmap -histo 94673 &gt; xxx.txt ÈÉ®ÂàÜÂ¶Ç‰∏ã 1234567891011121314151617181920212223242526272829303132 num #instances #bytes class name (module)------------------------------------------------------- 1: 380588 39857240 [B (java.base@11.0.4) 2: 71568 8387344 [Ljava.lang.Object; (java.base@11.0.4) 3: 301995 7247880 java.lang.String (java.base@11.0.4) 4: 25762 5316280 [I (java.base@11.0.4) 5: 47736 4200768 java.lang.reflect.Method (java.base@11.0.4) 6: 126275 4040800 java.util.concurrent.ConcurrentHashMap$Node (java.base@11.0.4) 7: 69142 3871952 java.util.LinkedHashMap (java.base@11.0.4) 8: 2483 3656120 [C (java.base@11.0.4) 9: 46566 3352752 io.netty.channel.DefaultChannelHandlerContext 10: 104582 3346624 java.util.HashMap$Node (java.base@11.0.4) 11: 20887 2551232 java.lang.Class (java.base@11.0.4) 12: 32461 2077504 java.util.concurrent.ConcurrentHashMap (java.base@11.0.4) 13: 48062 1922480 java.util.HashMap$KeyIterator (java.base@11.0.4) 14: 17400 1720040 [Ljava.util.HashMap$Node; (java.base@11.0.4) 15: 2184 1432704 io.netty.util.internal.shaded.org.jctools.queues.MpscArrayQueue 16: 35693 1427720 java.util.LinkedHashMap$Entry (java.base@11.0.4) 17: 88742 1419872 java.lang.Object (java.base@11.0.4) 18: 1671 1195280 [Ljava.util.concurrent.ConcurrentHashMap$Node; (java.base@11.0.4) 19: 10270 1150240 sun.nio.ch.SocketChannelImpl (java.base@11.0.4) 20: 10237 1064648 io.netty.channel.socket.nio.NioSocketChannel 21: 42359 1016616 java.util.ArrayList (java.base@11.0.4) 22: 60868 973888 java.lang.Integer (java.base@11.0.4) 23: 20436 817440 io.netty.util.DefaultAttributeMap$DefaultAttribute 24: 10533 758376 org.springframework.core.type.classreading.AnnotationMetadataReadingVisitor 25: 18570 742800 com.meituan.service.mobile.mtthrift.mtrace.MtraceServerTBinaryProtocol$Factory 26: 10239 737208 io.netty.channel.DefaultChannelPipeline$HeadContext 27: 10239 737208 io.netty.channel.DefaultChannelPipeline$TailContext 28: 30914 729768 [Ljava.lang.Class; (java.base@11.0.4) 29: 21894 700608 java.util.concurrent.locks.ReentrantLock$NonfairSync (java.base@11.0.4)------ÁúÅÁï•---- Num:Â∫èÂè∑ Instances:ÂÆû‰æãÊï∞Èáè Bytes:Âç†Áî®Á©∫Èó¥Â§ßÂ∞è Class Name:Á±ªÂêç Â†Ü‰ø°ÊÅØ123gdeMacBook-Pro:~ g$ jmap -heap 94673Error: -heap option usedCannot connect to core dump or remote debug server. Use jhsdb jmap instead jdk9Âèä‰ª•‰∏äÁâàÊú¨‰ΩøÁî®jmap -heap pidÂëΩ‰ª§Êü•ÁúãÂΩìÂâçheap‰ΩøÁî®ÊÉÖÂÜµÊó∂ÔºåÂèëÁé∞Êä•ÈîôÔºåÊèêÁ§∫ÈúÄË¶Å‰ΩøÁî®jhsdb jmapÊù•Êõø‰ª£ 1gdeMacBook-Pro:~ g$ jhsdb jmap --heap --pid 94673]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Ë£ÖÈ•∞Âô®Ê®°Âºè]]></title>
    <url>%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2FDesign-Pattern-Decorator%2F</url>
    <content type="text"></content>
      <categories>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-ËßÇÂØüËÄÖÊ®°Âºè]]></title>
    <url>%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2FDesign-Pattern-Observer%2F</url>
    <content type="text"><![CDATA[ËÆ§ËØÜËßÇÂØüËÄÖÊ®°ÂºèÊàë‰ª¨ÁúãÁúãÊä•Á∫∏ÂíåÊùÇÂøóÁöÑËÆ¢ÈòÖÊòØÊÄé‰πàÂõû‰∫ã: Êä•Á§æÁöÑ‰∏öÂä°Â∞±ÊòØÂá∫ÁâàÊä•Á∫∏„ÄÇ ÂêëÊüêÂÆ∂Êä•Á§æËÆ¢ÈòÖÊä•Á∫∏ÔºåÂè™Ë¶Å‰ªñ‰ª¨ÊúâÊñ∞Êä•Á∫∏Âá∫ÁâàÔºåÂ∞±‰ºöÁªô‰Ω†ÈÄÅÊù•„ÄÇÂè™Ë¶Å‰Ω†ÊòØ‰ªñ‰ª¨ÁöÑËÆ¢Êà∑Ôºå‰Ω†Â∞±‰ºö‰∏ÄÁõ¥Êî∂Âà∞Êñ∞Êä•Á∫∏„ÄÇ ÂΩì‰Ω†‰∏çÊÉ≥ÂÜçÁúãÊä•Á∫∏ÁöÑÊó∂ÂÄôÔºåÂèñÊ∂àËÆ¢ÈòÖÔºå‰ªñ‰ª¨Â∞±‰∏ç‰ºöÂÜçÈÄÅÊñ∞Êä•Á∫∏Êù•„ÄÇ Âè™Ë¶ÅÊä•Á§æËøòÂú®ËøêËê•ÔºåÂ∞±‰ºö‰∏ÄÁõ¥Êúâ‰∫∫(ÊàñÂçï‰Ωç)Âêë‰ªñ‰ª¨ËÆ¢ÈòÖÊä• Á∫∏ÊàñÂèñÊ∂àËÆ¢ÈòÖÊä•Á∫∏„ÄÇ ËßÇÂØüËÄÖÊ®°ÂºèÂá∫ÁâàËÄÖ+ËÆ¢ÈòÖËÄÖ=ËßÇÂØüËÄÖÊ®°ÂºèÂá∫ÁâàËÄÖÊîπÁß∞‰∏∫‚Äú‰∏ªÈ¢ò‚Äù(Subject)ÔºåËÆ¢ÈòÖËÄÖÊîπÁß∞‰∏∫‚ÄúËßÇÂØüËÄÖ‚Äù(Observer)„ÄÇËßÇÂØüËÄÖÊ®°ÂºèÔºöÂÆö‰πâ‰∫ÜÂØπË±°‰πãÈó¥ÁöÑ‰∏ÄÂØπÂ§ö‰æùËµñÔºåÂΩì‰∏Ä‰∏™ÂØπË±°ÊîπÂèòÁä∂ÊÄÅÊó∂ÔºåÂÆÉÁöÑÊâÄÊúâ‰æùËµñËÄÖÈÉΩ‰ºöÊî∂Âà∞ÈÄöÁü•Âπ∂Ëá™Âä®Êõ¥Êñ∞„ÄÇ Á§∫‰æãÂª∫Á´ãÊ∞îË±°Á´ôÔºöËØ•Ê∞îË±°Á´ôÂøÖÈ°ªÂª∫Á´ãÂú®WeatherDataÂØπË±°‰∏äÔºåÁî±WeatherDataÂØπË±°Ë¥üË¥£ËøΩË∏™ÁõÆÂâçÁöÑÂ§©Ê∞îÁä∂ÂÜµ(Ê∏©Â∫¶„ÄÅÊπøÂ∫¶„ÄÅÊ∞îÂéã)„ÄÇÂ∏åÊúõËÉΩÂª∫Á´ã‰∏Ä‰∏™Â∫îÁî®ÔºåÊúâ‰∏âÁßçÂ∏ÉÂëäÊùøÔºåÂàÜÂà´ÊòæÁ§∫ÁõÆÂâçÁöÑÁä∂ÂÜµ„ÄÅÊ∞îË±°ÁªüËÆ°ÂèäÁÆÄÂçïÁöÑÈ¢ÑÊä•„ÄÇÂΩìWeatherObjectÂØπË±°Ëé∑ÂæóÊúÄÊñ∞ÁöÑÊµãÈáèÊï∞ÊçÆÊó∂Ôºå‰∏âÁßçÂ∏ÉÂëäÊùø ÂøÖÈ°ªÂÆûÊó∂Êõ¥Êñ∞„ÄÇËÄå‰∏îÔºåËøôÊòØ‰∏Ä‰∏™ÂèØ‰ª•Êâ©Â±ïÁöÑÊ∞îË±°Á´ôÔºåWeather-O-RamaÊ∞îË±° Á´ôÂ∏åÊúõÂÖ¨Â∏É‰∏ÄÁªÑAPIÔºåÂ•ΩËÆ©ÂÖ∂‰ªñÂºÄÂèë‰∫∫ÂëòÂèØ‰ª•ÂÜôÂá∫Ëá™Â∑±ÁöÑÊ∞îË±°Â∏ÉÂëäÊùøÔºåÂπ∂ÊèíÂÖ•Ê≠§Â∫îÁî®‰∏≠„ÄÇ 12345678public interface Subject &#123; // Ê≥®ÂÜå public void registerObserver(Observer o); // ÁßªÈô§ public void removeObserver(Observer o); // ÈÄöÁü• public void notifyObservers();&#125; 123public interface Observer &#123; public void update(float temp, float humidity, float pressure);&#125; 1234public interface DisplayElement &#123; // ÊòæÁ§∫Â∏ÉÂëäÊùø public void display();&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051import java.util.ArrayList;public class WeatherData implements Subject&#123; private ArrayList observers; // Ê∏©Â∫¶ private float temperature; // ÊπøÂ∫¶ private float humidity; // Ê∞îÂéã private float pressure; public WeatherData() &#123; observers = new ArrayList(); &#125; @Override public void registerObserver(Observer o) &#123; observers.add(o); &#125; @Override public void removeObserver(Observer o) &#123; int i = observers.indexOf(o); if (i &gt;= 0) &#123; observers.remove(i); &#125; &#125; @Override public void notifyObservers() &#123; for (int i = 0; i &lt; observers.size(); i++) &#123; Observer observer = (Observer)observers.get(i); observer.update(temperature, humidity, pressure); &#125; &#125; // ÂΩì‰ªéÊ∞îË±°Á´ôÂæóÂà∞Êõ¥Êñ∞ËßÇÊµãÂÄºÊó∂ÔºåÊàë‰ª¨ÈÄöÁü•ËßÇÂØüËÄÖ„ÄÇ public void measurementsChanged() &#123; notifyObservers(); &#125; public void setMeasurements(float temperature, float humidity, float pressure) &#123; this.temperature = temperature; this.humidity = humidity; this.pressure = pressure; measurementsChanged(); &#125; //ÂÖ∂‰ªñÊñπÊ≥ïÁúÅÁï•&#125; Â∏ÉÂëäÊùø 12345678910111213141516171819202122232425public class CurrentConditionsDisplay implements Observer, DisplayElement&#123; private float temperature; private float humidity; private Subject weatherData; public CurrentConditionsDisplay(Subject weatherData) &#123; this.weatherData = weatherData; weatherData.registerObserver(this); &#125; @Override public void display() &#123; System.out.println("Current conditions: " + temperature + "F degrees and " + humidity + "% humidity"); &#125; @Override public void update(float temp, float humidity, float pressure) &#123; this.temperature = temp; this.humidity = humidity; display(); &#125;&#125; Ê∞îË±°Á´ôÊµãËØïÁ±ª 1234567891011public class WeatherStation &#123; public static void main(String[] args) &#123; WeatherData weatherData = new WeatherData(); CurrentConditionsDisplay currentDisplay = new CurrentConditionsDisplay(weatherData);// StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);// ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData); weatherData.setMeasurements(80, 65, 30.4f); weatherData.setMeasurements(82, 70, 29.2f); weatherData.setMeasurements(78, 90, 29.2f); &#125;&#125; ËøêË°åÁªìÊûú 123Current conditions: 80.0F degrees and 65.0% humidityCurrent conditions: 82.0F degrees and 70.0% humidityCurrent conditions: 78.0F degrees and 90.0% humidity JAVAÂÜÖÁΩÆÁöÑËßÇÂØüËÄÖÊ®°ÂºèJava APIÊúâÂÜÖÁΩÆÁöÑËßÇÂØüËÄÖÊ®°Âºè„ÄÇjava.utilÂåÖ(package)ÂÜÖÂåÖÂê´ÊúÄÂü∫Êú¨ÁöÑObserverÊé•Âè£‰∏éObservableÁ±ª„ÄÇ ObserverÊé•Âè£ 123456package java.util;public interface Observer &#123; void update(Observable o, Object arg);&#125; ObservableÁ±ª 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071package java.util;public class Observable &#123; private boolean changed = false;// Êï∞ÊçÆÊõ¥Êñ∞Ê†áËÆ∞ private Vector&lt;Observer&gt; obs; // ËßÇÂØüËÄÖÂàóË°® //ÊûÑÈÄ†ÂáΩÊï∞ public Observable() &#123; obs = new Vector&lt;&gt;(); &#125; //Ê∑ªÂä†ËßÇÂØüËÄÖ public synchronized void addObserver(Observer o) &#123; if (o == null) throw new NullPointerException(); if (!obs.contains(o)) &#123; obs.addElement(o); &#125; &#125; // Âà†Èô§Êüê‰∏Ä‰∏™ËßÇÂØüËÄÖ public synchronized void deleteObserver(Observer o) &#123; obs.removeElement(o); &#125; // ÈÄöÁü•ËßÇÂØüËÄÖ public void notifyObservers() &#123; notifyObservers(null); &#125; // Â¶ÇÊûúchanged = true ÊÑèÂë≥ÁùÄÊï∞ÊçÆË¢´‰øÆÊîπÔºåÈÄöÁü•ÊØè‰∏™ËßÇÂØüËÄÖ„ÄÇ public void notifyObservers(Object arg) &#123; Object[] arrLocal; synchronized (this) &#123; if (!changed) return; arrLocal = obs.toArray(); clearChanged(); &#125; for (int i = arrLocal.length-1; i&gt;=0; i--) ((Observer)arrLocal[i]).update(this, arg); &#125; // Âà†Èô§ÊâÄÊúâËßÇÂØüËÄÖ public synchronized void deleteObservers() &#123; obs.removeAllElements(); &#125; // ËÆæÁΩÆchangedÂÄº protected synchronized void setChanged() &#123; changed = true; &#125; // Ê∏ÖÈô§changedÂÄº protected synchronized void clearChanged() &#123; changed = false; &#125; // Ëé∑ÂèñchangedÂÄº public synchronized boolean hasChanged() &#123; return changed; &#125; // ËøîÂõûËßÇÂØüËÄÖ‰∏™Êï∞ public synchronized int countObservers() &#123; return obs.size(); &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041import java.util.Observable;public class WeatherData extends Observable &#123; // Ê∏©Â∫¶ private float temperature; // ÊπøÂ∫¶ private float humidity; // Ê∞îÂéã private float pressure; public WeatherData() &#123; &#125; // ÂΩì‰ªéÊ∞îË±°Á´ôÂæóÂà∞Êõ¥Êñ∞ËßÇÊµãÂÄºÊó∂ÔºåÊàë‰ª¨ÈÄöÁü•ËßÇÂØüËÄÖ„ÄÇ public void measurementsChanged() &#123; setChanged(); notifyObservers(); &#125; public void setMeasurements(float temperature, float humidity, float pressure) &#123; this.temperature = temperature; this.humidity = humidity; this.pressure = pressure; measurementsChanged(); &#125; //‰ΩøÁî®‚ÄúÊãâ‚ÄùÁöÑÂÅöÊ≥ï public float getTemperature() &#123; return temperature; &#125; public float getHumidity() &#123; return humidity; &#125; public float getPressure() &#123; return pressure; &#125; //ÂÖ∂‰ªñÊñπÊ≥ïÁúÅÁï•&#125; 12345678910111213141516171819202122232425262728293031import java.util.Observable;import java.util.Observer;public class CurrentConditionsDisplay implements Observer, DisplayElement&#123; private float temperature; private float humidity; Observable observable; public CurrentConditionsDisplay(Observable observable) &#123; this.observable = observable; observable.addObserver(this); &#125; @Override public void display() &#123; System.out.println("Current conditions: " + temperature + "F degrees and " + humidity + "% humidity"); &#125; @Override public void update(Observable o, Object arg) &#123; if (o instanceof WeatherData) &#123; WeatherData weatherData = (WeatherData)o; this.temperature = weatherData.getTemperature(); this.humidity = weatherData.getHumidity(); display(); &#125; &#125;&#125; ÊµãËØï‰ª£Á†ÅÂíåÊµãËØïÁªìÊûúÂêå‰∏ä java.util.ObservableÁöÑÁº∫ÁÇπjava.util.ObservableÁöÑÂÆûÁé∞ ÊúâËÆ∏Â§öÈóÆÈ¢òÔºåÈôêÂà∂‰∫ÜÂÆÉÁöÑ‰ΩøÁî®ÂíåÂ§çÁî®„ÄÇ ËßÇÂØüËÄÖÊòØ‰∏Ä‰∏™‚ÄúÁ±ª‚ÄùËÄå‰∏çÊòØ‰∏Ä‰∏™‚ÄúÊé• Âè£‚Äù ‰Ω†ÂøÖÈ°ªËÆæËÆ°‰∏Ä‰∏™Á±ªÁªßÊâøÂÆÉ„ÄÇÂ¶ÇÊûúÊüêÁ±ªÊÉ≥ÂêåÊó∂ ÂÖ∑ÊúâObservableÁ±ªÂíåÂè¶‰∏Ä‰∏™Ë∂ÖÁ±ªÁöÑË°å‰∏∫ÔºåÂ∞±‰ºöÈô∑ÂÖ•‰∏§ÈöæÔºåÊØïÁ´üJava‰∏çÊîØÊåÅÂ§öÈáçÁªßÊâø„ÄÇ ObservableÂ∞ÜÂÖ≥ÈîÆÁöÑÊñπÊ≥ï‰øùÊä§Ëµ∑Êù• setChanged()ÊñπÊ≥ïË¢´‰øùÊä§Ëµ∑Êù•‰∫Ü(Ë¢´ÂÆö‰πâÊàê protected)„ÄÇËøôÊÑèÂë≥ÁùÄ:Èô§Èùû‰Ω†ÁªßÊâøËá™ObservableÔºåÂê¶Âàô‰Ω†Êó†Ê≥ïÂàõÂª∫ObservableÂÆû‰æãÂπ∂ÁªÑÂêàÂà∞‰Ω†Ëá™Â∑±ÁöÑÂØπË±°‰∏≠Êù•„ÄÇËøô‰∏™ËÆæËÆ°ËøùÂèç‰∫ÜÁ¨¨‰∫å‰∏™ËÆæËÆ°Âéü Âàô:‚ÄúÂ§öÁî®ÁªÑÂêàÔºåÂ∞ëÁî®ÁªßÊâø‚Äù„ÄÇ Ë¶ÅÁÇπ ËßÇÂØüËÄÖÊ®°ÂºèÂÆö‰πâ‰∫ÜÂØπË±°‰πãÈó¥‰∏ÄÂØπÂ§öÁöÑÂÖ≥Á≥ª„ÄÇ ‰∏ªÈ¢ò(‰πüÂ∞±ÊòØÂèØËßÇÂØüËÄÖ)Áî®‰∏Ä‰∏™ÂÖ±ÂêåÁöÑÊé•Âè£Êù•Êõ¥Êñ∞ËßÇÂØüËÄÖ„ÄÇ ËßÇÂØüËÄÖÂíåÂèØËßÇÂØüËÄÖ‰πãÈó¥Áî®ÊùæËÄ¶ÂêàÊñπÂºèÁªìÂêà(loosecoupl- ing)ÔºåÂèØËßÇÂØüËÄÖ‰∏çÁü•ÈÅìËßÇÂØüËÄÖÁöÑÁªÜËäÇÔºåÂè™Áü•ÈÅìËßÇÂØüËÄÖÂÆûÁé∞‰∫ÜËßÇÂØüËÄÖÊé•Âè£„ÄÇ ‰ΩøÁî®Ê≠§Ê®°ÂºèÊó∂Ôºå‰Ω†ÂèØ‰ªéË¢´ËßÇÂØüËÄÖÂ§ÑÊé®(push)ÊàñÊãâ(pull)Êï∞ÊçÆ(ÁÑ∂ËÄåÔºåÊé®ÁöÑÊñπÂºèË¢´ËÆ§‰∏∫Êõ¥‚ÄúÊ≠£Á°Æ‚Äù)„ÄÇ ÊúâÂ§ö‰∏™ËßÇÂØüËÄÖÊó∂Ôºå‰∏çÂèØ‰ª•‰æùËµñÁâπÂÆöÁöÑÈÄöÁü•Ê¨°Â∫è„ÄÇ JavaÊúâÂ§öÁßçËßÇÂØüËÄÖÊ®°ÂºèÁöÑÂÆûÁé∞ÔºåÂåÖÊã¨‰∫ÜÈÄöÁî®ÁöÑjava.util.Observable„ÄÇ Ë¶ÅÊ≥®ÊÑèjava.util.ObservableÂÆûÁé∞‰∏äÊâÄÂ∏¶Êù•ÁöÑ‰∏Ä‰∫õÈóÆÈ¢ò„ÄÇ Â¶ÇÊûúÊúâÂøÖË¶ÅÁöÑËØùÔºåÂèØ‰ª•ÂÆûÁé∞Ëá™Â∑±ÁöÑObservable„ÄÇ SwingÂ§ßÈáè‰ΩøÁî®ËßÇÂØüËÄÖÊ®°ÂºèÔºåËÆ∏Â§öGUIÊ°ÜÊû∂‰πüÊòØÂ¶ÇÊ≠§„ÄÇ Ê≠§Ê®°Âºè‰πüË¢´Â∫îÁî®Âú®ËÆ∏Â§öÂú∞ÊñπÔºå‰æãÂ¶Ç:JavaBeans„ÄÅRMI„ÄÇ]]></content>
      <categories>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæËÆ°Ê®°Âºè-Á≠ñÁï•Ê®°Âºè]]></title>
    <url>%2F%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2FDesign-Pattern-Strategy%2F</url>
    <content type="text"><![CDATA[‰ªÄ‰πàÊòØÁ≠ñÁï•Ê®°ÂºèÁ≠ñÁï•Ëøô‰∏™ËØçÂ∫îËØ•ÊÄé‰πàÁêÜËß£ÔºåÊâì‰∏™ÊØîÊñπËØ¥ÔºåÊàë‰ª¨Âá∫Èó®ÁöÑÊó∂ÂÄô‰ºöÈÄâÊã©‰∏çÂêåÁöÑÂá∫Ë°åÊñπÂºèÔºåÊØîÂ¶ÇÈ™ëËá™Ë°åËΩ¶„ÄÅÂùêÂÖ¨‰∫§„ÄÅÂùêÁÅ´ËΩ¶„ÄÅÂùêÈ£ûÊú∫„ÄÅÂùêÁÅ´ÁÆ≠Á≠âÁ≠âÔºåËøô‰∫õÂá∫Ë°åÊñπÂºèÔºåÊØè‰∏ÄÁßçÈÉΩÊòØ‰∏Ä‰∏™Á≠ñÁï•„ÄÇ ÂÜçÊØîÂ¶ÇÊàë‰ª¨ÂéªÈÄõÂïÜÂú∫ÔºåÂïÜÂú∫Áé∞Âú®Ê≠£Âú®ÊêûÊ¥ªÂä®ÔºåÊúâÊâìÊäòÁöÑ„ÄÅÊúâÊª°ÂáèÁöÑ„ÄÅÊúâËøîÂà©ÁöÑÁ≠âÁ≠âÔºåÂÖ∂ÂÆû‰∏çÁÆ°ÂïÜÂú∫Â¶Ç‰ΩïËøõË°å‰øÉÈîÄÔºåËØ¥Âà∞Â∫ïÈÉΩÊòØ‰∏Ä‰∫õÁÆóÊ≥ïÔºåËøô‰∫õÁÆóÊ≥ïÊú¨Ë∫´Âè™ÊòØ‰∏ÄÁßçÁ≠ñÁï•ÔºåÂπ∂‰∏îËøô‰∫õÁÆóÊ≥ïÊòØÈöèÊó∂ÈÉΩÂèØËÉΩ‰∫íÁõ∏ÊõøÊç¢ÁöÑÔºåÊØîÂ¶ÇÈíàÂØπÂêå‰∏Ä‰ª∂ÂïÜÂìÅÔºå‰ªäÂ§©ÊâìÂÖ´Êäò„ÄÅÊòéÂ§©Êª°100Âáè30ÔºåËøô‰∫õÁ≠ñÁï•Èó¥ÊòØÂèØ‰ª•‰∫íÊç¢ÁöÑ„ÄÇ Á≠ñÁï•Ê®°ÂºèÔºàStrategyÔºâÔºåÂÆö‰πâ‰∫Ü‰∏ÄÁªÑÁÆóÊ≥ïÔºåÂ∞ÜÊØè‰∏™ÁÆóÊ≥ïÈÉΩÂ∞ÅË£ÖËµ∑Êù•ÔºåÂπ∂‰∏î‰ΩøÂÆÉ‰ª¨‰πãÈó¥ÂèØ‰ª•‰∫íÊç¢„ÄÇ Á§∫‰æãÊ®°ÊãüÈ∏≠Â≠êÈ°πÁõÆ 12345678910public abstract class Duck &#123; public void Quack() &#123; System.out.println("~~gaga~~"); &#125; public abstract void display(); public void swim() &#123; System.out.println("~~im swim~~"); &#125;&#125; GreenHeadDuckÁªßÊâøDuck Ôºö 1234567public class GreenHeadDuck extends Duck &#123; @Override public void display() &#123; System.out.println("**GreenHead**"); &#125;&#125; Êñ∞ÈúÄÊ±ÇÊ∑ªÂä†‰ºöÈ£ûÁöÑÈ∏≠Â≠ê 123456public abstract class Duck &#123; //...; public void Fly() &#123; System.out.println("~~im fly~~"); &#125;&#125; ÈóÆÈ¢òÊù•‰∫Ü,Ëøô‰∏™FlyËÆ©ÊâÄÊúâÂ≠êÁ±ªÈÉΩ‰ºöÈ£û‰∫ÜÔºåËøôÊòØ‰∏çÁßëÂ≠¶ÁöÑ„ÄÇÂπ∂ÈùûDuckÊâÄÊúâÁöÑÂ≠êÁ±ªÈÉΩ‰ºöÈ£û„ÄÇÂú®DuckË∂ÖÁ±ª‰∏≠Âä†‰∏äÊñ∞ÁöÑË°å‰∏∫Ôºå‰ºö‰ΩøÂæóÊüê‰∫õÂπ∂‰∏çÈÄÇÂêàËØ•Ë°å‰∏∫ÁöÑÂ≠êÁ±ª‰πüÂÖ∑ÊúâËØ•Ë°å‰∏∫„ÄÇËøô‰∏™ÂØºËá¥ÔºåÂêéÈù¢Âá†ÂçÅ‰∏™È∏≠Â≠ê‰∏çÊ≤°ÊúâËøô‰∏™ÂäüËÉΩÔºå‰∏ç‰ºöÈ£ûÔºåÈÇ£‰πà‰ªñ‰ª¨ÁöÑÈÉΩË¶ÅÂéªÂÆûÁé∞„ÄÇÂ∑•‰ΩúÈáèÂ§ßÔºåËÄå‰∏îÈáçÂ§çÂä≥Âä®„ÄÇÊâÄ‰ª•ÔºöË∂ÖÁ±ªÊåñÁöÑ‰∏Ä‰∏™ÂùëÔºåÊØè‰∏™Â≠êÁ±ªÈÉΩË¶ÅÊù•Â°´ÔºåÂ¢ûÂä†Â∑•‰ΩúÈáèÔºåÂ§çÊùÇÂ∫¶O(N^2)„ÄÇ‰∏çÊòØÂ•ΩÁöÑËÆæËÆ°ÊñπÂºè Áî®Á≠ñÁï•Ê®°ÂºèÊù•Ëß£ÂÜ≥Êñ∞ÈúÄÊ±ÇÈúÄË¶ÅÊñ∞ÁöÑËÆæËÆ°ÊñπÂºèÔºåÂ∫îÂØπÈ°πÁõÆÁöÑÊâ©Â±ïÊÄßÔºåÈôç‰ΩéÂ§çÊùÇÂ∫¶Ôºö 1ÔºâÂàÜÊûêÈ°πÁõÆÂèòÂåñ‰∏é‰∏çÂèòÈÉ®ÂàÜÔºåÊèêÂèñÂèòÂåñÈÉ®ÂàÜÔºåÁÑ∂ÂêéÊääÂèòÂåñÁöÑÈÉ®ÂàÜÊäΩË±°ÊàêÊé•Âè£+ÂÆûÁé∞Ôºõ 2ÔºâÈ∏≠Â≠êÂì™‰∫õÂäüËÉΩÊòØ‰ºöÊ†πÊçÆÊñ∞ÈúÄÊ±ÇÂèòÂåñÁöÑÔºüÂè´Â£∞„ÄÅÈ£ûË°å‚Ä¶ ÈáçÊñ∞ËÆæËÆ°Ê®°ÊãüÈ∏≠Â≠êÈ°πÁõÆ123456789101112131415161718192021222324public abstract class Duck &#123; FlyBehavior mFlyBehavior; QuackBehavior mQuackBehavior; public Duck() &#123; &#125; public void Fly() &#123; mFlyBehavior.fly(); &#125; public void Quack() &#123; mQuackBehavior.quack(); &#125; public abstract void display();&#125;public class GreenHeadDuck extends Duck &#123; public GreenHeadDuck() &#123; mFlyBehavior = new GoodFlyBehavior(); mQuackBehavior = new GaGaQuackBehavior(); &#125; @Override public void display() &#123; System.out.println("I‚Äôm a real GreenHeadDuck"); &#125;&#125; ÊÄªÁªì ÂàÜÊûêÈ°πÁõÆ‰∏≠ÂèòÂåñÈÉ®ÂàÜ‰∏é‰∏çÂèòÈÉ®ÂàÜÔºàÊñπÊ≥ïËÆ∫Ôºâ‚Äî‚Äî&gt;Ëøô‰∏™ÊñπÊ≥ïËÆ∫‰∏ç‰ªÖÊòØÁ≠ñÁï•Ê®°Âºè‰∏≠ÊâçÂèØ‰ª•Áî®ÁöÑÔºåÁî®Êù•ÂàÜÊûêÈ°πÁõÆ‰∏≠ÂèòÊ≥ïÁöÑ‰Ωï‰∏çÂèòÂåñÁöÑÔºåÂèòÂåñÁöÑÂ∞±ÂèØ‰ª•ÊÄé‰πàÊù•ÊäΩÂèñÊõøÊç¢„ÄÇËÄå‰∏îÂèòÂåñÁöÑÊäΩÁ¶ªÂá∫Êù•ÁöÑË°å‰∏∫ÊóèÔºåË°å‰∏∫Êóè‰πãÈó¥ÊòØÂèØ‰ª•Êù•Áõ∏‰∫íÊõøÊç¢ÁöÑ„ÄÇ Â§öÁî®ÁªÑÂêàÂ∞ëÁî®ÁªßÊâøÔºõÁî®Ë°å‰∏∫Á±ªÁªÑÂêàÔºåËÄå‰∏çÊòØË°å‰∏∫ÁöÑÁªßÊâø„ÄÇÊõ¥ÊúâÂºπÊÄß Á≠ñÁï•Ê®°Âºè‰∏≠ÁöÑËÆæËÆ°ÂéüÂàô ÂºÄÈó≠ÂéüÂàôÔºàOpen-Closed PrincipleÔºåÁº©ÂÜô‰∏∫OCPÔºâ ‰∏Ä‰∏™ËΩØ‰ª∂ÂÆû‰ΩìÂ∫îÂΩìÂØπÊâ©Â±ïÂºÄÊîæ(‰æãÂ¶ÇÂØπÊäΩË±°Â±ÇÁöÑÊâ©Â±ï)ÔºåÂØπ‰øÆÊîπÂÖ≥Èó≠(‰æãÂ¶ÇÂØπÊäΩË±°Â±ÇÁöÑ‰øÆÊîπ)„ÄÇÂç≥Âú®ËÆæËÆ°‰∏Ä‰∏™Ê®°ÂùóÁöÑÊó∂ÂÄôÔºåÂ∫îÂΩì‰ΩøËøô‰∏™Ê®°ÂùóÂèØ‰ª•Âú®‰∏çË¢´‰øÆÊîπÁöÑÂâçÊèê‰∏ãË¢´Êâ©Â±ï„ÄÇ ÂºÄÈó≠ÂéüÂàôÁöÑÂÖ≥ÈîÆÔºåÂú®‰∫éÊäΩË±°„ÄÇÁ≠ñÁï•Ê®°ÂºèÔºåÊòØÂºÄÈó≠ÂéüÂàôÁöÑ‰∏Ä‰∏™ÊûÅÂ•ΩÁöÑÂ∫îÁî®ËåÉ‰æã„ÄÇ ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºàLiskov Substitution PrincipleÔºåÁº©ÂÜô‰∏∫LSPÔºâ ÈáåÊ∞èÊõøÊç¢ÂéüÂàôÈáå‰∏Ä‰∏™ËΩØ‰ª∂ÂÆû‰ΩìÂ¶ÇÊûú‰ΩøÁî®ÁöÑÊòØ‰∏Ä‰∏™Âü∫Á±ªÁöÑËØùÔºåÈÇ£‰πà‰∏ÄÂÆöÈÄÇÁî®‰∫éÂÖ∂Â≠êÁ±ªÔºåËÄå‰∏îÂÆÉÊ†πÊú¨‰∏çËÉΩÂØüËßâÂà∞Âü∫Á±ªÂØπË±°ÂíåÂ≠êÁ±ªÂØπË±°ÁöÑÂå∫Âà´„ÄÇ ÊØîÂ¶ÇÔºåÂÅáËÆæÊúâ‰∏§‰∏™Á±ªÔºå‰∏Ä‰∏™ÊòØBaseÁ±ªÔºå‰∏Ä‰∏™ÊòØDerivedÁ±ªÔºåÂπ∂‰∏îDerivedÁ±ªÊòØBaseÁ±ªÁöÑÂ≠êÁ±ª„ÄÇÈÇ£‰πà‰∏Ä‰∏™ÊñπÊ≥ïÂ¶ÇÊûúÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™Âü∫Á±ªÂØπË±°bÁöÑËØùÔºömethod1(Base b)ÔºåÈÇ£‰πàÂÆÉÂøÖÁÑ∂ÂèØ‰ª•Êé•Âèó‰∏Ä‰∏™Â≠êÁ±ªÂØπË±°dÔºå‰πüÂç≥ÂèØ‰ª•Êúâmethod1(d)„ÄÇÂèç‰πãÔºåÂàô‰∏ç‰∏ÄÂÆöÊàêÁ´ã„ÄÇ ÈáåÊ∞èÊõøÊç¢ÂéüÂàôËÆ≤ÁöÑÊòØÂü∫Á±ª‰∏éÂ≠êÁ±ªÁöÑÂÖ≥Á≥ª„ÄÇÂè™ÊúâÂΩìËøôÁßçÂÖ≥Á≥ªÂ≠òÂú®Êó∂ÔºåÈáåÊ∞èÊõøÊç¢ÂÖ≥Á≥ªÊâçÂ≠òÂú®ÔºåÂèç‰πãÂàô‰∏çÂ≠òÂú®„ÄÇ Á≠ñÁï•Ê®°Âºè‰πãÊâÄ‰ª•ÂèØË°åÁöÑÂü∫Á°Ä‰æøÊòØÈáåÊ∞èÊõøÊç¢ÂéüÂàôÔºöÁ≠ñÁï•Ê®°ÂºèË¶ÅÊ±ÇÊâÄÊúâÁöÑÁ≠ñÁï•ÂØπË±°ÈÉΩÊòØÂèØ‰ª•‰∫íÊç¢ÁöÑÔºåÂõ†Ê≠§ÂÆÉ‰ª¨ÈÉΩÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÊäΩË±°Á≠ñÁï•ËßíËâ≤ÁöÑÂ≠êÁ±ª„ÄÇÂú®ÂÆ¢Êà∑Á´ØÂàô‰ªÖÁü•ÈÅìÊäΩË±°Á≠ñÁï•ËßíËâ≤Á±ªÂûãÔºåËôΩÁÑ∂ÂèòÈáèÁöÑÁúüÂÆûÁ±ªÂûãÂèØ‰ª•ÊòØ‰ªª‰Ωï‰∏Ä‰∏™ÂÖ∑‰ΩìÁ≠ñÁï•ËßíËâ≤ÁöÑÂÆû‰æã„ÄÇ]]></content>
      <categories>
        <category>ËÆæËÆ°Ê®°Âºè</category>
      </categories>
      <tags>
        <tag>ËÆæËÆ°Ê®°Âºè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Guava-ÊÄªÁªì]]></title>
    <url>%2FGUAVA%2FGuava%2F</url>
    <content type="text"><![CDATA[È°πÁõÆÁõ∏ÂÖ≥‰ø°ÊÅØÂÆòÊñπÈ¶ñÈ°µÔºöhttp://code.google.com/p/guava-librariesËã±ÊñáÊñáÊ°£Ôºöhttp://www.ostools.net/apidocs/apidoc?api=guava‰∏≠ÊñáÊñáÊ°£Ôºöhttps://www.kancloud.cn/wizardforcel/java-opensource-doc/112616 ÂçöÂÆ¢ Guava Â≠¶‰π†Á¨îËÆ∞ÔºöGoogle Guava Á±ªÂ∫ìÁÆÄ‰ªã Guava Â≠¶‰π†Á¨îËÆ∞ÔºöOptional ‰ºòÈõÖÁöÑ‰ΩøÁî®null GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöPreconditions‰ºòÈõÖÁöÑÊ£ÄÈ™åÂèÇÊï∞ GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöÂ§çÂÜôÁöÑObjectÂ∏∏Áî®ÊñπÊ≥ï GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöOrderingÁäÄÂà©ÁöÑÊØîËæÉÂô® GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöÁÆÄÂåñÂºÇÂ∏∏Â§ÑÁêÜÁöÑThrowablesÁ±ª GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöImmutable(‰∏çÂèØÂèò)ÈõÜÂêà GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöGuavaÊñ∞Â¢ûÈõÜÂêàÁ±ªÂûã-Multiset Guava Â≠¶‰π†Á¨îËÆ∞ÔºöGuava Êñ∞Â¢ûÈõÜÂêàÁ±ªÂûã ‚Äî‚Äî Multimap GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöGuavaÊñ∞Â¢ûÈõÜÂêàÁ±ªÂûã-Bimap GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöGuavaÊñ∞ÈõÜÂêà-TableÁ≠â GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöGuava cache GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöEventBus GuavaÂ≠¶‰π†Á¨îËÆ∞ÔºöRange]]></content>
      <categories>
        <category>GUAVA</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
        <tag>GUAVA</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVA-CAS]]></title>
    <url>%2FJAVA%2FJava-Cas%2F</url>
    <content type="text"><![CDATA[CASÂú®ÁúãÁ∫øÁ®ãÊ±†Ê∫êÁ†ÅÁöÑÊó∂ÂÄôÂèëÁé∞ÊúâÂæàÂ§öCASÊìç‰ΩúÔºåÈÇ£‰πà‰ªÄ‰πàÊòØCASÔºü ÂÆö‰πâCASÊòØËã±ÊñáÂçïËØç Compare And Swap ÁöÑÁº©ÂÜôÔºåÁøªËØëËøáÊù•Â∞±ÊòØÊØîËæÉÂπ∂ÊõøÊç¢ÔºåÂÆÉÊòØ‰∏ÄÁßçÂéüÂ≠êÊìç‰ΩúÔºåÂêåÊó∂ CAS ÊòØ‰∏ÄÁßç‰πêËßÇÊú∫Âà∂„ÄÇjava.util.concurrent ÂåÖÂæàÂ§öÂäüËÉΩÈÉΩÊòØÂª∫Á´ãÂú® CAS ‰πã‰∏äÔºåÂ¶Ç ReenterLock ÂÜÖÈÉ®ÁöÑ AQSÔºåÂêÑÁßçÂéüÂ≠êÁ±ªÔºåÂÖ∂Â∫ïÂ±ÇÈÉΩÁî® CASÊù•ÂÆûÁé∞ÂéüÂ≠êÊìç‰Ωú„ÄÇ Â¶Ç‰ΩïËß£ÂÜ≥Âπ∂ÂèëÂÆâÂÖ®ÈóÆÈ¢òÂú®Êàë‰ª¨ËÆ§ËØÜ CAS ‰πãÂâçÔºåÊàë‰ª¨ÊòØÈÄöËøá‰ªÄ‰πàÊù•Ëß£ÂÜ≥Âπ∂ÂèëÂ∏¶Êù•ÁöÑÂÆâÂÖ®ÈóÆÈ¢òÂë¢Ôºüvolatile ÂÖ≥ÈîÆÂ≠óÂèØ‰ª•‰øùËØÅÂèòÈáèÁöÑÂèØËßÅÊÄßÔºå‰ΩÜ‰øùËØÅ‰∏ç‰∫ÜÂéüÂ≠êÊÄßÔºõsynchronized ÂÖ≥ÈîÆÂ≠óÂà©Áî® JVM Â≠óËäÇÁ†ÅÂ±ÇÈù¢Êù•ÂÆûÁé∞ÂêåÊ≠•Êú∫Âà∂ÔºåÂÆÉÊòØ‰∏Ä‰∏™ÊÇ≤ËßÇÈîÅÊú∫Âà∂„ÄÇ 123456public class Test &#123; public volatile int i; public void add() &#123; i++; &#125;&#125; ‰ΩøÁî® javap -c Test.class ÂëΩ‰ª§Êü•ÁúãÁúãaddÊñπÊ≥ïÁöÑÂ≠óËäÇÁ†ÅÊåá‰ª§ 123456789public void add(); Code: 0: aload_0 1: dup 2: getfield #2 // Field n:I 5: iconst_1 6: iadd 7: putfield #2 // Field n:I 10: return i++Ë¢´ÊãÜÂàÜÊàê‰∫ÜÂá†‰∏™Êåá‰ª§Ôºö 1. ÊâßË°ågetfieldÊãøÂà∞ÂéüÂßãiÔºõ 2. ÊâßË°åiaddËøõË°åÂä†1Êìç‰ΩúÔºõ 3. ÊâßË°åputfieldÂÜôÊääÁ¥ØÂä†ÂêéÁöÑÂÄºÂÜôÂõûiÔºõ ÂΩìÁ∫øÁ®ã 1 ÊâßË°åÂà∞Âä† 1 Ê≠•È™§Êó∂ÔºåÁî±‰∫éËøòÊ≤°ÊúâÊâßË°åËµãÂÄºÊîπÂèòÂèòÈáèÁöÑÂÄºÔºåËøôÊó∂ÂÄôÂπ∂‰∏ç‰ºöÂà∑Êñ∞‰∏ªÂÜÖÂ≠òÂå∫‰∏≠ÁöÑÂèòÈáèÔºåÂ¶ÇÊûúÊ≠§Êó∂Á∫øÁ®ã 2 Ê≠£Â•ΩË¶ÅÊã∑Ë¥ùËØ•ÂèòÈáèÁöÑÂÄºÂà∞Ëá™Â∑±ÁßÅÊúâÁºìÂ≠ò‰∏≠ÔºåÈóÆÈ¢òÂ∞±Âá∫Áé∞‰∫ÜÔºåÂΩìÁ∫øÁ®ã 2 Êã∑Ë¥ùÂÆå‰ª•ÂêéÔºåÁ∫øÁ®ã1Ê≠£Â•ΩÊâßË°åËµãÂÄºËøêÁÆóÔºåÁ´ãÈ©¨Êõ¥Êñ∞‰∏ªÂÜÖÂ≠òÂå∫ÁöÑÂÄºÔºåÈÇ£‰πàÊ≠§Êó∂Á∫øÁ®ã 2 ÁöÑÂâØÊú¨Â∞±ÊòØÊóßÁöÑ‰∫ÜÔºåËÑèËØªÂèàÂá∫Áé∞‰∫Ü„ÄÇ ÊÄé‰πàËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢ÔºüÂú® add ÊñπÊ≥ïÂä†‰∏ä synchronized ‰øÆÈ•∞Ëß£ÂÜ≥„ÄÇ 123456public class Test &#123; public volatile int i; public synchronized void add() &#123; i++; &#125;&#125; Ëøô‰∏™ÊñπÊ°àÂΩìÁÑ∂ÂèØË°åÔºå‰ΩÜÊòØÂ§ßÂ§ßÈôç‰Ωé‰∫ÜÊÄßËÉΩ„ÄÇ CASÂéüÁêÜCASÊú∫Âà∂ÂΩì‰∏≠‰ΩøÁî®‰∫Ü3‰∏™Âü∫Êú¨Êìç‰ΩúÊï∞ÔºöÂÜÖÂ≠òÂú∞ÂùÄVÔºåÊóßÁöÑÈ¢ÑÊúüÂÄºAÔºåË¶Å‰øÆÊîπÁöÑÊñ∞ÂÄºB„ÄÇÊõ¥Êñ∞‰∏Ä‰∏™ÂèòÈáèÁöÑÊó∂ÂÄôÔºåÂè™ÊúâÂΩìÂèòÈáèÁöÑÈ¢ÑÊúüÂÄºAÂíåÂÜÖÂ≠òÂú∞ÂùÄVÂΩì‰∏≠ÁöÑÂÆûÈôÖÂÄºÁõ∏ÂêåÊó∂ÔºåÊâç‰ºöÂ∞ÜÂÜÖÂ≠òÂÄº‰øÆÊîπ‰∏∫ B Âπ∂ËøîÂõû trueÔºåÂê¶Âàô‰ªÄ‰πàÈÉΩ‰∏çÂÅöÔºåÂπ∂ËøîÂõû false„ÄÇ Ê∫êÁ†ÅÂàÜÊûê‰∏ãÈù¢‰ª•AtomicIntegerÁöÑÂÆûÁé∞‰∏∫‰æãÔºåÂàÜÊûê‰∏Ä‰∏ãCASÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑ„ÄÇ 1234567891011121314151617public class AtomicInteger extends Number implements java.io.Serializable &#123; private static final long serialVersionUID = 6214790243416807050L; // setup to use Unsafe.compareAndSwapInt for updates private static final Unsafe unsafe = Unsafe.getUnsafe(); private static final long valueOffset; static &#123; try &#123; valueOffset = unsafe.objectFieldOffset (AtomicInteger.class.getDeclaredField("value")); &#125; catch (Exception ex) &#123; throw new Error(ex); &#125; &#125; private volatile int value; // ÁúÅÁï•ÈÉ®ÂàÜ‰ª£Á†Å&#125; UnsafeÔºöÊòØCASÁöÑÊ†∏ÂøÉÁ±ªÔºåÂÆÉÂèØ‰ª•Êèê‰æõÁ°¨‰ª∂Á∫ßÂà´ÁöÑÂéüÂ≠êÊìç‰ΩúÔºåÂÆÉÂèØ‰ª•Ëé∑ÂèñÊüê‰∏™Â±ûÊÄßÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑ‰ΩçÁΩÆÔºå‰πüÂèØ‰ª•‰øÆÊîπÂØπË±°ÁöÑÂ≠óÊÆµÂÄºÔºåÂÖ∂Â∫ïÂ±ÇÊòØÁî® C/C++valueOffsetÔºöË°®Á§∫ËØ•ÂèòÈáèÂÄºÂú®ÂÜÖÂ≠ò‰∏≠ÁöÑÂÅèÁßªÂú∞ÂùÄÔºåÂõ†‰∏∫UnsafeÂ∞±ÊòØÊ†πÊçÆÂÜÖÂ≠òÂÅèÁßªÂú∞ÂùÄËé∑ÂèñÊï∞ÊçÆÁöÑ„ÄÇvalueÔºöÁî®volatile‰øÆÈ•∞Ôºå‰øùËØÅ‰∫ÜÂ§öÁ∫øÁ®ã‰πãÈó¥ÁöÑÂÜÖÂ≠òÂèØËßÅÊÄß„ÄÇ ÁúãÁúãAtomicIntegerÂ¶Ç‰ΩïÂÆûÁé∞Âπ∂Âèë‰∏ãÁöÑÁ¥ØÂä†Êìç‰ΩúÔºö 1234567891011121314// AtomicInteger.getAndAddpublic final int getAndAdd(int delta) &#123; return unsafe.getAndAddInt(this, valueOffset, delta);&#125;// unsafe.getAndAddIntpublic final int getAndAddInt(Object var1, long var2, int var4) &#123; int var5; do &#123; var5 = this.getIntVolatile(var1, var2); &#125; while(!this.compareAndSwapInt(var1, var2, var5, var5 + var4)); return var5;&#125; ÂÅáËÆæÁ∫øÁ®ãAÂíåÁ∫øÁ®ãBÂêåÊó∂ÊâßË°ågetAndAddÊìç‰ΩúÔºàÂàÜÂà´Ë∑ëÂú®‰∏çÂêåCPU‰∏äÔºâÔºö AtomicIntegerÈáåÈù¢ÁöÑvalueÂéüÂßãÂÄº‰∏∫ nÔºåÊ†πÊçÆJavaÂÜÖÂ≠òÊ®°ÂûãÔºåÁ∫øÁ®ãAÂíåÁ∫øÁ®ãBÂêÑËá™ÊåÅÊúâ‰∏Ä‰ªΩvalueÁöÑÂâØÊú¨ÔºåÂÄº‰∏∫n„ÄÇ Á∫øÁ®ãAÈÄöËøágetIntVolatile(var1, var2)ÊãøÂà∞valueÂÄº nÔºåËøôÊó∂Á∫øÁ®ãAË¢´ÊåÇËµ∑„ÄÇ Á∫øÁ®ãB‰πüÈÄöËøágetIntVolatile(var1, var2)ÊñπÊ≥ïËé∑ÂèñÂà∞valueÂÄº nÔºåËøêÊ∞îÂ•ΩÔºåÁ∫øÁ®ãBÊ≤°ÊúâË¢´ÊåÇËµ∑ÔºåÂπ∂ÊâßË°åcompareAndSwapIntÊñπÊ≥ïÊØîËæÉÂÜÖÂ≠òÂÄº‰πü‰∏∫ nÔºåÊàêÂäü‰øÆÊîπÂÜÖÂ≠òÂÄº‰∏∫ m„ÄÇ ËøôÊó∂Á∫øÁ®ãAÊÅ¢Â§çÔºåÊâßË°åcompareAndSwapIntÊñπÊ≥ïÊØîËæÉÔºåÂèëÁé∞Ëá™Â∑±ÊâãÈáåÁöÑÂÄº(n)ÂíåÂÜÖÂ≠òÁöÑÂÄº(m)‰∏ç‰∏ÄËá¥ÔºåËØ¥ÊòéËØ•ÂÄºÂ∑≤ÁªèË¢´ÂÖ∂ÂÆÉÁ∫øÁ®ãÊèêÂâç‰øÆÊîπËøá‰∫ÜÔºåÈÇ£Âè™ËÉΩÈáçÊñ∞Êù•‰∏ÄÈÅç‰∫Ü„ÄÇ ÈáçÊñ∞Ëé∑ÂèñvalueÂÄºÔºåÂõ†‰∏∫ÂèòÈáèvalueË¢´volatile‰øÆÈ•∞ÔºåÊâÄ‰ª•ÂÖ∂ÂÆÉÁ∫øÁ®ãÂØπÂÆÉÁöÑ‰øÆÊîπÔºåÁ∫øÁ®ãAÊÄªÊòØËÉΩÂ§üÁúãÂà∞ÔºåÁ∫øÁ®ãAÁªßÁª≠ÊâßË°åcompareAndSwapIntËøõË°åÊØîËæÉÊõøÊç¢ÔºåÁõ¥Âà∞ÊàêÂäü„ÄÇ ÁªßÁª≠Ê∑±ÂÖ•ÁúãÁúãUnsafeÁ±ª‰∏≠ÁöÑcompareAndSwapIntÊñπÊ≥ïÂÆûÁé∞„ÄÇ 1public final native boolean compareAndSwapInt(Object var1, long var2, int var4, int var5); Java Âπ∂Ê≤°ÊúâÁõ¥Êé•ÂÆûÁé∞ CASÔºåCAS Áõ∏ÂÖ≥ÁöÑÂÆûÁé∞ÊòØÈÄöËøá C++ ÂÜÖËÅîÊ±áÁºñÁöÑÂΩ¢ÂºèÂÆûÁé∞ÁöÑ„ÄÇJava ‰ª£Á†ÅÈúÄÈÄöËøá JNI ÊâçËÉΩË∞ÉÁî®Ôºå‰Ωç‰∫é unsafe.cppÔºåÂú®OpenJDK8ÈáåÁöÑË∑ØÂæÑ‰∏∫: openjdk/hotspot/src/share/vm/prims/unsafe.cpp„ÄÇ 123456UNSAFE_ENTRY(jboolean, Unsafe_CompareAndSwapInt(JNIEnv *env, jobject unsafe, jobject obj, jlong offset, jint e, jint x)) UnsafeWrapper("Unsafe_CompareAndSwapInt"); oop p = JNIHandles::resolve(obj); jint* addr = (jint *) index_oop_from_field_offset_long(p, offset); return (jint)(Atomic::cmpxchg(x, addr, e)) == e;UNSAFE_END ÈÄªËæëÊâßË°åÊµÅÁ®ãÔºö objÊòØAtomicIntegerÂØπË±°ÔºåÈÄöËøá JNIHandles::resolve() Ëé∑ÂèñobjÂú®ÂÜÖÂ≠ò‰∏≠OOPÂÆû‰æãp Ê†πÊçÆÊàêÂëòÂèòÈáèvalueÂèçÂ∞ÑÂêéËÆ°ÁÆóÂá∫ÁöÑÂÜÖÂ≠òÂÅèÁßªÂÄºoffsetÂéªÂÜÖÂ≠ò‰∏≠ÂèñÊåáÈíàaddr Ëé∑ÂæóÊõ¥Êñ∞ÂÄºx„ÄÅÊåáÈíàaddr„ÄÅÊúüÂæÖÂÄºe‰∏â‰∏™ÂèÇÊï∞ÂêéÔºåË∞ÉÁî®Atomic::cmpxchg(x, addr, e) ÈÄöËøáAtomic::cmpxchg(x, addr, e)ÂÆûÁé∞CASÂØπÂ∫îOpenJDK8ÁöÑË∑ØÂæÑÊòØ: openjdk/hotspot/src/share/vm/runtime/atomic.cpp 12345678910111213141516171819jbyte Atomic::cmpxchg(jbyte exchange_value, volatile jbyte* dest, jbyte compare_value) &#123; assert(sizeof(jbyte) == 1, "assumption."); uintptr_t dest_addr = (uintptr_t)dest; uintptr_t offset = dest_addr % sizeof(jint); volatile jint* dest_int = (volatile jint*)(dest_addr - offset); jint cur = *dest_int; jbyte* cur_as_bytes = (jbyte*)(&amp;cur); jint new_val = cur; jbyte* new_val_as_bytes = (jbyte*)(&amp;new_val); new_val_as_bytes[offset] = exchange_value; while (cur_as_bytes[offset] == compare_value) &#123; jint res = cmpxchg(new_val, dest_int, cur); if (res == cur) break; cur = res; new_val = cur; new_val_as_bytes[offset] = exchange_value; &#125; return cur_as_bytes[offset];&#125; ÂÖ∂‰∏≠ÁöÑcmpxchg‰∏∫Ê†∏ÂøÉÂÜÖÂÆπ. ‰ΩÜÊòØËøôÂè•‰ª£Á†ÅÊ†πÊçÆÊìç‰ΩúÁ≥ªÁªüÂíåÂ§ÑÁêÜÂô®ÁöÑ‰∏çÂêå, ‰ΩøÁî®‰∏çÂêåÁöÑÂ∫ïÂ±Ç‰ª£Á†Å. 1#include "runtime/atomic.inline.hpp" atomic.inline.hpp‰∏≠ÂÆö‰πâÂ¶Ç‰∏ãÔºåÂèØËßÅ‰∏çÂêå‰∏çÂêåÊìç‰ΩúÁ≥ªÁªü, ‰∏çÂêåÁöÑÂ§ÑÁêÜÂô®, ÈÉΩË¶ÅËµ∞‰∏çÂêåÁöÑcmpxchg()ÊñπÊ≥ïÁöÑÂÆûÁé∞. 123456789101112131415161718192021222324252627282930313233#include "runtime/atomic.hpp"// Linux#ifdef TARGET_OS_ARCH_linux_x86# include "atomic_linux_x86.inline.hpp"#endif#ifdef TARGET_OS_ARCH_linux_sparc# include "atomic_linux_sparc.inline.hpp"#endif#ifdef TARGET_OS_ARCH_linux_zero# include "atomic_linux_zero.inline.hpp"#endif#ifdef TARGET_OS_ARCH_linux_arm# include "atomic_linux_arm.inline.hpp"#endif#ifdef TARGET_OS_ARCH_linux_ppc# include "atomic_linux_ppc.inline.hpp"#endif// Solaris#ifdef TARGET_OS_ARCH_solaris_x86# include "atomic_solaris_x86.inline.hpp"#endif#ifdef TARGET_OS_ARCH_solaris_sparc# include "atomic_solaris_sparc.inline.hpp"#endif// Windows#ifdef TARGET_OS_ARCH_windows_x86# include "atomic_windows_x86.inline.hpp"#endif// ..ÁúÅÁï• ‰ª•ÂÖ∂‰∏≠ÁöÑlinuxÊìç‰ΩúÁ≥ªÁªü x86Â§ÑÁêÜÂô®‰∏∫‰æã, atomic_linux_x86.inline.hppÂú®OpenJDK‰∏≠Ë∑ØÂæÑÂ¶Ç‰∏ã: openjdk/hotspot/src/os_cpu/linux_x86/vm/atomic_linux_x86.inline.hpp 12345678910#define LOCK_IF_MP(mp) "cmp $0, " #mp "; je 1f; lock; 1: "inline jint Atomic::cmpxchg (jint exchange_value, volatile jint* dest, jint compare_value) &#123; int mp = os::is_MP(); __asm__ volatile (LOCK_IF_MP(%4) "cmpxchgl %1,(%3)" : "=a" (exchange_value) : "r" (exchange_value), "a" (compare_value), "r" (dest), "r" (mp) : "cc", "memory"); return exchange_value;&#125; Â∑≤ÁªèÂºÄÂßãÂÜÖËÅîÊ±áÁºñ‰∫ÜÔºåÂ§¥Áñº __asm__ÔºöË°®Á§∫Ê±áÁºñÁöÑÂºÄÂßãvolatileÔºöË°®Á§∫Á¶ÅÊ≠¢ÁºñËØëÂô®‰ºòÂåñcmpxchglÔºöÂ∞±ÊòØÊ±áÁºñ‰∏≠x86ÁöÑÊØîËæÉÂπ∂‰∫§Êç¢Êåá‰ª§‰∫Ü„ÄÇLOCK_IF_MPÔºöÊòØ‰∏™ÂÜÖËÅîÂáΩÊï∞ÔºåÊ†πÊçÆÂΩìÂâçÁ≥ªÁªüÊòØÂê¶‰∏∫Â§öÊ†∏Â§ÑÁêÜÂô®ÂÜ≥ÂÆöÊòØÂê¶‰∏∫cmpxchg1Êåá‰ª§Ê∑ªÂä†lockÂâçÁºÄ„ÄÇ ÁÆÄÂçïËØ¥‰∏ãCÂÜÖËÅîÊ±áÁºñÁöÑËØ≠Ê≥ïÊ†ºÂºèÔºö 1234567__asm__ volatile("Instruction List" : Output : Input : Clobber/Modify); instruction listÔºöÂÆÉÊòØÊ±áÁºñÊåá‰ª§ÂàóË°®Clobber/ModifyÔºöÂØÑÂ≠òÂô®/ÂÜÖÂ≠ò‰øÆÊîπÊ†áÁ§∫„ÄÇÊúâÊó∂ÂÄô,ÂΩì‰Ω†ÊÉ≥ÈÄöÁü•GCCÂΩìÂâçÂÜÖËÅîÊ±áÁºñËØ≠Âè•ÂèØËÉΩ‰ºöÂØπÊüê‰∫õÂØÑÂ≠òÂô®ÊàñÂÜÖÂ≠òËøõË°å‰øÆÊîπ,Â∏åÊúõGCCÂú®ÁºñËØëÊó∂ËÉΩÂ§üÂ∞ÜËøô‰∏ÄÁÇπËÄÉËôëËøõÂéª;ÈÇ£‰πà‰Ω†Â∞±ÂèØ‰ª•Âú®Clobber/ModifyÈÉ®ÂàÜÂ£∞ÊòéËøô‰∫õÂØÑÂ≠òÂô®ÊàñÂÜÖÂ≠ò ÊâÄ‰ª•‰∏äËø∞Ê±áÁºñÊåá‰ª§Ëß£Èáä‰∏∫ÔºöÂµåÂÖ•ÂºèÊ±áÁºñËßÑÂÆöÊääËæìÂá∫ÂíåËæìÂÖ•ÂØÑÂ≠òÂô®ÊåâÁªü‰∏ÄÈ°∫Â∫èÁºñÂè∑ÔºåÈ°∫Â∫èÊòØ‰ªéËæìÂá∫ÂØÑÂ≠òÂô®Â∫èÂàó‰ªéÂ∑¶Âà∞Âè≥‰ªé‰∏äÂà∞‰∏ã‰ª•%0ÂºÄÂßãÔºåÂàÜÂà´ËÆ∞‰∏∫%0„ÄÅ%1¬∑¬∑¬∑%9„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåËæìÂá∫ÁöÑeaxÊòØ%0ÔºåËæìÂÖ•ÁöÑexchange_value„ÄÅcompare_value„ÄÅdest„ÄÅmpÂàÜÂà´ÊòØ%1„ÄÅ%2„ÄÅ%3„ÄÅ%4„ÄÇÁÑ∂ÂêéÁúãasmÈáåÁöÑÁ¨¨‰∏ÄË°åÊåá‰ª§Ôºåcmpxchgl %1,(%3)ÔºåÊØîËæÉeax(compare_valueÂú®eax‰∏≠)‰∏édestÁöÑÂÄºÔºåÂ¶ÇÊûúÁõ∏Á≠âÔºåÈÇ£‰πàÂ∞Üexchange_valueÁöÑÂÄºËµãÂÄºÁªôdestÔºõÂê¶ÂàôÔºåÂ∞ÜdestÁöÑÂÄºËµãÂÄºÁªôeax„ÄÇÁÑ∂ÂêéÁúãËæìÂá∫: ‚Äú=a‚Äù (exchange_value) Ë°®Á§∫Êääeax‰∏≠Â≠òÁöÑÂÄº(compare_value)ÂÜôÂÖ•exchange_valueÂèòÈáè‰∏≠„ÄÇ Atomic::cmpxchgËøô‰∏™ÂáΩÊï∞ÊúÄÁªàËøîÂõûÂÄºÊòØexchange_valueÔºå‰πüÂ∞±Êúâ‰∏§ÁßçÊÉÖÂÜµÔºö Â¶ÇÊûúcmpxchglÊâßË°åÊó∂compare_valueÂíådestÊåáÈíàÊåáÂêëÂÜÖÂ≠òÂÄºÁõ∏Á≠âÂàô‰ºö‰ΩøÂæódestÊåáÈíàÊåáÂêëÂÜÖÂ≠òÂÄºÂèòÊàêexchange_valueÔºåÊúÄÁªàeaxÂ≠òÁöÑcompare_valueËµãÂÄºÁªô‰∫Üexchange_valueÂèòÈáèÔºåÂç≥ÂáΩÊï∞ÊúÄÁªàËøîÂõûÁöÑÂÄºÊòØÂéüÂÖàÁöÑcompare_value„ÄÇÊ≠§Êó∂Unsafe_CompareAndSwapIntÁöÑËøîÂõûÂÄº(jint)(Atomic::cmpxchg(x, addr, e)) == eÂ∞±ÊòØtrueÔºåË°®ÊòéCASÊàêÂäü„ÄÇ Â¶ÇÊûúcmpxchglÊâßË°åÊó∂compare_valueÂíå(dest)‰∏çÁ≠âÂàô‰ºöÊääÂΩìÂâçdestÊåáÈíàÊåáÂêëÂÜÖÂ≠òÁöÑÂÄºÂÜôÂÖ•eaxÔºåÊúÄÁªàËæìÂá∫Êó∂ËµãÂÄºÁªôexchange_valueÂèòÈáè‰Ωú‰∏∫ËøîÂõûÂÄºÔºåÂØºËá¥(jint)(Atomic::cmpxchg(x, addr, e)) == eÂæóÂà∞falseÔºåË°®ÊòéCASÂ§±Ë¥•„ÄÇ lockÂâçÁºÄÂú®ÂçïÂ§ÑÁêÜÂô®Á≥ªÁªü‰∏≠ÊòØ‰∏çÈúÄË¶ÅÂä†lockÁöÑÔºåÂõ†‰∏∫ËÉΩÂ§üÂú®ÂçïÊù°Êåá‰ª§‰∏≠ÂÆåÊàêÁöÑÊìç‰ΩúÈÉΩÂèØ‰ª•ËÆ§‰∏∫ÊòØÂéüÂ≠êÊìç‰ΩúÔºå‰∏≠Êñ≠Âè™ËÉΩÂèëÁîüÂú®Êåá‰ª§‰∏éÊåá‰ª§‰πãÈó¥„ÄÇÂú®Â§öÂ§ÑÁêÜÂô®Á≥ªÁªü‰∏≠,Áî±‰∫éÁ≥ªÁªü‰∏≠ÊúâÂ§ö‰∏™Â§ÑÁêÜÂô®Âú®Áã¨Á´ãÁöÑËøêË°åÔºåÂç≥‰ΩøÂú®ËÉΩÂçïÊù°Êåá‰ª§‰∏≠ÂÆåÊàêÁöÑÊìç‰Ωú‰πüÂèØËÉΩÂèóÂà∞Âπ≤Êâ∞„ÄÇ Âú®ÊâÄÊúâÁöÑ X86 CPU ‰∏äÈÉΩÂÖ∑ÊúâÈîÅÂÆö‰∏Ä‰∏™ÁâπÂÆöÂÜÖÂ≠òÂú∞ÂùÄÁöÑËÉΩÂäõÔºåÂΩìËøô‰∏™ÁâπÂÆöÂÜÖÂ≠òÂú∞ÂùÄË¢´ÈîÅÂÆöÂêéÔºåÂÆÉÂ∞±ÂèØ‰ª•ÈòªÊ≠¢ÂÖ∂‰ªñÁöÑÁ≥ªÁªüÊÄªÁ∫øËØªÂèñÊàñ‰øÆÊîπËøô‰∏™ÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇËøôÁßçËÉΩÂäõÊòØÈÄöËøá LOCK Êåá‰ª§ÂâçÁºÄÂÜçÂä†‰∏äÂâçÈù¢ÁöÑÊ±áÁºñÊåá‰ª§Êù•ÂÆûÁé∞ÁöÑ„ÄÇÂΩì‰ΩøÁî® LOCK Êåá‰ª§ÂâçÁºÄÊó∂ÔºåÂÆÉ‰ºö‰Ωø CPU ÂÆ£Âëä‰∏Ä‰∏™ LOCK# ‰ø°Âè∑ÔºåËøôÊ†∑Â∞±ËÉΩÁ°Æ‰øùÂú®Â§öÂ§ÑÁêÜÂô®Á≥ªÁªüÊàñÂ§öÁ∫øÁ®ãÁ´û‰∫âÁöÑÁéØÂ¢É‰∏ã‰∫íÊñ•Âú∞‰ΩøÁî®Ëøô‰∏™ÂÜÖÂ≠òÂú∞ÂùÄ„ÄÇÂΩìÊåá‰ª§ÊâßË°åÂÆåÊØïÔºåËøô‰∏™ÈîÅÂÆöÂä®‰Ωú‰πüÂ∞±‰ºöÊ∂àÂ§±„ÄÇ Áº∫ÁÇπ CPUÂºÄÈîÄËæÉÂ§ßÔºöÂú®Âπ∂ÂèëÈáèÊØîËæÉÈ´òÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ¶ÇÊûúËÆ∏Â§öÁ∫øÁ®ãÂèçÂ§çÂ∞ùËØïÊõ¥Êñ∞Êüê‰∏Ä‰∏™ÂèòÈáèÔºåÂç¥Âèà‰∏ÄÁõ¥Êõ¥Êñ∞‰∏çÊàêÂäüÔºåÂæ™ÁéØÂæÄÂ§çÔºå‰ºöÁªôCPUÂ∏¶Êù•ÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇ ‰∏çËÉΩ‰øùËØÅ‰ª£Á†ÅÂùóÁöÑÂéüÂ≠êÊÄßÔºöCASÊú∫Âà∂ÊâÄ‰øùËØÅÁöÑÂè™ÊòØ‰∏Ä‰∏™ÂèòÈáèÁöÑÂéüÂ≠êÊÄßÊìç‰ΩúÔºåËÄå‰∏çËÉΩ‰øùËØÅÊï¥‰∏™‰ª£Á†ÅÂùóÁöÑÂéüÂ≠êÊÄß„ÄÇÊØîÂ¶ÇÈúÄË¶Å‰øùËØÅÂ§ö‰∏™ÂèòÈáèÂÖ±ÂêåËøõË°åÂéüÂ≠êÊÄßÁöÑÊõ¥Êñ∞ÔºåÂ∞±Âæó‰ΩøÁî®Synchronized‰∫Ü„ÄÇ ABAÈóÆÈ¢òÔºöËøôÊòØCASÊú∫Âà∂ÊúÄÂ§ßÁöÑÈóÆÈ¢òÊâÄÂú®„ÄÇ ABAÈóÆÈ¢òÁ∫øÁ®ã 1 ‰ªéÂÜÖÂ≠ò‰ΩçÁΩÆ V ÂèñÂá∫ AÔºåËøôÊó∂ÂÄôÁ∫øÁ®ã 2 ‰πü‰ªéÂÜÖÂ≠ò‰ΩçÁΩÆ V ÂèñÂá∫ AÔºåÊ≠§Êó∂Á∫øÁ®ã 1 Â§Ñ‰∫éÊåÇËµ∑Áä∂ÊÄÅÔºåÁ∫øÁ®ã 2 Â∞Ü‰ΩçÁΩÆ V ÁöÑÂÄºÊîπÊàê BÔºåÊúÄÂêéÂÜçÊîπÊàê AÔºåËøôÊó∂ÂÄôÁ∫øÁ®ã 1 ÂÜçÊâßË°åÔºåÂèëÁé∞‰ΩçÁΩÆ V ÁöÑÂÄºÊ≤°ÊúâÂèòÂåñÔºåÂ∞ΩÁÆ°Á∫øÁ®ã 1 ‰πüÊõ¥ÊîπÊàêÂäü‰∫ÜÔºå‰ΩÜÂÜÖÂ≠òÂú∞ÂùÄV‰∏≠ÁöÑÂèòÈáèÂ∑≤ÁªèÁªèÂéÜ‰∫ÜA-&gt;B-&gt;AÁöÑÊîπÂèò„ÄÇ ‰∏æ‰∏™‰æãÂ≠êÔºöÂÅáËÆæÊúâ‰∏Ä‰∏™ÈÅµÂæ™CASÂéüÁêÜÁöÑÊèêÊ¨æÊú∫ÔºåÂ∞èÁÅ∞Êúâ100ÂÖÉÂ≠òÊ¨æÔºåË¶ÅÁî®Ëøô‰∏™ÊèêÊ¨æÊú∫Êù•ÊèêÊ¨æ50ÂÖÉ„ÄÇÁî±‰∫éÊèêÊ¨æÊú∫Á°¨‰ª∂Âá∫‰∫ÜÁÇπÂ∞èÈóÆÈ¢òÔºåÂ∞èÁÅ∞ÁöÑÊèêÊ¨æÊìç‰ΩúË¢´ÂêåÊó∂Êèê‰∫§‰∏§Ê¨°ÔºåÂºÄÂêØ‰∫Ü‰∏§‰∏™Á∫øÁ®ãÔºå‰∏§‰∏™Á∫øÁ®ãÈÉΩÊòØËé∑ÂèñÂΩìÂâçÂÄº100ÂÖÉÔºåË¶ÅÊõ¥Êñ∞Êàê50ÂÖÉ„ÄÇÁêÜÊÉ≥ÊÉÖÂÜµ‰∏ãÔºåÂ∫îËØ•‰∏Ä‰∏™Á∫øÁ®ãÊõ¥Êñ∞ÊàêÂäüÔºåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÊõ¥Êñ∞Â§±Ë¥•ÔºåÂ∞èÁÅ∞ÁöÑÂ≠òÊ¨æÂè™Ë¢´Êâ£‰∏ÄÊ¨°„ÄÇÁ∫øÁ®ã1È¶ñÂÖàÊâßË°åÊàêÂäüÔºåÊää‰ΩôÈ¢ù‰ªé100ÊîπÊàê50„ÄÇÁ∫øÁ®ã2Âõ†‰∏∫ÊüêÁßçÂéüÂõ†ÈòªÂ°û‰∫Ü„ÄÇËøôÊó∂ÂÄôÔºåÂ∞èÁÅ∞ÁöÑÂ¶àÂ¶àÂàöÂ•ΩÁªôÂ∞èÁÅ∞Ê±áÊ¨æ50ÂÖÉ„ÄÇÁ∫øÁ®ã2‰ªçÁÑ∂ÊòØÈòªÂ°ûÁä∂ÊÄÅÔºåÁ∫øÁ®ã3ÊâßË°åÊàêÂäüÔºåÊää‰ΩôÈ¢ù‰ªé50ÊîπÊàê100„ÄÇÁ∫øÁ®ã2ÊÅ¢Â§çËøêË°åÔºåÁî±‰∫éÈòªÂ°û‰πãÂâçÂ∑≤ÁªèËé∑Âæó‰∫Ü‚ÄúÂΩìÂâçÂÄº‚Äù100ÔºåÂπ∂‰∏îÁªèËøácompareÊ£ÄÊµãÔºåÊ≠§Êó∂Â≠òÊ¨æÂÆûÈôÖÂÄº‰πüÊòØ100ÔºåÊâÄ‰ª•ÊàêÂäüÊääÂèòÈáèÂÄº100Êõ¥Êñ∞Êàê‰∫Ü50„ÄÇÂ∞èÁÅ∞Âá≠Á©∫Â∞ë‰∫Ü50ÂÖÉÈí±„ÄÇ ÊâÄ‰ª•ÁúüÊ≠£Ë¶ÅÂÅöÂà∞‰∏•Ë∞®ÁöÑCASÊú∫Âà∂ÔºåÊàë‰ª¨Âú®CompareÈò∂ÊÆµ‰∏ç‰ªÖË¶ÅÊØîËæÉÊúüÊúõÂÄºAÂíåÂú∞ÂùÄV‰∏≠ÁöÑÂÆûÈôÖÂÄºÔºåËøòË¶ÅÊØîËæÉÂèòÈáèÁöÑÁâàÊú¨Âè∑ÊòØÂê¶‰∏ÄËá¥„ÄÇÂú®JavaÂΩì‰∏≠ÔºåAtomicStampedReferenceÁ±ªÂ∞±ÂÆûÁé∞‰∫ÜÁî®ÁâàÊú¨Âè∑ÂÅöÊØîËæÉÁöÑCASÊú∫Âà∂„ÄÇ 1234567891011private static class Pair&lt;T&gt; &#123; final T reference; final int stamp; private Pair(T reference, int stamp) &#123; this.reference = reference; this.stamp = stamp; &#125; static &lt;T&gt; Pair&lt;T&gt; of(T reference, int stamp) &#123; return new Pair&lt;T&gt;(reference, stamp); &#125;&#125; AtomicStampedReference ÁöÑÂÜÖÈÉ®Á±ª Pair, reference Áª¥Êä§ÂØπË±°ÁöÑÂºïÁî®Ôºåstamp Áª¥Êä§‰øÆÊîπÁöÑÁâàÊú¨Âè∑„ÄÇ 123456789101112public boolean compareAndSet(V expectedReference, V newReference, int expectedStamp, int newStamp) &#123; Pair&lt;V&gt; current = pair; return expectedReference == current.reference &amp;&amp; expectedStamp == current.stamp &amp;&amp; ((newReference == current.reference &amp;&amp; newStamp == current.stamp) || casPair(current, Pair.of(newReference, newStamp)));&#125; ‰ªé compareAndSet ÊñπÊ≥ïÂæóÁü•ÔºåÂ¶ÇÊûúË¶ÅÊõ¥ÊîπÂÜÖÂ≠ò‰∏≠ÁöÑÂÄºÔºå‰∏ç‰ΩÜË¶ÅÂÄºÁõ∏ÂêåÔºåËøòË¶ÅÁâàÊú¨Âè∑Áõ∏Âêå„ÄÇ ÂèÇËÄÉ https://www.jianshu.com/p/0e312402f6ca https://blog.csdn.net/dlh0313/article/details/52172833 https://www.cnblogs.com/noKing/p/9094983.html https://www.jianshu.com/p/fb6e91b013cc https://objcoding.com/2018/11/29/cas/ https://mp.weixin.qq.com/s/nRnQKhiSUrDKu3mz3vItWg]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>CAS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JAVA-Á∫øÁ®ãÊ±†]]></title>
    <url>%2FJAVA%2FJava-ThreadPool%2F</url>
    <content type="text"><![CDATA[Á∫øÁ®ãÊ¶ÇÂøµÊìç‰ΩúÁ≥ªÁªüË∞ÉÂ∫¶ÁöÑÊúÄÂ∞èÂçïÂÖÉÊòØÁ∫øÁ®ãÔºå‰πüÂè´ËΩªÈáèÁ∫ßËøõÁ®ãÔºàLight Weight ProcessÔºâÔºåÂú®‰∏Ä‰∏™ËøõÁ®ãÈáåÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™Á∫øÁ®ãÔºå Ëøô‰∫õÁ∫øÁ®ãÈÉΩÊã•ÊúâÂêÑËá™ÁöÑËÆ°Êï∞Âô®„ÄÅ Â†ÜÊ†àÂíåÂ±ÄÈÉ®ÂèòÈáèÁ≠âÂ±ûÊÄßÔºå Âπ∂‰∏îËÉΩÂ§üËÆøÈóÆÂÖ±‰∫´ÁöÑÂÜÖÂ≠òÂèòÈáè„ÄÇ Â§ÑÁêÜÂô®Âú®Ëøô‰∫õÁ∫øÁ®ã‰∏äÈ´òÈÄüÂàáÊç¢Ôºå ËÆ©‰ΩøÁî®ËÄÖÊÑüËßâÂà∞Ëøô‰∫õÁ∫øÁ®ãÂú®ÂêåÊó∂ÊâßË°å„ÄÇ Á∫øÁ®ãÁöÑÂàõÂª∫ ÈÄöËøáÁªßÊâøThreadÁ±ªÊù•ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ã ÂÆûÁé∞RunnableÊé•Âè£Âπ∂ÈáçÂÜôrun()ÊñπÊ≥ïÔºånew Thread(runnable).start()ÔºåÁ∫øÁ®ãÂêØÂä®Êó∂Â∞±‰ºöËá™Âä®Ë∞ÉÁî®ËØ•ÂØπË±°ÁöÑrunÊñπÊ≥ï ÂÆûÁé∞CallableÊé•Âè£Âπ∂ÂÆûÁé∞call()ÊñπÊ≥ïÔºå‰ΩøÁî®FutureTaskÁ±ªÂåÖË£ÖCallableÂØπË±°Ôºå‰ΩøÁî®FutureTaskÂØπË±°‰Ωú‰∏∫ThreadÂØπË±°ÁöÑtargerÂàõÂª∫Âπ∂ÂêØÂä®Á∫øÁ®ãÔºõ‰πüÂèØ‰ª•‰ΩøÁî®Á∫øÁ®ãÊ±†ÂêØÂä®Runnable Âíå Callable ÁöÑÂå∫Âà´ 1. RunnableËßÑÂÆöÊñπÊ≥ïÊòØrunÊñπÊ≥ïÔºåCallableËßÑÂÆöÊñπÊ≥ïÊòØcallÊñπÊ≥ï 2. Runnable‰ªªÂä°ÊâßË°åÂêéÊó†ËøîÂõûÂÄºÔºåCallable‰ªªÂä°ÊâßË°åÂêéÂèØËøîÂõûÂÄº 3. runÊñπÊ≥ïÊó†Ê≥ïÊäõÂá∫ÂºÇÂ∏∏ÔºåcallÊñπÊ≥ïÂèØ‰ª•ÊäõÂá∫ÂºÇÂ∏∏ 4. ËøêË°åCallable‰ªªÂä°ÂèØ‰ª•ÊãøÂà∞‰∏Ä‰∏™FutureÂØπË±°ÔºåFutureË°®Á§∫ÂºÇÊ≠•ËÆ°ÁÆóÁªìÊûúÔºå‰ªñÊèê‰æõ‰∫ÜÊ£ÄÊü•ËÆ°ÁÆóÊòØÂê¶ÂÆåÊàêÁöÑÊñπÊ≥ïÔºå‰ª•Á≠âÂæÖËÆ°ÁÆóÂÆåÊàêÂπ∂Ëé∑ÂèñÁªìÊûú„ÄÇËÆ°ÁÆóÂÆåÊàêÂêéÁî®get()ÊñπÊ≥ïËé∑ÂèñÁªìÊûúÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊ≤°ÊúâÊâßË°åÂÆåÔºåget()ÊñπÊ≥ï‰ºöÈòªÂ°ûÂΩìÂâçÁ∫øÁ®ãÊâßË°å„ÄÇÂ¶ÇÊûúÁ∫øÁ®ãÂá∫Áé∞ÂºÇÂ∏∏Ôºåget()ÊñπÊ≥ï‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇ Á∫øÁ®ãÊ±†ÔºöExecutorsÁ±ªÊèê‰æõ‰∫ÜÊñπ‰æøÁöÑÂ∑•ÂéÇÊñπÊ≥ïÊù•ÂàõÂª∫‰∏çÂêåÁ±ªÂûãÁöÑ executor services„ÄÇÊó†ËÆ∫RunnableËøòÊòØCallableÈÉΩÂèØ‰ª•Ë¢´ThreadPoolExecutorÊàñScheduledThreadPoolExecutorÊâßË°å1. public static ExecutorService newCachedThreadPool() ÂàõÂª∫‰∏Ä‰∏™ÂèØÁºìÂ≠òÁ∫øÁ®ãÊ±†ÔºåÂ¶ÇÊûúÁ∫øÁ®ãÊ±†ÈïøÂ∫¶Ë∂ÖËøáÂ§ÑÁêÜÈúÄË¶ÅÔºåÂèØÁÅµÊ¥ªÂõûÊî∂Á©∫Èó≤Á∫øÁ®ãÔºåËã•Êó†ÂèØÂõûÊî∂ÔºåÂàôÊñ∞Âª∫Á∫øÁ®ãÔºå‰ΩÜÊòØÂú®‰πãÂâçÊûÑÈÄ†ÁöÑÁ∫øÁ®ãÂèØÁî®Êó∂Â∞ÜÈáçÁî®ÂÆÉ‰ª¨„ÄÇ 2. public static ExecutorService newFixedThreadPool(int nThreads) ÂàõÂª∫‰∏Ä‰∏™ÂÆöÈïøÁ∫øÁ®ãÊ±†ÔºåÂèØÊéßÂà∂Á∫øÁ®ãÊúÄÂ§ßÂπ∂ÂèëÊï∞Ôºå‰ª•ÂÖ±‰∫´ÁöÑÊó†ÁïåÈòüÂàóÊñπÂºèÊù•ËøêË°åÁ∫øÁ®ãÔºåË∂ÖÂá∫ÁöÑÁ∫øÁ®ã‰ºöÂú®ÈòüÂàó‰∏≠Á≠âÂæÖ„ÄÇ 3. public static ExecutorService newSingleThreadExecutor() ÂàõÂª∫‰∏Ä‰∏™ÂçïÁ∫øÁ®ãÂåñÁöÑÁ∫øÁ®ãÊ±†ÔºåÂÆÉÂè™‰ºöÁî®ÂîØ‰∏ÄÁöÑÂ∑•‰ΩúÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºå‰ª•Êó†ÁïåÈòüÂàóÊñπÂºèÊù•ËøêË°åÁ∫øÁ®ãÔºå‰øùËØÅÊâÄÊúâ‰ªªÂä°ÊåâÁÖßÊåáÂÆöÈ°∫Â∫è(FIFO, LIFO, ‰ºòÂÖàÁ∫ß)ÊâßË°å„ÄÇ 4. public static ScheduledExecutorService newScheduledThreadPool(int corePoolSize) ÂàõÂª∫‰∏Ä‰∏™Âë®ÊúüÁ∫øÁ®ãÊ±†ÔºåÊîØÊåÅÂÆöÊó∂ÂèäÂë®ÊúüÊÄß‰ªªÂä°ÊâßË°å„ÄÇ 5. public static ExecutorService newWorkStealingPool() ÂàõÂª∫ÊåÅÊúâË∂≥Â§üÁ∫øÁ®ãÁöÑÁ∫øÁ®ãÊ±†Êù•ÊîØÊåÅÁªôÂÆöÁöÑÂπ∂Ë°åÁ∫ßÂà´ÔºåÂπ∂ÈÄöËøá‰ΩøÁî®Â§ö‰∏™ÈòüÂàóÔºåÂáèÂ∞ëÁ´û‰∫âÔºåÂÆÉÈúÄË¶ÅÁ©ø‰∏Ä‰∏™Âπ∂Ë°åÁ∫ßÂà´ÁöÑÂèÇÊï∞ÔºåÂ¶ÇÊûú‰∏ç‰º†ÔºåÂàôË¢´ËÆæÂÆö‰∏∫ÈªòËÆ§ÁöÑCPUÊï∞ÈáèÔºåËøô‰∏™Á∫øÁ®ãÊ±†ÂÆûÈôÖ‰∏äÊòØForkJoinPoolÁöÑÊâ©Â±ïÔºåÈÄÇÂêà‰ΩøÁî®Âú®ÂæàËÄóÊó∂ÁöÑ‰ªªÂä°‰∏≠ÔºåËÉΩÂ§üÂêàÁêÜÁöÑ‰ΩøÁî®CPUËøõË°åÂπ∂Ë°åÊìç‰Ωú„ÄÇ Á∫øÁ®ãÁöÑÁÆ°ÁêÜ ForkJoinPool ÁöÑÊØè‰∏™Â∑•‰ΩúÁ∫øÁ®ãÈÉΩÁª¥Êä§‰∫Ü‰∏Ä‰∏™Â∑•‰ΩúÈòüÂàó(WorkQueue)ÔºåËøôÊòØ‰∏Ä‰∏™ÂèåÁ´ØÈòüÂàóÔºåÈáåÈù¢Â≠òÊîæÁöÑÂØπË±°ÊòØ‰ªªÂä°(ForkJoinTask) ÊØè‰∏™Â∑•‰ΩúÁ∫øÁ®ãÂú®ËøêË°å‰∏≠‰∫ßÁîüÊñ∞ÁöÑ‰ªªÂä°(ÈÄöÂ∏∏ÊòØÂõ†‰∏∫Ë∞ÉÁî®‰∫Üfork())Ôºå‰ºöÊîæÂÖ•Â∑•‰ΩúÈòüÂàóÁöÑÈòüÂ∞æÔºåÂπ∂‰∏îÂ∑•‰ΩúÁ∫øÁ®ãÂú®Â§ÑÁêÜËá™Â∑±ÁöÑÂ∑•‰ΩúÈòüÂàóÊó∂Ôºå‰ΩøÁî®ÁöÑÊòØLIFOÊñπÂºèÔºå‰πüÂ∞±ÊòØÊØèÊ¨°‰ªéÈòüÂ∞æÂèñ‰ªªÂä°ÊâßË°å„ÄÇ ÊØè‰∏™Â∑•‰ΩúÁ∫øÁ®ãÂú®Â§ÑÁêÜËá™Â∑±ÁöÑÂ∑•‰ΩúÈòüÂàóÊó∂Ôºå‰ºöÂ∞ùËØïÁ™ÉÂèñ‰∏Ä‰∏™‰ªªÂä°(ÊàñÊòØÊù•Ëá™ÂàöÂàöÊèê‰∫§Âà∞poolÁöÑ‰ªªÂä°ÔºåÊàñÊòØÊù•Ëá™ÂÖ∂‰ªñÁöÑÂ∑•‰ΩúÈòüÂàó)ÔºåÁ™ÉÂèñÁöÑ‰ªªÂä°‰Ωç‰∫éÂÖ∂‰ªñÁ∫øÁ®ãÂ∑•‰ΩúÈòüÂàóÁöÑÈòüÈ¶ñÔºå‰πüÂ∞±ÊòØ‰ΩøÁî®FIFOÊñπÂºè„ÄÇ Âú®ÈÅáÂà∞join()Êó∂Â¶ÇÊûújoinÁöÑ‰ªªÂä°Â∞öÊú™ÂÆåÊàêÔºåÂàô‰ºöÂÖàÂ§ÑÁêÜÂÖ∂‰ªñ‰ªªÂä°ÔºåÂπ∂Á≠âÂæÖÂÖ∂ÂÆåÊàê„ÄÇ ExecutorCompletionService ÂÜÖÈÉ®Áª¥Êä§‰∫Ü‰∏Ä‰∏™ÈòªÂ°ûÈòüÂàó(BlockingQueue), Âè™ÊúâÂÆåÊàêÁöÑ‰ªªÂä°ÊâçË¢´Âä†ÂÖ•Âà∞ÈòüÂàó‰∏≠„ÄÇÂ¶ÇÊûúÈòüÂàó‰∏≠ÁöÑÊï∞ÊçÆ‰∏∫Á©∫Êó∂, Ë∞ÉÁî®take()Â∞±‰ºöÈòªÂ°ûÁõ¥Âà∞ÊúâÂÆåÊàêÁöÑ‰ªªÂä°Âä†ÂÖ•ÈòüÂàóÔºåÂü∫‰∫éFutureTaskÂÆûÁé∞„ÄÇ Á∫øÁ®ãÊ±†ÂéüÁêÜThreadPoolExecutor123456789101112131415161718192021222324public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue&lt;Runnable&gt; workQueue, ThreadFactory threadFactory, RejectedExecutionHandler handler) &#123; if (corePoolSize &lt; 0 || maximumPoolSize &lt;= 0 || maximumPoolSize &lt; corePoolSize || keepAliveTime &lt; 0) throw new IllegalArgumentException(); if (workQueue == null || threadFactory == null || handler == null) throw new NullPointerException(); this.acc = System.getSecurityManager() == null ? null : AccessController.getContext(); this.corePoolSize = corePoolSize; this.maximumPoolSize = maximumPoolSize; this.workQueue = workQueue; this.keepAliveTime = unit.toNanos(keepAliveTime); this.threadFactory = threadFactory; this.handler = handler;&#125; corePoolSize Ê†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÔºåÂΩìÊúâÊñ∞‰ªªÂä°Âú®exectue()ÊñπÊ≥ïÊèê‰∫§Êó∂Ôºå‰ºöÊâßË°å‰ª•‰∏ãÂà§Êñ≠Ôºö1. Â¶ÇÊûúËøêË°åÁöÑÁ∫øÁ®ãÂ∞ë‰∫é corePoolSizeÔºåÂàôÂàõÂª∫Êñ∞Á∫øÁ®ãÊù•Â§ÑÁêÜ‰ªªÂä°ÔºåÂç≥‰ΩøÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÂÖ∂‰ªñÁ∫øÁ®ãÊòØÁ©∫Èó≤ÁöÑÔºõ 2. Â¶ÇÊûúÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫é corePoolSize ‰∏îÂ∞è‰∫é maximumPoolSizeÔºåÂàôÂè™ÊúâÂΩìworkQueueÊª°Êó∂ÊâçÂàõÂª∫Êñ∞ÁöÑÁ∫øÁ®ãÂéªÂ§ÑÁêÜ‰ªªÂä°Ôºõ 3. Â¶ÇÊûúËÆæÁΩÆÁöÑcorePoolSize Âíå maximumPoolSizeÁõ∏ÂêåÔºåÂàôÂàõÂª∫ÁöÑÁ∫øÁ®ãÊ±†ÁöÑÂ§ßÂ∞èÊòØÂõ∫ÂÆöÁöÑÔºåËøôÊó∂Â¶ÇÊûúÊúâÊñ∞‰ªªÂä°Êèê‰∫§ÔºåËã•workQueueÊú™Êª°ÔºåÂàôÂ∞ÜËØ∑Ê±ÇÊîæÂÖ•workQueue‰∏≠ÔºåÁ≠âÂæÖÊúâÁ©∫Èó≤ÁöÑÁ∫øÁ®ãÂéª‰ªéworkQueue‰∏≠Âèñ‰ªªÂä°Âπ∂Â§ÑÁêÜÔºõ 4. Â¶ÇÊûúËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÁ≠â‰∫émaximumPoolSizeÔºåËøôÊó∂Â¶ÇÊûúworkQueueÂ∑≤ÁªèÊª°‰∫ÜÔºåÂàôÈÄöËøáhandlerÊâÄÊåáÂÆöÁöÑÁ≠ñÁï•Êù•Â§ÑÁêÜ‰ªªÂä°Ôºõ 5. ÊâÄ‰ª•Ôºå‰ªªÂä°Êèê‰∫§Êó∂ÔºåÂà§Êñ≠ÁöÑÈ°∫Â∫è‰∏∫ corePoolSize ‚Äì&gt; workQueue ‚Äì&gt; maximumPoolSize maximumPoolSize ÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÔºõ keepAliveTime Á∫øÁ®ãÊ±†Áª¥Êä§Á∫øÁ®ãÊâÄÂÖÅËÆ∏ÁöÑÁ©∫Èó≤Êó∂Èó¥„ÄÇÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫écorePoolSizeÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúËøôÊó∂Ê≤°ÊúâÊñ∞ÁöÑ‰ªªÂä°Êèê‰∫§ÔºåÊ†∏ÂøÉÁ∫øÁ®ãÂ§ñÁöÑÁ∫øÁ®ã‰∏ç‰ºöÁ´ãÂç≥ÈîÄÊØÅÔºåËÄåÊòØ‰ºöÁ≠âÂæÖÔºåÁõ¥Âà∞Á≠âÂæÖÁöÑÊó∂Èó¥Ë∂ÖËøá‰∫ÜkeepAliveTimeÔºõ workQueue ‰øùÂ≠òÁ≠âÂæÖÊâßË°åÁöÑ‰ªªÂä°ÁöÑÈòªÂ°ûÈòüÂàóÔºåÂΩìÊèê‰∫§‰∏Ä‰∏™Êñ∞ÁöÑ‰ªªÂä°Âà∞Á∫øÁ®ãÊ±†‰ª•Âêé, Á∫øÁ®ãÊ±†‰ºöÊ†πÊçÆÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠Ê≠£Âú®ËøêË°åÁùÄÁöÑÁ∫øÁ®ãÁöÑÊï∞ÈáèÊù•ÂÜ≥ÂÆöÂØπËØ•‰ªªÂä°ÁöÑÂ§ÑÁêÜÊñπÂºèÔºå‰∏ªË¶ÅÊúâ‰ª•‰∏ãÂá†ÁßçÂ§ÑÁêÜÊñπÂºè: Áõ¥Êé•ÂàáÊç¢ÔºöËøôÁßçÊñπÂºèÂ∏∏Áî®ÁöÑÈòüÂàóÊòØSynchronousQueue ‰ΩøÁî®Êó†ÁïåÈòüÂàóÔºö‰∏ÄËà¨‰ΩøÁî®Âü∫‰∫éÈìæË°®ÁöÑÈòªÂ°ûÈòüÂàóLinkedBlockingQueue„ÄÇÂ¶ÇÊûú‰ΩøÁî®ËøôÁßçÊñπÂºèÔºåÈÇ£‰πàÁ∫øÁ®ãÊ±†‰∏≠ËÉΩÂ§üÂàõÂª∫ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞Â∞±ÊòØcorePoolSizeÔºåËÄåmaximumPoolSizeÂ∞±‰∏ç‰ºöËµ∑‰ΩúÁî®‰∫Ü„ÄÇÂΩìÁ∫øÁ®ãÊ±†‰∏≠ÊâÄÊúâÁöÑÊ†∏ÂøÉÁ∫øÁ®ãÈÉΩÊòØRUNNINGÁä∂ÊÄÅÊó∂ÔºåËøôÊó∂‰∏Ä‰∏™Êñ∞ÁöÑ‰ªªÂä°Êèê‰∫§Â∞±‰ºöÊîæÂÖ•Á≠âÂæÖÈòüÂàó‰∏≠„ÄÇ ‰ΩøÁî®ÊúâÁïåÈòüÂàóÔºö‰∏ÄËà¨‰ΩøÁî®ArrayBlockingQueue„ÄÇ‰ΩøÁî®ËØ•ÊñπÂºèÂèØ‰ª•Â∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÈáèÈôêÂà∂‰∏∫maximumPoolSizeÔºåËøôÊ†∑ËÉΩÂ§üÈôç‰ΩéËµÑÊ∫êÁöÑÊ∂àËÄóÔºå‰ΩÜÂêåÊó∂ËøôÁßçÊñπÂºè‰πü‰ΩøÂæóÁ∫øÁ®ãÊ±†ÂØπÁ∫øÁ®ãÁöÑË∞ÉÂ∫¶ÂèòÂæóÊõ¥Âõ∞ÈöæÔºåÂõ†‰∏∫Á∫øÁ®ãÊ±†ÂíåÈòüÂàóÁöÑÂÆπÈáèÈÉΩÊòØÊúâÈôêÁöÑÂÄºÔºåÊâÄ‰ª•Ë¶ÅÊÉ≥‰ΩøÁ∫øÁ®ãÊ±†Â§ÑÁêÜ‰ªªÂä°ÁöÑÂêûÂêêÁéáËææÂà∞‰∏Ä‰∏™Áõ∏ÂØπÂêàÁêÜÁöÑËåÉÂõ¥ÔºåÂèàÊÉ≥‰ΩøÁ∫øÁ®ãË∞ÉÂ∫¶Áõ∏ÂØπÁÆÄÂçïÔºåÂπ∂‰∏îËøòË¶ÅÂ∞ΩÂèØËÉΩÁöÑÈôç‰ΩéÁ∫øÁ®ãÊ±†ÂØπËµÑÊ∫êÁöÑÊ∂àËÄóÔºåÂ∞±ÈúÄË¶ÅÂêàÁêÜÁöÑËÆæÁΩÆËøô‰∏§‰∏™Êï∞Èáè„ÄÇ threadFactory ÂÆÉÊòØThreadFactoryÁ±ªÂûãÁöÑÂèòÈáèÔºåÁî®Êù•ÂàõÂª∫Êñ∞Á∫øÁ®ã„ÄÇÈªòËÆ§‰ΩøÁî®Executors.defaultThreadFactory() Êù•ÂàõÂª∫Á∫øÁ®ã„ÄÇ‰ΩøÁî®ÈªòËÆ§ÁöÑThreadFactoryÊù•ÂàõÂª∫Á∫øÁ®ãÊó∂Ôºå‰ºö‰ΩøÊñ∞ÂàõÂª∫ÁöÑÁ∫øÁ®ãÂÖ∑ÊúâÁõ∏ÂêåÁöÑNORM_PRIORITY‰ºòÂÖàÁ∫ßÂπ∂‰∏îÊòØÈùûÂÆàÊä§Á∫øÁ®ãÔºåÂêåÊó∂‰πüËÆæÁΩÆ‰∫ÜÁ∫øÁ®ãÁöÑÂêçÁß∞„ÄÇ handler ÂÆÉÊòØRejectedExecutionHandlerÁ±ªÂûãÁöÑÂèòÈáèÔºåË°®Á§∫Á∫øÁ®ãÊ±†ÁöÑÈ•±ÂíåÁ≠ñÁï•„ÄÇÂ¶ÇÊûúÈòªÂ°ûÈòüÂàóÊª°‰∫ÜÂπ∂‰∏îÊ≤°ÊúâÁ©∫Èó≤ÁöÑÁ∫øÁ®ãÔºåËøôÊó∂Â¶ÇÊûúÁªßÁª≠Êèê‰∫§‰ªªÂä°ÔºåÂ∞±ÈúÄË¶ÅÈááÂèñ‰∏ÄÁßçÁ≠ñÁï•Â§ÑÁêÜËØ•‰ªªÂä°„ÄÇÁ∫øÁ®ãÊ±†Êèê‰æõ‰∫Ü4ÁßçÁ≠ñÁï•Ôºö AbortPolicyÔºöÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏ÔºåËøôÊòØÈªòËÆ§Á≠ñÁï•Ôºõ CallerRunsPolicyÔºöÁî®Ë∞ÉÁî®ËÄÖÊâÄÂú®ÁöÑÁ∫øÁ®ãÊù•ÊâßË°å‰ªªÂä°Ôºõ DiscardOldestPolicyÔºö‰∏¢ÂºÉÈòªÂ°ûÈòüÂàó‰∏≠Èù†ÊúÄÂâçÁöÑ‰ªªÂä°ÔºåÂπ∂ÊâßË°åÂΩìÂâç‰ªªÂä°Ôºõ DiscardPolicyÔºöÁõ¥Êé•‰∏¢ÂºÉ‰ªªÂä°Ôºõ Ê†∏ÂøÉÊ∫êÁ†ÅÁ∫øÁ®ãÊ±†ÊâßË°åÊ∫êÁ†Åexecute123456789101112131415161718192021222324252627282930313233343536373839404142434445464748public void execute(Runnable command) &#123; if (command == null) throw new NullPointerException(); // cltËÆ∞ÂΩïÁùÄrunStateÂíåworkerCount int c = ctl.get(); // workerCountOfÊñπÊ≥ïÂèñÂá∫‰Ωé29‰ΩçÁöÑÂÄºÔºåË°®Á§∫ÂΩìÂâçÊ¥ªÂä®ÁöÑÁ∫øÁ®ãÊï∞Ôºõ // Â¶ÇÊûúÂΩìÂâçÊ¥ªÂä®Á∫øÁ®ãÊï∞Â∞è‰∫écorePoolSizeÔºåÂàôÊñ∞Âª∫‰∏Ä‰∏™Á∫øÁ®ãÊîæÂÖ•Á∫øÁ®ãÊ±†‰∏≠ÔºåÂπ∂Êää‰ªªÂä°Ê∑ªÂä†Âà∞ËØ•Á∫øÁ®ã‰∏≠Ôºõ if (workerCountOf(c) &lt; corePoolSize) &#123; // addWorker‰∏≠ÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞Ë°®Á§∫ÈôêÂà∂Ê∑ªÂä†Á∫øÁ®ãÁöÑÊï∞ÈáèÊòØÊ†πÊçÆcorePoolSizeÊù•Âà§Êñ≠ËøòÊòØmaximumPoolSizeÊù•Âà§Êñ≠Ôºõ // Â¶ÇÊûú‰∏∫trueÔºåÊ†πÊçÆcorePoolSizeÊù•Âà§Êñ≠Ôºõ // Â¶ÇÊûú‰∏∫falseÔºåÂàôÊ†πÊçÆmaximumPoolSizeÊù•Âà§Êñ≠ if (addWorker(command, true)) return; // Â¶ÇÊûúÊ∑ªÂä†Â§±Ë¥•ÔºåÂàôÈáçÊñ∞Ëé∑ÂèñctlÂÄº c = ctl.get(); &#125; // Â¶ÇÊûúÂΩìÂâçÁ∫øÁ®ãÊ±†ÊòØËøêË°åÁä∂ÊÄÅ Âπ∂‰∏î ‰ªªÂä°ËÉΩÂ§üÊàêÂäüÊ∑ªÂä†Âà∞Â∑•‰ΩúÈòüÂàó if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123; // ÈáçÊñ∞Ëé∑ÂèñctlÂÄº int recheck = ctl.get(); // ÂÜçÊ¨°Âà§Êñ≠Á∫øÁ®ãÊ±†ÁöÑËøêË°åÁä∂ÊÄÅÔºåÂ¶ÇÊûú‰∏çÊòØËøêË°åÁä∂ÊÄÅÔºåÁî±‰∫é‰πãÂâçÂ∑≤ÁªèÊääcommandÊ∑ªÂä†Âà∞workQueue‰∏≠‰∫ÜÔºå // ËøôÊó∂ÈúÄË¶ÅÁßªÈô§ËØ•command // ÊâßË°åËøáÂêéÈÄöËøáhandler‰ΩøÁî®ÊãíÁªùÁ≠ñÁï•ÂØπËØ•‰ªªÂä°ËøõË°åÂ§ÑÁêÜÔºåÊï¥‰∏™ÊñπÊ≥ïËøîÂõû if (! isRunning(recheck) &amp;&amp; remove(command)) reject(command); // Ëé∑ÂèñÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÊúâÊïàÁ∫øÁ®ãÊï∞ÔºåÂ¶ÇÊûúÊï∞ÈáèÊòØ0ÔºåÂàôÊâßË°åaddWorkerÊñπÊ≥ï // 1. Á¨¨‰∏Ä‰∏™ÂèÇÊï∞‰∏∫nullÔºåË°®Á§∫Âú®Á∫øÁ®ãÊ±†‰∏≠ÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ãÔºå‰ΩÜ‰∏çÂéªÂêØÂä®Ôºõ // 2. Á¨¨‰∫å‰∏™ÂèÇÊï∞‰∏∫falseÔºåÂ∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúâÈôêÁ∫øÁ®ãÊï∞ÈáèÁöÑ‰∏äÈôêËÆæÁΩÆ‰∏∫maximumPoolSizeÔºåÊ∑ªÂä†Á∫øÁ®ãÊó∂Ê†πÊçÆmaximumPoolSizeÊù•Âà§Êñ≠Ôºõ // Â¶ÇÊûúÂà§Êñ≠workerCountÂ§ß‰∫é0ÔºåÂàôÁõ¥Êé•ËøîÂõûÔºåÂú®workQueue‰∏≠Êñ∞Â¢ûÁöÑcommand‰ºöÂú®Â∞ÜÊù•ÁöÑÊüê‰∏™Êó∂ÂàªË¢´ÊâßË°å„ÄÇ else if (workerCountOf(recheck) == 0) addWorker(null, false); &#125; // Â¶ÇÊûúÊâßË°åÂà∞ËøôÈáåÔºåÊúâ‰∏§ÁßçÊÉÖÂÜµÔºö // 1.Á∫øÁ®ãÊ±†Â∑≤Áªè‰∏çÊòØRUNNINGÁä∂ÊÄÅÔºõ // 2.Á∫øÁ®ãÊ±†ÊòØRUNNINGÁä∂ÊÄÅÔºå‰ΩÜworkerCount &gt;= corePoolSizeÂπ∂‰∏îworkQueueÂ∑≤Êª°; // ËøôÊó∂ÔºåÂÜçÊ¨°Ë∞ÉÁî®addWorkerÊñπÊ≥ïÔºå‰ΩÜÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰º†ÂÖ•‰∏∫falseÔºåÂ∞ÜÁ∫øÁ®ãÊ±†ÁöÑÊúâÈôêÁ∫øÁ®ãÊï∞ÈáèÁöÑ‰∏äÈôêËÆæÁΩÆ‰∏∫maximumPoolSizeÔºõ // Â¶ÇÊûúÂ§±Ë¥•ÂàôÊãíÁªùËØ•‰ªªÂä° else if (!addWorker(command, false)) reject(command);&#125; runStateÂíåworkCountÂèòÈáèÊÄé‰πàÂ≠òÂÇ®Âú®‰∏Ä‰∏™int‰∏≠ÔºüÂèÇËÄÉÔºöhttps://blog.csdn.net/weixin_34396902/article/details/94527424 addWorker123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105private boolean addWorker(Runnable firstTask, boolean core) &#123; // Âæ™ÁéØCASÊìç‰ΩúÔºåÂ∞ÜÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞+1 retry: for (;;) &#123; // cltËÆ∞ÂΩïÁùÄrunStateÂíåworkerCount int c = ctl.get(); // Ëé∑ÂèñËøêË°åÁä∂ÊÄÅ int rs = runStateOf(c); // Â¶ÇÊûúrs &gt;= SHUTDOWNÔºåÂàôË°®Á§∫Ê≠§Êó∂‰∏çÂÜçÊé•Êî∂Êñ∞‰ªªÂä°Ôºõ // Êé•ÁùÄÂà§Êñ≠‰ª•‰∏ã3‰∏™Êù°‰ª∂ÔºåÂè™Ë¶ÅÊúâ1‰∏™‰∏çÊª°Ë∂≥ÔºåÂàôËøîÂõûfalseÔºö // 1. rs == SHUTDOWNÔºåËøôÊó∂Ë°®Á§∫ÂÖ≥Èó≠Áä∂ÊÄÅÔºå‰∏çÂÜçÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°Ôºå‰ΩÜÂç¥ÂèØ‰ª•ÁªßÁª≠Â§ÑÁêÜÈòªÂ°ûÈòüÂàó‰∏≠Â∑≤‰øùÂ≠òÁöÑ‰ªªÂä° // 2. firsTask‰∏∫Á©∫ // 3. ÈòªÂ°ûÈòüÂàó‰∏ç‰∏∫Á©∫ // // rs == SHUTDOWNÁöÑÊÉÖÂÜµ // ËøôÁßçÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÊé•ÂèóÊñ∞Êèê‰∫§ÁöÑ‰ªªÂä°ÔºåÊâÄ‰ª•Âú®firstTask‰∏ç‰∏∫Á©∫ÁöÑÊó∂ÂÄô‰ºöËøîÂõûfalseÔºõ // Â¶ÇÊûúfirstTask‰∏∫Á©∫ÔºåÂπ∂‰∏îworkQueue‰πü‰∏∫Á©∫ÔºåÂõ†‰∏∫ÈòüÂàó‰∏≠Â∑≤ÁªèÊ≤°Êúâ‰ªªÂä°‰∫ÜÔºå‰∏çÈúÄË¶ÅÂÜçÊ∑ªÂä†Á∫øÁ®ã‰∫ÜÔºåÂàôËøîÂõûfalseÔºå if (rs &gt;= SHUTDOWN &amp;&amp; ! (rs == SHUTDOWN &amp;&amp; firstTask == null &amp;&amp; ! workQueue.isEmpty())) return false; for (;;) &#123; // Ëé∑ÂèñÁ∫øÁ®ãÊï∞ int wc = workerCountOf(c); // Â¶ÇÊûúwcË∂ÖËøáCAPACITY(ÊúÄÂ§ßÁ∫øÁ®ãÊï∞Á∫øÁ®ãÊï∞),‰πüÂ∞±ÊòØctlÁöÑ‰Ωé29‰ΩçÁöÑÊúÄÂ§ßÂÄºÔºà‰∫åËøõÂà∂ÊòØ29‰∏™1ÔºâÔºåËøîÂõûfalseÔºõ // coreÊòØaddWorkerÊñπÊ≥ïÁöÑÁ¨¨‰∫å‰∏™ÂèÇÊï∞,Â¶ÇÊûú‰∏∫trueË°®Á§∫Ê†πÊçÆcorePoolSizeÊù•ÊØîËæÉÔºåÂ¶ÇÊûú‰∏∫falseÂàôÊ†πÊçÆmaximumPoolSizeÊù•ÊØîËæÉ; if (wc &gt;= CAPACITY || wc &gt;= (core ? corePoolSize : maximumPoolSize)) return false; // CASÊìç‰ΩúÂ∞ùËØïÂ¢ûÂä†workerCountÔºå‰øÆÊîπcltÁöÑÂÄº+1ÔºåÂ¶ÇÊûúÊàêÂäüÔºåÂàôË∑≥Âá∫Á¨¨‰∏Ä‰∏™forÂæ™ÁéØ if (compareAndIncrementWorkerCount(c)) break retry; // Â¶ÇÊûúÂ¢ûÂä†workerCountÂ§±Ë¥•ÔºåÂàôÈáçÊñ∞Ëé∑ÂèñctlÁöÑÂÄº c = ctl.get(); // Â¶ÇÊûúÂΩìÂâçÁöÑËøêË°åÁä∂ÊÄÅ‰∏çÁ≠â‰∫érsÔºåËØ¥ÊòéÁä∂ÊÄÅÂ∑≤Ë¢´ÊîπÂèòÔºåËøîÂõûÁ¨¨‰∏Ä‰∏™forÂæ™ÁéØÁªßÁª≠ÊâßË°å if (runStateOf(c) != rs) continue retry; &#125; &#125; // Êñ∞Âª∫Á∫øÁ®ãÔºåÂπ∂Âä†ÂÖ•Âà∞Á∫øÁ®ãÊ±†workers‰∏≠„ÄÇ boolean workerStarted = false; boolean workerAdded = false; Worker w = null; try &#123; // Ê†πÊçÆfirstTaskÊù•ÂàõÂª∫WorkerÂØπË±° w = new Worker(firstTask); // ÊØè‰∏Ä‰∏™WorkerÂØπË±°ÈÉΩ‰ºöÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ã final Thread t = w.thread; if (t != null) &#123; // ÂØπworkersÊìç‰ΩúË¶ÅÈÄöËøáÂä†ÈîÅÊù•ÂÆûÁé∞ final ReentrantLock mainLock = this.mainLock; mainLock.lock(); try &#123; // Ëé∑ÂèñËøêË°åÁä∂ÊÄÅ int rs = runStateOf(ctl.get()); // rs &lt; SHUTDOWNË°®Á§∫ÊòØRUNNINGÁä∂ÊÄÅÔºõ // Â¶ÇÊûúrsÊòØRUNNINGÁä∂ÊÄÅÊàñËÄÖrsÊòØSHUTDOWNÁä∂ÊÄÅÂπ∂‰∏îfirstTask‰∏∫nullÔºåÂêëÁ∫øÁ®ãÊ±†‰∏≠Ê∑ªÂä†Á∫øÁ®ã„ÄÇ // Âõ†‰∏∫Âú®SHUTDOWNÊó∂‰∏ç‰ºöÂú®Ê∑ªÂä†Êñ∞ÁöÑ‰ªªÂä°Ôºå‰ΩÜËøòÊòØ‰ºöÊâßË°åworkQueue‰∏≠ÁöÑ‰ªªÂä° if (rs &lt; SHUTDOWN || (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123; // Âà§Êñ≠Ê∑ªÂä†ÁöÑ‰ªªÂä°Áä∂ÊÄÅ,Â¶ÇÊûúÂ∑≤ÁªèÂºÄÂßã‰∏¢Âá∫ÂºÇÂ∏∏ if (t.isAlive()) throw new IllegalThreadStateException(); // Â∞ÜÊñ∞Âª∫ÁöÑÁ∫øÁ®ãÂä†ÂÖ•Âà∞Á∫øÁ®ãÊ±†‰∏≠ÔºåworkersÊòØ‰∏Ä‰∏™hashSet workers.add(w); int s = workers.size(); // largestPoolSizeËÆ∞ÂΩïÁùÄÁ∫øÁ®ãÊ±†‰∏≠Âá∫Áé∞ËøáÁöÑÊúÄÂ§ßÁ∫øÁ®ãÊï∞Èáè if (s &gt; largestPoolSize) largestPoolSize = s; //Ê†áËÆ∞‰ªªÂä°Ê∑ªÂä† workerAdded = true; &#125; &#125; finally &#123; mainLock.unlock(); &#125; if (workerAdded) &#123; // ÂêØÂä®Á∫øÁ®ã t.start(); // Ê†áËÆ∞Á∫øÁ®ãÂêØÂä® workerStarted = true; &#125; &#125; &#125; finally &#123; // Á∫øÁ®ãÊ∑ªÂä†Á∫øÁ®ãÊ±†Â§±Ë¥•ÊàñËÄÖÁ∫øÁ®ãstartÂ§±Ë¥•ÔºåÂàôÈúÄË¶ÅË∞ÉÁî®addWorkerFailedÂáΩÊï∞ // Â¶ÇÊûúÊ∑ªÂä†ÊàêÂäüÂàôÈúÄË¶ÅÁßªÈô§Á∫øÁ®ãÔºåÂπ∂ÊÅ¢Â§çÂ§çcltÁöÑÂÄº if (! workerStarted) addWorkerFailed(w); &#125; return workerStarted;&#125; t.start()Ëøô‰∏™ËØ≠Âè•ÔºåÂêØÂä®Êó∂‰ºöË∞ÉÁî®WorkerÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ïÔºåWorkerÊú¨Ë∫´ÂÆûÁé∞‰∫ÜRunnableÊé•Âè£ÔºåÊâÄ‰ª•‰∏Ä‰∏™WorkerÁ±ªÂûãÁöÑÂØπË±°‰πüÊòØ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ WorkerÁ±ª12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182private final class Worker extends AbstractQueuedSynchronizer implements Runnable&#123; private static final long serialVersionUID = 6138294804551838833L; /** Á∫øÁ®ãÊ±†‰∏≠Ê≠£ÁúüËøêË°åÁöÑÁ∫øÁ®ã„ÄÇÈÄöËøáÊàë‰ª¨ÊåáÂÆöÁöÑÁ∫øÁ®ãÂ∑•ÂéÇÂàõÂª∫ËÄåÊù• **/ final Thread thread; /** Á∫øÁ®ãÂåÖË£ÖÁöÑ‰ªªÂä°„ÄÇthread Âú®runÊó∂‰∏ªË¶ÅË∞ÉÁî®‰∫ÜËØ•‰ªªÂä°ÁöÑrunÊñπÊ≥ï */ Runnable firstTask; /** ËÆ∞ÂΩïÂΩìÂâçÁ∫øÁ®ãÂÆåÊàêÁöÑ‰ªªÂä°Êï∞ */ volatile long completedTasks; /** * Creates with given first task and thread from ThreadFactory. * @param firstTask the first task (null if none) */ Worker(Runnable firstTask) &#123; setState(-1); // Âú®Ë∞ÉÁî®runWorker()ÂâçÔºåÁ¶ÅÊ≠¢interrupt‰∏≠Êñ≠ÔºåÂú®interruptIfStarted()ÊñπÊ≥ï‰∏≠‰ºöÂà§Êñ≠ getState()&gt;=0 this.firstTask = firstTask; // Âà©Áî®Êàë‰ª¨ÊåáÂÆöÁöÑÁ∫øÁ®ãÂ∑•ÂéÇÂàõÂª∫‰∏Ä‰∏™Á∫øÁ®ã this.thread = getThreadFactory().newThread(this); &#125; /** Delegates main run loop to outer runWorker */ public void run() &#123; runWorker(this); &#125; // Lock methods // // The value 0 represents the unlocked state. // The value 1 represents the locked state. protected boolean isHeldExclusively() &#123; return getState() != 0; &#125; /** * Â∞ùËØïËé∑ÂèñÈîÅ */ protected boolean tryAcquire(int unused) &#123; //Â∞ùËØï‰∏ÄÊ¨°Â∞Üstate‰ªé0ËÆæÁΩÆ‰∏∫1ÔºåÂç≥‚ÄúÈîÅÂÆö‚ÄùÁä∂ÊÄÅÔºå if (compareAndSetState(0, 1)) &#123; //ËÆæÁΩÆexclusiveOwnerThread=ÂΩìÂâçÁ∫øÁ®ã setExclusiveOwnerThread(Thread.currentThread()); return true; &#125; return false; &#125; /** * Â∞ùËØïÈáäÊîæÈîÅ */ protected boolean tryRelease(int unused) &#123; setExclusiveOwnerThread(null); setState(0); return true; &#125; public void lock() &#123; acquire(1); &#125; public boolean tryLock() &#123; return tryAcquire(1); &#125; public void unlock() &#123; release(1); &#125; public boolean isLocked() &#123; return isHeldExclusively(); &#125; /** * ‰∏≠Êñ≠ÔºàÂ¶ÇÊûúËøêË°åÔºâ * shutdownNowÊó∂‰ºöÂæ™ÁéØÂØπworkerÁ∫øÁ®ãÊâßË°å * ‰∏î‰∏çÈúÄË¶ÅËé∑ÂèñworkerÈîÅÔºåÂç≥‰ΩøÂú®workerËøêË°åÊó∂‰πüÂèØ‰ª•‰∏≠Êñ≠ */ void interruptIfStarted() &#123; Thread t; // Â¶ÇÊûústate&gt;=0„ÄÅt!=null„ÄÅ‰∏îtÊ≤°ÊúâË¢´‰∏≠Êñ≠ // new Worker()Êó∂state==-1ÔºåËØ¥Êòé‰∏çËÉΩ‰∏≠Êñ≠ if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) &#123; try &#123; t.interrupt(); &#125; catch (SecurityException ignore) &#123; &#125; &#125; &#125;&#125; WorkerÁ±ªÊäïÊú∫ÂèñÂ∑ßÁöÑÁªßÊâø‰∫ÜAbstractQueuedSynchronizerÊù•ÁÆÄÂåñÂú®ÊâßË°å‰ªªÂä°Êó∂ÁöÑËé∑Âèñ„ÄÅÈáäÊîæÈîÅ,ËøôÊ†∑Èò≤Ê≠¢‰∫Ü‰∏≠Êñ≠Âú®ËøêË°å‰∏≠ÁöÑ‰ªªÂä°ÔºåÂè™‰ºöÂî§ÈÜí(‰∏≠Êñ≠)Âú®Á≠âÂæÖ‰ªéworkQueue‰∏≠Ëé∑Âèñ‰ªªÂä°ÁöÑÁ∫øÁ®ã.‰∏çÁõ¥Êé•ÊâßË°åexecute(command)Êèê‰∫§ÁöÑcommandÔºåËÄåË¶ÅÂú®Â§ñÈù¢ÂåÖ‰∏ÄÂ±ÇWorker‰∏ªË¶ÅÊòØ‰∏∫‰∫Ü‰ΩøÁî®Áî®AQSÈîÅÊéßÂà∂‰∏≠Êñ≠ÔºåÂΩìËøêË°åÊó∂‰∏äÈîÅÔºåÂ∞±‰∏çËÉΩ‰∏≠Êñ≠ÔºåTreadPoolExecutorÁöÑshutdown()ÊñπÊ≥ï‰∏≠Êñ≠ÂâçÈÉΩË¶ÅËé∑ÂèñworkerÈîÅÔºåÂè™ÊúâÂú®Á≠âÂæÖ‰ªéworkQueue‰∏≠Ëé∑Âèñ‰ªªÂä°getTask()Êó∂ÊâçËÉΩ‰∏≠Êñ≠„ÄÇ runWorker ÊñπÊ≥ïÂú®WorkerÁ±ª‰∏≠ÁöÑrunÊñπÊ≥ïË∞ÉÁî®‰∫ÜrunWorkerÊñπÊ≥ïÊù•ÊâßË°å‰ªªÂä°. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758final void runWorker(Worker w) &#123; Thread wt = Thread.currentThread(); // Ëé∑ÂèñÁ¨¨‰∏Ä‰∏™‰ªªÂä° Runnable task = w.firstTask; w.firstTask = null; w.unlock(); // ÂÖÅËÆ∏‰∏≠Êñ≠ // ÊòØÂê¶Âõ†‰∏∫ÂºÇÂ∏∏ÈÄÄÂá∫Âæ™ÁéØ boolean completedAbruptly = true; try &#123; // Â¶ÇÊûútask‰∏∫Á©∫ÔºåÂàôÈÄöËøágetTaskÊù•Ëé∑Âèñ‰ªªÂä° while (task != null || (task = getTask()) != null) &#123; w.lock(); // If pool is stopping, ensure thread is interrupted; // if not, ensure thread is not interrupted. This // requires a recheck in second case to deal with // shutdownNow race while clearing interrupt // Á∫øÁ®ãÊ±†Â§Ñ‰∫éstopÁä∂ÊÄÅÊàñËÄÖÂΩìÂâçÁ∫øÁ®ãË¢´‰∏≠Êñ≠Êó∂ÔºåÁ∫øÁ®ãÊ±†Áä∂ÊÄÅÊòØstopÁä∂ÊÄÅ // ‰ΩÜÊòØÂΩìÂâçÁ∫øÁ®ãÊ≤°Êúâ‰∏≠Êñ≠ÔºåÂàôÂèëÂá∫‰∏≠Êñ≠ËØ∑Ê±Ç if ((runStateAtLeast(ctl.get(), STOP) || (Thread.interrupted() &amp;&amp; runStateAtLeast(ctl.get(), STOP))) &amp;&amp; !wt.isInterrupted()) wt.interrupt(); try &#123; //ÂºÄÂßãÊâßË°å‰ªªÂä°ÂâçÁöÑHookÔºåÁ±ª‰ººÂõûË∞ÉÂáΩÊï∞ beforeExecute(wt, task); Throwable thrown = null; try &#123; //ÊâßË°å‰ªªÂä° task.run(); &#125; catch (RuntimeException x) &#123; thrown = x; throw x; &#125; catch (Error x) &#123; thrown = x; throw x; &#125; catch (Throwable x) &#123; thrown = x; throw new Error(x); &#125; finally &#123; //‰ªªÂä°ÊâßË°åÂêéÁöÑHookÔºåÁ±ª‰ººÂõûË∞ÉÂáΩÊï∞ afterExecute(task, thrown); &#125; &#125; finally &#123; //ÊâßË°åÂÆåÊØïÂêétaskÈáçÁΩÆÔºåcompletedTasksËÆ°Êï∞Âô®++ÔºåËß£ÈîÅ task = null; w.completedTasks++; w.unlock(); &#125; &#125; //Ê†áËÆ∞Ê≠£Â∏∏ÈÄÄÂá∫ completedAbruptly = false; &#125; finally &#123; //Á∫øÁ®ãÁ©∫Èó≤ËææÂà∞Êàë‰ª¨ËÆæÂÆöÁöÑÂÄºÊó∂ÔºåWorkerÈÄÄÂá∫ÈîÄÊØÅ„ÄÇ processWorkerExit(w, completedAbruptly); &#125;&#125; getTask ÊñπÊ≥ïrunWorkerÂáΩÊï∞‰∏≠ÊúÄÈáçË¶ÅÁöÑÊòØgetTask()Ôºå‰∏çÊñ≠ÁöÑ‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âèñ‰ªªÂä°‰∫§ÁªôÁ∫øÁ®ãÊâßË°åÔºåÂπ∂‰∏îË¥üË¥£Á∫øÁ®ãÂõûÊî∂ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253private Runnable getTask() &#123; // Ë°®Á§∫‰∏äÊ¨°‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Âèñ‰ªªÂä°Êó∂ÊòØÂê¶Ë∂ÖÊó∂ boolean timedOut = false; // Did the last poll() time out? for (;;) &#123; int c = ctl.get(); int rs = runStateOf(c); // Â¶ÇÊûúÁ∫øÁ®ãÊ±†Â§Ñ‰∫éshutdownÁä∂ÊÄÅÔºå // Âπ∂‰∏îÈòüÂàó‰∏∫Á©∫ÔºåÊàñËÄÖÁ∫øÁ®ãÊ±†Â§Ñ‰∫éstopÊàñËÄÖterminateÁä∂ÊÄÅÔºå // Âú®Á∫øÁ®ãÊ±†Êï∞Èáè-1ÔºåËøîÂõûnullÔºåÂõûÊî∂Á∫øÁ®ã if (rs &gt;= SHUTDOWN &amp;&amp; (rs &gt;= STOP || workQueue.isEmpty())) &#123; decrementWorkerCount(); return null; &#125; // Ëé∑ÂèñÁ∫øÁ®ãÊï∞ int wc = workerCountOf(c); // timedÂèòÈáèÁî®‰∫éÂà§Êñ≠ÊòØÂê¶ÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂„ÄÇ // allowCoreThreadTimeOutÈªòËÆ§ÊòØfalseÔºå‰πüÂ∞±ÊòØÊ†∏ÂøÉÁ∫øÁ®ã‰∏çÂÖÅËÆ∏ËøõË°åË∂ÖÊó∂Ôºõ // wc &gt; corePoolSizeÔºåË°®Á§∫ÂΩìÂâçÁ∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÔºõ // ÂØπ‰∫éË∂ÖËøáÊ†∏ÂøÉÁ∫øÁ®ãÊï∞ÈáèÁöÑËøô‰∫õÁ∫øÁ®ãÔºåÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂ boolean timed = allowCoreThreadTimeOut || wc &gt; corePoolSize; // Â¶ÇÊûúÁ∫øÁ®ãÊï∞ÁõÆÂ§ß‰∫éÊúÄÂ§ßÁ∫øÁ®ãÊï∞ÁõÆ Êàñ ÂΩìÂâçÊìç‰ΩúÈúÄË¶ÅËøõË°åË∂ÖÊó∂ÊéßÂà∂ÔºåÂπ∂‰∏î‰∏äÊ¨°‰ªéÈòªÂ°ûÈòüÂàó‰∏≠Ëé∑Âèñ‰ªªÂä°ÂèëÁîü‰∫ÜË∂ÖÊó∂ // Âπ∂‰∏î Á∫øÁ®ãÊï∞ÁõÆÂ§ß‰∫é1 Êàñ Â∑•‰ΩúÈòüÂàó‰∏∫Á©∫ // Â∞ùËØïÂ∞ÜworkerCountÂáè1Ôºõ if ((wc &gt; maximumPoolSize || (timed &amp;&amp; timedOut)) &amp;&amp; (wc &gt; 1 || workQueue.isEmpty())) &#123; if (compareAndDecrementWorkerCount(c)) return null; continue; &#125; try &#123; //**‰øùËØÅÊ†∏ÂøÉÁ∫øÁ®ã‰∏çË¢´ÈîÄÊØÅ** // Ê†πÊçÆtimedÊù•Âà§Êñ≠ÔºåÂ¶ÇÊûú‰∏∫trueÔºåÂàôÈÄöËøáÈòªÂ°ûÈòüÂàóÁöÑpollÊñπÊ≥ïËøõË°åË∂ÖÊó∂ÊéßÂà∂ÔºåÂ¶ÇÊûúÂú®keepAliveTimeÊó∂Èó¥ÂÜÖÊ≤°ÊúâËé∑ÂèñÂà∞‰ªªÂä°ÔºåÂàôËøîÂõûnullÔºõ // Âê¶ÂàôÈÄöËøátakeÊñπÊ≥ïÔºåÂ¶ÇÊûúËøôÊó∂ÈòüÂàó‰∏∫Á©∫ÔºåÂàôtakeÊñπÊ≥ï‰ºöÈòªÂ°ûÁõ¥Âà∞ÈòüÂàó‰∏ç‰∏∫Á©∫„ÄÇ Runnable r = timed ? workQueue.poll(keepAliveTime, TimeUnit.NANOSECONDS) : workQueue.take(); if (r != null) return r; // Â¶ÇÊûú r == nullÔºåËØ¥ÊòéÂ∑≤ÁªèË∂ÖÊó∂ÔºåtimedOutËÆæÁΩÆ‰∏∫trueÔºåËøõÂÖ•‰∏ã‰∏Ä‰∏™Âæ™ÁéØ timedOut = true; &#125; catch (InterruptedException retry) &#123; // Â¶ÇÊûúËé∑Âèñ‰ªªÂä°Êó∂ÂΩìÂâçÁ∫øÁ®ãÂèëÁîü‰∫Ü‰∏≠Êñ≠ÔºåÂàôËÆæÁΩÆtimedOut‰∏∫falseÂπ∂ËøîÂõûÂæ™ÁéØÈáçËØï timedOut = false; &#125; &#125;&#125; FutureTaskÊ∫êÁ†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402public class FutureTask&lt;V&gt; implements RunnableFuture&lt;V&gt; &#123; /** * stateÂ≠óÊÆµÁî®Êù•‰øùÂ≠òFutureTaskÂÜÖÈÉ®ÁöÑ‰ªªÂä°ÊâßË°åÁä∂ÊÄÅÔºå‰∏ÄÂÖ±Êúâ7‰∏≠Áä∂ÊÄÅÔºåÊØèÁßçÁä∂ÊÄÅÂèäÂÖ∂ÂØπÂ∫îÁöÑÂÄºÂ¶Ç‰∏ã * NEW:Ë°®Á§∫ÊòØ‰∏™Êñ∞ÁöÑ‰ªªÂä°ÊàñËÄÖËøòÊ≤°Ë¢´ÊâßË°åÂÆåÁöÑ‰ªªÂä°„ÄÇËøôÊòØÂàùÂßãÁä∂ÊÄÅ„ÄÇ * COMPLETING:‰ªªÂä°Â∑≤ÁªèÊâßË°åÂÆåÊàêÊàñËÄÖÊâßË°å‰ªªÂä°ÁöÑÊó∂ÂÄôÂèëÁîüÂºÇÂ∏∏Ôºå‰ΩÜÊòØ‰ªªÂä°ÊâßË°åÁªìÊûúÊàñËÄÖÂºÇÂ∏∏ÂéüÂõ†ËøòÊ≤°Êúâ‰øùÂ≠òÂà∞outcomeÂ≠óÊÆµ(outcomeÂ≠óÊÆµÁî®Êù•‰øùÂ≠ò‰ªªÂä°ÊâßË°åÁªìÊûúÔºåÂ¶ÇÊûúÂèëÁîüÂºÇÂ∏∏ÔºåÂàôÁî®Êù•‰øùÂ≠òÂºÇÂ∏∏ÂéüÂõ†)ÁöÑÊó∂ÂÄôÔºåÁä∂ÊÄÅ‰ºö‰ªéNEWÂèòÊõ¥Âà∞COMPLETING„ÄÇ‰ΩÜÊòØËøô‰∏™Áä∂ÊÄÅ‰ºöÊó∂Èó¥‰ºöÊØîËæÉÁü≠ÔºåÂ±û‰∫é‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ * NORMAL:‰ªªÂä°Â∑≤ÁªèÊâßË°åÂÆåÊàêÂπ∂‰∏î‰ªªÂä°ÊâßË°åÁªìÊûúÂ∑≤Áªè‰øùÂ≠òÂà∞outcomeÂ≠óÊÆµÔºåÁä∂ÊÄÅ‰ºö‰ªéCOMPLETINGËΩ¨Êç¢Âà∞NORMAL„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúÄÁªàÊÄÅ„ÄÇ * EXCEPTIONAL:‰ªªÂä°ÊâßË°åÂèëÁîüÂºÇÂ∏∏Âπ∂‰∏îÂºÇÂ∏∏ÂéüÂõ†Â∑≤Áªè‰øùÂ≠òÂà∞outcomeÂ≠óÊÆµ‰∏≠ÂêéÔºåÁä∂ÊÄÅ‰ºö‰ªéCOMPLETINGËΩ¨Êç¢Âà∞EXCEPTIONAL„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúÄÁªàÊÄÅ„ÄÇ * CANCELLED:‰ªªÂä°ËøòÊ≤°ÂºÄÂßãÊâßË°åÊàñËÄÖÂ∑≤ÁªèÂºÄÂßãÊâßË°å‰ΩÜÊòØËøòÊ≤°ÊúâÊâßË°åÂÆåÊàêÁöÑÊó∂ÂÄôÔºåÁî®Êà∑Ë∞ÉÁî®‰∫Ücancel(false)ÊñπÊ≥ïÂèñÊ∂à‰ªªÂä°‰∏î‰∏ç‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ãÔºåËøô‰∏™Êó∂ÂÄôÁä∂ÊÄÅ‰ºö‰ªéNEWËΩ¨Âåñ‰∏∫CANCELLEDÁä∂ÊÄÅ„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúÄÁªàÊÄÅ„ÄÇ * INTERRUPTING: ‰ªªÂä°ËøòÊ≤°ÂºÄÂßãÊâßË°åÊàñËÄÖÂ∑≤ÁªèÊâßË°å‰ΩÜÊòØËøòÊ≤°ÊúâÊâßË°åÂÆåÊàêÁöÑÊó∂ÂÄôÔºåÁî®Êà∑Ë∞ÉÁî®‰∫Ücancel(true)ÊñπÊ≥ïÂèñÊ∂à‰ªªÂä°Âπ∂‰∏îË¶Å‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ã‰ΩÜÊòØËøòÊ≤°Êúâ‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ã‰πãÂâçÔºåÁä∂ÊÄÅ‰ºö‰ªéNEWËΩ¨Âåñ‰∏∫INTERRUPTING„ÄÇËøôÊòØ‰∏Ä‰∏™‰∏≠Èó¥Áä∂ÊÄÅ„ÄÇ * INTERRUPTED:Ë∞ÉÁî®interrupt()‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ã‰πãÂêéÁä∂ÊÄÅ‰ºö‰ªéINTERRUPTINGËΩ¨Êç¢Âà∞INTERRUPTED„ÄÇËøôÊòØ‰∏Ä‰∏™ÊúÄÁªàÊÄÅ„ÄÇ * * NEW -&gt; COMPLETING -&gt; NORMAL Ê≠£Â∏∏ÊâßË°åÂπ∂ËøîÂõû * NEW -&gt; COMPLETING -&gt; EXCEPTIONAL ÊâßË°åËøáÁ®ã‰∏≠Âá∫Áé∞‰∫ÜÂºÇÂ∏∏ * NEW -&gt; CANCELLED ÊâßË°åÂâçË¢´ÂèñÊ∂à * NEW -&gt; INTERRUPTING -&gt; INTERRUPTED ÂèñÊ∂àÊó∂Ë¢´‰∏≠Êñ≠ */ private volatile int state; private static final int NEW = 0; private static final int COMPLETING = 1;//Â§ß‰∫éËøô‰∏™ÂÄºÂ∞±ÊòØÂÆåÊàêÁä∂ÊÄÅ private static final int NORMAL = 2; private static final int EXCEPTIONAL = 3; private static final int CANCELLED = 4; private static final int INTERRUPTING = 5; private static final int INTERRUPTED = 6; /** The underlying callable; nulled out after running */ private Callable&lt;V&gt; callable; /** The result to return or exception to throw from get() */ private Object outcome; // non-volatile, protected by state reads/writes /** ÊâßË°åcallableÁöÑÁ∫øÁ®ã **/ private volatile Thread runner; /** ‰ΩøÁî®TreiberÁÆóÊ≥ïÂÆûÁé∞ÁöÑÊó†ÈòªÂ°ûÁöÑStackÔºåÁî®‰∫éÂ≠òÊîæÁ≠âÂæÖÁöÑÁ∫øÁ®ã */ private volatile WaitNode waiters; @SuppressWarnings("unchecked") private V report(int s) throws ExecutionException &#123; // ÊãøÂà∞ËøîÂõûÁªìÊûú Object x = outcome; // Âà§Êñ≠Áä∂ÊÄÅ if (s == NORMAL) // Áä∂ÊÄÅÊ≠£Â∏∏ÔºåÂ∞±ËøîÂõûÁªìÊûúÂÄº return (V)x; // Âà§Êñ≠ÂºÇÂ∏∏ÔºåÂ∞±ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ if (s &gt;= CANCELLED) throw new CancellationException(); throw new ExecutionException((Throwable)x); &#125; /** * ÊûÑÈÄ†ÊñπÊ≥ï */ public FutureTask(Callable&lt;V&gt; callable) &#123; if (callable == null) throw new NullPointerException(); this.callable = callable; this.state = NEW; // ensure visibility of callable &#125; /** * Ëøô‰∏™ÊûÑÈÄ†ÊñπÊ≥ï‰ºöÊää‰º†ÂÖ•ÁöÑRunnableÂ∞ÅË£ÖÊàê‰∏Ä‰∏™CallableÂØπË±°‰øùÂ≠òÂú®callableÂ≠óÊÆµ‰∏≠ÔºåÂêåÊó∂Â¶ÇÊûú‰ªªÂä°ÊâßË°åÊàêÂäüÁöÑËØùÂ∞±‰ºöËøîÂõû‰º†ÂÖ•ÁöÑresult„ÄÇ * ËøôÁßçÊÉÖÂÜµ‰∏ãÂ¶ÇÊûú‰∏çÈúÄË¶ÅËøîÂõûÂÄºÁöÑËØùÂèØ‰ª•‰º†ÂÖ•‰∏Ä‰∏™null„ÄÇ */ public FutureTask(Runnable runnable, V result) &#123; this.callable = Executors.callable(runnable, result); this.state = NEW; // ensure visibility of callable &#125; //Âà§Êñ≠‰ªªÂä°ÊòØÂê¶Ë¢´ÂèñÊ∂à public boolean isCancelled() &#123; return state &gt;= CANCELLED; &#125; //Âà§Êñ≠‰ªªÂä°ÊòØÂê¶ÂÆåÊàê public boolean isDone() &#123; return state != NEW; &#125; public boolean cancel(boolean mayInterruptIfRunning) &#123; // 1. ‰ªªÂä°ÊòØnewÁä∂ÊÄÅ Âπ∂‰∏î Ê†πÊçÆmayInterruptIfRunningÊääÁä∂ÊÄÅ‰ªéNEWËΩ¨ÂåñÂà∞INTERRUPTINGÊàñCANCELLED // ‰∏çÁ¨¶Âêà‰∏äËø∞Áä∂ÊÄÅÔºåËøîÂõûfalse if (!(state == NEW &amp;&amp; UNSAFE.compareAndSwapInt(this, stateOffset, NEW, mayInterruptIfRunning ? INTERRUPTING : CANCELLED))) return false; try &#123; // 2. Â¶ÇÊûúÈúÄË¶Å‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ã if (mayInterruptIfRunning) &#123; try &#123; // runner‰øùÂ≠òÁùÄÂΩìÂâçÊâßË°å‰ªªÂä°ÁöÑÁ∫øÁ®ã Thread t = runner; if (t != null) //‰∏≠Êñ≠‰ªªÂä°ÊâßË°åÁ∫øÁ®ã t.interrupt(); &#125; finally &#123; // final state // ‰øÆÊîπÁä∂ÊÄÅ‰∏∫INTERRUPTED UNSAFE.putOrderedInt(this, stateOffset, INTERRUPTED); &#125; &#125; &#125; finally &#123; finishCompletion(); &#125; return true; &#125; public V get() throws InterruptedException, ExecutionException &#123; int s = state; // Âà§Êñ≠‰ªªÂä°ÂΩìÂâçÁöÑstate &lt;= COMPLETINGÊòØÂê¶ÊàêÁ´ã„ÄÇ if (s &lt;= COMPLETING) // Â¶ÇÊûúÊàêÁ´ãÔºåË°®Êòé‰ªªÂä°ËøòÊ≤°ÊúâÁªìÊùü(ËøôÈáåÁöÑÁªìÊùüÂåÖÊã¨‰ªªÂä°Ê≠£Â∏∏ÊâßË°åÂÆåÊØïÔºå‰ªªÂä°ÊâßË°åÂºÇÂ∏∏Ôºå‰ªªÂä°Ë¢´ÂèñÊ∂à) // Ë∞ÉÁî®awaitDone()ËøõË°åÈòªÂ°ûÁ≠âÂæÖ„ÄÇ s = awaitDone(false, 0L); // ‰ªªÂä°Â∑≤ÁªèÁªìÊùüÔºåË∞ÉÁî®report()ËøîÂõûÁªìÊûú„ÄÇ return report(s); &#125; public V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException &#123; if (unit == null) throw new NullPointerException(); int s = state; // Â¶ÇÊûúawaitDone()Ë∂ÖÊó∂ËøîÂõû‰πãÂêé‰ªªÂä°ËøòÊ≤°ÁªìÊùüÔºåÂàôÊäõÂá∫ÂºÇÂ∏∏ if (s &lt;= COMPLETING &amp;&amp; (s = awaitDone(true, unit.toNanos(timeout))) &lt;= COMPLETING) throw new TimeoutException(); return report(s); &#125; protected void done() &#123; &#125; protected void set(V v) &#123; // Â∞ùËØïCASÊìç‰ΩúÔºåÊääÂΩìÂâçÁöÑÁä∂ÊÄÅ‰ªéNEWÂèòÊõ¥‰∏∫COMPLETING(‰∏≠Èó¥Áä∂ÊÄÅ)Áä∂ÊÄÅ„ÄÇ if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) &#123; // Êää‰ªªÂä°ÊâßË°åÁªìÊûú‰øùÂ≠òÂú®outcomeÂ≠óÊÆµ‰∏≠„ÄÇ outcome = v; // CASÁöÑÊääÂΩìÂâç‰ªªÂä°Áä∂ÊÄÅ‰ªéCOMPLETINGÂèòÊõ¥‰∏∫NORMAL UNSAFE.putOrderedInt(this, stateOffset, NORMAL); // final state finishCompletion(); &#125; &#125; protected void setException(Throwable t) &#123; // Â∞ùËØïCASÊìç‰ΩúÔºåÊääÂΩìÂâçÁöÑÁä∂ÊÄÅ‰ªéNEWÂèòÊõ¥‰∏∫COMPLETING(‰∏≠Èó¥Áä∂ÊÄÅ)Áä∂ÊÄÅ„ÄÇ if (UNSAFE.compareAndSwapInt(this, stateOffset, NEW, COMPLETING)) &#123; // ÊääÂºÇÂ∏∏ÂéüÂõ†‰øùÂ≠òÂú®outcomeÂ≠óÊÆµ‰∏≠ÔºåoutcomeÂ≠óÊÆµÁî®Êù•‰øùÂ≠ò‰ªªÂä°ÊâßË°åÁªìÊûúÊàñËÄÖÂºÇÂ∏∏ÂéüÂõ†„ÄÇ outcome = t; // CASÁöÑÊääÂΩìÂâç‰ªªÂä°Áä∂ÊÄÅ‰ªéCOMPLETINGÂèòÊõ¥‰∏∫EXCEPTIONAL„ÄÇ UNSAFE.putOrderedInt(this, stateOffset, EXCEPTIONAL); // final state finishCompletion(); &#125; &#125; public void run() &#123; // Áä∂ÊÄÅÂ¶ÇÊûú‰∏çÊòØNEWÔºåËØ¥Êòé‰ªªÂä°ÊàñËÄÖÂ∑≤ÁªèÊâßË°åËøáÔºåÊàñËÄÖÂ∑≤ÁªèË¢´ÂèñÊ∂àÔºåÁõ¥Êé•ËøîÂõû // Áä∂ÊÄÅÂ¶ÇÊûúÊòØNEWÔºåÂàôÂ∞ùËØïÊääÂΩìÂâçÊâßË°åÁ∫øÁ®ã‰øùÂ≠òÂú®runnerÂ≠óÊÆµ(runnerOffset)‰∏≠ÔºåÂ¶ÇÊûúËµãÂÄºÂ§±Ë¥•ÂàôÁõ¥Êé•ËøîÂõû if (state != NEW || !UNSAFE.compareAndSwapObject(this, runnerOffset, null, Thread.currentThread())) return; try &#123; Callable&lt;V&gt; c = callable; // Âè™ÊúâÂàùÂßãÁä∂ÊÄÅÊâç‰ºöÊâßË°å if (c != null &amp;&amp; state == NEW) &#123; V result; boolean ran; try &#123; // ÊâßË°å‰ªªÂä° ËÆ°ÁÆóÈÄªËæë result = c.call(); ran = true; &#125; catch (Throwable ex) &#123; result = null; ran = false; // ‰øùÂ≠òÂºÇÂ∏∏ setException(ex); &#125; if (ran) // ‰ªªÂä°ÊâßË°åÊàêÂäüÔºå‰øùÂ≠òËøîÂõûÁªìÊûú set(result); &#125; &#125; finally &#123; // Êó†ËÆ∫ÊòØÂê¶ÊâßË°åÊàêÂäüÔºåÊäärunnerËÆæÁΩÆ‰∏∫null runner = null; // state must be re-read after nulling runner to prevent // leaked interrupts int s = state; // Â¶ÇÊûú‰ªªÂä°Ë¢´‰∏≠Êñ≠ÔºåÊâßË°å‰∏≠Êñ≠Â§ÑÁêÜ if (s &gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); &#125; &#125; /** * ‰∏érunÊñπÊ≥ïÁ±ª‰ººÔºåÂå∫Âà´Âú®‰∫éËøô‰∏™ÊñπÊ≥ï‰∏ç‰ºöËÆæÁΩÆ‰ªªÂä°ÁöÑÊâßË°åÁªìÊûúÂÄº * * @return &#123;@code true&#125; if successfully run and reset */ protected boolean runAndReset() &#123; if (state != NEW || !UNSAFE.compareAndSwapObject(this, runnerOffset, null, Thread.currentThread())) return false; boolean ran = false; int s = state; try &#123; Callable&lt;V&gt; c = callable; if (c != null &amp;&amp; s == NEW) &#123; try &#123; // ‰∏çËé∑ÂèñÂíåËÆæÁΩÆËøîÂõûÂÄº c.call(); // don't set result ran = true; &#125; catch (Throwable ex) &#123; setException(ex); &#125; &#125; &#125; finally &#123; runner = null; s = state; if (s &gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); &#125; // ÊòØÂê¶Ê≠£Á°ÆÁöÑÊâßË°åÂπ∂Â§ç‰Ωç return ran &amp;&amp; s == NEW; &#125; private void handlePossibleCancellationInterrupt(int s) &#123; if (s == INTERRUPTING) while (state == INTERRUPTING) Thread.yield(); // wait out pending interrupt // Á°Æ‰øùcancel(true)‰∫ßÁîüÁöÑ‰∏≠Êñ≠ÂèëÁîüÂú®runÊàñrunAndResetÊñπÊ≥ïÊâßË°åÁöÑËøáÁ®ã‰∏≠„ÄÇ //ËøôÈáå‰ºöÂæ™ÁéØÁöÑË∞ÉÁî®Thread.yield()Êù•Á°Æ‰øùÁä∂ÊÄÅÂú®cancelÊñπÊ≥ï‰∏≠Ë¢´ËÆæÁΩÆ‰∏∫INTERRUPTED„ÄÇ &#125; /** * Simple linked list nodes to record waiting threads in a Treiber * stack. See other classes such as Phaser and SynchronousQueue * for more detailed explanation. */ static final class WaitNode &#123; volatile Thread thread; volatile WaitNode next; WaitNode() &#123; thread = Thread.currentThread(); &#125; &#125; /** * Removes and signals all waiting threads, invokes done(), and * nulls out callable. */ private void finishCompletion() &#123; // assert state &gt; COMPLETING; // ÊâßË°åËØ•ÊñπÊ≥ïÊó∂stateÂøÖÈ°ªÂ§ß‰∫éCOMPLETING // ‰æùÊ¨°ÈÅçÂéÜwaitersÈìæË°® for (WaitNode q; (q = waiters) != null;) &#123; // ËÆæÁΩÆÊ†àÈ°∂ËäÇÁÇπ‰∏∫null if (UNSAFE.compareAndSwapObject(this, waitersOffset, q, null)) &#123; for (;;) &#123; Thread t = q.thread; if (t != null) &#123; q.thread = null; // Âî§ÈÜíÁ≠âÂæÖÁ∫øÁ®ã LockSupport.unpark(t); &#125; WaitNode next = q.next; // Â¶ÇÊûúnext‰∏∫Á©∫ÔºåËØ¥ÊòéÊ†àÁ©∫‰∫ÜÔºåË∑≥Âá∫Âæ™ÁéØ if (next == null) break; // Êñπ‰æøgcÂõûÊî∂ q.next = null; // ÈáçÊñ∞ËÆæÁΩÆÊ†àÈ°∂node q = next; &#125; break; &#125; &#125; // Á©∫ÊñπÊ≥ïÔºåÁïôÁªôÂ≠êÁ±ªÊâ©Â±ï done(); callable = null; // to reduce footprint &#125; /** * Awaits completion or aborts on interrupt or timeout. * * @param timed true if use timed waits * @param nanos time to wait, if timed * @return state upon completion */ private int awaitDone(boolean timed, long nanos) throws InterruptedException &#123; // ËÆ°ÁÆóÁ≠âÂæÖÊà™Ê≠¢Êó∂Èó¥ final long deadline = timed ? System.nanoTime() + nanos : 0L; WaitNode q = null; boolean queued = false; for (;;) &#123; // 1. Âà§Êñ≠ÈòªÂ°ûÁ∫øÁ®ãÊòØÂê¶Ë¢´‰∏≠Êñ≠ if (Thread.interrupted()) &#123; // Ë¢´‰∏≠Êñ≠ÂàôÂú®Á≠âÂæÖÈòüÂàó‰∏≠Âà†Èô§ËØ•ËäÇÁÇπ removeWaiter(q); // ÊäõÂá∫InterruptedExceptionÂºÇÂ∏∏ throw new InterruptedException(); &#125; int s = state; // 2. Ëé∑ÂèñÂΩìÂâçÁä∂ÊÄÅÔºåÂ¶ÇÊûúÁä∂ÊÄÅÂ§ß‰∫éCOMPLETING if (s &gt; COMPLETING) &#123; // ËØ¥Êòé‰ªªÂä°Â∑≤ÁªèÁªìÊùü(Ë¶Å‰πàÊ≠£Â∏∏ÁªìÊùüÔºåË¶Å‰πàÂºÇÂ∏∏ÁªìÊùüÔºåË¶Å‰πàË¢´ÂèñÊ∂à) if (q != null) // ÊääthreadÊòæÁ§∫ÁΩÆÁ©∫ q.thread = null; // ËøîÂõûÁªìÊûú return s; &#125; // 3. Â¶ÇÊûúÁä∂ÊÄÅÂ§Ñ‰∫é‰∏≠Èó¥Áä∂ÊÄÅCOMPLETING // Ë°®Á§∫‰ªªÂä°Â∑≤ÁªèÁªìÊùü‰ΩÜÊòØ‰ªªÂä°ÊâßË°åÁ∫øÁ®ãËøòÊ≤°Êù•ÂæóÂèäÁªôoutcomeËµãÂÄº else if (s == COMPLETING) // cannot time out yet Thread.yield();// ËÆ©Âá∫ÊâßË°åÊùÉËÆ©ÂÖ∂‰ªñÁ∫øÁ®ã‰ºòÂÖàÊâßË°å // 4. Â¶ÇÊûúÁ≠âÂæÖËäÇÁÇπ‰∏∫Á©∫ÔºåÂàôÊûÑÈÄ†‰∏Ä‰∏™Á≠âÂæÖËäÇÁÇπ else if (q == null) q = new WaitNode(); // 5. Â¶ÇÊûúËøòÊ≤°ÊúâÂÖ•ÈòüÂàóÔºåÂàôÊääÂΩìÂâçËäÇÁÇπÂä†ÂÖ•waitersÈ¶ñËäÇÁÇπÂπ∂ÊõøÊç¢ÂéüÊù•waiters else if (!queued) queued = UNSAFE.compareAndSwapObject(this, waitersOffset, q.next = waiters, q); else if (timed) &#123; // Â¶ÇÊûúÈúÄË¶ÅÁ≠âÂæÖÁâπÂÆöÊó∂Èó¥ÔºåÂàôÂÖàËÆ°ÁÆóË¶ÅÁ≠âÂæÖÁöÑÊó∂Èó¥ // Â¶ÇÊûúÂ∑≤ÁªèË∂ÖÊó∂ÔºåÂàôÂà†Èô§ÂØπÂ∫îËäÇÁÇπÂπ∂ËøîÂõûÂØπÂ∫îÁöÑÁä∂ÊÄÅ nanos = deadline - System.nanoTime(); if (nanos &lt;= 0L) &#123; removeWaiter(q); return state; &#125; // 6. ÈòªÂ°ûÁ≠âÂæÖÁâπÂÆöÊó∂Èó¥ LockSupport.parkNanos(this, nanos); &#125; // 6. ÈòªÂ°ûÁ≠âÂæÖÁõ¥Âà∞Ë¢´ÂÖ∂‰ªñÁ∫øÁ®ãÂî§ÈÜí else LockSupport.park(this); &#125; &#125; private void removeWaiter(WaitNode node) &#123; if (node != null) &#123; // Â∞ÜthreadËÆæÁΩÆ‰∏∫nullÊòØÂõ†‰∏∫‰∏ãÈù¢Ë¶ÅÊ†πÊçÆthreadÊòØÂê¶‰∏∫nullÂà§Êñ≠ÊòØÂê¶Ë¶ÅÊäänodeÁßªÂá∫ node.thread = null; // ËøôÈáåËá™Êóã‰øùËØÅÂà†Èô§ÊàêÂäü retry: for (;;) &#123; // restart on removeWaiter race for (WaitNode pred = null, q = waiters, s; q != null; q = s) &#123; s = q.next; // q.thread != nullËØ¥ÊòéËØ•qËäÇÁÇπ‰∏çÈúÄË¶ÅÁßªÈô§ if (q.thread != null) pred = q; // Â¶ÇÊûúq.thread == nullÔºå‰∏îpred != nullÔºåÈúÄË¶ÅÂà†Èô§qËäÇÁÇπ else if (pred != null) &#123; // Âà†Èô§qËäÇÁÇπ pred.next = s; // pred.thread == nullÊó∂ËØ¥ÊòéÂú®Âπ∂ÂèëÊÉÖÂÜµ‰∏ãË¢´ÂÖ∂‰ªñÁ∫øÁ®ã‰øÆÊîπ‰∫ÜÔºõ // ËøîÂõûÁ¨¨‰∏Ä‰∏™forÂæ™ÁéØÈáçËØï if (pred.thread == null) // check for race continue retry; &#125; // Â¶ÇÊûúq.thread != null‰∏îpred == nullÔºåËØ¥ÊòéqÊòØÊ†àÈ°∂ËäÇÁÇπ // ËÆæÁΩÆÊ†àÈ°∂ÂÖÉÁ¥†‰∏∫sËäÇÁÇπÔºåÂ¶ÇÊûúÂ§±Ë¥•ÂàôËøîÂõûÈáçËØï else if (!UNSAFE.compareAndSwapObject(this, waitersOffset, q, s)) continue retry; &#125; break; &#125; &#125; &#125; // Unsafe mechanics private static final sun.misc.Unsafe UNSAFE; private static final long stateOffset; private static final long runnerOffset; private static final long waitersOffset; static &#123; try &#123; UNSAFE = sun.misc.Unsafe.getUnsafe(); Class&lt;?&gt; k = FutureTask.class; stateOffset = UNSAFE.objectFieldOffset (k.getDeclaredField("state")); runnerOffset = UNSAFE.objectFieldOffset (k.getDeclaredField("runner")); waitersOffset = UNSAFE.objectFieldOffset (k.getDeclaredField("waiters")); &#125; catch (Exception e) &#123; throw new Error(e); &#125; &#125;&#125; Á∫øÁ®ãÊ±†‰∏≠ÁöÑÁ∫øÁ®ãÂàùÂßãÂåñ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÂàõÂª∫Á∫øÁ®ãÊ±†‰πãÂêéÔºåÁ∫øÁ®ãÊ±†‰∏≠ÊòØÊ≤°ÊúâÁ∫øÁ®ãÁöÑÔºåÈúÄË¶ÅÊèê‰∫§‰ªªÂä°‰πãÂêéÊâç‰ºöÂàõÂª∫Á∫øÁ®ã„ÄÇÂú®ÂÆûÈôÖ‰∏≠Â¶ÇÊûúÈúÄË¶ÅÁ∫øÁ®ãÊ±†ÂàõÂª∫‰πãÂêéÁ´ãÂç≥ÂàõÂª∫Á∫øÁ®ãÔºåÂèØ‰ª•ÈÄöËøá‰ª•‰∏ã‰∏§‰∏™ÊñπÊ≥ïÂäûÂà∞Ôºö prestartCoreThread()ÔºöÂàùÂßãÂåñ‰∏Ä‰∏™Ê†∏ÂøÉÁ∫øÁ®ãÔºõ prestartAllCoreThreads()ÔºöÂàùÂßãÂåñÊâÄÊúâÊ†∏ÂøÉÁ∫øÁ®ã Á∫øÁ®ãÊ±†ÁöÑÂÖ≥Èó≠ThreadPoolExecutorÊèê‰æõ‰∫Ü‰∏§‰∏™ÊñπÊ≥ïÔºåÁî®‰∫éÁ∫øÁ®ãÊ±†ÁöÑÂÖ≥Èó≠ shutdown()Ôºö‰∏ç‰ºöÁ´ãÂç≥ÁªàÊ≠¢Á∫øÁ®ãÊ±†ÔºåËÄåÊòØË¶ÅÁ≠âÊâÄÊúâ‰ªªÂä°ÁºìÂ≠òÈòüÂàó‰∏≠ÁöÑ‰ªªÂä°ÈÉΩÊâßË°åÂÆåÂêéÊâçÁªàÊ≠¢Ôºå‰ΩÜÂÜç‰πü‰∏ç‰ºöÊé•ÂèóÊñ∞ÁöÑ‰ªªÂä° shutdownNow()ÔºöÁ´ãÂç≥ÁªàÊ≠¢Á∫øÁ®ãÊ±†ÔºåÂπ∂Â∞ùËØïÊâìÊñ≠Ê≠£Âú®ÊâßË°åÁöÑ‰ªªÂä°ÔºåÂπ∂‰∏îÊ∏ÖÁ©∫‰ªªÂä°ÁºìÂ≠òÈòüÂàóÔºåËøîÂõûÂ∞öÊú™ÊâßË°åÁöÑ‰ªªÂä° Á∫øÁ®ãÊ±†Â§ßÂ∞è Á≤óÁï• Â¶ÇÊûúÊòØCPUÂØÜÈõÜÂûã‰ªªÂä°ÔºåÂ∞±ÈúÄË¶ÅÂ∞ΩÈáèÂéãÊ¶®CPUÔºåÂèÇËÄÉÂÄºÂèØ‰ª•ËÆæ‰∏∫ NCPU+1 Â¶ÇÊûúÊòØIOÂØÜÈõÜÂûã‰ªªÂä°ÔºåÂèÇËÄÉÂÄºÂèØ‰ª•ËÆæÁΩÆ‰∏∫2*NCPU Á≤æÁ°ÆÔºöÔºà(Á∫øÁ®ãÁ≠âÂæÖÊó∂Èó¥+Á∫øÁ®ãCPUÊó∂Èó¥Ôºâ/Á∫øÁ®ãCPUÊó∂Èó¥ Ôºâ* CPUÊï∞ÁõÆ ÊúÄ‰Ω≥ÔºöÂéãÊµã ‰ªªÂä°ÁºìÂ≠òÈòüÂàóworkQueueÔºåÂÆÉÁî®Êù•Â≠òÊîæÁ≠âÂæÖÊâßË°åÁöÑ‰ªªÂä°„ÄÇBlockingQueue ÊòØ‰∏™Êé•Âè£Ôºå‰Ω†ÈúÄË¶Å‰ΩøÁî®ÂÆÉÁöÑÂÆûÁé∞‰πã‰∏ÄÊù•‰ΩøÁî®BlockingQueueÔºåjava.util.concurrentÂåÖ‰∏ãÂÖ∑Êúâ‰ª•‰∏ã BlockingQueue Êé•Âè£ÁöÑÂÆûÁé∞Á±ªÔºö ArrayBlockingQueueÔºöArrayBlockingQueue ÊòØ‰∏Ä‰∏™ÊúâÁïåÁöÑÈòªÂ°ûÈòüÂàóÔºåÂÖ∂ÂÜÖÈÉ®ÂÆûÁé∞ÊòØÂ∞ÜÂØπË±°ÊîæÂà∞‰∏Ä‰∏™Êï∞ÁªÑÈáå„ÄÇÊúâÁïå‰πüÂ∞±ÊÑèÂë≥ÁùÄÔºåÂÆÉ‰∏çËÉΩÂ§üÂ≠òÂÇ®Êó†ÈôêÂ§öÊï∞ÈáèÁöÑÂÖÉÁ¥†„ÄÇÂÆÉÊúâ‰∏Ä‰∏™Âêå‰∏ÄÊó∂Èó¥ËÉΩÂ§üÂ≠òÂÇ®ÂÖÉÁ¥†Êï∞ÈáèÁöÑ‰∏äÈôê„ÄÇ‰Ω†ÂèØ‰ª•Âú®ÂØπÂÖ∂ÂàùÂßãÂåñÁöÑÊó∂ÂÄôËÆæÂÆöËøô‰∏™‰∏äÈôêÔºå‰ΩÜ‰πãÂêéÂ∞±Êó†Ê≥ïÂØπËøô‰∏™‰∏äÈôêËøõË°å‰øÆÊîπ‰∫Ü(ËØëËÄÖÊ≥®ÔºöÂõ†‰∏∫ÂÆÉÊòØÂü∫‰∫éÊï∞ÁªÑÂÆûÁé∞ÁöÑÔºå‰πüÂ∞±ÂÖ∑ÊúâÊï∞ÁªÑÁöÑÁâπÊÄßÔºö‰∏ÄÊó¶ÂàùÂßãÂåñÔºåÂ§ßÂ∞èÂ∞±Êó†Ê≥ï‰øÆÊîπ)„ÄÇ LinkedBlockingQueueÔºöLinkedBlockingQueue ÂÜÖÈÉ®‰ª•‰∏Ä‰∏™ÈìæÂºèÁªìÊûÑ(ÈìæÊé•ËäÇÁÇπ)ÂØπÂÖ∂ÂÖÉÁ¥†ËøõË°åÂ≠òÂÇ®„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÁöÑËØùÔºåËøô‰∏ÄÈìæÂºèÁªìÊûÑÂèØ‰ª•ÈÄâÊã©‰∏Ä‰∏™‰∏äÈôê„ÄÇÂ¶ÇÊûúÊ≤°ÊúâÂÆö‰πâ‰∏äÈôêÔºåÂ∞Ü‰ΩøÁî® Integer.MAX_VALUE ‰Ωú‰∏∫‰∏äÈôê„ÄÇ DelayQueueÔºöDelayQueue ÂØπÂÖÉÁ¥†ËøõË°åÊåÅÊúâÁõ¥Âà∞‰∏Ä‰∏™ÁâπÂÆöÁöÑÂª∂ËøüÂà∞Êúü„ÄÇÊ≥®ÂÖ•ÂÖ∂‰∏≠ÁöÑÂÖÉÁ¥†ÂøÖÈ°ªÂÆûÁé∞ java.util.concurrent.Delayed Êé•Âè£„ÄÇ PriorityBlockingQueueÔºöPriorityBlockingQueue ÊòØ‰∏Ä‰∏™Êó†ÁïåÁöÑÂπ∂ÂèëÈòüÂàó„ÄÇÂÆÉ‰ΩøÁî®‰∫ÜÂíåÁ±ª java.util.PriorityQueue ‰∏ÄÊ†∑ÁöÑÊéíÂ∫èËßÑÂàô„ÄÇ‰Ω†Êó†Ê≥ïÂêëËøô‰∏™ÈòüÂàó‰∏≠ÊèíÂÖ• null ÂÄº„ÄÇÊâÄÊúâÊèíÂÖ•Âà∞ PriorityBlockingQueue ÁöÑÂÖÉÁ¥†ÂøÖÈ°ªÂÆûÁé∞ java.lang.Comparable Êé•Âè£„ÄÇÂõ†Ê≠§ËØ•ÈòüÂàó‰∏≠ÂÖÉÁ¥†ÁöÑÊéíÂ∫èÂ∞±ÂèñÂÜ≥‰∫é‰Ω†Ëá™Â∑±ÁöÑ Comparable ÂÆûÁé∞„ÄÇ SynchronousQueueÔºöSynchronousQueue ÊòØ‰∏Ä‰∏™ÁâπÊÆäÁöÑÈòüÂàóÔºåÂÆÉÁöÑÂÜÖÈÉ®ÂêåÊó∂Âè™ËÉΩÂ§üÂÆπÁ∫≥Âçï‰∏™ÂÖÉÁ¥†„ÄÇÂ¶ÇÊûúËØ•ÈòüÂàóÂ∑≤Êúâ‰∏ÄÂÖÉÁ¥†ÁöÑËØùÔºåËØïÂõæÂêëÈòüÂàó‰∏≠ÊèíÂÖ•‰∏Ä‰∏™Êñ∞ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÂ∞Ü‰ºöÈòªÂ°ûÔºåÁõ¥Âà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂ∞ÜËØ•ÂÖÉÁ¥†‰ªéÈòüÂàó‰∏≠ÊäΩËµ∞„ÄÇÂêåÊ†∑ÔºåÂ¶ÇÊûúËØ•ÈòüÂàó‰∏∫Á©∫ÔºåËØïÂõæÂêëÈòüÂàó‰∏≠ÊäΩÂèñ‰∏Ä‰∏™ÂÖÉÁ¥†ÁöÑÁ∫øÁ®ãÂ∞Ü‰ºöÈòªÂ°ûÔºåÁõ¥Âà∞Âè¶‰∏Ä‰∏™Á∫øÁ®ãÂêëÈòüÂàó‰∏≠ÊèíÂÖ•‰∫Ü‰∏ÄÊù°Êñ∞ÁöÑÂÖÉÁ¥†„ÄÇÊçÆÊ≠§ÔºåÊääËøô‰∏™Á±ªÁß∞‰Ωú‰∏Ä‰∏™ÈòüÂàóÊòæÁÑ∂ÊòØÂ§∏Â§ßÂÖ∂ËØç‰∫Ü„ÄÇÂÆÉÊõ¥Â§öÂÉèÊòØ‰∏Ä‰∏™Ê±áÂêàÁÇπ„ÄÇ Á∫øÁ®ãÊ±†ÊÄªÁªì Á∫øÁ®ãÊ±†ÂàöÂàõÂª∫Êó∂ÔºåÈáåÈù¢Ê≤°Êúâ‰∏Ä‰∏™Á∫øÁ®ã„ÄÇ‰ªªÂä°ÈòüÂàóÊòØ‰Ωú‰∏∫ÂèÇÊï∞‰º†ËøõÊù•ÁöÑ„ÄÇ‰∏çËøáÔºåÂ∞±ÁÆóÈòüÂàóÈáåÈù¢Êúâ‰ªªÂä°ÔºåÁ∫øÁ®ãÊ±†‰πü‰∏ç‰ºöÈ©¨‰∏äÊâßË°åÂÆÉ‰ª¨„ÄÇ ÂΩìË∞ÉÁî® execute() ÊñπÊ≥ïÊ∑ªÂä†‰∏Ä‰∏™‰ªªÂä°Êó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂÅöÂ¶Ç‰∏ãÂà§Êñ≠Ôºö Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ∞è‰∫é corePoolSizeÔºåÈÇ£‰πàÈ©¨‰∏äÂàõÂª∫Á∫øÁ®ãËøêË°åËøô‰∏™‰ªªÂä°Ôºõ Â¶ÇÊûúÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é corePoolSizeÔºåÈÇ£‰πàÂ∞ÜËøô‰∏™‰ªªÂä°ÊîæÂÖ•ÈòüÂàóÔºõ Â¶ÇÊûúËøôÊó∂ÂÄôÈòüÂàóÊª°‰∫ÜÔºåËÄå‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ∞è‰∫é maximumPoolSizeÔºåÈÇ£‰πàËøòÊòØË¶ÅÂàõÂª∫ÈùûÊ†∏ÂøÉÁ∫øÁ®ãÁ´ãÂàªËøêË°åËøô‰∏™‰ªªÂä°Ôºõ Â¶ÇÊûúÈòüÂàóÊª°‰∫ÜÔºåËÄå‰∏îÊ≠£Âú®ËøêË°åÁöÑÁ∫øÁ®ãÊï∞ÈáèÂ§ß‰∫éÊàñÁ≠â‰∫é maximumPoolSizeÔºåÈÇ£‰πàÁ∫øÁ®ãÊ±†‰ºöÊäõÂá∫ÂºÇÂ∏∏RejectExecutionException„ÄÇ ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂÆåÊàê‰ªªÂä°Êó∂ÔºåÂÆÉ‰ºö‰ªéÈòüÂàó‰∏≠Âèñ‰∏ã‰∏Ä‰∏™‰ªªÂä°Êù•ÊâßË°å„ÄÇ ÂΩì‰∏Ä‰∏™Á∫øÁ®ãÊó†‰∫ãÂèØÂÅöÔºåË∂ÖËøá‰∏ÄÂÆöÁöÑÊó∂Èó¥ÔºàkeepAliveTimeÔºâÊó∂ÔºåÁ∫øÁ®ãÊ±†‰ºöÂà§Êñ≠ÔºåÂ¶ÇÊûúÂΩìÂâçËøêË°åÁöÑÁ∫øÁ®ãÊï∞Â§ß‰∫é corePoolSizeÔºåÈÇ£‰πàËøô‰∏™Á∫øÁ®ãÂ∞±Ë¢´ÂÅúÊéâ„ÄÇÊâÄ‰ª•Á∫øÁ®ãÊ±†ÁöÑÊâÄÊúâ‰ªªÂä°ÂÆåÊàêÂêéÔºåÂÆÉÊúÄÁªà‰ºöÊî∂Áº©Âà∞ corePoolSize ÁöÑÂ§ßÂ∞è„ÄÇ]]></content>
      <categories>
        <category>JAVA</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>Á∫øÁ®ãÊ±†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-Á¥¢Âºï‰∏éÁÆóÊ≥ï]]></title>
    <url>%2FMysql%2FMysql05%2F</url>
    <content type="text"><![CDATA[InnoDBÂ≠òÂÇ®ÂºïÊìéÊîØÊåÅ‰ª•‰∏ãÂá†ÁßçÂ∏∏ËßÅÁöÑÁ¥¢ÂºïÔºö B+Ê†ëÁ¥¢Âºï„ÄÅÂÖ®ÊñáÁ¥¢Âºï„ÄÅÂìàÂ∏åÁ¥¢Âºï ‰∫åÂèâÊü•ÊâæÊ†ëÂú®‰ªãÁªçB+Ê†ëÂâçÔºåÈúÄË¶ÅÂÖà‰∫ÜËß£‰∏Ä‰∏ã‰∫åÂèâÊü•ÊâæÊ†ë„ÄÇB+Ê†ëÊòØÈÄöËøá‰∫åÂèâÊü•ÊâæÊ†ëÔºåÂÜçÁî±Âπ≥Ë°°‰∫åÂèâÊ†ëÔºåBÊ†ëÊºîÂåñËÄåÊù•„ÄÇ ÂÆö‰πâÂ∑¶Â≠©Â≠êÊØîÁà∂ËäÇÁÇπÂ∞èÔºåÂè≥Â≠©Â≠êÊØîÁà∂ËäÇÁÇπÂ§ßÔºå‰∏≠Â∫èÈÅçÂéÜÂèØ‰ª•ÂæóÂà∞ÈîÆÂÄºÁöÑÊéíÂ∫èËæìÂá∫„ÄÇ ÊèíÂÖ• Âà†Èô§ÂçïÂ≠©Â≠êÁöÑÊÉÖÂÜµÔºöÂ¶ÇÊûúÂà†Èô§ÁöÑËäÇÁÇπÊúâÂ∑¶Â≠©Â≠êÈÇ£Â∞±ÊääÂ∑¶Â≠©Â≠êÈ°∂‰∏äÂéªÔºåÂ¶ÇÊûúÊúâÂè≥Â≠©Â≠êÂ∞±ÊääÂè≥Â≠©Â≠êÈ°∂‰∏äÂéª Â∑¶Âè≥ÈÉΩÊúâÂ≠©Â≠êÁöÑÊÉÖÂÜµÔºöÂèØ‰ª•Ëøô‰πàÊÉ≥Ë±°ÔºåÂ¶ÇÊûúÊàë‰ª¨Ë¶ÅÂà†Èô§‰∏Ä‰∏™Êï∞ÁªÑÁöÑÂÖÉÁ¥†ÔºåÈÇ£‰πàÊàë‰ª¨Âú®Âà†Èô§Âêé‰ºöÂ∞ÜÂÖ∂ÂêéÈù¢ÁöÑ‰∏Ä‰∏™ÂÖÉÁ¥†È°∂Âà∞Ë¢´Âà†Èô§ÁöÑ‰ΩçÁΩÆ„ÄÇ‰∫åÂèâÊ†ëÊìç‰ΩúÂêåÊ†∑ÔºåÊàë‰ª¨Ê†πÊçÆ‰∏≠Â∫èÈÅçÂéÜÊâæÂà∞Ë¶ÅÂà†Èô§ÁªìÁÇπÁöÑÂêé‰∏Ä‰∏™ÁªìÁÇπÔºåÁÑ∂ÂêéÈ°∂‰∏äÂéªÔºåÂéüÁêÜË∑üÊï∞ÁªÑ‰∏ÄÊ†∑„ÄÇ Êü•ÊâæÊü•ÊâæÁöÑÂπ≥ÂùáÊó∂Èó¥Â§çÊùÇÂ∫¶log(N)ÔºåÂú®ÊúÄÂùèÁöÑÊÉÖÂÜµ‰∏ã‰ºöÂá∫Áé∞ÈìæË°®ÁöÑÂΩ¢ÂºèÔºåÂ§çÊùÇÂ∫¶ÈÄÄÂåñÂà∞O(N)„ÄÇ Âπ≥Ë°°‰∫åÂèâÊ†ëÂΩì‰∫åÂèâÊü•ÊâæÊ†ë‰ª•ÂÆåÂÖ®‰∫åÂèâÊ†ëÁöÑÂΩ¢ÂºèÂ±ïÁé∞ÔºåËøôÊ†∑ÊàëÊâçËÉΩÂÅöÂà∞Êü•ÊâæÊòØ‰∏•Ê†ºÁöÑO(logN)Ôºå ÂÆö‰πâÈ¶ñÂÖàÁ¨¶Âêà‰∫åÂèâÊü•ÊâæÊ†ëÁöÑÂÆö‰πâÔºåÂÖ∂Ê¨°ÂøÖÈ°ªÊª°Ë∂≥‰ªª‰ΩïËäÇÁÇπÁöÑ‰∏§‰∏™Â≠êÊ†ëÁöÑÈ´òÂ∫¶ÊúÄÂ§ßÂ∑Æ‰∏∫1„ÄÇ ÊóãËΩ¨ËäÇÁÇπÂÜçÊÄé‰πàÂ§±Ë°°ÈÉΩÈÄÉ‰∏çËøá4ÁßçÊÉÖÂÜµ Â∑¶Â≠êÊ†ëÁöÑÂ∑¶ËæπËäÇÁÇπ Âè≥Â≠êÊ†ëÁöÑÂè≥ËæπËäÇÁÇπ Â∑¶Â≠êÊ†ëÁöÑÂè≥ËæπËäÇÁÇπÊâæÂà∞Â§±Ë°°ÁÇπÔºåÂ§±Ë°°ÁÇπÁöÑÂ∑¶Â≠êÊ†ëËøõË°åÂè≥Â≠êÊ†ëÁöÑÂè≥ËæπËäÇÁÇπÊÉÖÂÜµÊóãËΩ¨ÔºåÁÑ∂ÂêéËøõË°åÂ∑¶Â≠êÊ†ëÁöÑÂ∑¶ËæπËäÇÁÇπÊóãËΩ¨ Âè≥Â≠êÊ†ëÁöÑÂ∑¶ËæπËäÇÁÇπ ÊèíÂÖ•&amp;Âà†Èô§Ê≠•È™§Âêå‰∫åÂèâÊü•ÊâæÊ†ëÔºåÂè™ÊòØÂú®ÊèíÂÖ•ÊàñÂà†Èô§ËäÇÁÇπ‰πãÂêéÂ§ö‰∫Ü‰∏ÄÊ≠•ÊóãËΩ¨ÁöÑËøáÁ®ã B+Ê†ë]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
        <tag>InnoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mysql-Â≠òÂÇ®Á®ãÂ∫è]]></title>
    <url>%2FMysql%2FMysql-storage%2F</url>
    <content type="text"><![CDATA[MySQL‰∏≠ÁöÑÂ≠òÂÇ®Á®ãÂ∫èÊú¨Ë¥®‰∏äÂ∞ÅË£Ö‰∫Ü‰∏Ä‰∫õÂèØÊâßË°åÁöÑËØ≠Âè•ÔºåÁÑ∂ÂêéÁªôÁî®Êà∑Êèê‰æõ‰∏ÄÁßçÁÆÄÂçïÁöÑË∞ÉÁî®ÊñπÂºèÊù•ÊâßË°åËøô‰∫õËØ≠Âè•ÔºåÊ†πÊçÆË∞ÉÁî®ÊñπÂºèÁöÑ‰∏çÂêåÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂ≠òÂÇ®Á®ãÂ∫èÂàÜ‰∏∫Â≠òÂÇ®‰æãÁ®ã„ÄÅËß¶ÂèëÂô®Âíå‰∫ã‰ª∂ËøôÂá†ÁßçÁ±ªÂûã„ÄÇÂÖ∂‰∏≠ÔºåÂ≠òÂÇ®‰æãÁ®ãÂèàÂèØ‰ª•Ë¢´ÁªÜÂàÜ‰∏∫Â≠òÂÇ®ÂáΩÊï∞ÂíåÂ≠òÂÇ®ËøáÁ®ã„ÄÇ Ëá™ÂÆö‰πâÂèòÈáèMySQL‰∏≠ÂØπÊàë‰ª¨Ëá™ÂÆö‰πâÁöÑÂèòÈáèÁöÑÂëΩÂêçÊúâ‰∏™Ë¶ÅÊ±ÇÔºåÈÇ£Â∞±ÊòØÂèòÈáèÂêçÁß∞ÂâçÂøÖÈ°ªÂä†‰∏Ä‰∏™@Á¨¶Âè∑„ÄÇÊàë‰ª¨Ëá™ÂÆö‰πâÂèòÈáèÁöÑÂÄºÁöÑÁ±ªÂûãÂèØ‰ª•ÊòØ‰ªªÊÑèMySQLÊîØÊåÅÁöÑÁ±ªÂûãÔºå‰æãÂ¶ÇÊàë‰ª¨Ëá™ÂÆö‰πâ‰∏Ä‰∏™ÂèòÈáèaÔºö 12mysql&gt; SET @a = 1;Query OK, 0 rows affected (0.00 sec) Â¶ÇÊûúÊàë‰ª¨ÊÉ≥Êü•ÁúãËøô‰∏™ÂèòÈáèÁöÑÂÄºÁöÑËØùÔºå‰ΩøÁî®SELECTËØ≠Âè•Â∞±Â•Ω‰∫ÜÔºå‰∏çËøá‰ªçÁÑ∂ÈúÄË¶ÅÂú®ÂèòÈáèÂêçÁß∞Âä†‰∏Ä‰∏™@Á¨¶Âè∑Ôºö 1234567mysql&gt; SELECT @a;+------+| @a |+------+| 1 |+------+1 row in set (0.00 sec) Âêå‰∏Ä‰∏™ÂèòÈáè‰πüÂèØ‰ª•Â≠òÂÇ®Â≠òÂÇ®‰∏çÂêåÁ±ªÂûãÁöÑÂÄºÔºåÊØîÊñπËØ¥Êàë‰ª¨ÂÜçÊää‰∏Ä‰∏™Â≠óÁ¨¶‰∏≤ÂÄºËµãÂÄºÁªôÂèòÈáèaÔºö 12345678910mysql&gt; SET @a = 'Âï¶';Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT @a;+------+| @a |+------+| Âï¶ |+------+1 row in set (0.00 sec) Èô§‰∫ÜÊää‰∏Ä‰∏™Â∏∏ÈáèËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáè‰ª•Â§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•Êää‰∏Ä‰∏™ÂèòÈáèËµãÂÄºÁªôÂè¶‰∏Ä‰∏™ÂèòÈáèÔºö 12345678910mysql&gt; SET @b = @a;Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT @b;+------+| @b |+------+| Âï¶ |+------+1 row in set (0.00 sec) Êàë‰ª¨ËøòÂèØ‰ª•Â∞ÜÊüê‰∏™Êü•ËØ¢ÁöÑÁªìÊûúËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáèÔºåÂâçÊèêÊòØËøô‰∏™Êü•ËØ¢ÁöÑÁªìÊûúÂè™Êúâ‰∏Ä‰∏™ÂÄºÔºö 12mysql&gt; SET @a = (SELECT first_column FROM first_table LIMIT 1);Query OK, 0 rows affected (0.00 sec) ËøòÂèØ‰ª•Áî®Âè¶‰∏ÄÁßçÂΩ¢ÂºèÁöÑËØ≠Âè•Êù•Â∞ÜÊü•ËØ¢ÁöÑÁªìÊûúËµãÂÄºÁªô‰∏Ä‰∏™ÂèòÈáèÔºö 12mysql&gt; SELECT first_column FROM first_table LIMIT 1 INTO @b;Query OK, 1 row affected (0.00 sec) Êàë‰ª¨Êü•Áúã‰∏Ä‰∏ãËøô‰∏§‰∏™ÂèòÈáèÁöÑÂÄºÔºö 1234567mysql&gt; SELECT @a, @b;+------+------+| @a | @b |+------+------+| 1 | 1 |+------+------+1 row in set (0.00 sec) Â¶ÇÊûúÊàë‰ª¨ÁöÑÊü•ËØ¢ÁªìÊûúÊòØ‰∏ÄÊù°ËÆ∞ÂΩïÔºåËØ•ËÆ∞ÂΩï‰∏≠ÊúâÂ§ö‰∏™ÂàóÁöÑÂÄºÁöÑËØùÔºåÊàë‰ª¨ÊÉ≥ÊääËøôÂá†‰∏™ÂÄºÂàÜÂà´ËµãÂÄºÂà∞‰∏çÂêåÁöÑÂèòÈáè‰∏≠ÔºåÂè™ËÉΩ‰ΩøÁî®INTOËØ≠Âè•‰∫ÜÔºö 12345678910mysql&gt; SELECT first_column, second_column FROM first_table LIMIT 1 INTO @a, @b;Query OK, 1 row affected (0.00 sec)mysql&gt; SELECT @a, @b; +------+------+| @a | @b |+------+------+| 1 | aaa |+------+------+1 row in set (0.00 sec) Â§çÂêàËØ≠Âè•Âú®MySQLÂÆ¢Êà∑Á´ØÁöÑ‰∫§‰∫íÁïåÈù¢Â§ÑÔºåÂΩìÊàë‰ª¨ÂÆåÊàêÈîÆÁõòËæìÂÖ•Âπ∂Êåâ‰∏ãÂõûËΩ¶ÈîÆÊó∂ÔºåMySQLÂÆ¢Êà∑Á´Ø‰ºöÊ£ÄÊµãÊàë‰ª¨ËæìÂÖ•ÁöÑÂÜÖÂÆπ‰∏≠ÊòØÂê¶ÂåÖÂê´;„ÄÅ\gÊàñËÄÖ\GËøô‰∏â‰∏™Á¨¶Âè∑‰πã‰∏ÄÔºåÂ¶ÇÊûúÊúâÁöÑËØùÔºå‰ºöÊääÊàë‰ª¨ËæìÂÖ•ÁöÑÂÜÖÂÆπÂèëÈÄÅÂà∞ÊúçÂä°Âô®„ÄÇËøôÊ†∑‰∏ÄÊù•ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥ÁªôÊúçÂä°Âô®ÂèëÈÄÅÂ§çÂêàËØ≠Âè•Ôºà‰πüÂ∞±ÊòØÁî±‰∏ÄÊù°ÊàñÂ§öÊù°ËØ≠Âè•ÁªÑÊàêÁöÑËØ≠Âè•ÔºâÁöÑËØùÔºåÂ∞±ÈúÄË¶ÅÊääËøô‰∫õËØ≠Âè•ÂÜôÂà∞‰∏ÄË°å‰∏≠ÔºåÊØîÂ¶ÇËøôÊ†∑Ôºö 123456789101112131415161718mysql&gt; SELECT first_column FROM first_table ;SELECT second_column FROM first_table;+--------------+| first_column |+--------------+| 1 || 2 || NULL |+--------------+3 rows in set (0.00 sec)+---------------+| second_column |+---------------+| aaa || NULL || ccc |+---------------+3 rows in set (0.00 sec) Êàë‰ª¨‰πüÂèØ‰ª•Áî®delimiterÂëΩ‰ª§Êù•Ëá™ÂÆö‰πâMySQLÁöÑÊ£ÄÊµãËæìÂÖ•ÁªìÊùüÁöÑÁ¨¶Âè∑ÔºåÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021mysql&gt; delimiter $mysql&gt; SELECT first_column FROM first_table ; -&gt; SELECT second_column FROM first_table; -&gt; $+--------------+| first_column |+--------------+| 1 || 2 || NULL |+--------------+3 rows in set (0.00 sec)+---------------+| second_column |+---------------+| aaa || NULL || ccc |+---------------+3 rows in set (0.00 sec) delimiter $ÂëΩ‰ª§ÊÑèÂë≥ÁùÄ‰øÆÊîπMySQLÂÆ¢Êà∑Á´ØÊ£ÄÊµãËæìÂÖ•ÁªìÊùüÁöÑÁ¨¶Âè∑‰∏∫$,‰πüÂèØ‰ª•‰ΩøÁî®‰ªª‰ΩïÁ¨¶Âè∑Êù•‰Ωú‰∏∫MySQLÂÆ¢Êà∑Á´ØÊ£ÄÊµãËæìÂÖ•ÁªìÊùüÁöÑÁ¨¶Âè∑Ôºå‰πüÂåÖÊã¨Â§ö‰∏™Â≠óÁ¨¶ÔºåÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021mysql&gt; delimiter 666mysql&gt; SELECT first_column FROM first_table; -&gt; SELECT second_column FROM first_table; -&gt; 666+--------------+| first_column |+--------------+| 1 || 2 || NULL |+--------------+3 rows in set (0.00 sec)+---------------+| second_column |+---------------+| aaa || NULL || ccc |+---------------+3 rows in set (0.00 sec) Â≠òÂÇ®ÂáΩÊï∞ÂàõÂª∫Â≠òÂÇ®ÂáΩÊï∞Â≠òÂÇ®ÂáΩÊï∞ÂÖ∂ÂÆûÂ∞±ÊòØ‰∏ÄÁßçÂáΩÊï∞ÔºåÂè™‰∏çËøáÂú®Ëøô‰∏™ÂáΩÊï∞ÈáåÂèØ‰ª•ÊâßË°åÂëΩ‰ª§ËØ≠Âè•ËÄåÂ∑≤„ÄÇMySQL‰∏≠ÂÆö‰πâÂ≠òÂÇ®ÂáΩÊï∞ÁöÑËØ≠Âè•Â¶Ç‰∏ãÔºö 12345CREATE FUNCTION Â≠òÂÇ®ÂáΩÊï∞ÂêçÁß∞([ÂèÇÊï∞ÂàóË°®])RETURNS ËøîÂõûÂÄºÁ±ªÂûãBEGIN ÂáΩÊï∞‰ΩìÂÜÖÂÆπEND ‰∏æ‰∏™üå∞Ôºö 123456789mysql&gt; delimiter $mysql&gt; CREATE FUNCTION second_column(a INT) -&gt; RETURNS VARCHAR(100) -&gt; BEGIN -&gt; RETURN (SELECT second_column FROM first_table WHERE first_column = a); -&gt; END $Query OK, 0 rows affected (0.00 sec)mysql&gt; delimiter ; Â≠òÂÇ®ÂáΩÊï∞ÁöÑË∞ÉÁî®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÂáΩÊï∞ÂíåÁ≥ªÁªüÂÜÖÁΩÆÂáΩÊï∞ÁöÑ‰ΩøÁî®ÊñπÂºèÊòØ‰∏ÄÊ†∑ÁöÑÔºåÈÉΩÊòØÂú®ÂáΩÊï∞ÂêçÂêéÂä†Â∞èÊã¨Âè∑()Ë°®Á§∫ÂáΩÊï∞Ë∞ÉÁî® 1234567mysql&gt; SELECT second_column(1);+------------------+| second_column(1) |+------------------+| aaa |+------------------+1 row in set (0.00 sec) Êü•ÁúãÂ≠òÂÇ®ÂáΩÊï∞Êü•ÁúãÂÆö‰πâ‰∫ÜÂ§öÂ∞ë‰∏™Â≠òÂÇ®ÂáΩÊï∞: 1SHOW FUNCTION STATUS [LIKE ÈúÄË¶ÅÂåπÈÖçÁöÑÂáΩÊï∞Âêç] Êü•ÁúãÊüê‰∏™ÂáΩÊï∞ÁöÑÂÖ∑‰ΩìÂÆö‰πâ: 1SHOW CREATE FUNCTION ÂáΩÊï∞Âêç Âà†Èô§Â≠òÂÇ®ÂáΩÊï∞Âà†Èô§Êüê‰∏™Â≠òÂÇ®ÂáΩÊï∞ 1DROP FUNCTION ÂáΩÊï∞Âêç Âú®ÂáΩÊï∞‰Ωì‰∏≠ÂÆö‰πâÂèòÈáèÂú®ÂáΩÊï∞‰Ωì‰∏≠‰ΩøÁî®ÂèòÈáèÂâçÂøÖÈ°ªÂÖàÂ£∞ÊòéËøô‰∏™ÂèòÈáèÔºåÂáΩÊï∞‰Ωì‰∏≠ÁöÑÂèòÈáèÂêç‰∏çÂÖÅËÆ∏Âä†@ÂâçÁºÄ,Â£∞ÊòéÊñπÂºèÂ¶Ç‰∏ãÔºö 12345678910111213DECLARE ÂèòÈáèÂêç Êï∞ÊçÆÁ±ªÂûã [DEFAULT ÈªòËÆ§ÂÄº]; mysql&gt; delimiter $mysql&gt; CREATE FUNCTION var_demo(a INT) -&gt; RETURNS INT -&gt; BEGIN -&gt; DECLARE b INT; -&gt; SET b = 5; -&gt; RETURN b+a; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; delimiter ; Êàë‰ª¨Ë∞ÉÁî®‰∏Ä‰∏ãËøô‰∏™ÂáΩÊï∞Ôºö 1234567mysql&gt; SELECT var_demo(2);+-------------+| var_demo(2) |+-------------+| 7 |+-------------+1 row in set (0.00 sec) Â¶ÇÊûú‰∏çÂØπÂ£∞ÊòéÁöÑÂèòÈáèËµãÂÄºÔºåÂÆÉÁöÑÈªòËÆ§ÂÄºÂ∞±ÊòØNULLÔºå‰πüÂèØ‰ª•ÈÄöËøáDEFAULTÂ≠êÂè•Êù•ÊòæÂºèÁöÑÊåáÂÆöÂèòÈáèÁöÑÈªòËÆ§ÂÄº. 123456789101112131415161718mysql&gt; delimiter $mysql&gt; CREATE FUNCTION var_default_demo()-&gt; RETURNS INT-&gt; BEGIN-&gt; DECLARE c INT DEFAULT 1;-&gt; RETURN c;-&gt; END $Query OK, 0 rows affected (0.00 sec)mysql&gt; delimiter ;mysql&gt; SELECT var_default_demo();+--------------------+| var_default_demo() |+--------------------+| 1 |+--------------------+1 row in set (0.00 sec) ÂèÇÊï∞ÂÆö‰πâÊØîÂ¶ÇÊàë‰ª¨‰∏äËæπÁºñÂÜôÁöÑËøô‰∏™second_columnÂáΩÊï∞Ôºö 12345mysql&gt; CREATE FUNCTION second_column(a INT) -&gt; RETURNS VARCHAR(100) -&gt; BEGIN -&gt; RETURN (SELECT second_column FROM first_table WHERE first_column = a); -&gt; END $ ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂèÇÊï∞Âêç‰∏çË¶ÅÂíåÂáΩÊï∞‰ΩìËØ≠Âè•‰∏≠ÂÖ∂‰ªñÁöÑÂèòÈáèÂêç„ÄÅÂëΩ‰ª§ËØ≠Âè•ÁöÑÊ†áËØÜÁ¨¶ÂÜ≤Á™Å„ÄÇÂπ∂‰∏îÂáΩÊï∞ÂèÇÊï∞‰∏çÂèØ‰ª•ÊåáÂÆöÈªòËÆ§ÂÄºÔºåÊàë‰ª¨Âú®Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÊó∂ÂÄôÔºåÂøÖÈ°ªÊòæÂºèÁöÑÊåáÂÆöÊâÄÊúâÁöÑÂèÇÊï∞ÔºåÂèÇÊï∞Á±ªÂûã‰πü‰∏ÄÂÆöË¶ÅÂåπÈÖç Âà§Êñ≠ËØ≠Âè•ËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1234567IF Â∏ÉÂ∞îË°®ËææÂºè THEN Â§ÑÁêÜËØ≠Âè•[ELSEIF Â∏ÉÂ∞îË°®ËææÂºè THEN Â§ÑÁêÜËØ≠Âè•][ELSE Â§ÑÁêÜËØ≠Âè•] END IF; ‰∏æ‰∏™üå∞Ôºö 12345678910111213141516171819202122232425262728mysql&gt; delimiter $mysql&gt; CREATE FUNCTION condition_demo(i INT) -&gt; RETURNS VARCHAR(10) -&gt; BEGIN -&gt; DECLARE result VARCHAR(10); -&gt; IF i = 1 THEN -&gt; SET result = 'ÁªìÊûúÊòØ1'; -&gt; ELSEIF i = 2 THEN -&gt; SET result = 'ÁªìÊûúÊòØ2'; -&gt; ELSEIF i = 3 THEN -&gt; SET result = 'ÁªìÊûúÊòØ3'; -&gt; ELSE -&gt; SET result = 'ÈùûÊ≥ïÂèÇÊï∞'; -&gt; END IF; -&gt; RETURN result; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; delimiter;mysql&gt; SELECT condition_demo(2);+-------------------+| condition_demo(2) |+-------------------+| ÁªìÊûúÊòØ2 |+-------------------+1 row in set (0.00 sec) Âæ™ÁéØËØ≠Âè•whileÂæ™ÁéØËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 123WHILE Â∏ÉÂ∞îË°®ËææÂºè DO Âæ™ÁéØËØ≠Âè•END WHILE; ‰∏æ‰∏™üå∞Ôºö 1234567891011121314151617181920212223mysql&gt; delimiter $mysql&gt; CREATE FUNCTION sum_all(n INT UNSIGNED) -&gt; RETURNS INT -&gt; BEGIN -&gt; DECLARE result INT DEFAULT 0; -&gt; DECLARE i INT DEFAULT 1; -&gt; WHILE i &lt;= n DO -&gt; SET result = result + i; -&gt; SET i = i + 1; -&gt; END WHILE; -&gt; RETURN result; -&gt; END $Query OK, 0 rows affected (0.00 sec)mysql&gt; delimiter;mysql&gt; select sum_all(10);+-------------+| sum_all(10) |+-------------+| 55 |+-------------+1 row in set (0.00 sec) REPEATÂæ™ÁéØËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 123REPEAT Âæ™ÁéØËØ≠Âè•UNTIL Â∏ÉÂ∞îË°®ËææÂºè END REPEAT; ‰∏æ‰∏™üå∞Ôºö 123456789101112131415161718192021mysql&gt; CREATE FUNCTION sum_repeat(n INT UNSIGNED) -&gt; RETURNS INT -&gt; BEGIN -&gt; DECLARE result INT DEFAULT 0; -&gt; DECLARE i INT DEFAULT 1; -&gt; REPEAT -&gt; -- Âæ™ÁéØÂºÄÂßã -&gt; SET result = result + i; -&gt; SET i = i + 1; -&gt; UNTIL i &gt; n END REPEAT; -&gt; RETURN result; -&gt; END $Query OK, 0 rows affected (0.02 sec)mysql&gt; select sum_repeat(5);+---------------+| sum_repeat(5) |+---------------+| 15 |+---------------+1 row in set (0.01 sec) LOOPÂæ™ÁéØËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ãÔºö 1234Âæ™ÁéØÊ†áËÆ∞:LOOP Âæ™ÁéØËØ≠Âè• LEAVE Âæ™ÁéØÊ†áËÆ∞;END LOOP Âæ™ÁéØÊ†áËÆ∞; ‰∏æ‰∏™üå∞Ôºö 12345678910111213141516171819202122mysql&gt; CREATE FUNCTION sum_loop(n INT UNSIGNED) -&gt; RETURNS INT -&gt; BEGIN -&gt; DECLARE result INT DEFAULT 0; -&gt; DECLARE i INT DEFAULT 1; -&gt; LOOP_NAME:LOOP -- Âæ™ÁéØÂºÄÂßã -&gt; IF i &gt; n THEN -&gt; LEAVE LOOP_NAME; -&gt; END IF; -&gt; SET result = result + i; -&gt; SET i = i + 1; -&gt; END LOOP LOOP_NAME; -&gt; RETURN result; -&gt; END $ mysql&gt; select sum_loop(10);+--------------+| sum_loop(10) |+--------------+| 55 |+--------------+1 row in set (0.00 sec) Â≠òÂÇ®ËøáÁ®ãÂ≠òÂÇ®ÂáΩÊï∞‰æßÈáç‰∫éÊâßË°åËØ≠Âè•Âπ∂ËøîÂõû‰∏Ä‰∏™ÂÄºÔºåËÄåÂ≠òÂÇ®ËøáÁ®ãÊõ¥‰æßÈáç‰∫éÂçïÁ∫ØÁöÑÂéªÊâßË°åËØ≠Âè•„ÄÇ ÂàõÂª∫Â≠òÂÇ®ËøáÁ®ã1234CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞([ÂèÇÊï∞ÂàóË°®])BEGIN ÈúÄË¶ÅÊâßË°åÁöÑËØ≠Âè•END ‰∏æ‰∏™üå∞Ôºö 1234567mysql&gt; CREATE PROCEDURE insert_first_table(c1 INT,c2 VARCHAR(100)) -&gt; BEGIN -&gt; SELECT * FROM first_table; -&gt; INSERT INTO first_table(first_column,second_column) VALUES(c1,c2); -&gt; SELECT * FROM first_table; -&gt; END $Query OK, 0 rows affected (0.02 sec) Â≠òÂÇ®ËøáÁ®ãÁöÑË∞ÉÁî®Â≠òÂÇ®ÂáΩÊï∞ÊâßË°åËØ≠Âè•Âπ∂ËøîÂõû‰∏Ä‰∏™ÂÄºÔºåÊâÄ‰ª•Â∏∏Áî®Âú®Ë°®ËææÂºè‰∏≠„ÄÇÂ≠òÂÇ®ËøáÁ®ãÂÅèÂêë‰∫éË∞ÉÁî®ÈÇ£‰∫õËØ≠Âè•ÔºåÂπ∂‰∏çËÉΩÁî®Âú®Ë°®ËææÂºè‰∏≠„ÄÇÊàë‰ª¨ÈúÄË¶ÅÊòæÂºèÁöÑ‰ΩøÁî®CALLËØ≠Âè•Êù•Ë∞ÉÁî®‰∏Ä‰∏™Â≠òÂÇ®ËøáÁ®ãÔºö 1CALL Â≠òÂÇ®ËøáÁ®ã([ÂèÇÊï∞ÂàóË°®]); ‰∏æ‰∏™üå∞Ôºö 123456789101112131415161718192021mysql&gt; CALL insert_first_table(4,'test'); +--------------+---------------+| first_column | second_column |+--------------+---------------+| 1 | aaa || 2 | NULL || NULL | ccc |+--------------+---------------+3 rows in set (0.00 sec)+--------------+---------------+| first_column | second_column |+--------------+---------------+| 1 | aaa || 2 | NULL || NULL | ccc || 4 | test |+--------------+---------------+4 rows in set (0.00 sec) Êü•ÁúãÂ≠òÂÇ®ËøáÁ®ã12345Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÂàõÂª∫ÁöÑÂ≠òÂÇ®ËøáÁ®ãÈÉΩÊúâÂì™‰∫õÁöÑËØ≠Âè•ÔºöSHOW PROCEDURE STATUS [LIKE ÈúÄË¶ÅÂåπÈÖçÁöÑÂáΩÊï∞Âêç]Êü•ÁúãÊüê‰∏™Â≠òÂÇ®ËøáÁ®ãÂÆö‰πâÁöÑËØ≠Âè•ÔºöSHOW CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞ Âà†Èô§Â≠òÂÇ®ËøáÁ®ãÂà†Èô§Êüê‰∏™Â≠òÂÇ®ËøáÁ®ã 1DROP PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞ Â≠òÂÇ®ËøáÁ®ãÂèÇÊï∞Á±ªÂûã ÂèÇÊï∞Á±ªÂûã ÂÆûÈôÖÂèÇÊï∞ÊòØÂê¶ÂøÖÈ°ªÊòØÂèòÈáè ‰ΩúÁî® IN Âê¶ Áî®‰∫éË∞ÉÁî®ËÄÖÂêëËøáÁ®ã‰º†ÈÄíÊï∞ÊçÆÔºåÂ¶ÇÊûúËØ•ÂèÇÊï∞Âú®ËøáÁ®ã‰∏≠Ë¢´‰øÆÊîπÔºåË∞ÉÁî®ËÄÖ‰∏çÂèØËßÅ OUT ÊòØ Áî®‰∫éÊääËøáÁ®ã‰∫ßÁîüÁöÑÁªìÊûúÊîæÂà∞Ê≠§ÂèÇÊï∞‰∏≠ÔºåËøáÁ®ãÁªìÊùüÂêéË∞ÉÁî®ËÄÖÂèØ‰ª•ÈÄöËøáËØ•ÂèÇÊï∞Êù•Ëé∑ÂèñËøáÁ®ãÊâßË°åÁöÑÁªìÊûú INOUT ÊòØ ÁªºÂêàINÂíåOUTÁâπÁÇπÔºåÂç≥ÂèØÁî®‰∫éË∞ÉÁî®ËÄÖÂêëËøáÁ®ã‰º†ÈÄíÊï∞ÊçÆÔºå‰πüÂèØÁî®‰∫éÂ≠òÊîæËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÁªìÊûú IN123456789101112131415161718192021mysql&gt; CREATE PROCEDURE test_in(IN num INT) -&gt; BEGIN -&gt; SELECT num; -&gt; SET num = 666; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; SET @a = 111;Query OK, 0 rows affected (0.01 sec)mysql&gt; CALL test_in(@a);+------+| num |+------+| 111 |+------+1 row in set (0.00 sec)Query OK, 0 rows affected (0.00 sec) INÂèÇÊï∞Á±ªÂûãÁöÑÂèòÈáèÂè™ËÉΩÁî®‰∫éËØªÂèñÔºåÂØπÁ±ªÂûãÁöÑÂèòÈáèËµãÂÄºÊòØ‰∏ç‰ºöË¢´Ë∞ÉÁî®ËÄÖÁúãÂà∞ÁöÑ„ÄÇÂ¶ÇÊûúÊàë‰ª¨‰∏çÂÜôÊòéÂèÇÊï∞Á±ªÂûãÁöÑËØùÔºåËØ•ÂèÇÊï∞ÁöÑÁ±ªÂûãÈªòËÆ§ÊòØIN„ÄÇ OUT12345678910111213141516171819202122232425mysql&gt; CREATE PROCEDURE test_out(OUT num INT) -&gt; BEGIN -&gt; SELECT num; -&gt; SET num = 666; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; CALL test_out(@a);+------+| num |+------+| NULL |+------+1 row in set (0.00 sec)Query OK, 0 rows affected (0.00 sec)mysql&gt; SELECT @a;+------+| @a |+------+| 666 |+------+1 row in set (0.00 sec) OUTÂèÇÊï∞Á±ªÂûãÁöÑÂèòÈáèÂè™ËÉΩÁî®‰∫éËµãÂÄºÔºåÂØπÁ±ªÂûãÁöÑÂèòÈáèËµãÂÄºÊòØ‰ºöË¢´Ë∞ÉÁî®ËÄÖÁúãÂà∞ÁöÑ,Âõ†Ê≠§ÂèÇÊï∞Â∞±‰∏çÂÖÅËÆ∏ÊòØÂ∏∏Èáè„ÄÇ Â≠òÂÇ®ËøáÁ®ã‰∏≠ÂêëË∞ÉÁî®ËÄÖËøîÂõûÂ§ö‰∏™ÂÄºÔºå‰∏æ‰∏™‰æãÂ≠êÔºö 1234567891011121314151617mysql&gt; CREATE PROCEDURE data_out(OUT a INT,OUT b INT) -&gt; BEGIN -&gt; SET a = 100; -&gt; SET b = 200; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; CALL data_out(@a,@b);Query OK, 0 rows affected (0.01 sec)mysql&gt; select @a,@b;+------+------+| @a | @b |+------+------+| 100 | 200 |+------+------+1 row in set (0.00 sec) INOUTËøôÁßçÁ±ªÂûãÁöÑÂèÇÊï∞Êó¢ÂèØ‰ª•Âú®Â≠òÂÇ®ËøáÁ®ã‰∏≠Ë¢´ËØªÂèñÔºå‰πüÂèØ‰ª•Ë¢´ËµãÂÄºÂêéË¢´Ë∞ÉÁî®ËÄÖÁúãÂà∞ÔºåÂõ†Ê≠§ÂèÇÊï∞Â∞±‰∏çÂÖÅËÆ∏ÊòØÂ∏∏Èáè„ÄÇ Â≠òÂÇ®ËøáÁ®ãÂíåÂáΩÊï∞ÁöÑÂå∫Âà´ Â≠òÂÇ®ÂáΩÊï∞Âú®ÂÆö‰πâÊó∂ÈúÄË¶ÅÊòæÂºèÁî®RETURNSËØ≠Âè•Ê†áÊòéËøîÂõûÁöÑÊï∞ÊçÆÁ±ªÂûãÔºåËÄå‰∏îÂú®ÂáΩÊï∞‰Ωì‰∏≠ÂøÖÈ°ª‰ΩøÁî®RETURNËØ≠Âè•Êù•ÊòæÂºèÊåáÂÆöËøîÂõûÁöÑÂÄºÔºåÂ≠òÂÇ®ËøáÁ®ã‰∏çÈúÄË¶Å„ÄÇ Â≠òÂÇ®ÂáΩÊï∞ÁöÑÂèÇÊï∞Á±ªÂûãÂè™ËÉΩÊòØINÔºåËÄåÂ≠òÂÇ®ËøáÁ®ãÊîØÊåÅIN„ÄÅOUT„ÄÅINOUT‰∏âÁßçÂèÇÊï∞Á±ªÂûã„ÄÇ Â≠òÂÇ®ÂáΩÊï∞Âè™ËÉΩËøîÂõû‰∏Ä‰∏™ÂÄºÔºåËÄåÂ≠òÂÇ®ËøáÁ®ãÂèØ‰ª•ÈÄöËøáËÆæÁΩÆÂ§ö‰∏™OUTÁ±ªÂûãÁöÑÂèÇÊï∞Êù•ËøîÂõûÂ§ö‰∏™ÁªìÊûú„ÄÇ Â≠òÂÇ®ÂáΩÊï∞ÊâßË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÁªìÊûúÈõÜÂπ∂‰∏ç‰ºöË¢´ÊòæÁ§∫Âà∞ÂÆ¢Êà∑Á´ØÔºåËÄåÂ≠òÂÇ®ËøáÁ®ãÊâßË°åËøáÁ®ã‰∏≠‰∫ßÁîüÁöÑÁªìÊûúÈõÜ‰ºöË¢´ÊòæÁ§∫Âà∞ÂÆ¢Êà∑Á´Ø„ÄÇ Â≠òÂÇ®ÂáΩÊï∞ÁöÑË∞ÉÁî®Áõ¥Êé•‰ΩøÁî®Âú®Ë°®ËææÂºè‰∏≠ÔºåËÄåÂ≠òÂÇ®ËøáÁ®ãÂè™ËÉΩÈÄöËøáCALLËØ≠Âè•Êù•ÊòæÂºèË∞ÉÁî®„ÄÇ Ê∏∏Ê†áÊ∏∏Ê†áÔºàCursorÔºâÊòØÂ§ÑÁêÜÊï∞ÊçÆÁöÑ‰∏ÄÁßçÊñπÊ≥ïÔºå‰∏∫‰∫ÜÊü•ÁúãÊàñËÄÖÂ§ÑÁêÜÁªìÊûúÈõÜ‰∏≠ÁöÑÊï∞ÊçÆÔºåÊ∏∏Ê†áÊèê‰æõ‰∫ÜÂú®ÁªìÊûúÈõÜ‰∏≠‰∏ÄÊ¨°‰∏ÄË°åÊàñËÄÖÂ§öË°åÂâçËøõÊàñÂêëÂêéÊµèËßàÊï∞ÊçÆÁöÑËÉΩÂäõ„ÄÇÂàùÂßãÁä∂ÊÄÅ‰∏ãÂÆÉÊ†áËÆ∞Êü•ËØ¢ÁªìÊûúÈõÜ‰∏≠ÁöÑÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩï,Ê†πÊçÆËøô‰∏™Ê∏∏Ê†áÂèñÂá∫ÂÆÉÂØπÂ∫îËÆ∞ÂΩïÁöÑ‰ø°ÊÅØÔºåÈöèÂêéÂÜçÁßªÂä®Ê∏∏Ê†áÔºåËÆ©ÂÆÉÊåáÂêëÂà´ÁöÑËÆ∞ÂΩï„ÄÇ ÂàõÂª∫Ê∏∏Ê†á1DECLARE Ê∏∏Ê†áÂêçÁß∞ CURSOR FOR Êü•ËØ¢ËØ≠Âè•; ‰∏æ‰∏™üå∞Ôºö 12345mysql&gt; CREATE PROCEDURE cursor_demo() -&gt; BEGIN -&gt; DECLARE first_table_cursor CURSOR FOR select * from first_table; -&gt; END $Query OK, 0 rows affected (0.01 sec) ÊâìÂºÄÂíåÂÖ≥Èó≠Ê∏∏Ê†á123OPEN Ê∏∏Ê†áÂêçÁß∞;CLOSE Ê∏∏Ê†áÂêçÁß∞; ÊâìÂºÄÊ∏∏Ê†áÊÑèÂë≥ÁùÄÊâßË°åÊü•ËØ¢ËØ≠Âè•ÔºåËÆ©ÂàõÂª∫Â•ΩÁöÑÊ∏∏Ê†á‰∏éËØ•Êü•ËØ¢ËØ≠Âè•ÂæóÂà∞ÁöÑÁªìÊûúÈõÜÂÖ≥ËÅîËµ∑Êù•ÔºåÂÖ≥Èó≠Ê∏∏Ê†áÊÑèÂë≥ÁùÄ‰ºöÈáäÊîæËØ•Ê∏∏Ê†áÂç†Áî®ÁöÑÂÜÖÂ≠òÔºåÊâÄ‰ª•‰∏ÄÊó¶Êàë‰ª¨‰ΩøÁî®ÂÆå‰∫ÜÊ∏∏Ê†áÔºåÂ∞±Ë¶ÅÊääÂÆÉÂÖ≥Èó≠Êéâ„ÄÇ Ê∏∏Ê†áËé∑ÂèñËÆ∞ÂΩï1FETCH Ê∏∏Ê†áÂêç INTO ÂèòÈáè1, ÂèòÈáè2, ... ÂèòÈáèn ‰∏æ‰∏™‰æãÂ≠êÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354mysql&gt; CREATE PROCEDURE cursor_demo() -&gt; BEGIN -&gt; DECLARE c1 INT; -&gt; DECLARE c2 VARCHAR(100); -&gt; DECLARE record_count INT; -&gt; DECLARE i INT DEFAULT 0; -&gt; -- Â£∞ÊòéÊ∏∏Ê†á -&gt; DECLARE first_table_cursor CURSOR FOR select * from first_table; -&gt; -&gt; -- ÁªüËÆ°Ë°®Ë°åÊï∞ -&gt; SELECT COUNT(*) FROM first_table INTO record_count; -&gt; -&gt; -- ‰ΩøÁî®Ê∏∏Ê†áÈÅçÂéÜ -&gt; OPEN first_table_cursor; -&gt; -&gt; WHILE i &lt; record_count DO -&gt; FETCH first_table_cursor INTO c1 , c2; -&gt; SELECT c1,c2; -&gt; SET i = i + 1; -&gt; END WHILE; -&gt; CLOSE first_table_cursor; -&gt; END $Query OK, 0 rows affected (0.01 sec)mysql&gt; CALL cursor_demo();+------+------+| c1 | c2 |+------+------+| 1 | aaa |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| 2 | NULL |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| NULL | ccc |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| 4 | test |+------+------+1 row in set (0.01 sec)Query OK, 0 rows affected (0.01 sec) iË°®Á§∫ÂΩìÂâçÊ∏∏Ê†áÂØπÂ∫îÁöÑËÆ∞ÂΩï‰ΩçÁΩÆ„ÄÇÊØèË∞ÉÁî®‰∏ÄÊ¨° FETCH ËØ≠Âè•ÔºåÊ∏∏Ê†áÂ∞±ÁßªÂä®Âà∞‰∏ã‰∏ÄÊù°ËÆ∞ÂΩïÁöÑ‰ΩçÁΩÆ„ÄÇ ÈÅçÂéÜÁªìÊùüÁöÑÊâßË°åÁ≠ñÁï•ÂÖ∂ÂÆûÂú®FETCHËØ≠Âè•Ëé∑Âèñ‰∏çÂà∞ËÆ∞ÂΩïÁöÑÊó∂ÂÄô‰ºöËß¶Âèë‰∏Ä‰∏™‰∫ã‰ª∂Ôºå‰ªéËÄåÊàë‰ª¨ÂèØ‰ª•ÂæóÁü•ÊâÄÊúâÁöÑËÆ∞ÂΩïÈÉΩË¢´Ëé∑ÂèñËøá‰∫ÜÔºåÁÑ∂ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•Âéª‰∏ªÂä®ÁöÑÂÅúÊ≠¢Âæ™ÁéØ„ÄÇMySQL‰∏≠ÂìçÂ∫îËøô‰∏™‰∫ã‰ª∂ÁöÑËØ≠Âè•Â¶Ç‰∏ãÔºö 1DECLARE CONTINUE HANDLER FOR NOT FOUND ËØ≠Âè•; ‰∏æ‰∏™üå∞ÔºåÂÜçÊù•ÊîπÂÜô‰∏Ä‰∏ãcursor_demoÂ≠òÂÇ®ËøáÁ®ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263mysql&gt; delimiter $mysql&gt; CREATE PROCEDURE cursor_demo() -&gt; BEGIN -&gt; -- Â£∞ÊòéÂèòÈáè -&gt; DECLARE c1 INT; -&gt; DECLARE c2 VARCHAR(100); -&gt; DECLARE not_done INT DEFAULT 1; -&gt; -&gt; -- Â£∞ÊòéÊ∏∏Ê†á -&gt; DECLARE first_table_cursor CURSOR FOR select * from first_table; -&gt; -&gt; -- Âú®Ê∏∏Ê†áÈÅçÂéÜÂÆåËÆ∞ÂΩïÁöÑÊó∂ÂÄôÂ∞ÜÂèòÈáè not_done ÁöÑÂÄºËÆæÁΩÆ‰∏∫ 0ÔºåÂπ∂‰∏îÁªßÁª≠ÊâßË°åÂêéËæπÁöÑËØ≠Âè• -&gt; DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_done = 0; -&gt; -&gt; -- ‰ΩøÁî®Ê∏∏Ê†áÈÅçÂéÜ -&gt; OPEN first_table_cursor; -&gt; -&gt; WHILE not_done = 1 DO -&gt; -&gt; FETCH first_table_cursor INTO c1 , c2; -&gt; SELECT c1,c2; -&gt; END WHILE; -&gt; CLOSE first_table_cursor; -&gt; END $Query OK, 0 rows affected (0.00 sec)mysql&gt; CALL cursor_demo();+------+------+| c1 | c2 |+------+------+| 1 | aaa |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| 2 | NULL |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| NULL | ccc |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| 4 | test |+------+------+1 row in set (0.01 sec)+------+------+| c1 | c2 |+------+------+| 4 | test |+------+------+1 row in set (0.01 sec)Query OK, 0 rows affected (0.01 sec) Êàë‰ª¨ÂèëÁé∞ÁªìÊûúÈõÜ‰∏≠ÊúÄÂêé‰∏ÄÊù°ËÆ∞ÂΩïËæìÂá∫‰∏§ÈÅçÊÄé‰πàÂäûÂë¢ÔºåÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®EXITÊù•Êõø‰ª£‰∏äËæπÁöÑCONTINUEÔºöCONTINUEË°®Á§∫Âú®FETCHËØ≠Âè•Ëé∑Âèñ‰∏çÂà∞ËÆ∞ÂΩïÁöÑÊó∂ÂÄô‰ªçÁÑ∂‰ºöÊâßË°å‰πãÂêéÂ≠òÂÇ®ËøáÁ®ãÁöÑËØ≠Âè•Ôºå‰πüÂ∞±ÊòØ‰ºöÂ∞ÜÊúÄÂêé‰∏ÄÊ¨°ÂÖ≥ËÅîÁöÑËÆ∞ÂΩï‰∏≠ÁöÑÂÄºÊîæÂÖ•ÊåáÂÆöÁöÑÂèòÈáèEXITË°®Á§∫Âú®FETCHËØ≠Âè•Ëé∑Âèñ‰∏çÂà∞ËÆ∞ÂΩïÁöÑÊó∂ÂÄô‰ªçÁÑ∂‰∏ç‰ºöÊâßË°å‰πãÂêéÂ≠òÂÇ®ËøáÁ®ãÁöÑËØ≠Âè• Ëß¶ÂèëÂô®Â≠òÂÇ®ÂáΩÊï∞‰∏éÂ≠òÂÇ®ËøáÁ®ãÈÉΩÊòØÈúÄË¶ÅÊàë‰ª¨ÊâãÂä®Ë∞ÉÁî®ÁöÑÔºåÂ¶ÇÊûúÊÉ≥Âú®ÊâßË°åÊüêÊù°ËØ≠Âè•‰πãÂâçÊàñËÄÖ‰πãÂêéËá™Âä®ÂéªË∞ÉÁî®Âè¶Â§ñ‰∏Ä‰∫õËØ≠Âè•ÔºåÂ∞±ÈúÄË¶ÅÁî®Âà∞Ëß¶ÂèëÂô®„ÄÇ ÂàõÂª∫Ëß¶ÂèëÂô®Ëß¶ÂèëÂô®ÁöÑÂÆö‰πâÔºö 12345678CREATE TRIGGER Ëß¶ÂèëÂô®Âêç&#123;BEFORE|AFTER&#125; &#123;INSERT|DELETE|UPDATE&#125;ON Ë°®ÂêçFOR EACH ROW BEGIN Ëß¶ÂèëÂô®ÂÜÖÂÆπEND MySQL‰∏≠ÁõÆÂâçÂè™ÊîØÊåÅÂØπINSERT„ÄÅDELETE„ÄÅUPDATEËøô‰∏âÁßçÁ±ªÂûãÁöÑËØ≠Âè•ËÆæÁΩÆËß¶ÂèëÂô®„ÄÇ Âõ†‰∏∫Ëß¶ÂèëÂô®‰ºöÂØπÊüê‰∏™ËØ≠Âè•ÂΩ±ÂìçÁöÑÊâÄÊúâËÆ∞ÂΩï‰æùÊ¨°Ë∞ÉÁî®Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑËß¶ÂèëÂô®ÂÜÖÂÆπÔºåÊâÄ‰ª•Êàë‰ª¨ÈúÄË¶Å‰∏ÄÁßçËÆøÈóÆËØ•ËÆ∞ÂΩï‰∏≠ÁöÑÂÜÖÂÆπÁöÑÊñπÂºèÔºåMySQLÊèê‰æõ‰∫ÜNEWÂíåOLD‰∏§‰∏™ÂçïËØçÊù•ÂàÜÂà´‰ª£Ë°®Êñ∞ËÆ∞ÂΩïÂíåÊóßËÆ∞ÂΩïÔºåÂÆÉ‰ª¨Âú®‰∏çÂêåÊìç‰Ωú‰∏≠ÁöÑÂê´‰πâ‰∏çÂêåÔºö ÂØπ‰∫éINSERTËØ≠Âè•ËÆæÁΩÆÁöÑËß¶ÂèëÂô®Êù•ËØ¥ÔºåNEW‰ª£Ë°®ÂáÜÂ§áÊèíÂÖ•ÁöÑËÆ∞ÂΩïÔºå‰∏çËÉΩ‰ΩøÁî®OLD„ÄÇ ÂØπ‰∫éDELETEËØ≠Âè•ËÆæÁΩÆÁöÑËß¶ÂèëÂô®Êù•ËØ¥ÔºåOLD‰ª£Ë°®Âà†Èô§ÂâçÁöÑËÆ∞ÂΩïÔºå‰∏çËÉΩ‰ΩøÁî®NEW„ÄÇ ÂØπ‰∫éUPDATEËØ≠Âè•ËÆæÁΩÆÁöÑËß¶ÂèëÂô®Êù•ËØ¥ÔºåNEW‰ª£Ë°®‰øÆÊîπÂêéÁöÑËÆ∞ÂΩïÔºåOLD‰ª£Ë°®‰øÆÊîπÂâçÁöÑËÆ∞ÂΩï„ÄÇ ‰∏æ‰∏™üå∞Ôºö 12345678910111213141516171819202122232425262728293031323334353637383940mysql&gt; CREATE TRIGGER test_trigger -&gt; BEFORE INSERT ON first_table -&gt; FOR EACH ROW -&gt; BEGIN -&gt; IF NEW.first_column &lt; 1 THEN -&gt; SET NEW.first_column = 1; -&gt; ELSEIF NEW.first_column &gt; 10 THEN -&gt; SET NEW.first_column = 10; -&gt; END IF; -&gt; END $Query OK, 0 rows affected (0.02 sec)mysql&gt; select * from first_table;+--------------+---------------+| first_column | second_column |+--------------+---------------+| 1 | aaa || 2 | NULL || NULL | ccc || 4 | test |+--------------+---------------+4 rows in set (0.00 sec)mysql&gt; INSERT INTO first_table(first_column,second_column) VALUES(5,'5'),(20,'20');Query OK, 2 rows affected (0.01 sec)Records: 2 Duplicates: 0 Warnings: 0mysql&gt; select * from first_table;+--------------+---------------+| first_column | second_column |+--------------+---------------+| 1 | aaa || 2 | NULL || NULL | ccc || 4 | test || 5 | 5 || 10 | 20 |+--------------+---------------+6 rows in set (0.00 sec) (20,‚Äô20‚Äô)ÁöÑÊèíÂÖ•ÁªìÊûúÂèòÊàê‰∫Ü(10,‚Äô20‚Äô)ËØ¥ÊòéËß¶ÂèëÂô®ÁîüÊïà‰∫Ü„ÄÇ Êü•ÁúãËß¶ÂèëÂô®12345Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâËß¶ÂèëÂô®ÁöÑËØ≠Âè•ÔºöSHOW TRIGGERS;Êü•ÁúãÊüê‰∏™ÂÖ∑‰ΩìÁöÑËß¶ÂèëÂô®ÁöÑÂÆö‰πâÔºöSHOW CREATE TRIGGER Ëß¶ÂèëÂô®Âêç; Âà†Èô§Ëß¶ÂèëÂô®Ôºö1DROP TRIGGER Ëß¶ÂèëÂô®Âêç; Ëß¶ÂèëÂô®‰ΩøÁî®Ê≥®ÊÑè‰∫ãÈ°π Ëß¶ÂèëÂô®ÂÜÖÂÆπ‰∏≠‰∏çËÉΩÊúâËæìÂá∫ÁªìÊûúÈõÜÁöÑËØ≠Âè•„ÄÇ ‰∏Ä‰∏™Ë°®ÊúÄÂ§öÂè™ËÉΩÂÆö‰πâ6‰∏™Ëß¶ÂèëÂô®ÂàÜÂà´ÊòØÔºö BEFORE INSERTËß¶ÂèëÂô® BEFORE DELETEËß¶ÂèëÂô® BEFORE UPDATEËß¶ÂèëÂô® AFTER INSERTËß¶ÂèëÂô® AFTER DELETEËß¶ÂèëÂô® AFTER UPDATEËß¶ÂèëÂô® NEW‰∏≠ÁöÑÂÄºÂèØ‰ª•Ë¢´Êõ¥ÊîπÔºåOLD‰∏≠ÁöÑÂÄºÊó†Ê≥ïÊõ¥Êîπ„ÄÇ Â¶ÇÊûúÊàë‰ª¨ÁöÑBEFOREËß¶ÂèëÂô®ÂÜÖÂÆπÊâßË°åËøáÁ®ã‰∏≠ÈÅáÂà∞‰∫ÜERRORÔºåÈÇ£Ëøô‰∏™Ëß¶ÂèëÂô®ÂØπÂ∫îÁöÑÂÖ∑‰ΩìËØ≠Âè•Â∞ÜÊó†Ê≥ïÊâßË°åÔºõÂ¶ÇÊûúÂÖ∑‰ΩìÁöÑÊìç‰ΩúËØ≠Âè•ÊâßË°åËøáÁ®ã‰∏≠ÈÅáÂà∞‰∫ÜERRORÔºåÈÇ£‰∏éÂÆÉÂØπÂ∫îÁöÑAFTERËß¶ÂèëÂô®ÁöÑÂÜÖÂÆπÂ∞ÜÊó†Ê≥ïÊâßË°å„ÄÇ ‰∫ã‰ª∂Â¶ÇÊûúÊàë‰ª¨ÊÉ≥ÊåáÂÆöÊüê‰∫õËØ≠Âè•Âú®Êüê‰∏™Êó∂Èó¥ÁÇπÊàñËÄÖÊØèÈöî‰∏Ä‰∏™Êó∂Èó¥ÊÆµÊâßË°å‰∏ÄÊ¨°ÁöÑËØù,Â∞±ÈúÄË¶ÅÂàõÂª∫‰∏Ä‰∏™‰∫ã‰ª∂„ÄÇ ÂàõÂª∫‰∫ã‰ª∂1234567CREATE EVENT ‰∫ã‰ª∂ÂêçON SCHEDULE&#123;AT Êüê‰∏™Á°ÆÂÆöÁöÑÊó∂Èó¥ÁÇπ | EVERY ÊúüÊúõÁöÑÊó∂Èó¥Èó¥Èöî [STARTS datetime][END datetime]&#125;DOBEGIN ÂÖ∑‰ΩìÁöÑËØ≠Âè•END ‰∫ã‰ª∂ÊîØÊåÅ‰∏§ÁßçÁ±ªÂûãÁöÑÂÆöÊó∂ÊâßË°åÔºö Êüê‰∏™Á°ÆÂÆöÁöÑÊó∂Èó¥ÁÇπÊâßË°å 1234567mysql&gt; CREATE EVENT insert_first_table -&gt; ON SCHEDULE -&gt; AT '2019-09-10 11:30:30' -&gt; DO -&gt; BEGIN -&gt; INSERT INTO first_table(first_column,second_column) VALUES(6,'6'); -&gt; END $ Èô§‰∫ÜÁõ¥Êé•Â°´Êüê‰∏™Êó∂Èó¥Â∏∏ÈáèÔºå‰πüÂèØ‰ª•Â°´ÂÜô‰∏Ä‰∫õË°®ËææÂºèÔºö 1234567mysql&gt; CREATE EVENT insert_first_table -&gt; ON SCHEDULE -&gt; AT DATE_ADD(NOW(), INTERVAL 2 DAY) -&gt; DO -&gt; BEGIN -&gt; INSERT INTO first_table(first_column,second_column) VALUES(6,'6'); -&gt; END $ DATE_ADD(NOW(), INTERVAL 2 DAY)Ë°®Á§∫ËØ•‰∫ã‰ª∂Â∞ÜÂú®ÂΩìÂâçÊó∂Èó¥ÁöÑ‰∏§Â§©ÂêéÊâßË°å„ÄÇ ÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥ÊâßË°å‰∏ÄÊ¨° 1234567mysql&gt; CREATE EVENT insert_first_table -&gt; ON SCHEDULE -&gt; EVERY 1 HOUR -&gt; DO -&gt; BEGIN -&gt; INSERT INTO first_table(first_column,second_column) VALUES(6,'6'); -&gt; END $ ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÈááÁî®ËøôÁßçÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥ÊâßË°å‰∏ÄÊ¨°ÁöÑÊñπÂºèÂ∞Ü‰ªéÂàõÂª∫‰∫ã‰ª∂ÁöÑ‰∫ã‰ª∂ÂºÄÂßãÔºåÊó†ÈôêÂà∂ÁöÑÊâßË°å‰∏ãÂéª„ÄÇÊàë‰ª¨‰πüÂèØ‰ª•ÊåáÂÆöËØ•‰∫ã‰ª∂ÂºÄÂßãÊâßË°åÊó∂Èó¥ÂíåÊà™Ê≠¢Êó∂Èó¥Ôºö 1234567mysql&gt; CREATE EVENT insert_first_table -&gt; ON SCHEDULE -&gt; EVERY 1 HOUR STARTS '2019-09-10 11:30:30' ENDS '2019-09-12 11:30:30' -&gt; DO -&gt; BEGIN -&gt; INSERT INTO first_table(first_column,second_column) VALUES(6,'6'); -&gt; END $ Âú®ÂàõÂª∫Â•Ω‰∫ã‰ª∂‰πãÂêéÊàë‰ª¨Â∞±‰∏çÁî®ÁÆ°‰∫ÜÔºåÂà∞‰∫ÜÊåáÂÆöÊó∂Èó¥ÔºåMySQLÊúçÂä°Âô®‰ºöÂ∏ÆÊàë‰ª¨Ëá™Âä®ÊâßË°åÁöÑ„ÄÇ Êü•Áúã‰∫ã‰ª∂12345Êü•ÁúãÂΩìÂâçÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâ‰∫ã‰ª∂ÁöÑËØ≠Âè•ÔºöSHOW EVENTS;Êü•ÁúãÊüê‰∏™ÂÖ∑‰ΩìÁöÑ‰∫ã‰ª∂ÁöÑÂÆö‰πâ:SHOW CREATE EVENT ‰∫ã‰ª∂Âêç; Âà†Èô§‰∫ã‰ª∂1DROP EVENT ‰∫ã‰ª∂Âêç; ‰∫ã‰ª∂‰ΩøÁî®Ê≥®ÊÑè‰∫ãÈ°πÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåMySQLÊúçÂä°Âô®Âπ∂‰∏ç‰ºöÂ∏ÆÂä©Êàë‰ª¨ÊâßË°å‰∫ã‰ª∂ÔºåÈô§ÈùûÊàë‰ª¨Âú®ÂêØÂä®ÊúçÂä°Âô®ÁöÑÊó∂ÂÄôÂ∞±ÊåáÂÆö‰∫Ü‰∏ãËæπËøô‰∏™ÈÄâÈ°πÔºö 1event_scheduler = ON Â¶ÇÊûúÂú®ÊúçÂä°Âô®Â∑≤ÁªèÂêØÂä®ÁöÑÊÉÖÂÜµ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáËÆæÁΩÆevent_schedulerÁöÑÁ≥ªÁªüÂèòÈáèÊù•ËÆ©MySQLÊúçÂä°Âô®Â∏ÆÂä©Êàë‰ª¨ÊâßË°å‰∫ã‰ª∂ÔºåËÆæÁΩÆÊñπÂºèÂ¶Ç‰∏ãÔºö 12mysql&gt; SET GLOBAL event_scheduler = ON;Query OK, 0 rows affected (0.00 sec) ÈîôËØØËß£ÂÜ≥Âú®MySql‰∏≠ÂàõÂª∫Ëá™ÂÆö‰πâÂáΩÊï∞Êä•Èîô‰ø°ÊÅØÂ¶Ç‰∏ãÔºö 1ERROR 1418 (HY000): This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable) Ëß£ÂÜ≥ÊñπÊ≥ïÔºö 1mysql&gt; set global log_bin_trust_function_creators=1;]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-MysqlÊñá‰ª∂]]></title>
    <url>%2FMysql%2FMysql03%2F</url>
    <content type="text"><![CDATA[Êñá‰ª∂ÁßçÁ±ª ÂèÇÊï∞Êñá‰ª∂ÔºöÂëäËØâMySQLÂÆû‰æãÂêØÂä®Êó∂Âú®Âì™ÈáåÂèØ‰ª•ÊâæÂà∞Êï∞ÊçÆÂ∫ìÊñá‰ª∂ÔºåÂπ∂‰∏îÊåáÂÆöÊüê‰∫õÂàùÂßãÂåñÂèÇÊï∞ÔºåËøô‰∫õÂèÇÊï∞ÂÆö‰πâ‰∫ÜÊüêÁßçÂÜÖÂ≠òÁªìÊûÑÁöÑÂ§ßÂ∞èÁ≠âËÆæÁΩÆÔºåËøò‰ºö‰ªãÁªçÂêÑÁßçÂèÇÊï∞ÁöÑÁ±ªÂûã„ÄÇ Êó•ÂøóÊñá‰ª∂ÔºöÁî®Êù•ËÆ∞ÂΩïMySQLÂÆû‰æãÂØπÊüêÁßçÊù°‰ª∂ÂÅöÂá∫ÂìçÂ∫îÊó∂ÂÜôÂÖ•ÁöÑÊñá‰ª∂ÔºåÂ¶ÇÈîôËØØÊó•ÂøóÊñá‰ª∂„ÄÅ‰∫åËøõÂà∂Êó•ÂøóÊñá‰ª∂„ÄÅÊÖ¢Êü•ËØ¢Êó•ÂøóÊñá‰ª∂„ÄÅÊü•ËØ¢Êó•ÂøóÊñá‰ª∂Á≠â„ÄÇ socketÊñá‰ª∂ÔºöÂΩìÁî®UNIXÂüüÂ•óÊé•Â≠óÊñπÂºèËøõË°åËøûÊé•Êó∂ÈúÄË¶ÅÁöÑÊñá‰ª∂„ÄÇ pidÊñá‰ª∂ÔºöMySQLÂÆû‰æãÁöÑËøõÁ®ãIDÊñá‰ª∂„ÄÇ MySQLË°®ÁªìÊûÑÊñá‰ª∂ÔºöÁî®Êù•Â≠òÊîæMySQLË°®ÁªìÊûÑÂÆö‰πâÊñá‰ª∂„ÄÇ Â≠òÂÇ®ÂºïÊìéÊñá‰ª∂ÔºöÂõ†‰∏∫MySQLË°®Â≠òÂÇ®ÂºïÊìéÁöÑÂÖ≥Á≥ªÔºåÊØè‰∏™Â≠òÂÇ®ÂºïÊìéÈÉΩ‰ºöÊúâËá™Â∑±ÁöÑÊñá‰ª∂Êù•‰øùÂ≠òÂêÑÁßçÊï∞ÊçÆ„ÄÇËøô‰∫õÂ≠òÂÇ®ÂºïÊìéÁúüÊ≠£Â≠òÂÇ®‰∫ÜËÆ∞ÂΩïÂíåÁ¥¢ÂºïÁ≠âÊï∞ÊçÆ„ÄÇÊú¨Á´†‰∏ªË¶Å‰ªãÁªç‰∏éInnoDBÊúâÂÖ≥ÁöÑÂ≠òÂÇ®ÂºïÊìéÊñá‰ª∂„ÄÇ‚Äù ÂèÇÊï∞Êñá‰ª∂ÂèÇÊï∞ÂàÜ‰∏∫‰∏§Á±ªÔºö Âä®ÊÄÅÂèÇÊï∞ÔºöÂú® Mysql ÂÆû‰æãËøêË°å‰∏≠ÂèØ‰ª•ËøõË°åÊõ¥Êîπ ÈùôÊÄÅÂèÇÊï∞ÔºöÂú®Êï¥‰∏™ÂÆû‰æãÁîüÂëΩÂë®ÊúüÂÜÖÈÉΩ‰∏çÂæóÊõ¥Êîπ Êõ¥ÊîπÂä®ÊÄÅÂèÇÊï∞ÁöÑËØ≠Ê≥ïÂ¶Ç‰∏ãÔºö 123456789101112131415SET| [global | session] system_var_name=expr| [@@global. | @@session. | @@] system_var_name = expr# ÊîπÂèòÂΩìÂâç‰ºöËØùÔºå‰∏ç‰ºöÊîπÂèòÂÖ®Â±ÄSET read_buffer_size = 524288# ÊîπÂèòÂÖ®Â±Ä‰ºöËØùÂèÇÊï∞Ôºå‰∏ç‰ºöÊîπÂèòÂΩìÂâçSET @@global.read_buffer_size = 1048576;# Êü•ËØ¢ÂΩìÂâç‰ºöËØùÂèÇÊï∞SELECT @@session.read_buffer_size;# Êü•ËØ¢ÂÖ®Â±Ä‰ºöËØùÂèÇÊï∞SELECT @@global.read_buffer_size; ‚ÄãglobalÔºöÂÖ®Â±ÄÁöÑÔºåsessionÔºöÂΩìÂâç‰ºöËØù„ÄÇËøôÁßç‰øÆÊîπÔºåÂπ∂‰∏çÊúÄÁªà‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂my.cnfÁöÑÂèÇÊï∞ÂÄºÔºåÊâÄ‰ª•ÈáçÊñ∞ÂêØÂä®ÂêéÔºåÂèÇÊï∞ËøòÊòØÊåâÁÖßÈÖçÁΩÆÊñá‰ª∂‰∏≠ÁöÑÂä†ËΩΩ„ÄÇ Êó•ÂøóÊñá‰ª∂MySQL‰∏≠Â∏∏ËßÅÁöÑÊó•ÂøóÊñá‰ª∂ÊúâÔºö ÈîôËØØÊó•ÂøóÔºàerror logÔºâÔºöÂØπMySQLÁöÑÂêØÂä®„ÄÅËøêË°å„ÄÅÂÖ≥Èó≠ËøáÁ®ãËøõË°åËÆ∞ÂΩïÈîôËØØ‰ø°ÊÅØ„ÄÅË≠¶Âëä‰ø°ÊÅØ„ÄÇ ÊÖ¢Êü•ËØ¢Êó•ÂøóÔºàslow query logÔºâ ‰∫åËøõÂà∂Êó•ÂøóÔºàbin logÔºâ Êü•ËØ¢Êó•ÂøóÔºàlogÔºâ ÊÖ¢Êü•ËØ¢Êó•ÂøóÂú®MySQLÂêØÂä®Êó∂ËÆæ‰∏Ä‰∏™ÈòàÂÄºÔºåÂ∞ÜËøêË°åÊó∂Èó¥Ë∂ÖËøáËØ•ÂÄºÁöÑÊâÄÊúâSQLËØ≠Âè•ÈÉΩËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ ÂèÇÊï∞ ‰ΩúÁî® set global log_slow_queries = on; ÂºÄÂêØÊÖ¢Êü•ËØ¢ÂëΩ‰ª§ÔºåÈªòËÆ§ÂêØÂä®ÊÖ¢Êü•ËØ¢ set global long_query_time = 1; ËÆæÁΩÆÊÖ¢Êü•ËØ¢Êó∂Èó¥Ë∂ÖËøá1sÂç≥Ë¢´ËÆ§‰∏∫ÊÖ¢Êü•ËØ¢ÔºåÈªòËÆ§10s set global log_queries_not_using_indeces = on; Â¶ÇÊûúSQLËØ≠Âè•Ê≤°Êúâ‰ΩøÁî®Á¥¢ÂºïÔºå‰ºöËÆ∞ÂΩïÂà∞ÊÖ¢Êü•ËØ¢‰∏≠ set global log_throttle_queries_not_using_indexs = on; ËÆæÁΩÆÊØèÂàÜÈíüÂÖÅËÆ∏ËÆ∞ÂΩïÂà∞slow logÁöÑ‰∏îÊú™‰ΩøÁî®Á¥¢ÂºïÁöÑSQLËØ≠Âè•Ê¨°Êï∞ÔºåÈªòËÆ§‰∏∫0ÔºåË°®Á§∫Ê≤°ÊúâÈôêÂà∂„ÄÇ Â•óÊé•Â≠óÊñá‰ª∂pidÊñá‰ª∂Ë°®ÁªìÊûÑÂÆö‰πâÊñá‰ª∂innoDBÂ≠òÂÇ®ÂºïÊìéÊñá‰ª∂ÂèÇËÄÉ MySQLÊäÄÊúØÂÜÖÂπïÔºöInnoDBÂ≠òÂÇ®ÂºïÊìé(Á¨¨2Áâà) https://www.jianshu.com/p/c1ffd6956e6a https://www.cnblogs.com/BlueMountain-HaggenDazs/p/9297883.html]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
        <tag>InnoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-LSN]]></title>
    <url>%2FMysql%2FMysql-LSN%2F</url>
    <content type="text"><![CDATA[LSN(log sequence number)‚Äî‚ÄîÊó•ÂøóÂ∫èÂàóÂè∑ÔºöÈÄíÂ¢û‰∫ßÁîüÔºåË°®Á§∫‰∫ãÂä°ÂÜôÂÖ•ÈáçÂÅöÊó•ÂøóÁöÑÂ≠óËäÇÊÄªÈáèÔºåÂç†Áî®8‰∏™Â≠óËäÇ„ÄÇ LSNÂ≠òÂú®‰ªÄ‰πàÂú∞ÊñπÔºüÊúâ‰ªÄ‰πàÂê´‰πâÔºü1234567---LOG---Log sequence number 15151135824 -- redo log buffer ÁöÑ lsnÔºåÂ≠òÊîæÂú®redo log buffer ‰∏≠Áß∞Ôºö redo_mem_lsnLog flushed up to 15151135824 -- redo log file ÁöÑ lsnÔºåÂ≠òÊîæÂú®redo log ‰∏≠Áß∞Ôºö redo_log_lsnPages flushed up to 15151135824 -- ÊúÄÂêé‰∏Ä‰∏™Âà∑Âà∞Á£ÅÁõò‰∏äÁöÑÈ°µÁöÑÊúÄÊñ∞ÁöÑ lsn Last checkpoint at 15151135815 -- ÂÖ±‰∫´Ë°®Á©∫Èó¥‰∏äÁöÑÊó•ÂøóËÆ∞ÂΩïÁÇπÔºåÊúÄÂêé‰∏ÄÊ¨°Ê£ÄÊü•ÁÇπÔºåÂèäÂ¥©Ê∫ÉÊÅ¢Â§çÊó∂ÊåáÂÆöÁöÑËµ∑ÁÇπ , checkpoint ÊâÄÂú®ÁöÑ lsn, Â≠òÊîæÂú®redo logÁ¨¨‰∏Ä‰∏™Êñá‰ª∂ÁöÑÂ§¥ÈÉ®ÔºåÁß∞Ôºö cp_lsn LSN Êúâ‰ªÄ‰πàÁî®Ôºü‰∏ªË¶ÅÁî®‰∫éMySQLÈáçÂêØÊÅ¢Â§ç ÊÅ¢Â§çÁöÑÁÆóÊ≥ïÂÅáËÆæÔºö redo_log_lsn = 15000 , cp_lsn=10000 , ËøôÊó∂ÂÄôMySQL crash‰∫ÜÔºåÈáçÂêØÂêéÁöÑÊÅ¢Â§çÊµÅÁ®ãÂ¶Ç‰∏ãÔºö cp_lsn = 10000 ‰πãÂâçÁöÑredo Êó•ÂøóÔºå‰∏çÈúÄË¶ÅÊÅ¢Â§çÔºö Âõ†‰∏∫checkpoint‰πãÂâçÁöÑÊó•ÂøóÂ∑≤ÁªèÂèØ‰ª•Á°Æ‰øùÂà∑Êñ∞ÂÆåÊØï ÈÇ£‰πà 10000 &lt;= redo_log_LSN &lt;= 15000 ÁöÑÊó•ÂøóÈúÄË¶ÅÁªìÂêàpage_lsnÂà§Êñ≠ÔºåÂì™‰∫õÈúÄË¶ÅÈáçÂÅöÔºåÂì™‰∫õ‰∏çÈúÄË¶ÅÈáçÂÅö„ÄÇ redo_log_LSN Êó•ÂøóÈáåÈù¢ËÆ∞ÂΩïÁöÑpage Êìç‰ΩúÔºåÂ¶ÇÊûúredo_log_LSN &lt;= page_lsn , Ëøô‰∫õÊó•Âøó‰∏çÈúÄË¶ÅÈáçÂÅöÔºåÂõ†‰∏∫pageÂ∑≤ÁªèÊòØÊúÄÊñ∞ÁöÑ redo_log_LSN Êó•ÂøóÈáåÈù¢ËÆ∞ÂΩïÁöÑpage Êìç‰Ωú, Â¶ÇÊûúredo_log_LSN &gt;= page_lsn , Ëøô‰∫õÊó•ÂøóÊòØÈúÄË¶ÅÂ∫îÁî®Âà∞page ÈáåÈù¢ÂéªÁöÑÔºåËøô‰∏ÄÁ≥ªÂàóÊìç‰ΩúÊàë‰ª¨Áß∞‰∏∫ÊÅ¢Â§ç.]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-Redo‰∏éUndo]]></title>
    <url>%2FMysql%2FMysql-RedoAndUndo%2F</url>
    <content type="text"><![CDATA[redo logredo Ê¶ÇÂøµÈáçÂÅöÊó•Âøó(redo log)ÔºöÂú®InnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÂ§ßÈÉ®ÂàÜÊÉÖÂÜµ‰∏ã Redo ÊòØÁâ©ÁêÜÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØÊï∞ÊçÆÈ°µÁöÑÁâ©ÁêÜÂèòÂåñ„ÄÇ redo ÁªìÊûÑRedo logÂèØ‰ª•ÁÆÄÂçïÂàÜ‰∏∫‰ª•‰∏ã‰∏§‰∏™ÈÉ®ÂàÜÔºö ÈáçÂÅöÊó•ÂøóÁºìÂÜ≤ (redo log buffer),ÊòØÊòìÂ§±ÁöÑÔºåÂú®ÂÜÖÂ≠ò‰∏≠ Êó•Âøó‰ºöÂÖàÂÜôÂà∞redo log buffer ÔºåÊ†πÊçÆÂà∂ÂÆöÊù°‰ª∂Âà∑Êñ∞Âà∞redo log file Áî±log blockÁªÑÊàê ÊØè‰∏™log block 512Â≠óËäÇÔºåÊâÄ‰ª•‰∏çÈúÄË¶Å double writeÔºåÂõ†‰∏∫ÊØèÊ¨°Âà∑Êñ∞ÈÉΩÊòØÂéüÂ≠êÁöÑ ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ (redo log file)ÔºåÊòØÊåÅ‰πÖÁöÑÔºå‰øùÂ≠òÂú®Á£ÅÁõò‰∏≠ redo logÁöÑÁâ©ÁêÜÊñá‰ª∂Ôºå‰∏ÄËà¨Êúâ2‰∏™,Â§ßÂ∞èÂèØÈÖçÁΩÆ redo ÂÜôÂÖ•Êó∂Êú∫ Âú®Êï∞ÊçÆÈ°µ‰øÆÊîπÂÆåÊàê‰πãÂêéÔºåÂú®ËÑèÈ°µÂà∑Âá∫Á£ÅÁõò‰πãÂâçÔºåÂÜôÂÖ•redoÊó•Âøó„ÄÇÊ≥®ÊÑèÁöÑÊòØÂÖà‰øÆÊîπÊï∞ÊçÆÔºåÂêéÂÜôÊó•Âøó redoÊó•ÂøóÊØîÊï∞ÊçÆÈ°µÂÖàÂÜôÂõûÁ£ÅÁõò ËÅöÈõÜÁ¥¢Âºï„ÄÅÈùûËÅöÈõÜÁ¥¢Âºï„ÄÅundoÈ°µÈù¢ÁöÑ‰øÆÊîπÔºåÂùáÈúÄË¶ÅËÆ∞ÂΩïRedoÊó•Âøó„ÄÇ redo ÁöÑÊï¥‰ΩìÊµÅÁ®ã redoÂ¶Ç‰Ωï‰øùËØÅ‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄßÔºüInnoDB ÈÄöËøá Force Log at Commit Êú∫Âà∂ÂÆûÁé∞‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄßÔºåÂç≥ÂΩì‰∫ãÂä°Êèê‰∫§Êó∂ÔºåÂÖàÂ∞Ü redo log buffer ÂÜôÂÖ•Âà∞ redo log file ËøõË°åÊåÅ‰πÖÂåñÔºåÂæÖ‰∫ãÂä°ÁöÑcommitÊìç‰ΩúÂÆåÊàêÊó∂ÊâçÁÆóÂÆåÊàê„ÄÇËøôÁßçÂÅöÊ≥ï‰πüË¢´Áß∞‰∏∫ Write-Ahead Log(È¢ÑÂÖàÊó•ÂøóÊåÅ‰πÖÂåñ)ÔºåÂú®ÊåÅ‰πÖÂåñ‰∏Ä‰∏™Êï∞ÊçÆÈ°µ‰πãÂâçÔºåÂÖàÂ∞ÜÂÜÖÂ≠ò‰∏≠Áõ∏Â∫îÁöÑÊó•ÂøóÈ°µÊåÅ‰πÖÂåñ„ÄÇ ‰∏∫‰∫Ü‰øùËØÅÊØèÊ¨°Êó•ÂøóÈÉΩÂÜôÂÖ•redo log fileÔºåÂú®ÊØèÊ¨°Â∞Üredo bufferÂÜôÂÖ•redo log file‰πãÂêéÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåInnoDBÂ≠òÂÇ®ÂºïÊìéÈÉΩÈúÄË¶ÅË∞ÉÁî®‰∏ÄÊ¨° fsyncÊìç‰Ωú,Âõ†‰∏∫ÈáçÂÅöÊó•ÂøóÊâìÂºÄÂπ∂Ê≤°Êúâ O_DIRECTÈÄâÈ°πÔºåÊâÄ‰ª•ÈáçÂÅöÊó•ÂøóÂÖàÂÜôÂÖ•Âà∞Êñá‰ª∂Á≥ªÁªüÁºìÂ≠ò„ÄÇ‰∏∫‰∫ÜÁ°Æ‰øùÈáçÂÅöÊó•ÂøóÂÜôÂÖ•Âà∞Á£ÅÁõòÔºåÂøÖÈ°ªËøõË°å‰∏ÄÊ¨° fsyncÊìç‰Ωú„ÄÇfsyncÊìç‰Ωú Â∞ÜÊï∞ÊçÆÊèê‰∫§Âà∞Á°¨Áõò‰∏≠ÔºåÂº∫Âà∂Á°¨ÁõòÂêåÊ≠•ÔºåÂ∞Ü‰∏ÄÁõ¥ÈòªÂ°ûÂà∞ÂÜôÂÖ•Á°¨ÁõòÂÆåÊàêÂêéËøîÂõûÔºåÂ§ßÈáèËøõË°åfsyncÊìç‰ΩúÂ∞±ÊúâÊÄßËÉΩÁì∂È¢àÔºåÂõ†Ê≠§Á£ÅÁõòÁöÑÊÄßËÉΩ‰πüÂΩ±Âìç‰∫Ü‰∫ãÂä°Êèê‰∫§ÁöÑÊÄßËÉΩÔºå‰πüÂ∞±ÊòØÊï∞ÊçÆÂ∫ìÁöÑÊÄßËÉΩ„ÄÇ(O_DIRECTÈÄâÈ°πÊòØÂú®LinuxÁ≥ªÁªü‰∏≠ÁöÑÈÄâÈ°πÔºå‰ΩøÁî®ËØ•ÈÄâÈ°πÂêéÔºåÂØπÊñá‰ª∂ËøõË°åÁõ¥Êé•IOÊìç‰ΩúÔºå‰∏çÁªèËøáÊñá‰ª∂Á≥ªÁªüÁºìÂ≠òÔºåÁõ¥Êé•ÂÜôÂÖ•Á£ÅÁõò) undo logundo Ê¶ÇÂøµundo log‰∏ªË¶ÅËÆ∞ÂΩïÁöÑÊòØÊï∞ÊçÆÁöÑÈÄªËæëÂèòÂåñÔºå‰∏∫‰∫ÜÂú®ÂèëÁîüÈîôËØØÊó∂ÂõûÊªö‰πãÂâçÁöÑÊìç‰ΩúÔºåÈúÄË¶ÅÂ∞Ü‰πãÂâçÁöÑÊìç‰ΩúÈÉΩËÆ∞ÂΩï‰∏ãÊù•ÔºåÁÑ∂ÂêéÂú®ÂèëÁîüÈîôËØØÊó∂ÊâçÂèØ‰ª•ÂõûÊªö„ÄÇ undo ÁªìÊûÑÂú®InnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåundoÂ≠òÂÇ®Âú®ÂõûÊªöÊÆµ(Rollback Segment)‰∏≠,ÊØè‰∏™ÂõûÊªöÊÆµËÆ∞ÂΩï‰∫Ü1024‰∏™undo log segmentÔºåËÄåÂú®ÊØè‰∏™undo log segmentÊÆµ‰∏≠ËøõË°åundo È°µÁöÑÁî≥ËØ∑ÔºåÂú®5.6‰ª•ÂâçÔºåRollback SegmentÊòØÂú®ÂÖ±‰∫´Ë°®Á©∫Èó¥ÈáåÁöÑÔºå5.6.3‰πãÂêéÔºåÂèØÈÄöËøá innodb_undo_tablespaceËÆæÁΩÆundoÂ≠òÂÇ®ÁöÑ‰ΩçÁΩÆ„ÄÇ undo ÂÜôÂÖ•Êó∂Êú∫ DMLÊìç‰Ωú‰øÆÊîπËÅöÈõÜÁ¥¢ÂºïÂâçÔºåËÆ∞ÂΩïundoÊó•Âøó ÈùûËÅöÈõÜÁ¥¢ÂºïËÆ∞ÂΩïÁöÑ‰øÆÊîπÔºå‰∏çËÆ∞ÂΩïundoÊó•Âøó undo ÁöÑÊï¥‰ΩìÊµÅÁ®ãundo log ÈááÁî®È°∫Â∫èIOÂÜôÂÖ•Á£ÅÁõòÂÖ±‰∫´Ë°®Á©∫Èó¥„ÄÇ undo Á±ªÂûã insert undo logÔºöÂú®insert Êìç‰Ωú‰∏≠‰∫ßÁîüÁöÑundo logÔºåÂõ†‰∏∫insertÊìç‰ΩúÁöÑËÆ∞ÂΩïÔºåÂè™ÂØπ‰∫ãÂä°Êú¨Ë∫´ÂèØËßÅÔºåÂØπÂÖ∂‰ªñ‰∫ãÂä°‰∏çÂèØËßÅ„ÄÇÊïÖËØ•undo logÂèØ‰ª•Âú®‰∫ãÂä°Êèê‰∫§ÂêéÁõ¥Êé•Âà†Èô§Ôºå‰∏çÈúÄË¶ÅËøõË°åpurgeÊìç‰Ωú„ÄÇ update undo logÔºöÂú®delete ÂíåupdateÊìç‰Ωú‰∫ßÁîüÁöÑundo logÔºåËØ•undo logÂèØËÉΩÈúÄË¶ÅÊèê‰æõMVCCÊú∫Âà∂ÔºåÂõ†Ê≠§‰∏çËÉΩÂÜç‰∫ãÂä°Êèê‰∫§Êó∂Â∞±ËøõË°åÂà†Èô§„ÄÇÊèê‰∫§Êó∂ÊîæÂÖ•undo logÈìæË°®ÔºåÁ≠âÂæÖpurgeÁ∫øÁ®ãËøõË°åÊúÄÂêéÁöÑÂà†Èô§„ÄÇ ## DMLÁöÑÁõ∏ÂÖ≥Áâ©ÁêÜÂÆûÁé∞ÁÆóÊ≥ï * ‰∏ªÈîÆÁ¥¢Âºï 12341. ÂØπ‰∫édelete --ÈúÄË¶ÅundoÁªëÂÆöËØ•ËÆ∞ÂΩïÊâçËÉΩËøõË°åÂõûÊªöÔºåÊâÄ‰ª•Âè™ËÉΩÊâì‰∏äÊ†áËÆ∞Ôºådelete mark 2. ÂØπ‰∫éupdate --ÂéüËÆ∞ÂΩïÂèØ‰ª•Áâ©ÁêÜÂà†Èô§ÔºåÂõ†‰∏∫ÂèØ‰ª•Âú®Êñ∞ÊèíÂÖ•ËøõÊù•ÁöÑÂú∞ÊñπËøõË°åundoÁªëÂÆö * Â¶ÇÊûú‰∏çËÉΩÂéüÂú∞Êõ¥Êñ∞Ôºö delete(Ê≥®ÊÑèÔºöËøôÈáåÊòØÁõ¥Êé•delete,ËÄå‰∏çÊòØdelete mark) + insert * Â¶ÇÊûúÂèØ‰ª•ÂéüÂú∞Êõ¥Êñ∞ÔºåÈÇ£‰πàÁõ¥Êé•updateÂ∞±Â•Ω ÈùûËÅöÈõÜÁ¥¢12341. ÂØπ‰∫édelete --‰∏çËÉΩÁõ¥Êé•Ë¢´Áâ©ÁêÜÂà†Èô§ÔºåÂõ†‰∏∫‰∫åÁ∫ßÁ¥¢ÂºïÊ≤°ÊúâundoÔºåÂè™ËÉΩÈÄöËøáÊâìÊ†áËÆ∞ÔºåÁÑ∂ÂêéÂõûÊªö„ÄÇÂê¶ÂàôÂ¶ÇÊûúË¢´Áâ©ÁêÜÂà†Èô§ÔºåÂàôÊó†Ê≥ïÂõûÊªö delete mark 2. ÂØπ‰∫éupdate --‰∏çËÉΩÁõ¥Êé•Ë¢´Áâ©ÁêÜÂà†Èô§ÔºåÂõ†‰∏∫‰∫åÁ∫ßÁ¥¢ÂºïÊ≤°ÊúâundoÔºåÂè™ËÉΩÈÄöËøáÊâìÊ†áËÆ∞ÔºåÁÑ∂ÂêéÂõûÊªö„ÄÇÂê¶ÂàôÂ¶ÇÊûúË¢´Áâ©ÁêÜÂà†Èô§ÔºåÂàôÊó†Ê≥ïÂõûÊªö delete mark + insert redo &amp; undoundo log ÊòØÂê¶ÊòØ redo log ÁöÑÈÄÜËøáÁ®ãÔºüundo logÊòØÈÄªËæëÊó•ÂøóÔºåÂØπ‰∫ãÂä°ÂõûÊªöÊó∂ÔºåÂè™ÊòØÂ∞ÜÊï∞ÊçÆÂ∫ìÈÄªËæëÂú∞ÊÅ¢Â§çÂà∞ÂéüÊù•ÁöÑÊ†∑Â≠ê„ÄÇredo logÊòØÁâ©ÁêÜÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØÊï∞ÊçÆÈ°µÁöÑÁâ©ÁêÜÂèòÂåñÔºåÊòæÁÑ∂undo log‰∏çÊòØredo logÁöÑÈÄÜËøáÁ®ã„ÄÇ ‰∫ãÂä°ÂÆûÁé∞ËøáÁ®ã‰∫ãÂä°BË¶ÅÂ∞ÜÂ≠óÊÆµAÁöÑÂÄºÁî±ÂéüÊù•ÁöÑ1‰øÆÊîπ‰∏∫3ÔºåË¶ÅÂ∞ÜBÁöÑÂÄºÁî±ÂéüÊù•ÁöÑ2‰øÆÊîπ‰∏∫4ÔºåredoÊó•ÂøóËÆ∞ÂΩïÁöÑÊòØÔºö 1234567891011ÂÅáËÆæÊúâA„ÄÅB‰∏§‰∏™Êï∞ÊçÆÔºåÂÄºÂàÜÂà´‰∏∫1,2.1. ‰∫ãÂä°BÂºÄÂßã2. ËÆ∞ÂΩïA=1Âà∞undo log3. ‰øÆÊîπA=34. ËÆ∞ÂΩïA=3Âà∞ redo log5. ËÆ∞ÂΩïB=2Âà∞ undo log6. ‰øÆÊîπB=47. ËÆ∞ÂΩïB=4Âà∞redo log8. Â∞Üredo logÂÜôÂÖ•Á£ÅÁõò9. ‰∫ãÂä°Êèê‰∫§ÔºåÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõò10.‰∫ãÁâ©BÁªìÊùü Âú®insert/update/deleteÊìç‰Ωú‰∏≠ÔºåredoÂíåundoÂàÜÂà´ËÆ∞ÂΩïÁöÑÂÜÖÂÆπÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåÈáè‰πü‰∏ç‰∏ÄÊ†∑„ÄÇÂú®InnoDBÂÜÖÂ≠ò‰∏≠Ôºå‰∏ÄËà¨ÁöÑÈ°∫Â∫èÂ¶Ç‰∏ãÔºö ÂÜôundoÁöÑredo ÂÜôundo ‰øÆÊîπÊï∞ÊçÆÈ°µ ÂÜôRedo Â¶ÇÊûú‰∏äÈù¢‰∫ãÂä°BÂõûÊªöÔºàÂΩìÂÅöÊñ∞ÁöÑ‰∫ãÂä°CÔºâÔºåÂàôredoËÆ∞ÂΩïÁöÑÊòØÔºö 1234567891011121314151. ‰∫ãÂä°CÂºÄÂßã2. ËÆ∞ÂΩïA=1Âà∞undo log3. ‰øÆÊîπA=34. ËÆ∞ÂΩïA=3Âà∞ redo log5. ËÆ∞ÂΩïB=2Âà∞ undo log6. ‰øÆÊîπB=47. ËÆ∞ÂΩïB=4Âà∞redo log &lt;!--ÂõûÊªö--&gt;8. ‰øÆÊîπB=29. ËÆ∞ÂΩïB=2Âà∞redo log10.‰øÆÊîπA=111.ËÆ∞ÂΩïA=1Âà∞redo log12.Â∞Üredo logÂÜôÂÖ•Á£ÅÁõò13.‰∫ãÂä°Êèê‰∫§ÔºåÂ∞ÜÊï∞ÊçÆÂÜôÂÖ•Á£ÅÁõò14.‰∫ãÁâ©CÁªìÊùü ÊÅ¢Â§çÁ≠ñÁï•ÔºöÊÅ¢Â§çÊó∂ÔºåÂÖàÊ†πÊçÆredoÈáçÂÅöÊâÄÊúâ‰∫ãÂä°ÔºàÂåÖÊã¨Êú™Êèê‰∫§ÂíåÂõûÊªö‰∫ÜÁöÑÔºâÔºåÂÜçÊ†πÊçÆundoÂõûÊªöÊú™Êèê‰∫§ÁöÑ‰∫ãÂä°„ÄÇÂΩìÁ≥ªÁªüÂèëÁîüÂÆïÊú∫Êó∂ÔºåÂ¶ÇÊûú‰∏Ä‰∏™‰∫ãÂä°ÁöÑ redo log Â∑≤ÁªèÂÖ®ÈÉ®Âà∑ÂÖ•Á£ÅÁõòÔºåÈÇ£‰πàËØ•‰∫ãÂä°‰∏ÄÂÆöÂèØ‰ª•ÊÅ¢Â§çÔºõÂ¶ÇÊûú‰∏Ä‰∏™‰∫ãÂä°ÁöÑ redo log Ê≤°ÊúâÂÖ®ÈÉ®Âà∑ÂÖ•Á£ÅÁõòÔºåÈÇ£‰πàÂ∞±ÈÄöËøá undo log Â∞ÜËøô‰∏™‰∫ãÂä°ÊÅ¢Â§çÂà∞ÊâßË°å‰πãÂâç„ÄÇ Â¶Ç‰∏äÔºåÂ¶ÇÊûú‰∫ãÂä°BÂºÇÂ∏∏Êú™Êèê‰∫§‰∫ãÂä°Â∞±ÂÆïÊú∫ÔºåÊÅ¢Â§çÊó∂ÔºåÂÖàÊ†πÊçÆredoÊó•ÂøóÂ∞ÜÊï∞ÊçÆÊÅ¢Â§ç‰∏∫A=3&amp;B=4ÔºåÁÑ∂ÂêéÊ†πÊçÆundoËÆ∞ÂΩïÁöÑA=1&amp;B=2Â∞ÜÊï∞ÊçÆÊÅ¢Â§çÂ¶ÇÂàù„ÄÇ # ÂèÇËÄÉÔºö * https://keithlan.github.io/2017/06/12/innodb_locks_redo/ * https://juejin.im/post/5c3c5c0451882525487c498d * https://t.hao0.me/mysql/2016/11/05/mysql-innodb-05-tablespaces.html]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-InnoDBÂ≠òÂÇ®ÂºïÊìé]]></title>
    <url>%2FMysql%2FMysql02%2F</url>
    <content type="text"><![CDATA[Ê¶ÇËø∞ InnoDBÂ≠òÂÇ®ÂºïÊìéÊúÄÊó©Áî±Innobase OyÂÖ¨Âè∏ÂºÄÂèëÔºåË¢´ÂåÖÊã¨Âú®MySQLÊï∞ÊçÆÂ∫ìÊâÄÊúâÁöÑ‰∫åËøõÂà∂ÂèëË°åÁâàÊú¨‰∏≠Ôºå ‰ªéMySQL 5.5ÁâàÊú¨ÂºÄÂßãÊòØÈªòËÆ§ÁöÑË°®Â≠òÂÇ®ÂºïÊìéÔºà‰πãÂâçÁöÑÁâàÊú¨InnoDBÂ≠òÂÇ®ÂºïÊìé‰ªÖÂú®Windows‰∏ã‰∏∫ÈªòËÆ§ÁöÑÂ≠òÂÇ®ÂºïÊìéÔºâ Á¨¨‰∏Ä‰∏™ÂÆåÊï¥ÊîØÊåÅACID‰∫ãÂä°ÁöÑMySQLÂ≠òÂÇ®ÂºïÊìéÔºàBDBÊòØÁ¨¨‰∏Ä‰∏™ÊîØÊåÅ‰∫ãÂä°ÁöÑMySQLÂ≠òÂÇ®ÂºïÊìéÔºåÁé∞Âú®Â∑≤ÁªèÂÅúÊ≠¢ÂºÄÂèëÔºâ ÁâπÁÇπÔºöË°åÈîÅËÆæËÆ°„ÄÅÊîØÊåÅ MVCC„ÄÅÊîØÊåÅÂ§ñÈîÆ„ÄÅÊèê‰æõ‰∏ÄËá¥ÊÄßÈùûÈîÅÂÆöËØª„ÄÅÊúâÊïàÂà©Áî®ÂÜÖÂ≠òÂíå CPU ‰ΩìÁ≥ªÊû∂ÊûÑInnoDBÂ≠òÂÇ®ÂºïÊìéÊòØÁî±ÂÜÖÂ≠òÊ±†„ÄÅÂêéÂè∞Á∫øÁ®ã„ÄÅÁ£ÅÁõòÂ≠òÂÇ®‰∏âÂ§ßÈÉ®ÂàÜÁªÑÊàê„ÄÇ Á∫øÁ®ãInnoDB ‰ΩøÁî®ÁöÑÊòØÂ§öÁ∫øÁ®ãÊ®°Âûã, ÂÖ∂ÂêéÂè∞ÊúâÂ§ö‰∏™‰∏çÂêåÁöÑÁ∫øÁ®ãË¥üË¥£Â§ÑÁêÜ‰∏çÂêåÁöÑ‰ªªÂä° Master ThreadMaster ThreadÊòØÊúÄÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™ÂêéÂè∞Á∫øÁ®ãÔºå‰∏ªË¶ÅË¥üË¥£Â∞ÜÁºìÂÜ≤Ê±†‰∏≠ÁöÑÊï∞ÊçÆÂºÇÊ≠•Âà∑Êñ∞Âà∞Á£ÅÁõòÔºå‰øùËØÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄß„ÄÇÂåÖÊã¨ËÑèÈ°µÂà∑Êñ∞„ÄÅÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤„ÄÅUNDOÈ°µÁöÑÂõûÊî∂Á≠â„ÄÇ IO ThreadÂú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠Â§ßÈáè‰ΩøÁî®‰∫ÜÂºÇÊ≠•IO(Async IO)Êù•Â§ÑÁêÜÂÜôIOËØ∑Ê±Ç, IO ThreadÁöÑÂ∑•‰Ωú‰∏ªË¶ÅÊòØË¥üË¥£Ëøô‰∫õ IO ËØ∑Ê±ÇÁöÑÂõûË∞É„ÄÇ InnoDB ÁâàÊú¨ Á∫øÁ®ã 1.0‰πãÂâç 4 ‰∏™ io threadÔºöwriteÔºåreadÔºåinsert bufferÔºålog IO Thread. Âú®Linux‰∏ãÔºåIO ThreadÁöÑÊï∞Èáè‰∏çËÉΩËøõË°åË∞ÉÊï¥ Âú®Windows‰∏ãÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ innodb_file_io_threads Êù•Â¢ûÂ§ßIO Thread 1.0‰πãÂêé read Âíå write IO thread ÂàÜÂà´Â¢ûÂ§ßÂà∞‰∫Ü 4 ‰∏™ ÂàÜÂà´‰ΩøÁî® innodb_read_io_threads Âíå innodb_write_io_threads ËÆæÁΩÆÁ∫øÁ®ãÊï∞ Purge Thread‰∫ãÂä°Êèê‰∫§ÂêéÔºåÂÖ∂ÊâÄ‰ΩøÁî®ÁöÑundo logÂèØËÉΩ‰∏çÂÜçÈúÄË¶ÅÔºåÂõ†Ê≠§ÈúÄË¶ÅPurge ThreadÊù•ÂõûÊî∂Â∑≤ÁªèÂàÜÈÖçÂπ∂‰ΩøÁî®ÁöÑUNDOÈ°µ„ÄÇ InnoDB ÁâàÊú¨ ‰ΩúÁî® 1.1‰πãÂâç purge Êìç‰ΩúÂú® master thread ÂÜÖÂÆåÊàê 1.1‰πãÂêé purge ÂèØ‰ª•Áã¨Á´ãÂà∞ÂçïÁã¨ÁöÑÁ∫øÁ®ã,ÂáèËΩª master thread Â∑•‰Ωú,ÊèêÈ´ò cpu Âà©Áî®ÁéáÂíåÊèêÈ´òÊÄßËÉΩ MySQLÊï∞ÊçÆÂ∫ìÁöÑÈÖçÁΩÆÊñá‰ª∂[mysqld]‰∏≠Ê∑ªÂä†Â¶Ç‰∏ãÂëΩ‰ª§Êù•ÂêØÁî®Áã¨Á´ãÁöÑPurge ThreadÔºö innodb_purge_threads=1 1.1ÁâàÊú¨‰∏≠ÔºåÂç≥‰ΩøÂ∞Ü innodb_purge_threads ËÆæ‰∏∫Â§ß‰∫é1ÔºåInnoDBÂ≠òÂÇ®ÂºïÊìéÂêØÂä®Êó∂‰πü‰ºöÂ∞ÜÂÖ∂ËÆæ‰∏∫1 1.2‰πãÂêé ÊîØÊåÅÂ§ö‰∏™Purge Thread, ËøôÊ†∑ÂÅöÂèØ‰ª•Âä†Âø´UNDOÈ°µÁöÑÂõûÊî∂Ôºå‰πüËÉΩÊõ¥Ëøõ‰∏ÄÊ≠•Âà©Áî®Á£ÅÁõòÁöÑÈöèÊú∫ËØªÂèñÊÄßËÉΩ Page Cleaner ThreadPage Cleaner ThreadÁöÑ‰ΩúÁî®ÊòØÂèñ‰ª£Master Thread‰∏≠ËÑèÈ°µÂà∑Êñ∞ÁöÑÊìç‰ΩúÔºåÂáèËΩªÂéüMaster ThreadÁöÑÂ∑•‰ΩúÂèäÂØπ‰∫éÁî®Êà∑Êü•ËØ¢Á∫øÁ®ãÁöÑÈòªÂ°ûÔºåËøõ‰∏ÄÊ≠•ÊèêÈ´òÊÄßËÉΩ„ÄÇ ÂÜÖÂ≠òinnoDBÂÜÖÂ≠ò‰∏ªË¶ÅÁî±ÁºìÂÜ≤Ê±†(innodb buffer pool)„ÄÅÈáçÂÅöÊó•ÂøóÁºìÂÜ≤(redo log buffer)„ÄÅÈ¢ùÂ§ñÂÜÖÂ≠òÊ±†ÁªÑÊàê(innodb additional men pool size)ÁªÑÊàê ÁºìÂÜ≤Ê±†ÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂ≠òÂÇ®Âô®‰∏≠ÁöÑ‰∏Ä‰∏™Âå∫ÂüüÔºåÁî®‰∫éÂú®ËÆøÈóÆÊó∂ÁºìÂ≠òË°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÁºìÂÜ≤Ê±†ÂÖÅËÆ∏Áõ¥Êé•‰ªéÂÜÖÂ≠òÂ§ÑÁêÜÂ∏∏Áî®Êï∞ÊçÆÔºå‰ªéËÄåÂä†Âø´Â§ÑÁêÜÈÄüÂ∫¶„ÄÇÂú®‰∏ìÁî®ÊúçÂä°Âô®‰∏äÔºåÈÄöÂ∏∏‰ºöÂ∞ÜÊúÄÂ§ö80ÔºÖÁöÑÁâ©ÁêÜÂÜÖÂ≠òÂàÜÈÖçÁªôÁºìÂÜ≤Ê±†„ÄÇËØªÂèñÊµÅÁ®ãÔºö Êõ¥Êñ∞ÊµÅÁ®ãÔºö Âõ†Ê≠§ÁºìÂÜ≤Ê±†ÁöÑÂ§ßÂ∞èÂΩ±ÂìçÊï∞ÊçÆÂ∫ìÁöÑÊï¥‰ΩìÊÄßËÉΩ„ÄÇ Áî±‰∫é32‰ΩçÊìç‰ΩúÁ≥ªÁªüÁöÑÈôêÂà∂ÔºåÂú®ËØ•Á≥ªÁªü‰∏ãÊúÄÂ§öÂ∞ÜËØ•ÂÄºËÆæÁΩÆ‰∏∫3G„ÄÇÁî®Êà∑ÂèØ‰ª•ÊâìÂºÄÊìç‰ΩúÁ≥ªÁªüÁöÑPAEÈÄâÈ°πÊù•Ëé∑Âæó32‰ΩçÊìç‰ΩúÁ≥ªÁªü‰∏ãÊúÄÂ§ß64GBÂÜÖÂ≠òÁöÑÊîØÊåÅ„ÄÇ‰∏∫‰∫ÜËÆ©Êï∞ÊçÆÂ∫ì‰ΩøÁî®Êõ¥Â§öÁöÑÂÜÖÂ≠ò,Âª∫ËÆÆÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÈÉΩÈááÁî® 64 ‰ΩçÊìç‰ΩúÁ≥ªÁªü„ÄÇ ÂèÇÊï∞ ÁâàÊú¨ ‰ΩúÁî® innodb_buffer_pool_instances ‰ªéInnoDB 1.0.xÂºÄÂßã ÈÖçÁΩÆÂ§ö‰∏™ÁºìÂÜ≤Ê±†ÂÆû‰æãÔºåÈªòËÆ§‰∏∫1 ÁºìÂÜ≤Ê±†‰∏≠ÁºìÂ≠òÁöÑÊï∞ÊçÆÈ°µÁ±ªÂûã Á¥¢ÂºïÈ°µ(index page)ÔºöÁºìÂ≠òÊï∞ÊçÆË°®Á¥¢Âºï Êï∞ÊçÆÈ°µ(data page)ÔºöÁºìÂ≠òÊï∞ÊçÆÈ°µÔºåÂç†ÁºìÂÜ≤Ê±†ÁöÑÁªùÂ§ßÈÉ®ÂàÜ undoÈ°µ(undo Log Page)ÔºöundoÈ°µÊòØ‰øùÂ≠ò‰∫ãÂä°Ôºå‰∏∫ÂõûÊªöÂÅöÂáÜÂ§áÁöÑ„ÄÇ ÊèíÂÖ•ÁºìÂÜ≤Ôºàinsert bufferÔºâÔºöÊèíÂÖ•Êï∞ÊçÆÊó∂Ë¶ÅÂÖàÊèíÂÖ•Âà∞ÁºìÂ≠òÊ±†‰∏≠„ÄÇ Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÔºàadaptive hash indexÔºâÔºö Èô§‰∫ÜB+ TreeÁ¥¢ÂºïÂ§ñÔºåÂú®ÁºìÂÜ≤Ê±†Ëøò‰ºöÁª¥Êä§‰∏Ä‰∏™ÂìàÂ∏åÁ¥¢ÂºïÔºå‰ª•‰æøÂú®ÁºìÂÜ≤Ê±†‰∏≠Âø´ÈÄüÊâæÂà∞Êï∞ÊçÆÈ°µ„ÄÇ InnoDBÂ≠òÂÇ®ÁöÑÈîÅ‰ø°ÊÅØÔºàlock infoÔºâ Êï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÔºàdata dictionaryÔºâ Âú®MySQL‰∏≠ÔºåÊï∞ÊçÆÂ≠óÂÖ∏‰ø°ÊÅØÂÜÖÂÆπÂ∞±ÂåÖÊã¨Ë°®ÁªìÊûÑ„ÄÅÊï∞ÊçÆÂ∫ìÂêçÊàñË°®Âêç„ÄÅÂ≠óÊÆµÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÅËßÜÂõæ„ÄÅÁ¥¢Âºï„ÄÅË°®Â≠óÊÆµ‰ø°ÊÅØ„ÄÅÂ≠òÂÇ®ËøáÁ®ã„ÄÅËß¶ÂèëÂô®Á≠âÂÜÖÂÆπ„ÄÇ InnoDBÊúâËá™Â∑±ÁöÑË°®ÁºìÂ≠òÔºåÂèØ‰ª•Áß∞‰∏∫Ë°®ÂÆö‰πâÁºìÂ≠òÊàñËÄÖÊï∞ÊçÆÂ≠óÂÖ∏„ÄÇÂΩìInnoDBÊâìÂºÄ‰∏ÄÂº†Ë°®ÔºåÂ∞±Â¢ûÂä†‰∏Ä‰∏™ÂØπÂ∫îÁöÑÂØπË±°Âà∞Êï∞ÊçÆÂ≠óÂÖ∏„ÄÇ ÁºìÂÜ≤Ê±†ÁÆ°ÁêÜÊñπÂºè Free listÂΩìÊï∞ÊçÆÂ∫ìÂàöÂêØÂä®Êó∂ÔºåLRUÂàóË°®ÊòØÁ©∫ÁöÑÔºåËøôÊó∂È°µÈÉΩÂ≠òÊîæÂú®Free list‰∏≠„ÄÇÂΩìÈúÄË¶Å‰ªéÁºìÂÜ≤Ê±†‰∏≠ÂàÜÈ°µÊó∂Ôºå‰ªéFree list‰∏≠Êü•ÊâæÊòØÂê¶ÊúâÂèØÁî®ÁöÑÁ©∫Èó≤È°µÔºåËã•ÊúâÂàôÂ∞ÜËØ•È°µ‰ªéFreeÂàóË°®‰∏≠Âà†Èô§ÔºåÊîæÂÖ•Âà∞LRUÂàóË°®‰∏≠,Áª¥ÊåÅÈ°µÊï∞ÂÆàÊÅí„ÄÇ LRU list LRUÁÆóÊ≥ïÔºöÊúÄÈ¢ëÁπÅ‰ΩøÁî®È°µÂú®LRUÂàóË°®ÁöÑÂâçÁ´ØÔºåÊúÄÂ∞ë‰ΩøÁî®ÁöÑÈ°µÂú®Â∞æÁ´Ø„ÄÇÈ¶ñÂÖàÈáäÊîæLRUÂàóË°®‰∏≠ÁöÑÂ∞æÁ´ØÁöÑÈ°µ„ÄÇÁºìÂÜ≤Ê±†‰∏≠È°µÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫16KB„ÄÇ InnoDB‰ºòÂåñÁöÑLRUÁÆóÊ≥ï(midpoint insertion strategy)ÔºöÂ∞ÜÊñ∞ËØªÂèñÂà∞ÁöÑÈ°µ‰∏çÊîæÂú®È¶ñÈÉ®ÔºåËÄåÊòØ‰∏≠Èó¥ÈÉ®‰Ωç midpoint ‰ΩçÁΩÆ„ÄÇÁõÆÊ†áÊòØÁ°Æ‰øùÈ¢ëÁπÅËÆøÈóÆ‚ÄùÁÉ≠‚ÄùÈ°µÈù¢‰øùÁïôÂú®ÁºìÂÜ≤Ê±†‰∏≠„ÄÇ ÂèÇÊï∞ ‰ΩúÁî® innodb_old_blocks_pct ÊéßÂà∂LRUÂàóË°®‰∏≠ old list ÁöÑÁôæÂàÜÊØî„ÄÇ ÈªòËÆ§ÂÄº‰∏∫ 37ÔºåÂØπÂ∫î‰∫éÂéüÂßãÂõ∫ÂÆöÊØîÁéá3/8„ÄÇ ÂÄºËåÉÂõ¥ÊòØ 5ÔºàÁºìÂÜ≤Ê±†‰∏≠ÁöÑÊñ∞È°µÈù¢ÂæàÂø´Â∞±‰ºöËÄÅÂåñÔºâÂà∞ 95„ÄÇ innodb_old_blocks_time ÊåáÂÆöÁ¨¨‰∏ÄÊ¨°ËÆøÈóÆÈ°µÈù¢‰πãÂêéÁöÑÊó∂Èó¥Á™óÂè£ÔºàmsÔºâ Âú®Ê≠§ÊúüÈó¥ÂèØ‰ª•ËÆøÈóÆËØ•È°µÈù¢ËÄå‰∏çÁßªÂä®Âà∞LRUÂàóË°®ÁöÑÂâçÁ´Ø ÈªòËÆ§ÂÄº‰∏∫ 1000 ms ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÁÆóÊ≥ïÊìç‰ΩúÂ¶Ç‰∏ãÔºö Âú®ÈªòËÆ§ÈÖçÁΩÆ‰∏ãÔºå midpoint‰ΩçÁΩÆÂú®LRU list ÁöÑ5/8Â§Ñ„ÄÇ midpointÊòØnew sublistÁöÑÂ∞æÈÉ®‰∏éold sublistÁöÑÂ§¥ÈÉ®Áõ∏‰∫§ÁöÑËæπÁïå„ÄÇ ÂΩì InnoDB Â∞ÜÈ°µÈù¢ËØªÂÖ•ÁºìÂÜ≤Ê±†Êó∂ÔºåÂ∞ÜÈ°µÊèíÂÖ•midpoint‰ΩçÁΩÆ(old sublistÁöÑÂ§¥ÈÉ®)„ÄÇ ËÆøÈóÆold sublist‰∏≠ÁöÑÈ°µ &amp;&amp; ËØ•È°µÂú®old sublist‰∏≠ÁöÑÂÅúÁïôÊó∂Èó¥Ë∂ÖËøáinnodb_old_blocks_timeËÆæÁΩÆÁöÑÊó∂Èó¥Ôºå‰ΩøÂÖ∂Âèòyoung,Â∞ÜÂÖ∂ÁßªÂä®Âà∞ÁºìÂÜ≤Ê±†ÁöÑÂ§¥ÈÉ®(new sublistÁöÑÂ§¥ÈÉ®)„ÄÇ ÂΩìÈ°µ‰ªéLRUÂàóË°®ÁöÑoldÈÉ®ÂàÜÂä†ÂÖ•Âà∞newÈÉ®ÂàÜÊó∂ÔºåÁß∞Ê≠§Êó∂ÂèëÁîüÁöÑÊìç‰Ωú‰∏∫page made youngÔºåËÄåÂõ†‰∏∫innodb_old_blocks_timeÁöÑËÆæÁΩÆËÄåÂØºËá¥È°µÊ≤°Êúâ‰ªéoldÈÉ®ÂàÜÁßªÂä®Âà∞newÈÉ®ÂàÜÁöÑÊìç‰ΩúÁß∞‰∏∫page not made young Âú®Êï∞ÊçÆÂ∫ìÊìç‰Ωú‰∏≠ÔºåË¢´ËÆøÈóÆÁöÑÈ°µÂ∞ÜÁßªÂà∞new sublistÁöÑË°®Â§¥ÔºåËøôÊ†∑‰∏ÄÊù•ÔºåÂú®new sublist‰∏≠ÁöÑÊú™Ë¢´ËÆøÈóÆÁöÑËäÇÁÇπÂ∞ÜÈÄêÊ∏êÂæÄË°®Â∞æÁßªÂä®ÔºåÂΩìÁßªÂä®Ëøá‰∏≠ÁÇπÔºåÂ∞ÜÂèò‰∏∫old listÁöÑËäÇÁÇπ„ÄÇÂΩìË°®Êª°Êó∂Ôºåold listÊú´Â∞æÁöÑÈ°µÂ∞Ü‰ºöË¢´ÁßªÈô§„ÄÇ ‰∏∫‰ªÄ‰πà‰∏çÈááÁî®Êú¥Á¥†ÁöÑLRUÔºüÂõ†‰∏∫Êüê‰∫õSQLÊìç‰Ωú‰ºöËÆøÈóÆÂæàÂ§öÈ°µÔºåÁîöËá≥ÂÖ®ÈÉ®È°µÔºå‰ΩÜ‰ªÖ‰ªÖÂú®ËØ•Ê¨°Êü•ËØ¢Êìç‰ΩúÔºåÂπ∂‰∏çÊòØÊ¥ªË∑ÉÁöÑÁÉ≠ÁÇπÊï∞ÊçÆ„ÄÇÂèØËÉΩ‰ºö‰ΩøÁºìÂÜ≤Ê±†‰∏≠ÁöÑÈ°µË¢´Âà∑Êñ∞Âá∫Ôºå‰ªéËÄåÂΩ±ÂìçÁºìÂÜ≤Ê±†ÁöÑÊïàÁéá„ÄÇ Flush listÂú®LRUÁ±ªË°®ÁöÑÈ°µË¢´‰øÆÊîπÂêéÔºåÁß∞‰∏∫ËÑèÈ°µÔºàDirty PageÔºâÔºåÂç≥ÁºìÂ≠òÂíåÁ°¨ÁõòÁöÑÈ°µÊï∞ÊçÆ‰∏ç‰∏ÄËá¥„ÄÇÊï∞ÊçÆÂ∫ì‰ºöÈÄöËøáCHECKPOINTÊú∫Âà∂Â∞ÜËÑèÈ°µÂà∑Êñ∞ÂõûÁ£ÅÁõòÔºåFlush list‰∏≠ÁöÑÈ°µÂç≥‰∏∫ËÑèÈ°µÂàóË°®„ÄÇ ÈáçÂÅöÊó•ÂøóÁºìÂÜ≤ ‰ªÄ‰πàÊòØredo logÔºüÂΩìÊï∞ÊçÆÂ∫ìÂØπÊï∞ÊçÆÂÅö‰øÆÊîπÁöÑÊó∂ÂÄôÔºåÈúÄË¶ÅÊääÊï∞ÊçÆÈ°µ‰ªéÁ£ÅÁõòËØªÂà∞buffer pool‰∏≠ÔºåÁÑ∂ÂêéÂú®buffer pool‰∏≠ËøõË°å‰øÆÊîπÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôbuffer pool‰∏≠ÁöÑÊï∞ÊçÆÈ°µÂ∞±‰∏éÁ£ÅÁõò‰∏äÁöÑÊï∞ÊçÆÈ°µÂÜÖÂÆπ‰∏ç‰∏ÄËá¥ÔºåÁß∞buffer poolÁöÑÊï∞ÊçÆÈ°µ‰∏∫dirty page ËÑèÊï∞ÊçÆ„ÄÇÂ¶ÇÊûúÂèëÁîüÈùûÊ≠£Â∏∏ÁöÑDBÊúçÂä°ÈáçÂêØÔºåÈÇ£‰πàËøô‰∫õÊï∞ÊçÆÂπ∂Ê≤°ÊúâÂêåÊ≠•Âà∞Á£ÅÁõòÊñá‰ª∂‰∏≠ÔºàÊ≥®ÊÑèÔºåÂêåÊ≠•Âà∞Á£ÅÁõòÊñá‰ª∂ÊòØ‰∏™ÈöèÊú∫IOÔºâÔºå‰ºöÂèëÁîüÊï∞ÊçÆ‰∏¢Â§±„ÄÇÂ¶ÇÊûúËøô‰∏™Êó∂ÂÄôÔºåËÉΩÂ§üÊúâ‰∏Ä‰∏™Êñá‰ª∂ÔºåÂΩìÁºìÂÜ≤Ê±†‰∏≠ÁöÑdata pageÂèòÊõ¥ÁªìÊùüÂêéÔºåÊääÁõ∏Â∫î‰øÆÊîπËÆ∞ÂΩïËÆ∞ÂΩïÂà∞Ëøô‰∏™Êñá‰ª∂ÔºàÊ≥®ÊÑèÔºåËÆ∞ÂΩïÊó•ÂøóÊòØÈ°∫Â∫èIOÔºâÔºåÈÇ£‰πàÂΩìDBÊúçÂä°ÂèëÁîücrashÁöÑÊÉÖÂÜµÔºåÊÅ¢Â§çDBÁöÑÊó∂ÂÄôÔºå‰πüÂèØ‰ª•Ê†πÊçÆËøô‰∏™Êñá‰ª∂ÁöÑËÆ∞ÂΩïÂÜÖÂÆπÔºåÈáçÊñ∞Â∫îÁî®Âà∞Á£ÅÁõòÊñá‰ª∂ÔºåÊï∞ÊçÆ‰øùÊåÅ‰∏ÄËá¥„ÄÇËøô‰∏™Êñá‰ª∂Â∞±ÊòØredo log ÔºåÁî®‰∫éËÆ∞ÂΩï Êï∞ÊçÆ‰øÆÊîπÂêéÁöÑËÆ∞ÂΩïÔºåÈ°∫Â∫èËÆ∞ÂΩï„ÄÇ‰ªÄ‰πàÊòØundo logÔºüundoÊó•ÂøóÁî®‰∫éÂ≠òÊîæÊï∞ÊçÆ‰øÆÊîπË¢´‰øÆÊîπÂâçÁöÑÂÄº„ÄÇÂÅáËÆæ‰øÆÊîπË°®‰∏≠ id=1 ÁöÑË°åÊï∞ÊçÆÔºåÊääName=‚ÄôB‚Äô ‰øÆÊîπ‰∏∫Name = ‚ÄòB2‚Äô ÔºåÈÇ£‰πàundoÊó•ÂøóÂ∞±‰ºöÁî®Êù•Â≠òÊîæName=‚ÄôB‚ÄôÁöÑËÆ∞ÂΩïÔºåÂ¶ÇÊûúËøô‰∏™‰øÆÊîπÂá∫Áé∞ÂºÇÂ∏∏ÔºåÂèØ‰ª•‰ΩøÁî®undoÊó•ÂøóÊù•ÂÆûÁé∞ÂõûÊªöÊìç‰ΩúÔºå‰øùËØÅ‰∫ãÂä°ÁöÑ‰∏ÄËá¥ÊÄß„ÄÇ ÈáçÂÅöÊó•ÂøóÁºìÂÜ≤‰∏çÈúÄË¶ÅËÆæÁΩÆÂæàÂ§ßÔºåÈÄöÂ∏∏ÊÉÖÂÜµ‰∏ã8MËÉΩÊª°Ë∂≥Â§ßÈÉ®ÂàÜÁöÑÂ∫îÁî®Âú∫ÊôØ„ÄÇÈáçÂÅöÊó•ÂøóÊîØÊåÅ‰ª•‰∏ã‰∏âÁßçÊÉÖÂÜµËß¶ÂèëÂà∑Êñ∞Ôºö Master ThreadÊØè‰∏ÄÁßíÂ∞ÜÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Âà∑Êñ∞Âà∞ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ ÊØèÊ¨°‰∫ãÂä°Êèê‰∫§Êó∂Â∞ÜÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Âà∑Êñ∞Âà∞ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ ÂΩìÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Ê±†Ââ©‰ΩôÁ©∫Èó¥Â∞è‰∫é1/2Êó∂ÔºåÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Âà∑Êñ∞Âà∞ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ È¢ùÂ§ñÁöÑÂÜÖÂ≠òÊ±† Âú®InnoDBÂ≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÂØπÂÜÖÂ≠òÁöÑÁÆ°ÁêÜÊòØÈÄöËøá‰∏ÄÁßçÁß∞‰∏∫ÂÜÖÂ≠òÂ†ÜÁöÑÊñπÂºèËøõË°åÁöÑ„ÄÇÂú®ÂØπ‰∏Ä‰∫õÊï∞ÊçÆÁªìÊûÑÊú¨Ë∫´ÁöÑÂÜÖÂ≠òËøõË°åÂàÜÈÖçÊó∂ÔºåÈúÄË¶Å‰ªéÈ¢ùÂ§ñÁöÑÂÜÖÂ≠òÊ±†‰∏≠ËøõË°åÁî≥ËØ∑ÔºåÂΩìËØ•Âå∫ÂüüÁöÑÂÜÖÂ≠ò‰∏çÂ§üÊó∂Ôºå‰ºö‰ªéÁºìÂÜ≤Ê±†‰∏≠ËøõË°åÁî≥ËØ∑„ÄÇ CheckpointÊäÄÊúØ‰ªÄ‰πàÊòØCheckpointÔºüÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∫ã‰ª∂(event)ÔºåËøô‰∏™‰∫ã‰ª∂ÊøÄÊ¥ª‰ª•Âêé‰ºöËß¶ÂèëÊï∞ÊçÆÂ∫ìÂÜôËøõÁ®ã(DBWR)Â∞ÜËÑèÊï∞ÊçÆÂùóÂÜôÂà∞Á£ÅÁõò‰∏≠„ÄÇ ‰∏∫‰ªÄ‰πàÈúÄË¶ÅCheckpointÊäÄÊúØÔºüinnoDBÂú®‰∫ãÂä°Êèê‰∫§Êó∂ÔºåÂÖàÂÜôÈáçÂÅöÊó•ÂøóÔºåÂÜç‰øÆÊîπÂÜÖÂ≠òÊï∞ÊçÆËøôÊ†∑ÔºåÂ∞±‰∫ßÁîü‰∫ÜËÑèÈ°µ„ÄÇÊó¢ÁÑ∂ÊúâÈáçÂÅöÊó•Âøó‰øùËØÅÊï∞ÊçÆÊåÅ‰πÖÊÄßÔºåÊü•ËØ¢Êó∂‰πüÂèØ‰ª•‰ªéÁºìÂÜ≤Ê±†È°µ‰∏≠ÂèñÊï∞ÊçÆÔºåÈÇ£‰∏∫‰ªÄ‰πàËøòË¶ÅÂà∑Êñ∞ËÑèÈ°µÂà∞Á£ÅÁõòÂë¢ÔºüÂ¶ÇÊûúÈáçÂÅöÊó•ÂøóÂèØ‰ª•Êó†ÈôêÂ¢ûÂ§ßÔºåÂêåÊó∂ÁºìÂÜ≤Ê±†Ë∂≥Â§üÂ§ßÔºåËÉΩÂ§üÁºìÂ≠òÊâÄÊúâÊï∞ÊçÆÔºåÈÇ£‰πàÊòØ‰∏çÈúÄË¶ÅÂ∞ÜÁºìÂÜ≤Ê±†‰∏≠ÁöÑËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõò„ÄÇ‰ΩÜÊòØÔºå‰ºöÊúâ‰ª•‰∏ãÂá†‰∏™ÈóÆÈ¢òÔºö1) ÊúçÂä°Âô®ÂÜÖÂ≠òÊúâÈôêÔºåÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®ÔºåÊó†Ê≥ïÁºìÂ≠òÂÖ®ÈÉ®Êï∞ÊçÆ2) ÈáçÂÅöÊó•ÂøóÊó†ÈôêÂ¢ûÂ§ßÊàêÊú¨Ë¶ÅÊ±ÇÂ§™È´ò3) ÂÆïÊú∫Êó∂Â¶ÇÊûúÈáçÂÅöÂÖ®ÈÉ®Êó•ÂøóÊÅ¢Â§çÊó∂Èó¥ËøáÈïø Checkpoint Ëß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢òÔºü1) Áº©Áü≠Áü≠Êï∞ÊçÆÂ∫ìÁöÑÊÅ¢Â§çÊó∂Èó¥2) ÁºìÂÜ≤Ê±†‰∏çÂ§üÊó∂ÔºåÂ∞ÜËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõò3) ÈáçÂÅöÊó•Âøó‰∏çÂèØÁî®Êó∂ÔºåÂà∑Êñ∞ËÑèÈ°µ ÂØπ‰∫éInnoDBÂ≠òÂÇ®ÂºïÊìéËÄåË®ÄÔºåÂÖ∂ÊòØÈÄöËøáLSNÔºàLog Sequence NumberÔºâÊù•Ê†áËÆ∞ÁâàÊú¨ÁöÑ„ÄÇÊØè‰∏™È°µÊúâLSNÔºåÈáçÂÅöÊó•Âøó‰∏≠‰πüÊúâLSNÔºåCheckpoint‰πüÊúâLSN„ÄÇ innodb ÂÜÖÈÉ®Êúâ‰∏§Áßç checkpointÔºö sharp checkpointÔºöÊï∞ÊçÆÂ∫ìÂÖ≥Èó≠ÁöÑÊó∂ÂÄôÂ∞ÜÊâÄÊúâÁöÑËÑèÈ°µÂà∑ÂõûÂà∞Á£ÅÁõòÔºåÈªòËÆ§ÊñπÂºèÔºåÂèÇÊï∞ innodb_fast_shudown=1 fuzzy checkpointÔºöÂè™Âà∑Êñ∞ÈÉ®ÂàÜËÑèÈ°µ master thread checkpointÔºömaster thread ÂºÇÊ≠•ÁöÑ‰ª•ÊØèÁßíÊàñËÄÖÊØè 10 ÁßíÁöÑÈÄüÂ∫¶‰ªéÁºìÂÜ≤Ê±†ÁöÑËÑèÈ°µÂàóË°®‰∏≠Âà∑Êñ∞‰∏ÄÂÆöÊØîÂàóÁöÑ‰πüÂõûÁ£ÅÁõò Âë®ÊúüÊÄßÔºåÂºÇÊ≠•ÔºåËØªÂèñflush listÔºåÊâæÂà∞ËÑèÈ°µÔºåÂÜôÂÖ•Á£ÅÁõò flush_lru_list checkpointÔºöInnoDBË¶Å‰øùËØÅLRUÂàóË°®‰∏≠ÈúÄË¶ÅÊúâÂ∑Æ‰∏çÂ§ö100‰∏™Á©∫Èó≤È°µÂèØ‰æõ‰ΩøÁî®„ÄÇÂ¶ÇÊûúÊ≤°ÊúâËøô‰πàÂ§öÔºåÂ∞±‰ºöÂ∞Ü lru list Â∞æÈÉ®ÁöÑÈ°µÁßªÈô§„ÄÇÂ¶ÇÊûúËøô‰∫õÈ°µÊúâËÑèÈ°µÔºåÂ∞±ÈúÄË¶ÅËøõË°å checkpoint„ÄÇ innodb 1.1.xÁâàÊú¨‰πãÂâçÔºåÊ£ÄÊü•Âú®Áî®Êà∑Êü•ËØ¢Á∫øÁ®ã‰∏≠,‰ºöÈòªÂ°ûÁî®Êà∑Êü•ËØ¢Êìç‰Ωú„ÄÇ innodb 1.2.xÁâàÊú¨‰πãÂêéÔºåÊ£ÄÊü•ÊîæÂà∞‰∫ÜÂçïÁã¨ÁöÑ page cleaner Á∫øÁ®ã‰∏≠,ÂèØÈÄöËøá innodb_lru_scan_depth ÊéßÂà∂lruÂàóË°®‰∏≠ÂèØÁî®È°µÁöÑÊï∞ÈáèÔºåÈªòËÆ§ÊòØ1024„ÄÇ async/sync flush checkpointÔºöÈáçÂÅöÊó•ÂøóÊñá‰ª∂‰∏çÂèØÁî®Êó∂ÔºåÂº∫Âà∂Â∞Ü‰∏Ä‰∫õÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõò„ÄÇËææÂà∞ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ÁöÑÂ§ßÂ∞èÈòàÂÄº„ÄÇ checkpoint age = redo_log_lsn - cp_lsn ‰ΩéÊ∞¥‰Ωç=75% * total_redo_log_file_size È´òÊ∞¥‰Ωç=90% * total_redo_log_file_size checkpoint age &lt; ‰ΩéÊ∞¥‰Ωç ‰∏çÈúÄË¶ÅÂà∑Êñ∞ ‰ΩéÊ∞¥‰Ωç &lt;= checkpoint age &lt;= È´òÊ∞¥‰Ωç ‰ºöÂº∫Âà∂ËøõË°å checkpoint ÔºåËß¶Âèëasync flushÔºå Ê†πÊçÆflush_listÁöÑÈ°∫Â∫èÔºåÂà∑Êñ∞Ë∂≥Â§üÂ§öÁöÑËÑèÈ°µÔºåÁõ¥Âà∞ checkpoint age &lt; ‰ΩéÊ∞¥‰Ωç checkpoint age &gt; È´òÊ∞¥‰Ωç ‰ºöÂº∫Âà∂ËøõË°å checkpoint ÔºåËß¶Âèësync flush Ê†πÊçÆflush_listÁöÑÈ°∫Â∫èÔºåÂà∑Êñ∞ËÑèÈ°µ, Áõ¥Âà∞ checkpoint age &lt; ‰ΩéÊ∞¥‰Ωç dirty page too much checkpointÔºöÂΩìÁºìÂÜ≤Ê±†‰∏≠ËÑèÈ°µÁöÑÊï∞ÈáèÂç†ÊçÆ‰∏ÄÂÆöÁôæÂàÜÊØîÊó∂ÔºåÂº∫Âà∂ËøõË°åCheckpointÔºåÁî®Êù•‰øùËØÅÁºìÂÜ≤Ê±†‰∏≠ÊúâË∂≥Â§üÁöÑÈ°µÔºåÈÄöËøá innodb_max_dirty_pages_pct ÂèÇÊï∞ÊéßÂà∂„ÄÇ -------- Á¨¨‰∫åÈÉ®ÂàÜ -------- Master thread Â∑•‰ΩúÊñπÂºèInnoDB 1.0.x ÁâàÊú¨‰πãÂâçÁöÑ Master threadMaster thread ÂÜÖÈÉ®ÊúâÂ§ö‰∏™Âæ™ÁéØ loop ÁªÑÊàêÔºö ‰∏ªÂæ™ÁéØ loop ÂêéÂè∞Âæ™ÁéØ backgroup loop Âà∑Êñ∞Âæ™ÁéØ flush loop ÊöÇÂÅúÂæ™ÁéØ suspend loop ‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364void master_thread()&#123; goto loop; //‰∏ªÂæ™ÁéØ loop Ôºö for(int i = 0; i &lt; 10; ++i)&#123; thread_sleep(1); //1. Êó•ÂøóÁºìÂÜ≤Âà∑Êñ∞Âà∞Á£ÅÁõòÔºåÂç≥‰Ωø‰∫ãÂä°ËøòÊ≤°ÊúâÊèê‰∫§ do log buffer flush to disk; //2. Ê†πÊçÆÂâç‰∏ÄÁßíIOÊìç‰ΩúÂ∞è‰∫é5ÔºåÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤ if(last_one_second_ios &lt; 5) do merge at most 5 insert buffer; //3. ËÑèÈ°µÁöÑÊØî‰æãË∂ÖËøá‰∫ÜÈòàÂÄºÔºåÂà∑Êñ∞ 100 ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõò if(buf_get_modified_ratio_pct &gt; innodb_max_dirty_pages_pct) do buffer pool flush 100 dirty page; //4. Ê≤°ÊúâÁî®Êà∑Ê¥ªÂä®ÔºàÊï∞ÊçÆÂ∫ìÁ©∫Èó≤Êó∂ÔºâÊàñËÄÖÊï∞ÊçÆÂ∫ìÂÖ≥Èó≠ÔºàshutdownÔºâÔºåÂàáÊç¢Âà∞ backgroup loop if(no user activity) goto backgroud loop; &#125; //1. Ââç10ÁßíIOÊìç‰ΩúÂ∞è‰∫é200ÔºåÂà∑Êñ∞ 100 ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõò if(last_ten_second_ios &lt; 200) do buffer pool flush 100 dirty page; //2. ÂêàÂπ∂Ëá≥Â§ö 5 ‰∏™ÊèíÂÖ•ÁºìÂÜ≤ do merge at most 5 insert buffer; //3. Â∞ÜÈáçÂÅöÊó•ÂøóÂà∑Êñ∞Âà∞Á£ÅÁõò do log buffer flush to disk; //4. Âà†Èô§Êó†Áî®ÁöÑ undo È°µÔºàÊØèÊ¨°ÊúÄÂ§öÂ∞ùËØïÂõûÊî∂ 20 ‰∏™ undo È°µÔºâ do full purge; //5. ËÑèÈ°µÊØî‰æãË∂ÖËøá 70% Âà∑Êñ∞100 ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõòÔºåÂê¶ÂàôÂà∑Êñ∞ 10 ‰∏™ËÑèÈ°µ if ( buf_get_modified_ratio_pct Ôºû 70 % ) do buffer pool flush 100 dirty page else buffer pool flush 10 dirty page goto loop //ÂêéÂè∞Âæ™ÁéØ background loop : //1. Âà†Èô§Êó†Áî®ÁöÑ undo È°µ do full purge //2. ÂêàÂπ∂ 20 ‰∏™ÊèíÂÖ•ÁºìÂÜ≤ do merge 20 insert buffer //3.Â¶ÇÊûúÊúâ‰ªªÂä°ÔºåË∑≥ËΩ¨Âà∞‰∏ªÂæ™ÁéØÔºåÂê¶ÂàôË∑≥ËΩ¨Âà∞Âà∑Êñ∞Âæ™ÁéØ if not idle goto loop else goto flush loop //Âà∑Êñ∞Âæ™ÁéØ flush loop : //‰∏çÊñ≠Âà∑Êñ∞100‰∏™ËÑèÈ°µÔºåÁõ¥Âà∞ËÑèÈ°µÊØî‰æãÊ≤°ÊúâË∂ÖËøáÈòàÂÄº do buffer pool flush 100 dirty page if ( buf_get_modified_ratio_pct Ôºû innodb_max_dirty_pages_pct ) goto flush loop //Ê≤°Êúâ‰ªªÂä°ÔºåË∑≥ËΩ¨Âà∞ÊöÇÂÅúÂæ™ÁéØ goto suspend loop //ÊöÇÂÅúÂæ™ÁéØ suspend loop : //Â∞Ü‰∏ªÁ∫øÁ®ãÊåÇËµ∑ÔºåÁ≠âÂæÖ‰∫ã‰ª∂ÂèëÁîü suspend_thread() waiting event goto loop;&#125; InnoDB 1.2.x ÁâàÊú¨‰πãÂâçÁöÑ Master thread ÊèêÈ´òÂà∑Êñ∞ËÑèÈ°µÊï∞ÈáèÂíåÂêàÂπ∂ÊèíÂÖ•Êï∞ÈáèÔºåÊîπÂñÑÁ£ÅÁõò IO Â§ÑÁêÜËÉΩÂäõ,Âà∑Êñ∞Êï∞Èáè‰∏çÂÜçÁ°¨ÁºñÁ†ÅÔºåËÄåÊòØ‰ΩøÁî®ÁôæÂàÜÊØîÊéßÂà∂„ÄÇ Âú®ÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤ÁöÑÊó∂ÂÄôÔºåÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤ÁöÑÊï∞Èáè‰∏∫ innodb_io_capacity ÁöÑ 5% Âú®‰ªéÁºìÂÜ≤Âå∫Âà∑Êñ∞ËÑèÈ°µÁöÑÊó∂ÂÄôÔºåÂà∑Êñ∞ËÑèÈ°µÁöÑÊï∞Èáè‰∏∫ innodb_io_capacity Â¢ûÂä†‰∫ÜËá™ÈÄÇÂ∫îÂà∑Êñ∞ËÑèÈ°µÂäüËÉΩ„ÄÇ 1.0.x‰πãÂâçÁâàÊú¨ÔºöËÑèÈ°µÂú®ÁºìÂÜ≤Ê±†Âç†ÊØîÂ∞è‰∫éinnodb_max_dirty_pages_pctÔºå‰∏çÂà∑Êñ∞ËÑèÈ°µÔºåÂ§ß‰∫éÂàôÂà∑Êñ∞100‰∏™ËÑèÈ°µ 1.0.xÁâàÊú¨ÂºÄÂßãÔºöÂºïÂÖ•innodb_adaptive_flushingÂèÇÊï∞ÔºåÈÄöËøáÂáΩÊï∞buf_flush_get_desired_flush_rateÂà§Êñ≠‰∫ßÁîüÈáçÂÅöÊó•ÂøóÁöÑÈÄüÂ∫¶Êù•ÂÜ≥ÂÆöÊúÄÈÄÇÂêàÁöÑÂà∑Êñ∞ËÑèÈ°µÊï∞Èáè„ÄÇ full purgeÂõûÊî∂ÁöÑUndoÈ°µÁöÑÊï∞Èáè‰πü‰∏çÂÜçÁ°¨ÁºñÁ†ÅÔºå‰ΩøÁî®ÂèÇÊï∞innodb_purge_batch_sizeÊéßÂà∂„ÄÇ ÂèÇÊï∞ InnoDB ÁâàÊú¨ ‰ΩúÁî® innodb_io_capacity 1.0.xÂºÄÂßã Ë°®Á§∫Á£ÅÁõòIOÁöÑÂêûÂêêÈáè,ÈªòËÆ§ÂÄºÊòØ200 innodb_max_dirty_pages_pct 1.0.x‰πãÂâç ËÑèÈ°µÂú®ÁºìÂÜ≤Ê±†‰∏≠ÊâÄÂç†ÊØîÁéáÔºåÈªòËÆ§ÂÄºÊòØ90 1.0.xÂºÄÂßã ÈªòËÆ§ÂÄºÊòØ75Âä†Âø´Âà∑Êñ∞ËÑèÈ°µÁöÑÈ¢ëÁéáÔºå‰øùËØÅ‰∫ÜÁ£ÅÁõòIOÁöÑË¥üËΩΩ„ÄÇ innodb_adaptive_flushing 1.0.xÂºÄÂßã ÊòØÂê¶Ëá™ÈÄÇÂ∫îÂà∑Êñ∞ËÑèÈ°µÔºåÈªòËÆ§‰∏∫ ON innodb_purge_batch_size 1.0.xÂºÄÂßã Ê∏ÖÈô§ undo È°µÊó∂,Ë°®Á§∫‰∏ÄÊ¨°Âà†Èô§Â§öÂ∞ëÈ°µ,ÈªòËÆ§ÊòØ 20 Master ThreadÁöÑ‰º™‰ª£Á†ÅÂèò‰∏∫‰∫Ü‰∏ãÈù¢ÁöÑÂΩ¢ÂºèÔºö 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465void master_thread()&#123; goto loop; //‰∏ªÂæ™ÁéØ loop Ôºö for(int i = 0; i &lt; 10; ++i)&#123; thread_sleep(1); //1. Êó•ÂøóÁºìÂÜ≤Âà∑Êñ∞Âà∞Á£ÅÁõòÔºåÂç≥‰Ωø‰∫ãÂä°ËøòÊ≤°ÊúâÊèê‰∫§ do log buffer flush to disk; //2. Ê†πÊçÆÂâç‰∏ÄÁßíIOÊìç‰ΩúÂ∞è‰∫é5%innodb_io_capacityÔºåÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤ if(last_one_second_ios &lt; 5%innodb_io_capacity) do merge 5%innodb_io_capacity insert buffer; //3. ËÑèÈ°µÁöÑÊØî‰æãË∂ÖËøá‰∫ÜÈòàÂÄºÔºåÂà∑Êñ∞ 100%innodb_io_capacity ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõò if(buf_get_modified_ratio_pct &gt; innodb_max_dirty_pages_pct) do buffer pool flush 100%innodb_io_capacity dirty page; //4. Ê≤°ÊúâÁî®Êà∑Ê¥ªÂä®ÔºàÊï∞ÊçÆÂ∫ìÁ©∫Èó≤Êó∂ÔºâÊàñËÄÖÊï∞ÊçÆÂ∫ìÂÖ≥Èó≠ÔºàshutdownÔºâÔºåÂàáÊç¢Âà∞ backgroup loop if(no user activity) goto backgroud loop; &#125; //1. Ââç10ÁßíIOÊìç‰ΩúÂ∞è‰∫éinnodb_io_capacityÔºåÂà∑Êñ∞ innodb_io_capacity ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõò if(last_ten_second_ios &lt; innodb_io_capacity) do buffer pool flush 100%innodb_io_capacity dirty page; //2. ÂêàÂπ∂Ëá≥Â§ö 5%innodb_io_capacity ‰∏™ÊèíÂÖ•ÁºìÂÜ≤ do merge at most 5%innodb_io_capacity insert buffer; //3. Â∞ÜÈáçÂÅöÊó•ÂøóÂà∑Êñ∞Âà∞Á£ÅÁõò do log buffer flush to disk; //4. Âà†Èô§Êó†Áî®ÁöÑ undo È°µÔºàÊØèÊ¨°ÊúÄÂ§öÂ∞ùËØïÂõûÊî∂ 5%innodb_io_capacity ‰∏™ undo È°µÔºâ do full purge; //5. ËÑèÈ°µÊØî‰æãË∂ÖËøá 70% Âà∑Êñ∞ 100%innodb_io_capacity ‰∏™ËÑèÈ°µÂà∞Á£ÅÁõòÔºå // Âê¶ÂàôÂà∑Êñ∞ 10%innodb_io_capacity ‰∏™ËÑèÈ°µ if ( buf_get_modified_ratio_pct Ôºû 70 % ) do buffer pool flush 100%innodb_io_capacity dirty page else buffer pool flush 10%innodb_io_capacity dirty page goto loop //ÂêéÂè∞Âæ™ÁéØ background loop : //1. Âà†Èô§Êó†Áî®ÁöÑ undo È°µ do full purge //2. ÂêàÂπ∂ 100%innodb_io_capacity ‰∏™ÊèíÂÖ•ÁºìÂÜ≤ do merge 100%innodb_io_capacity insert buffer //3.Â¶ÇÊûúÊúâ‰ªªÂä°ÔºåË∑≥ËΩ¨Âà∞‰∏ªÂæ™ÁéØÔºåÂê¶ÂàôË∑≥ËΩ¨Âà∞Âà∑Êñ∞Âæ™ÁéØ if not idle goto loop else goto flush loop //Âà∑Êñ∞Âæ™ÁéØ flush loop : //‰∏çÊñ≠Âà∑Êñ∞ 100%innodb_io_capacity ‰∏™ËÑèÈ°µÔºåÁõ¥Âà∞ËÑèÈ°µÊØî‰æãÊ≤°ÊúâË∂ÖËøáÈòàÂÄº do buffer pool flush 100%innodb_io_capacity dirty page if ( buf_get_modified_ratio_pct Ôºû innodb_max_dirty_pages_pct ) goto flush loop //Ê≤°Êúâ‰ªªÂä°ÔºåË∑≥ËΩ¨Âà∞ÊöÇÂÅúÂæ™ÁéØ goto suspend loop //ÊöÇÂÅúÂæ™ÁéØ suspend loop : //Â∞Ü‰∏ªÁ∫øÁ®ãÊåÇËµ∑ÔºåÁ≠âÂæÖ‰∫ã‰ª∂ÂèëÁîü suspend_thread() waiting event goto loop;&#125; InnoDB 1.2.x ÁâàÊú¨ÁöÑ Master threadInnoDB 1.2.x ÁâàÊú¨‰∏≠ÂÜçÊ¨°ÂØπ Master Thread ËøõË°å‰∫Ü‰ºòÂåñÔºå‰º™‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456if InnoDB is idle//‰πãÂâçÁâàÊú¨‰∏≠ÊØè10ÁßíÁöÑÊìç‰Ωúsrv_master_do_idle_tasks();else//‰πãÂâçÁâàÊú¨‰∏≠ÊØèÁßíÁöÑÊìç‰Ωúsrv_master_do_active_tasks(); ÂØπ‰∫éÂà∑Êñ∞ËÑèÈ°µÁöÑÊìç‰ΩúÔºå‰ªéMaster ThreadÁ∫øÁ®ãÂàÜÁ¶ªÂà∞‰∏Ä‰∏™ÂçïÁã¨ÁöÑPage Cleaner ThreadÔºå‰ªéËÄåÂáèËΩª‰∫ÜMaster ThreadÁöÑÂ∑•‰ΩúÔºåÂêåÊó∂Ëøõ‰∏ÄÊ≠•ÊèêÈ´ò‰∫ÜÁ≥ªÁªüÁöÑÂπ∂ÂèëÊÄß„ÄÇ InnoDB ÂÖ≥ÈîÆÁâπÊÄßÂÖ≥ÈîÆÁâπÊÄßÂåÖÊã¨Ôºö ÊèíÂÖ•ÁºìÂÜ≤ insert buffer ‰∏§Ê¨°ÂÜô double write Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï adaptive hash index ÂºÇÊ≠• io async io Âà∑Êñ∞ÈÇªÊé•È°µ flush neighbor page ÊèíÂÖ•ÁºìÂÜ≤ËÅöÈõÜÁ¥¢ÂºïÔºà‰∏ÄÁ∫ßÁ¥¢ÂºïÔºâË°®Âú®Â≠òÂÇ®ÁöÑÊó∂ÂÄôÊåâÁÖß‰∏ªÈîÆÊéíÂ∫èËøõË°åÂ≠òÂÇ®Ôºå‰∏çÈúÄË¶ÅÁ£ÅÁõòÁöÑÈöèÊú∫ËØªÂèñÔºåÊèíÂÖ•ÊïàÁéáÈ´ò„ÄÇÈùûÂè∂Â≠êËäÇÁÇπÂ≠òÊîæÁöÑÊòØÈîÆÂÄºÔºåÂè∂Â≠êËäÇÁÇπÂ≠òÊîæÁöÑÊòØË°åÊï∞ÊçÆÔºåÁß∞‰πã‰∏∫Êï∞ÊçÆÈ°µ„ÄÇ ËæÖÂä©Á¥¢ÂºïÔºà‰∫åÁ∫ßÁ¥¢ÂºïÔºâÈô§‰∫ÜËÅöÈõÜÁ¥¢Âºï‰πãÂ§ñÁöÑÁ¥¢ÂºïÈÉΩÂèØ‰ª•Áß∞‰πã‰∏∫ËæÖÂä©Á¥¢ÂºïÔºåÂè∂Â≠êËäÇÁÇπ‰∏≠Â≠òÊîæÁöÑÊòØ‰∏ªÈîÆÁöÑÈîÆÂÄº„ÄÇÂè∂Â≠êËäÇÁÇπÁöÑÊèíÂÖ•‰∏çÂÜçÊúâÂ∫èÔºåËøôÊó∂Â∞±ÈúÄË¶ÅÁ¶ªÊï£ËÆøÈóÆÈùûËÅöÈõÜÁ¥¢ÂºïÈ°µÔºåÊèíÂÖ•ÊÄßËÉΩÂèò‰Ωé„ÄÇ‰∏ÄÂº†Ë°®ÂèØ‰ª•Â≠òÂú®Â§ö‰∏™ËæÖÂä©Á¥¢ÂºïÔºå‰ΩÜÊòØÂè™ËÉΩÊúâ‰∏Ä‰∏™ËÅöÈõÜÁ¥¢ÂºïÔºåÈÄöËøáËæÖÂä©Á¥¢ÂºïÊù•Êü•ÊâæÂØπÂ∫îÁöÑËà™ËÆ∞ÂΩïÁöÑËØùÔºåÈúÄË¶ÅËøõË°å‰∏§Ê≠•ÔºåÁ¨¨‰∏ÄÊ≠•ÈÄöËøáËæÖÂä©Á¥¢ÂºïÊù•Á°ÆÂÆöÂØπÂ∫îÁöÑ‰∏ªÈîÆÔºåÁ¨¨‰∫åÊ≠•ÈÄöËøáÁõ∏Â∫îÁöÑ‰∏ªÈîÆÂÄºÂú®ËÅöÈõÜÁ¥¢Âºï‰∏≠Êü•ËØ¢Âà∞ÂØπÂ∫îÁöÑË°åËÆ∞ÂΩïÔºå‰πüÂ∞±ÊòØËøõË°å‰∏§Ê¨°B+Ê†ëÊêúÁ¥¢„ÄÇ Á¥¢ÂºïÊï∞ÊçÆÈ°µÁöÑÊõ¥Êñ∞ÔºàÈíàÂØπ‰∫åÁ∫ßÁ¥¢ÂºïÔºâË°®Êï∞ÊçÆÊõ¥Êñ∞ÁöÑÂêåÊó∂‰πü‰ºöÊõ¥Êñ∞ÂØπÂ∫îÁöÑË°®ÁöÑÁ¥¢ÂºïÊï∞ÊçÆÔºåÊâÄ‰ª•ÔºöÂØπË°®ËøõË°åinsert delete updateÊó∂ÔºåÂæàÂèØËÉΩ‰ºö‰∫ßÁîüÂ§ßÈáèÁöÑÁâ©ÁêÜËØª(Áâ©ÁêÜËØªÁ¥¢ÂºïÊï∞ÊçÆÈ°µ) 1. insert bufferInsert BufferÁöÑ‰ΩøÁî®ÊµÅÁ®ãÔºö ÊèíÂÖ•ÁºìÂÜ≤ÁöÑÂêØÁî®ÈúÄË¶ÅÊª°Ë∂≥‰ª•‰∏ã‰∏§‰∏™Êù°‰ª∂Ôºö1ÔºâÁ¥¢ÂºïÊòØËæÖÂä©Á¥¢ÂºïÔºàsecondary indexÔºâ2ÔºâÁ¥¢Âºï‰∏çÊòØÂîØ‰∏ÄÁöÑÔºöÊï¥‰∏™Á¥¢ÂºïÊï∞ÊçÆË¢´ÂàáÂàÜ‰∏∫2ÈÉ®ÂàÜÔºåÊó†Ê≥ï‰øùËØÅÂîØ‰∏ÄÊÄß„ÄÇ insert bufferÁªìÊûÑinsert bufferÁöÑÊï∞ÊçÆÁªìÊûÑÊòØB+Ê†ëÔºåÂÖ®Â±ÄÂè™Êúâ‰∏ÄÈ¢óB+Ê†ë„ÄÇB+Ê†ëÁöÑÈùûÂè∂Â≠êËäÇÁÇπÊòØSearch keyÔºåÊûÑÈÄ†ÁªìÊûÑ‰∏∫(space,marker,offset)„ÄÇ spaceÔºöÂæÖÊèíÂÖ•ËÆ∞ÂΩïÊâÄÂú®Ë°®ÁöÑË°®Á©∫Èó¥id„ÄÇÊØè‰∏™Ë°®ÈÉΩÊúâÂîØ‰∏ÄÁöÑË°®Á©∫Èó¥idÔºåÈÄöËøáË°®Á©∫Èó¥idÂèØ‰ª•Êü•Âá∫ÊòØÂì™Âº†Ë°®„ÄÇ markerÔºöÂÖºÂÆπ‰πãÂâçÁöÑÁâàÊú¨„ÄÇ offsetÔºöÂú®Ë°®Á©∫Èó¥‰∏≠È°µÁöÑÂÅèÁßªÈáè„ÄÇ ÂΩì‰∏Ä‰∏™ËæÖÂä©Á¥¢ÂºïË¶ÅÊèíÂÖ•Âà∞(space,offset)‰∏≠Êó∂ÔºåÂ¶ÇÊûúËØ•È°µ‰∏çÂú®ÁºìÂÜ≤Ê±†‰∏≠ÔºåÂàôÊåâ‰∏äËø∞ËßÑÂàôÊûÑÈÄ†‰∏Ä‰∏™search keyÔºåÂ∞ÜËØ•ËÆ∞ÂΩïÊèíÂÖ•Âà∞insert buffer‰∏≠„ÄÇ‰ΩÜÊòØÂ¶ÇÊûúËØ•È°µ‰∏ÄÁõ¥Âú®insert buffer‰∏≠Ôºå‰∏çÊñ≠ÊúâËÆ∞ÂΩïÊèíÂÖ•Âà∞Âêå‰∏Ä‰∏™Á¥¢ÂºïÈ°µ‰∏≠ÔºåÈÇ£‰πàËØ•Á¥¢ÂºïÈ°µÁöÑÁ©∫Èó¥Â∞±‰ºöÈÄêÊ∏êÁº©Â∞èÔºåË¶ÅÂá∫Áé∞B+Ê†ëËäÇÁÇπÁöÑÂàÜË£ÇÊÉÖÂÜµÔºåËøôÊó∂Â∞±‰∏çËÉΩËøõË°åinsert buffer‰∫Ü„ÄÇÊâÄ‰ª•ÔºåÊàë‰ª¨ÈúÄË¶Å‰∏Ä‰∏™Êú∫Âà∂Êù•ÁÆ°ÁêÜÊØè‰∏™È°µÈù¢ÁöÑÂâ©‰ΩôÁ©∫Èó≤Á©∫Èó¥ÔºåËøôÂ∞±ÊòØInsert buffer bitmap„ÄÇÊØèÈöîpage_size‰∏™È°µÈù¢ÔºåÂ∞±ÊòØ‰∏Ä‰∏™Insert buffer bitmap page„ÄÇ‰æãÂ¶ÇÔºöËã•page_size = 16384(16k)ÔºåÈÇ£‰πàpage_no‰∏∫0Ôºå16384Ôºå32768Ôºå‚Ä¶ÁöÑpageÔºåÂ∞±ÊòØInsert buffer bitmap pageÔºåBitmap pageÁöÑÂäüËÉΩÔºåÂ∞±ÊòØÁÆ°ÁêÜÂÖ∂ÂêéËøûÁª≠ÁöÑpage_size ‚Äì 1‰∏™pageÁöÑÁ©∫Èó¥‰ΩøÁî®Áéá„ÄÇÊØè‰∏™ËæÖÂä©Á¥¢ÂºïÈ°µÂú®Insert buffer bitmap‰∏≠Âç†Áî®4bit„ÄÇ merge insert buffer ÂèëÁîüÊù°‰ª∂ ËæÖÂä©Á¥¢ÂºïÈ°µË¢´ËØªÂèñÂà∞buffer pool‰∏≠ÔºöÊ≠£Â∏∏ÁöÑselectÊü•ËØ¢Êìç‰ΩúÔºåÁ¥¢ÂºïÈ°µË¢´Ë∞ÉÂÖ•ÂÜÖÂ≠òÔºåËØ•Á¥¢ÂºïÈ°µÂØπÂ∫îÂú®insert buffer‰∏≠ÁöÑÁ¥¢ÂºïÊõ¥ÊîπËÆ∞ÂΩïÂ∞±‰ºöÂèëÁîümergeÊìç‰Ωú„ÄÇ Insert buffer bitmap pageËøΩË∏™Âà∞ËØ•Á¥¢ÂºïÈ°µÊó†ÂèØÁî®Á©∫Èó¥Êó∂„ÄÇ Master Thread„ÄÇ insert buffer Âà∑Êñ∞Âà∞Á£ÅÁõòÊù°‰ª∂ Êúâ‰∏Ä‰∏™ÂêéÂè∞Á∫øÁ®ãÔºå‰ºöËÆ§‰∏∫Êï∞ÊçÆÂ∫ìÁ©∫Èó≤Êó∂Ôºõ Êï∞ÊçÆÂ∫ìÁºìÂÜ≤Ê±†‰∏çÂ§üÁî®Êó∂Ôºõ Êï∞ÊçÆÂ∫ìÊ≠£Â∏∏ÂÖ≥Èó≠Êó∂Ôºõ redo logÂÜôÊª°Êó∂ÔºöÂá†‰πé‰∏ç‰ºöÂá∫Áé∞redo logÂÜôÊª°ÔºåÊ≠§Êó∂Êï¥‰∏™Êï∞ÊçÆÂ∫ìÂ§Ñ‰∫éÊó†Ê≥ïÂÜôÂÖ•ÁöÑ‰∏çÂèØÁî®Áä∂ÊÄÅ ÊèíÂÖ•ÁºìÂÜ≤‰∏ªË¶ÅÂ∏¶Êù•Â¶Ç‰∏ã‰∏§‰∏™ÂùèÂ§Ñ1ÔºâÂèØËÉΩÂØºËá¥Êï∞ÊçÆÂ∫ìÂÆïÊú∫ÂêéÂÆû‰æãÊÅ¢Â§çÊó∂Èó¥ÂèòÈïø„ÄÇÂ¶ÇÊûúÂ∫îÁî®Á®ãÂ∫èÊâßË°åÂ§ßÈáèÁöÑÊèíÂÖ•ÂíåÊõ¥Êñ∞Êìç‰ΩúÔºå‰∏îÊ∂âÂèäÈùûÂîØ‰∏ÄÁöÑËÅöÈõÜÁ¥¢ÂºïÔºå‰∏ÄÊó¶Âá∫Áé∞ÂÆïÊú∫ÔºåËøôÊó∂Â∞±ÊúâÂ§ßÈáèÂÜÖÂ≠ò‰∏≠ÁöÑÊèíÂÖ•ÁºìÂÜ≤Âå∫Êï∞ÊçÆÊ≤°ÊúâÂêàÂπ∂Ëá≥Á¥¢ÂºïÈ°µ‰∏≠ÔºåÂØºËá¥ÂÆû‰æãÊÅ¢Â§çÊó∂Èó¥‰ºöÂæàÈïø„ÄÇ2ÔºâÂú®ÂÜôÂØÜÈõÜÁöÑÊÉÖÂÜµ‰∏ãÔºåÊèíÂÖ•ÁºìÂÜ≤‰ºöÂç†Áî®ËøáÂ§öÁöÑÁºìÂÜ≤Ê±†ÂÜÖÂ≠òÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÊúÄÂ§ßÂèØ‰ª•Âç†Áî®1/2ÔºåËøôÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠‰ºöÂ∏¶Êù•‰∏ÄÂÆöÁöÑÈóÆÈ¢ò„ÄÇ 2. change bufferInnoDB‰ªé1.0.xÁâàÊú¨ÂºÄÂßãÂºïÂÖ•‰∫ÜChange BufferÔºåÂèØ‰ª•Â∞ÜÂÖ∂ËßÜ‰∏∫Insert BufferÁöÑÂçáÁ∫ß„ÄÇ‰ªéËøô‰∏™ÁâàÊú¨ÂºÄÂßãÔºåInnoDBÂèØ‰ª•ÂØπDMLÊìç‰Ωú‚Äî‚ÄîInsert„ÄÅDelete„ÄÅUpdate(delete+insert)ÈÉΩËøõË°åÁºìÂÜ≤ÔºåÂÆÉ‰ª¨ÂàÜÂà´ÊòØÔºöInsert Buffer, Delete Buffer,Purge Buffer„ÄÇÂØπ‰∏Ä‰∏™ËÆ∞ÂΩïËøõË°å update Êìç‰ΩúÊúâ‰∏§‰∏™ËøáÁ®ã Â∞ÜËÆ∞ÂΩïÊ†áËÆ∞‰∏∫Âà†Èô§Ôºödelete buffer Â∞ÜËÆ∞ÂΩïÁúüÊ≠£Âà†Èô§Ôºöpruge buffer ÂèÇÊï∞ InnoDB ÁâàÊú¨ ‰ΩúÁî® innodb_change_buffering 1.0.xÂºÄÂßã Áî®Êù•ÂºÄÂêØÂêÑÁßçBufferÈÄâÈ°πÔºåÈªòËÆ§ÂÄºÊòØall inserts deletes purges changesÔºöÂºÄÂêØ inserts Âíå deletes allÔºöÈÉΩÂºÄÂêØ noneÔºöÈÉΩ‰∏çÂºÄÂêØ innodb_change_buffer_max_size 1.2.xÂºÄÂßã Áî®Êù•ÊéßÂà∂change bufferÊúÄÂ§ß‰ΩøÁî®ÂÜÖÂ≠òÊï∞ÈáèÈªòËÆ§ÂÄº‰∏∫25,Ë°®Á§∫ÊúÄÂ§ö‰ΩøÁî®1/4ÁöÑÁºìÂ≠òÊ±†Á©∫Èó¥ËØ•ÂèÇÊï∞ÊúÄÂ§ßÊúâÊïàÂÄºÊòØ50 ‰∏§Ê¨°ÂÜôÊèêÈ´òinnodbÁöÑÂèØÈù†ÊÄßÔºåÁî®Êù•Ëß£ÂÜ≥ÈÉ®ÂàÜÂÜôÂ§±Ë¥•(partial page writeÈ°µÊñ≠Ë£Ç)„ÄÇ ËÑèÈ°µÂà∑Êñ∞Âà∞Á£ÅÁõòÈ£éÈô©IOÁöÑÊúÄÂ∞èÂçï‰ΩçÔºö Êï∞ÊçÆÂ∫ìIOÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ16KÔºàMySQLÈªòËÆ§ÔºåoracleÊòØ8KÔºâ Êñá‰ª∂Á≥ªÁªüIOÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ4KÔºà‰πüÊúâ1KÁöÑÔºâ Á£ÅÁõòIOÁöÑÊúÄÂ∞èÂçï‰ΩçÊòØ512Â≠óËäÇ Âõ†Ê≠§ÔºåÂ≠òÂú®IOÂÜôÂÖ•ÂØºËá¥pageÊçüÂùèÁöÑÈ£éÈô©Ôºö ÊèêÈ´òinnodbÁöÑÂèØÈù†ÊÄßÔºåÁî®Êù•Ëß£ÂÜ≥ÈÉ®ÂàÜÂÜôÂ§±Ë¥•(partial page writeÈ°µÊñ≠Ë£Ç)„ÄÇ Double writeËß£ÂÜ≥‰∫Ü‰ªÄ‰πàÈóÆÈ¢ò‰∏Ä‰∏™Êï∞ÊçÆÈ°µÁöÑÂ§ßÂ∞èÊòØ16KÔºåÂÅáËÆæÂú®ÊääÂÜÖÂ≠ò‰∏≠ÁöÑËÑèÈ°µÂÜôÂà∞Êï∞ÊçÆÂ∫ìÁöÑÊó∂ÂÄôÔºåÂÜô‰∫Ü8KÁ™ÅÁÑ∂ÂÆïÊú∫‰∫ÜÔºå‰πüÂ∞±ÊòØËØ¥Ââç8KÊï∞ÊçÆÊòØÊñ∞ÁöÑÔºåÂêé8KÊòØÊóßÁöÑÔºåÈÇ£‰πàÁ£ÅÁõòÊï∞ÊçÆÂ∫ìËøô‰∏™Êï∞ÊçÆÈ°µÂ∞±ÊòØ‰∏çÂÆåÊï¥ÁöÑÔºåÊòØ‰∏Ä‰∏™ÂùèÊéâÁöÑÊï∞ÊçÆÈ°µÔºåËøôÁßçÊÉÖÂÜµË¢´Áß∞‰∏∫ÈÉ®ÂàÜÂÜôÂ§±Êïà ÈÇ£‰πàÂèØ‰∏çÂèØ‰ª•ÈÄöËøá redo log Êù•ËøõË°åÊÅ¢Â§çÂë¢ÔºüredoËÆ∞ÂΩïÁöÑÊòØÂØπÈ°µÁöÑ‰øÆÊîπÔºåÂè™ËÉΩÊÅ¢Â§çÊ†°È™åÂÆåÊï¥ÔºàËøòÊ≤°ÂÜôÔºâÁöÑÈ°µÔºå‰∏çËÉΩ‰øÆÂ§çÂùèÊéâÁöÑÊï∞ÊçÆÈ°µÔºåÊâÄ‰ª•Ëøô‰∏™Êï∞ÊçÆÂ∞±‰∏¢Â§±‰∫ÜÔºåÂèØËÉΩ‰ºöÈÄ†ÊàêÊï∞ÊçÆ‰∏ç‰∏ÄËá¥ÔºåÊâÄ‰ª•ÈúÄË¶Ådouble write„ÄÇ ‰∏∫‰ªÄ‰πà redo log ‰∏çÈúÄË¶Å doublewrite ÁöÑÊîØÊåÅÔºüÂõ†‰∏∫ redo log ÂÜôÂÖ•ÁöÑÂçï‰ΩçÂ∞±ÊòØ 512 Â≠óËäÇÔºå‰πüÂ∞±ÊòØÁ£ÅÁõò IO ÁöÑÊúÄÂ∞èÂçï‰ΩçÔºåÊâÄ‰ª•Êó†ÊâÄË∞ìÊï∞ÊçÆÊçüÂùè„ÄÇ ‰∏§Ê¨°ÂÜôÂ∑•‰ΩúÊµÅÁ®ãdoublewriteÁî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºå‰∏ÄÈÉ®ÂàÜ‰∏∫ÂÜÖÂ≠ò‰∏≠ÁöÑdoublewrite bufferÔºåÂÖ∂Â§ßÂ∞è‰∏∫2MBÔºåÂè¶‰∏ÄÈÉ®ÂàÜÊòØÁ£ÅÁõò‰∏äÂÖ±‰∫´Ë°®Á©∫Èó¥(ibdata x)‰∏≠ËøûÁª≠ÁöÑ128‰∏™È°µÔºåÂç≥2‰∏™Âå∫(extent)ÔºåÂ§ßÂ∞è‰πüÊòØ2M„ÄÇ ÂΩì‰∏ÄÁ≥ªÂàóÊú∫Âà∂Ëß¶ÂèëÊï∞ÊçÆÁºìÂÜ≤Ê±†‰∏≠ÁöÑËÑèÈ°µÂà∑Êñ∞Êó∂ÔºåÂπ∂‰∏çÁõ¥Êé•ÂÜôÂÖ•Á£ÅÁõòÊï∞ÊçÆÊñá‰ª∂‰∏≠ÔºåËÄåÊòØÂÖàÊã∑Ë¥ùËá≥ÂÜÖÂ≠ò‰∏≠ÁöÑdoublewrite buffer‰∏≠Ôºõ Êé•ÁùÄ‰ªé‰∏§Ê¨°ÂÜôÁºìÂÜ≤Âå∫ÂàÜ‰∏§Ê¨°ÂÜôÂÖ•Á£ÅÁõòÂÖ±‰∫´Ë°®Á©∫Èó¥‰∏≠(ËøûÁª≠Â≠òÂÇ®ÔºåÈ°∫Â∫èÂÜôÔºåÊÄßËÉΩÂæàÈ´ò)ÔºåÊØèÊ¨°ÂÜô1MBÔºõ ÂæÖÁ¨¨‰∫åÊ≠•ÂÆåÊàêÂêéÔºåÂÜçÂ∞Üdoublewrite buffer‰∏≠ÁöÑËÑèÈ°µÊï∞ÊçÆÂÜôÂÖ•ÂÆûÈôÖÁöÑÂêÑ‰∏™Ë°®Á©∫Èó¥Êñá‰ª∂(Á¶ªÊï£ÂÜô)Ôºõ(ËÑèÈ°µÊï∞ÊçÆÂõ∫ÂåñÂêéÔºåÂç≥ËøõË°åÊ†áËÆ∞ÂØπÂ∫îdoublewriteÊï∞ÊçÆÂèØË¶ÜÁõñ) Áé∞Âú®Êàë‰ª¨Êù•ÂàÜÊûê‰∏Ä‰∏ã‰∏∫‰ªÄ‰πà double write ÂèØ‰ª•ÁîüÊïà„ÄÇÂΩìÂÆïÊú∫ÂèëÁîüÊó∂ÔºåÊúâÈÇ£‰πàÂá†ÁßçÊÉÖÂÜµÔºö Á£ÅÁõòËøòÊú™ÂÜôÔºåÊ≠§Êó∂ÂèØ‰ª•ÈÄöËøá redo log ÊÅ¢Â§çÔºõ Á£ÅÁõòÊ≠£Âú®ËøõË°å‰ªéÂÜÖÂ≠òÂà∞ÂÖ±‰∫´Ë°®Á©∫Èó¥ÁöÑÂÜôÔºåÊ≠§Êó∂Êï∞ÊçÆÊñá‰ª∂‰∏≠ÁöÑÈ°µËøòÊ≤°ÂºÄÂßãË¢´ÂÜôÂÖ•ÔºåÂõ†Ê≠§‰πüÂêåÊ†∑ÂèØ‰ª•ÈÄöËøá redo log ÊÅ¢Â§çÔºõ Á£ÅÁõòÊ≠£Âú®ÂÜôÊï∞ÊçÆÊñá‰ª∂ÔºåÊ≠§Êó∂ÂÖ±‰∫´Ë°®Á©∫Èó¥Â∑≤ÁªèÂÜôÂÆåÔºåÂèØ‰ª•‰ªéÂÖ±‰∫´Ë°®Á©∫Èó¥Êã∑Ë¥ùÈ°µÁöÑÂâØÊú¨Âà∞Êï∞ÊçÆÊñá‰ª∂ÂÆûÁé∞ÊÅ¢Â§ç„ÄÇ Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢ÂºïÂìàÂ∏åÔºö‰∏ÄÊ¨°Â∞±ÂèØ‰ª•ÂÆö‰ΩçÊï∞ÊçÆ B+Ê†ëÔºöÂèñÂÜ≥‰∫éÊ†ëÁöÑÈ´òÂ∫¶ÔºåÁîü‰∫ßÁéØÂ¢É‰∏ÄËà¨ÊòØ 3-4 Â±ÇÔºåÊâÄ‰ª•ÈúÄË¶ÅÊü•ËØ¢ 3-4 Ê¨° Ëá™ÈÄÇÂ∫îÂìàÂ∏åÁ¥¢Âºï AHIÔºàadaptive hash indexÔºâÂª∫Á´ãÊù°‰ª∂ÔºöËßÇÂØüÂà∞‰∏Ä‰∏™ËÆøÈóÆÊ®°ÂºèËÆøÈóÆÈ¢ëÁπÅÔºåÂ∞±‰ºöÂª∫Á´ãÂìàÂ∏åÁ¥¢Âºï ÈÄöËøáËØ•Ê®°ÂºèËÆøÈóÆ‰∫Ü 100 Ê¨°ÔºàÊ®°ÂºèÔºöwhere x = ?Ôºâ È°µÈÄöËøáËØ•Ê®°ÂºèËÆøÈóÆ‰∫Ü N Ê¨°ÔºåÂÖ∂‰∏≠ N = È°µÁöÑËÆ∞ÂΩïÊÄªÊï∞‚ÅÑ16 InnoDB Â≠òÂÇ®ÂºïÊìéÂÆòÊñπÊñáÊ°£ÊòæÁ§∫ÔºåÂêØÁî® AHI Âêé,ËØªÂèñÂíåÂÜôÂÖ•ÈÄüÂ∫¶ÂèØ‰ª•ÊèêÈ´ò 2 ÂÄçÔºåËæÖÂä©Á¥¢ÂºïÁöÑËøûÊé•Êìç‰ΩúÊÄßËÉΩÂèØ‰ª•ÊèêÈ´ò 5 ÂÄç„ÄÇ ÂºÇÊ≠•IO‰∏∫‰∫ÜÊèêÈ´òÁ£ÅÁõòÁöÑÊìç‰ΩúÊÄßËÉΩÔºåÂΩìÂâçÁöÑÊï∞ÊçÆÂ∫ìÁ≥ªÁªüÈÉΩÈááÁî®ÂºÇÊ≠•IOÁöÑÊñπÂºèÂ§ÑÁêÜÁ£ÅÁõòÊìç‰Ωú„ÄÇÁî®Êà∑ÂèØ‰ª•Âú®ÂèëÂá∫‰∏Ä‰∏™IOËØ∑Ê±ÇËÉ°Á´ãÂç≥ÂÜçÂèëÂá∫Âè¶‰∏Ä‰∏™IOËØ∑Ê±ÇÔºåÂΩìÂÖ®ÈÉ®IOËØ∑Ê±ÇÂèëÈÄÅÂÆåÊØïÂêéÔºåÁ≠âÂæÖÊâÄÊúâIOÊìç‰ΩúÂÆåÊàêÔºåËøôÂ∞±ÊòØAIO„ÄÇAIOÁöÑÂè¶‰∏Ä‰∏™‰ºòÂäøÊòØÂèØ‰ª•ËøõË°åIO MergeÊìç‰ΩúÔºå‰πüÂ∞±ÊòØÂ∞ÜÂ§ö‰∏™IOÂêàÂπ∂‰∏∫1‰∏™IO, ËøôÊ†∑ÂèØ‰ª•ÊèêÈ´òIOPS(Input/Output Per Second)ÁöÑÊÄßËÉΩ„ÄÇ ‰æãÂ¶ÇÔºöÁî®Êà∑ËÆøÈóÆÈ°µÁöÑÔºàspace, page_no)‰∏∫(8,6) (8,7) (8,8)ÔºåÊØè‰∏™È°µÁöÑÂ§ßÂ∞è‰∏∫16KBÔºåÂêåÊ≠•IOÈúÄË¶Å3Ê¨°IOÊìç‰Ωú„ÄÇÂèØ‰ª•‰ºòÂåñ‰∏∫‰ªé(8,6)ÂºÄÂßãËØªÂèñ48KB„ÄÇ Âà∑Êñ∞‰∏¥Êé•È°µÂΩìÂà∑Êñ∞‰∏Ä‰∏™ËÑèÈ°µÊó∂ÔºåInnoDB‰ºöÊ£ÄÊü•ËØ•È°µÊâÄÂú®extentÁöÑÊâÄÊúâÈ°µÔºåÂ¶ÇÊûúÊòØËÑèÈ°µÔºå‰∏ÄËµ∑Âà∑Êñ∞„ÄÇ ÂèÇÊï∞ ÁâàÊú¨ ‰ΩúÁî® innodb_flush_neighbors 1.2.xÂºÄÂßã ÊéßÂà∂ÊòØÂê¶ÂêØÁî®ËØ•ÁâπÊÄß ÂèÇËÄÉÔºö http://oohcode.com/2015/10/14/InnoDB-Key-Features/ https://chyroc.cn/posts/innodb-storage-engine-reading-1/ https://www.cnblogs.com/zhoujinyi/archive/2013/04/11/2988923.html http://huzb.me/2019/01/14/%E6%8F%92%E5%85%A5%E7%BC%93%E5%86%B2%E3%80%81%E4%B8%A4%E6%AC%A1%E5%86%99%E5%92%8C%E8%87%AA%E9%80%82%E5%BA%94%E5%93%88%E5%B8%8C%E7%B4%A2%E5%BC%95/ https://blog.csdn.net/tanliqing2010/article/details/81509539 https://www.cnblogs.com/geaozhang/p/7341333.html https://draveness.me/mysql-innodb http://richfisher.me/blog/2017/12/18/innodb-notes/ https://www.docs4dev.com/docs/zh/mysql/5.7/reference/innodb-architecture.html#innodb%E6%9E%B6%E6%9E%84 MySQLÊäÄÊúØÂÜÖÂπïÔºöInnoDBÂ≠òÂÇ®ÂºïÊìé(Á¨¨2Áâà)]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
        <tag>InnoDB</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäMysqlÊäÄÊúØÂÜÖÂπï„ÄãÂ≠¶‰π†Á¨îËÆ∞-MySql‰ΩìÁ≥ªÁªìÊûÑÂíåÂ≠òÂÇ®ÂºïÊìé]]></title>
    <url>%2FMysql%2FMysql01%2F</url>
    <content type="text"><![CDATA[Êï∞ÊçÆÂ∫ì Êï∞ÊçÆÂ∫ìÊòØÊñá‰ª∂ÁöÑÈõÜÂêàÔºåÊòØ‰æùÁÖßÊüêÁßçÊï∞ÊçÆÊ®°ÂûãÁªÑÁªáËµ∑Êù•Âπ∂Â≠òÊîæ‰∫é‰∫åÁ∫ßÂ≠òÂÇ®Âô®‰∏≠ÁöÑÊï∞ÊçÆÈõÜÂêà„ÄÇÂú®MySQLÊï∞ÊçÆÂ∫ì‰∏≠ÔºåÊï∞ÊçÆÂ∫ìÊñá‰ª∂ÂèØ‰ª•ÊòØfrm„ÄÅMYD„ÄÅMYI„ÄÅibdÁªìÂ∞æÁöÑÊñá‰ª∂„ÄÇ Êï∞ÊçÆÂ∫ìÂÆû‰æã Êï∞ÊçÆÂ∫ìÂÆû‰æãÊòØÁ®ãÂ∫èÔºåÊòØ‰Ωç‰∫éÁî®Êà∑‰∏éÊìç‰ΩúÁ≥ªÁªü‰πãÈó¥ÁöÑ‰∏ÄÂ±ÇÊï∞ÊçÆÁÆ°ÁêÜËΩØ‰ª∂ÔºåÁî®Êà∑ÂØπÊï∞ÊçÆÂ∫ìÊï∞ÊçÆÁöÑ‰ªª‰ΩïÊìç‰ΩúÔºåÂåÖÊã¨Êï∞ÊçÆÂ∫ìÂÆö‰πâ„ÄÅÊï∞ÊçÆÊü•ËØ¢„ÄÅÊï∞ÊçÆÁª¥Êä§„ÄÅÊï∞ÊçÆÂ∫ìËøêË°åÊéßÂà∂Á≠âÈÉΩÊòØÂú®Êï∞ÊçÆÂ∫ìÂÆû‰æã‰∏ãËøõË°åÁöÑÔºåÂ∫îÁî®Á®ãÂ∫èÂè™ÊúâÈÄöËøáÊï∞ÊçÆÂ∫ìÂÆû‰æãÊâçËÉΩÂíåÊï∞ÊçÆÂ∫ìÊâì‰∫§ÈÅì„ÄÇ MySql‰ΩìÁ≥ªÁªìÊûÑ ‰ªéÂõæ‰∏≠ÂèØ‰ª•ÂèëÁé∞ÔºåMySQLÁî±ÔºöËøûÊé•Ê±†ÁªÑ‰ª∂„ÄÅÁÆ°ÁêÜÊúçÂä°ÂíåÂ∑•ÂÖ∑ÁªÑ‰ª∂„ÄÅSQLÊé•Âè£ÁªÑ‰ª∂„ÄÅÊü•ËØ¢ÂàÜÊûêÂô®ÁªÑ‰ª∂„ÄÅ‰ºòÂåñÂô®ÁªÑ‰ª∂„ÄÅÁºìÂÜ≤ÔºàCacheÔºâÁªÑ‰ª∂„ÄÅÊèí‰ª∂ÂºèÂ≠òÂÇ®ÂºïÊìéÂíåÁâ©ÁêÜÊñá‰ª∂ÁªÑÊàê„ÄÇMySQLÊï∞ÊçÆÂ∫ìÂå∫Âà´‰∫éÂÖ∂‰ªñÊï∞ÊçÆÂ∫ìÁöÑÊúÄÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÁâπÁÇπÂ∞±ÊòØÂÖ∂Êèí‰ª∂ÂºèÁöÑË°®Â≠òÂÇ®ÂºïÊìé„ÄÇ MySqlÂ≠òÂÇ®ÂºïÊìéMySqlÊï∞ÊçÆÂ∫ìÂ∏∏Áî®Â≠òÂÇ®ÂºïÊìéÔºöInnoDB„ÄÅMyISAM„ÄÅNDB„ÄÅMemory(HEAP)„ÄÅArchive„ÄÅBDB(BerkeleyDB)„ÄÅFederated„ÄÅMariaÁ≠â„ÄÇ ÁâπÊÄß InnoDB MyISAM NDB Memory Archive BDB Â≠òÂÇ®ÈôêÂà∂ 64TB No Yes Yes No No ‰∫ãÂä° Yes Yes ÈîÅÁ≤íÂ∫¶ Row Table Row Table Row Page MVCC Yes Yes Yes BÊ†ëÁ¥¢Âºï Yes Yes Yes Yes Yes ÂìàÂ∏åÁ¥¢Âºï Yes Yes Yes ÂÖ®ÊñáÁ¥¢Âºï 5.6ÊîØÊåÅËã±Êñá Yes ÈõÜÁæ§Á¥¢Âºï Yes Êï∞ÊçÆÁºìÂ≠ò Yes Yes Yes Á¥¢ÂºïÁºìÂ≠ò Yes Yes Yes Yes Êï∞ÊçÆÂéãÁº© Yes Yes Âä†ÂØÜ‰º†Ëæì Yes Yes Yes Yes Yes Yes ÊâπÈáèÊèíÂÖ• Áõ∏ÂØπ‰Ωé È´ò È´ò È´ò ÈùûÂ∏∏È´ò È´ò ÂÜÖÂ≠òÊ∂àËÄó È´ò ‰Ωé È´ò ‰∏≠ ‰Ωé ‰Ωé Â≠òÂÇ®Á©∫Èó¥Ê∂àËÄó È´ò ‰Ωé ‰Ωé N/A ÈùûÂ∏∏‰Ωé ‰Ωé Â§ñÈîÆÊîØÊåÅ Yes Â§çÂà∂ÊîØÊåÅ Yes Yes Yes Yes Yes Yes Êü•ËØ¢ÁºìÂ≠ò Yes Yes Yes Yes Yes Yes Â§á‰ªΩÊÅ¢Â§ç Yes Yes Yes Yes Yes Yes Êï∞ÊçÆÂ≠óÂÖ∏Êõ¥Êñ∞ Yes Yes Yes Yes Yes Yes Â§á‰ªΩ/Êó∂Èó¥ÁÇπÊÅ¢Â§ç Yes Yes Yes Yes Yes Yes ÈõÜÁæ§ÊîØÊåÅ Yes]]></content>
      <categories>
        <category>Mysql</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>MySql</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ê≥∞ÂõΩÊóÖÊ∏∏ÊîªÁï•]]></title>
    <url>%2F%E6%97%85%E6%B8%B8%2FThailand-Raiders%2F</url>
    <content type="text"><![CDATA[ÂáÜÂ§áÂ∑•‰Ωú‰∏Ä„ÄÅÁ≠æËØÅ ÊâÄÈúÄËµÑÊñô Êä§ÁÖßÂéü‰ª∂ÔºàÊó†ÁöÆÊçüÔºå‰∏îÊúâ180Â§©‰ª•‰∏äÁöÑÊúâÊïàÊúüÔºâ ÂæÄËøîÊ≥∞ÂõΩÁöÑÊú∫Á•® Êê∫Â∏¶20,000‰ª•‰∏äÊ≥∞Èì¢ÁöÑÁé∞ÈáëÊàñËÄÖÁ≠âÂÄºË¥ßÂ∏ÅÔºàÁ∫¶3700-4000ÂÖÉ‰∫∫Ê∞ëÂ∏ÅÔºåÊ±áÁéá‰ºöÊúâÊâÄÊ≥¢Âä®ÔºåÂª∫ËÆÆÊê∫Â∏¶Ë∂≥Â§üÁé∞ÈáëÔºâËøáÂÖ≥Êó∂ÊäΩÊü•ÔºåÂ¶ÇÊ≤°ÊúâÊê∫Â∏¶Ë∂≥Â§üÁöÑÁé∞ÈáëÔºåÊúâÂèØËÉΩ‰ºöË¢´ÊãíÁ≠æÊàñÈÅ£Ëøî„ÄÇ 1Âº†2ÂØ∏ÁôΩÂ∫ïÂΩ©Ëâ≤ÁÖßÁâáÔºàÂ¶ÇÊ≤°ÊúâÂ∏¶ÁÖßÁâá„ÄÇÂèØÁé∞Âú∫ÊãçÁÖßÔºåÈ¢ùÂ§ñÊãçÁÖßË¥πÁî®100Ê≥∞Èì¢Ôºâ Ë¥πÁî® 1000Ê≥∞Èì¢ÊâãÁª≠Ë¥πÔºàÁõÆÂâçËêΩÂú∞Á≠æÂÖçË¥πÔºâ Â¶ÇÊ≤°Â∏¶ÁÖßÁâáÔºåÈúÄÁé∞Âú∫ÊãçÁÖßÔºåÂä†Êî∂100Ê≥∞Èì¢ÊãçÁÖßË¥π Âè™Êî∂Ê≥∞Èì¢Áé∞Â§öÔºåÊóÅÊúâÂÖëÊç¢ÁÇπÔºå‰ΩÜÊ±áÁéáÊØîËæÉ‰ΩéÔºåÂª∫ËÆÆÂäûÁêÜËêΩÂú∞Á≠æÔºåÊèêÂâçÂú®ÂõΩÂÜÖÊç¢Â•ΩÊâÄÈúÄÊ≥∞Èì¢Ë¥πÁî®„ÄÇ(‰∏≠ÂõΩÈì∂Ë°åÂèØÈ¢ÑÁ∫¶ÂÖëÊç¢Ê≥∞Èì¢ÔºåÊ±áÁéáÁ∫¶‰∏∫1Ôºö5ÔºåÂÆûÊó∂Ê±áÁéáËØ∑Âí®ËØ¢Èì∂Ë°åÔºâ ËêΩÂú∞Á≠æÂäûÁêÜÊµÅÁ®ã Âú®Êú∫Âú∫ÊåâÁÖßÊåáÁ§∫ÁâåÊâæÂà∞‚ÄúVisa on Arrival‚Äù ÔºàËêΩÂú∞Á≠æÔºâÊüúÂè∞ Â°´ÂÜôËêΩÂú∞Á≠æÁî≥ËØ∑Ë°®ÔºàÊüúÂè∞‰∏äÂ∞±ÂèëÊîæÊúâË°®Ê†ºÔºå‰ª•ÂèäÂ°´ÂÜôÁ§∫‰æãÔºåÊúÄÂ•ΩÊèêÂâçÊâìÂç∞‰∏ãÊù•Â°´Â•ΩÔºâ ÈÄí‰∫§ËµÑÊñôÔºàÂåÖÊã¨Áî≥ËØ∑Ë°®„ÄÅÁÖßÁâá„ÄÅÊä§ÁÖß„ÄÅÂæÄËøîÊú∫Á•®Á≠âÔºâÔºåÂ∑•‰Ωú‰∫∫ÂëòÂÆ°Ê†∏ÂêéÁªôÊéíÈòüÂè∑ Á≠âÂè´Âè∑Ôºå‰∏ä‰∫§ËµÑÊñôÂíåÊâãÁª≠Ë¥πÔºåÂ∑•‰Ωú‰∫∫ÂëòÂú®‰Ω†ÁöÑÊä§ÁÖß‰∏äÁõñ‰∏äËêΩÂú∞Á≠æÁöÑÁ´†ÔºåÁóÖÊèê‰æõÊ≥∞ÊñáÊî∂ÊçÆÁ≠â Ëµ∞Âà∞‚ÄúFor Visa-on-Arrival Only‚ÄùÁöÑÊüúÂè∞ÔºåÂÖ•Â¢ÉÂÆò‰ºöÂÜçÊ£ÄÊü•‰Ω†ÁöÑÊä§ÁÖßÁ≠âËµÑÊñôÔºåÁÑ∂ÂêéÊääÂá∫ÂÖ•Â¢ÉÂç°ÁöÑÂÖ•Â¢ÉÈÉ®ÂàÜÊíïÊéâÔºåÂ∞ÜÂá∫Â¢ÉÂç°ÁõñÁ´†‰πãÂêéËÆ¢Âú®Êä§ÁÖß‰∏äÔºå‰Ω†Â∞±ÂèØ‰ª•Ë∑®ËøáËæπÊ£ÄÊüúÂè∞ÔºåÊ≠£ÂºèËøõÂÖ•Ê≥∞ÂõΩÂ¢ÉÂÜÖ‰∫Ü ËêΩÂú∞Á≠æÁöÑÊúâÊïàÊúüÊòØ15Â§©ÔºåÂç≥‰Ω†ÂèØ‰ª•Âú®Ê≥∞ÂõΩÈÄóÁïô‰∏çË∂ÖËøá15Â§©ÁöÑÊó∂Èó¥ 9.10Âåó‰∫¨Âá∫ÂèëÂåó‰∫¨ÂçóÁ´ô-&gt;Â§©Ê¥•Á´ôÔºö C2077 20Ôºö50-21Ôºö20 ‰∫åÁ≠âÂ∫ß 54.5Ôø• Â§©Ê¥•Â§©Ê¥•Á´ô-&gt;Â§©Ê¥•Êª®Êµ∑ÂõΩÈôÖÊú∫Âú∫T1Ëà™Á´ôÊ•º Âú∞ÈìÅ‰∫åÂè∑Á∫ø 45min Á∫¶3Ôø• Á∫¶10ÁÇπÂà∞ËææÊú∫Âú∫ Â§©Ê¥•Êª®Êµ∑ÂõΩÈôÖÊú∫Âú∫T1Ëà™Á´ôÊ•º -&gt;ÂªäÊõºÂõΩÈôÖÊú∫Âú∫T1Ëà™Á´ôÊ•ºSL963 23:50-03:35 +1 ÁªèÊµéËà± 9.11Ê≥∞ÂõΩÊõºË∞∑ÊõºË∞∑ÈÖíÂ∫ó‰ΩçÁΩÆÔºö455/4 Maha Chai Road, Bangkok, Krung Thep Maha Nakhon 10200, Thailand ÂªäÊõºÂõΩÈôÖÊú∫Âú∫T1Ëà™Á´ôÊ•º -&gt;ÊõºË∞∑ÈÖíÂ∫ó 455/4 Maha Chai RoadÊ∑òÂÆù‰∏ãÂçïÊé•ÈÄÅÊú∫ÔºåÊàñËÄÖÊê∫Á®ã‰∏ãÂçïÔºàÂª∫ËÆÆÊê∫Á®ãÔºåËà™Áè≠Âª∂ËØØÂèØ‰ª•2Â∞èÊó∂ÂÖçË¥πÁ≠âÔºâ„ÄÇÂà∞ÈÖíÂ∫óÁù°ËßâÂï¶Âï¶Âï¶Âï¶ 9.11 10:00ÊµèËßàÊôØÁÇπÂÆâÊéí Â§ßÁöáÂÆ´ 3h 500Ê≥∞Èì¢ 111.5Ôø• ÈïøË¢ñÔºåÈïøË£ô‰∏çËÉΩÈú≤ËÜùÁõñÂçß‰ΩõÂØ∫ 0.5h 200Ê≥∞Èì¢ 44Ôø•ÂùêËàπ 3Ê≥∞Èì¢ÈÉëÁéãÂ∫ô 0.5h 30Ê≥∞Èì¢ 7Ôø•ËÄÉÂ±±Ë∑ØÂ§úÂ∏ÇÂêÉÂêÉÂêÉ 2h 9.12 Ê≥∞ÂõΩÊõºË∞∑ÈÄÄÊàøÔºàÁïôÂ∞èË¥πÔºâ ÈÖíÂ∫ó-&gt;Ê±ΩËΩ¶Á´ôbegin1„ÄÅÊ≠•Ë°åÂà∞ËàπÁ´ô ËàπÁ•®ÂçïÊ¨°50üê∑2„ÄÅÂùêËàπ3„ÄÅ‰∏ãËàπÂêéÊ≠•Ë°åÂà∞BSTËΩ¶Á´ô4„ÄÅÂùê‰∏äBSTÔºåÁ∫¶8Á´ôÂà∞ËææEkkamai Ôºå2Âè∑Âá∫Á´ôÂè£Âá∫Á´ô‰∏ãÊ•ºÊ¢ØÂÜçÂêëÂêéÊñπËµ∞100mÂ∞±Âà∞‰∫Üend Ê±ΩËΩ¶Á´ô‰π∞Á•®ÔºöÁ™óÂè£Ê≠£‰∏äÊñπÂÜôÁùÄPattayaÂ∞±ÂèØ‰ª•‰π∞Á•®‰∫ÜÁ∫¶108üê∑‰∏Ä‰Ωç‰∏ä‰∏ãÊµÆÂä® ÂéïÊâÄ3üê∑‰∏ÄÊ¨°ÊõºË∞∑Âà∞Ëä≠ÊèêÈõÖÂ™í‰Ωì7Ôºö00-20Ôºö00ÔºåÊØèÂçäÂ∞èÊó∂‰∏ÄÁè≠ËΩ¶ ËΩ¶Á®ã2h 9.12 Ëä≠ÊèêÈõÖÈÖíÂ∫ó‰ΩçÁΩÆÔºö88/999,Moo.10 Building B Room No.999, Pattayasaisong Rd, Muang Pattaya, Amphoe Bang Lamung, Chang Wat Chon Buri 20150 ÂèåÊù°ËΩ¶Ë∑ØÁ∫øÂõæ‰∏äËΩ¶‰∏çË¶ÅËØ¥ËØùÔºåËØ¥ËØù‰ºöË¢´ËØØËÆ§‰∏∫ÂåÖËΩ¶Ôºå10üê∑/‰∫∫ Ê∏∏Áé©Ë∑ØÁ∫øËä≠ÊèêÈõÖËΩ¶Á´ôÂú®North Pattaya RoadË∑Ø Bus TerminalË∑ùÈÖíÂ∫ó2.6ÂÖ¨ÈáåÔºåÂèØ‰ª•ËÄÉËôëÊ≠•Ë°å ‰∏úËä≠‰πêÂõ≠ 9Ôºö00-18Ôºö00 800Ê≥∞Èì¢ 178Ôø• ÂèåÊù°ËΩ¶ ÂõõÊñπÊ∞¥‰∏äÂ∏ÇÂú∫ 9Ôºö00-20Ôºö00 ËíÇËä¨Â¶Æ‰∫∫Â¶ñÁßÄ ÊØèÂ§©18Ôºö00„ÄÅ19Ôºö30„ÄÅ21Ôºö00ÂÖ±‰∏âÂú∫ ÊôÆÈÄö800üê∑Ôºåvip1000üê∑„ÄÅÈáëvip1200üê∑ 178Ôø• ÂèåÊù°ËΩ¶ÊØè‰∫∫10üê∑ ÊàñÊ≠•Ë°å Ëä≠ÊèêÈõÖÊµ∑Êª©Ëµ∞‰∏ÄÊ≥¢ ÂêÉÂ∞èÂêÉ 9.13Ëä≠ÊèêÈõÖÊ†ºÂÖ∞Â≤õ‰∏ÄÊó•Ê∏∏ÔºöÁΩë‰∏äË∑üÂõ¢Âç≥ÂèØÊµ∑‰∏äÊªëÁøî„ÄÅÊµ∑Â∫ïÊº´Ê≠•„ÄÅÊë©ÊâòËâá„ÄÅÈ¶ôËïâËàπ„ÄÅÊµÆÊΩú„ÄÇ 9.14Ëä≠ÊèêÈõÖË¥≠Áâ©‰∏≠ÂøÉÈÄõ‰∏ÄÈÄõ Âà∞Bus TerminalÊ±ΩËΩ¶Á´ô‰π∞Á•®ÂõûÊõºË∞∑ÔºöÁ™óÂè£Ê≠£‰∏äÊñπÂÜôÁùÄEkkamaiÔºåÊúÄÊôöÁè≠Ê¨°Êôö‰∏ä11ÁÇπ 9.14ÊõºË∞∑ÊõºË∞∑ÈÖíÂ∫ó‰ΩçÁΩÆÔºöRatchaprarop Road Ratchaprarop Road indraCondo/177/209 soi saengkran/ratchprarop road, Khet Ratchathewi, Krung Thep Maha Nakhon 10400, Thailand, Khet Ratchathewi, Krung Thep Maha Nakhon 10400, Thailand 9.15Â§©Ê¥•È¢ÑÁ∫¶Êé•Êú∫ÔºàÊèêÂâç‰∏§Â§©È¢ÑÂÆöÔºâ Ê≥∞ÂõΩÂøÖ‰π∞BIG-CÈõ∂È£ü711 ÂøÖ‰π∞ËçØÂìÅ ÂøÖ‰π∞ÂåñÂ¶ÜÂìÅÊ¨ßËé±ÈõÖÂîáËÜè„ÄÅÂ∞èÈªëÁì∂ONLY Â∞èÁôΩÁì∂N7ÂÜ∞ÊøÄÂáåÈù¢ËÜú ÂøÖÈÄõÂçéÊ≠åÂ∞îÂÜÖË°£WacoalÔºàÊõºË∞∑Â∞öÊ≥∞ÂïÜÂúàÂíåÊöπÁΩóÊå®ÁùÄcentral world ‰∏â/ÂõõÊ•ºÔºâLeeLeVI‚ÄôSÔºàÊöπÁΩóÂπøÂú∫ÔºåÂõΩÂÜÖ‰∫îÊäòÔºâeveryandboyÊ≥∞ÂõΩÊú¨ÂúüÁæéÂ¶ÜÂ∫óÊó•Êú¨ÊùæÊú¨Ê∏ÖÔºàcentral world ‰∏âÊ•ºÔºâ Ê≥∞ÂõΩÊú∫Âú∫ÈÄÄÁ®éÂèñË¥ß]]></content>
      <categories>
        <category>ÊóÖÊ∏∏</category>
      </categories>
      <tags>
        <tag>ÊóÖÊ∏∏ÊîªÁï•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËÆæÁΩÆgitÂøΩÁï•.ideaÊñá‰ª∂]]></title>
    <url>%2F%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%2FGIt-Ignore%2F</url>
    <content type="text"><![CDATA[1.Â∞Ü.ideaÁõÆÂΩïÂä†ÂÖ•ignoreÔºö 1$ echo '.idea' &gt;&gt; .gitignore 2.‰ªégit‰∏≠Âà†Èô§ideaÔºö 1$ git rm -r --cached .idea 3.Â∞Ü.gitignoreÊñá‰ª∂Âä†ÂÖ•gitÔºö 1$ git add .gitignore 4.Êèê‰∫§.gitignoreÊñá‰ª∂ÔºåÂ∞Ü.idea‰ªé‰ª£Á†Å‰ªìÂ∫ì‰∏≠ÂøΩÁï•Ôºö 1$ git commit -m 'ÂøΩÁï•.ideaÊñá‰ª∂Â§π' 5„ÄÅPushÂà∞GitÊúçÂä°Âô®Ôºö 1$ git push]]></content>
      <categories>
        <category>È°πÁõÆÊê≠Âª∫</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>ÊïôÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C++Âè≥ÂÄºÂºïÁî®]]></title>
    <url>%2FC%2FC%2B%2B-02%2F</url>
    <content type="text"><![CDATA[Â∑¶ÂÄº‰∏éÂè≥ÂÄºÁöÑÂå∫ÂàÜÂú®C++‰∏≠ÔºåÊâÄÊúâÁöÑÂÄºÂùáË¢´ÂàÜ‰∏∫Â∑¶ÂÄº‰∏éÂè≥ÂÄº‰πã‰∏Ä„ÄÇÂ∑¶ÂÄºÊòØÊåáË°®ËææÂºèÁªìÊùüÂêé‰æùÁÑ∂Â≠òÂú®ÁöÑÊåÅ‰πÖÂåñÂØπË±°ÔºåÂè≥ÂÄºÊòØÊåáË°®ËææÂºèÁªìÊùüÊó∂Â∞±‰∏çÂÜçÂ≠òÂú®ÁöÑ‰∏¥Êó∂ÂØπË±°„ÄÇÊâÄÊúâÁöÑÂÖ∑ÂêçÂèòÈáèÊàñËÄÖÂØπË±°ÈÉΩÊòØÂ∑¶ÂÄºÔºåËÄåÂè≥ÂÄº‰∏çÂÖ∑Âêç„ÄÇÊúâ‰∏Ä‰∏™ÂæàÁÆÄÂçïÁöÑÊñπÊ≥ïÂå∫Âà´Â∑¶ÂÄº‰∏éÂè≥ÂÄºÔºåËßÇÂØüÊòØÂê¶ÂèØ‰ª•ÂØπË°®ËææÂºèËøõË°åÂèñÂú∞ÂùÄÔºåÂ¶ÇÊûúËÉΩÔºåÂàô‰∏∫Â∑¶ÂÄºÔºåÂê¶Âàô‰∏∫Âè≥ÂÄº„ÄÇ 12345int func() &#123;return func;&#125;int a = 1 + 2;int b = func();int c = a + b;int d = c; Â¶Ç‰∏äÂõæÊâÄÁ§∫ÔºåÁ¨¨2Ë°åÁöÑ aÊòæÁÑ∂ÊòØÂ∑¶ÂÄºÔºåËÄå(1 + 2)‰∫ßÁîüÁöÑ‰∏¥Êó∂ÂèòÈáèÂÄºÂàô‰∏∫Âè≥ÂÄº„ÄÇÂêåÁêÜÁ¨¨3Ë°åÁöÑb‰∏∫Â∑¶ÂÄºÔºåËÄåfunc()ÁöÑËøîÂõûÂÄºÂêåÊ†∑ÊòØ‰∏Ä‰∏™‰∏¥Êó∂ÂèòÈáèÔºå‰∏∫Âè≥ÂÄº„ÄÇÁ¨¨4Ë°åÁöÑc‰∏∫Â∑¶ÂÄºÔºåËÄå(a+b)‰Ωú‰∏∫‰∏¥Êó∂ÂèòÈáèÂàô‰∏∫Âè≥ÂÄºÔºåËÄåÁ¨¨5Ë°å‰∏≠Ôºåd‰∏écÈÉΩ‰∏∫Â∑¶ÂÄº„ÄÇÂ•óÁî®‰∏äËø∞ÁöÑÂå∫Âà´ÊñπÊ≥ïÔºåa,b,c,dÂèòÈáèÂùáÂèØ‰ª•ËøõË°åÂèñÂú∞ÂùÄÊìç‰ΩúÔºåËÄå(1+2), func()ËøîÂõûÂÄº, (a+b)Êàë‰ª¨ÈÉΩÊó†Ê≥ïÂèñÂÖ∂Âú∞ÂùÄ„ÄÇÂ¶Ç‰π¶‰∏≠ËÆ∞ËΩΩÔºåÂú®C++11‰∏≠ÔºåÂè≥ÂÄºÂàÜ‰∏∫Á∫ØÂè≥ÂÄº‰∏éÂ∞Ü‰∫°ÂÄº„ÄÇÁ∫ØÂè≥ÂÄºÊåáÁöÑÂ∞±ÊòØÊàë‰ª¨‰∏äËø∞ÊâÄÊèèËø∞ÁöÑÂêÑÁ±ª‰∏¥Êó∂ÂèòÈáè„ÄÇËÄåÂ∞Ü‰∫°ÂÄºÂàôÊòØc++11Êñ∞Â¢ûÁöÑÂíåÂè≥ÂÄºÂºïÁî®Áõ∏ÂÖ≥ÁöÑË°®ËææÂºèÔºåËøôÊ†∑ÁöÑË°®ËææÂºèÈÄöÂ∏∏Êó∂Â∞ÜË¶ÅÁßªÂä®ÁöÑÂØπË±°„ÄÅT&amp;&amp;ÂáΩÊï∞ËøîÂõûÂÄº„ÄÅstd::move()ÂáΩÊï∞ÁöÑËøîÂõûÂÄºÁ≠âÔºåÂ∞Ü‰∫°ÂÄº‰∏éÁ∫ØÂè≥ÂÄºÂùá‰∏∫Âè≥ÂÄºÔºå‰ΩøÁî®Ê≤°Êúâ‰ªª‰ΩïÂå∫Âà´„ÄÇ Â∑¶ÂÄºÂºïÁî®‰∏éÂè≥ÂÄºÂºïÁî®Âú®C++11ÂâçÂºïÁî®Â∑≤ÁªèÈùûÂ∏∏Â∏∏ËßÅ‰∫ÜÔºåÂ∞±ÊòØÁªôÂèòÈáèÂèñ‰∫Ü‰∏Ä‰∏™Âà´ÂêçÔºåÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ 123int b = 1;int &amp;a = b;int &amp;c = 2; //ÁºñËØëÈîôËØØ! ÈúÄÊ≥®ÊÑèÔºåÂú®ÂÆö‰πâÂ∑¶ÂÄºÂºïÁî®ÁöÑÂêåÊó∂ÔºåÊàë‰ª¨‰∏çËÉΩÂ∞ÜÂè≥ÂÄºÁªëÂÆöËá≥Â∑¶ÂÄºÂºïÁî®‰∏äÔºåÂ¶Ç‰∏äÈù¢Á¨¨3Ë°å‰ª£Á†ÅÊâÄÁ§∫„ÄÇËÄåC++ÁöÑÂè≥ÂÄºÂºïÁî®ÂêåÂ∑¶ÂÄºÂºïÁî®Áõ∏‰ººÔºåÂàô‰ΩøÁî® &amp;&amp; Êù•Ë°®Á§∫„ÄÇ 12345int func() &#123;return 1;&#125;int &amp;&amp; a = 1;int &amp;&amp; b = (1 + 2) * 3;int &amp;&amp; c = func();int &amp;&amp; d = a; //ÁºñËØëÈîôËØØ! ÂêåÂ∑¶ÂÄºÂºïÁî®Áõ∏ÂêåÔºåÂú®ÂÆö‰πâÂè≥ÂÄºÂºïÁî®ÁöÑÂêåÊó∂ÔºåÊàë‰ª¨‰∏çËÉΩÂ∞ÜÂ∑¶ÂÄºÁªëÂÆöÂú®Âè≥ÂÄºÂºïÁî®‰∏äÔºåÂ¶Ç‰∏äÈù¢Á¨¨5Ë°åÊâÄÁ§∫„ÄÇ‰πüÂ∞±ÊòØËØ¥ÔºåÂè≥ÂÄºÂºïÁî®Âè™ËÉΩÁªëÂÆöÂè≥ÂÄºÔºåÂ∑¶ÂÄºÂºïÁî®Âè™ËÉΩÁªëÂÆöÂ∑¶ÂÄº„ÄÇËã•Â∏åÊúõÂ∞Ü‰∏Ä‰∏™Â∑¶ÂÄºÁªëÂÆöÂà∞Âè≥ÂÄºÂºïÁî®ÔºåÂàôÂèØ‰ª•‰ΩøÁî®ÁßªÂä®ËØ≠‰πâstd::move()Â∞ÜÂ∑¶ÂÄºËΩ¨Êç¢‰∏∫Âè≥ÂÄºÔºå‰æãÂ¶Ç: 12int a = 1;int &amp;&amp;b = std::move(a); //ÁºñËØëÈÄöËøá ‰ΩÜÊòØÊ≥®ÊÑèÔºå‰ΩøÁî®ÁßªÂä®ÁßªÂä®ËØ≠‰πâËΩ¨ÁßªÂØπË±°aÂêéÔºåa‰∏çÂèØÂÜçÊ¨°Ë¢´‰ΩøÁî®!Èô§‰∫ÜÊôÆÈÄöÂºïÁî®ÔºåËøòÊúâ‰∏ÄÁ±ªÊàë‰ª¨ÁªèÂ∏∏‰ΩøÁî®Âà∞ÁöÑÂºïÁî®ÔºåÂ∏∏ÈáèÂ∑¶ÂÄºÂºïÁî®„ÄÇÂ§ßÂÆ∂ÂèØ‰ª•ÊòæËÄåÊòìËßÅÁöÑÂèëÁé∞ÔºåÂ∏∏ÈáèÂ∑¶ÂÄºÂºïÁî®ÊòØ‰∏™‚Äú‰∏áËÉΩ‚ÄùÁöÑÂºïÁî®Á±ªÂûã„ÄÇÂÆÉÂèØ‰ª•Êé•ÂèóÈùûÂ∏∏ÈáèÂ∑¶ÂÄº„ÄÅÂ∏∏ÈáèÂ∑¶ÂÄº„ÄÅÂè≥ÂÄºÂØπÂÖ∂ËøõË°åÂàùÂßãÂåñ„ÄÇ‰ΩÜÊòØÂú®ÂÆÉÁöÑÂ≠òÊ¥ªÊó∂Êúü‰∏≠ÔºåÂÆÉÂè™ËÉΩÊòØÂèØËØªÁöÑ„ÄÇÊàë‰ª¨Â∏∏Âú®ÂáΩÊï∞ÂèÇÊï∞‰∏≠‰ΩøÁî®Âà∞ÂÆÉÔºåÂ¶Ç‰∏ãÊâÄÁ§∫„ÄÇ 123456789101112void func(const string &amp;str) &#123; cout &lt;&lt; str &lt;&lt; endl;&#125;int main(int argc, char *argv[]) &#123; string s1("1234"); const string s2("1234"); func(s1); //ÈùûÂ∏∏ÈáèÂ∑¶ÂÄº func(s2); //Â∏∏ÈáèÂ∑¶ÂÄº func(string("1234")); //Âè≥ÂÄº return 0;&#125; Âú®Â¶Ç‰∏ä‰ªãÁªç‰∏≠ÂæàÂÆπÊòìÂèØ‰ª•ÂæóÂá∫‰∏Ä‰∏ãÁªìËÆ∫(ËΩ¨ËΩΩÂõæÁâá)Ôºö]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[C++Âº∫Âà∂Á±ªÂûãËΩ¨Êç¢]]></title>
    <url>%2FC%2FC%2B%2B-01%2F</url>
    <content type="text"><![CDATA[CËØ≠Ë®ÄÁ±ªÂûãËΩ¨Êç¢cËØ≠Ë®ÄÁ±ªÂûãËΩ¨Êç¢ÊúâÂ¶Ç‰∏ã‰∏§Áßç(ÊóßÂºèËΩ¨Âûã) 12(T)expression //Â∞Ü expression ËΩ¨Âûã‰∏∫TT(expression) //Â∞Ü expression ËΩ¨Âûã‰∏∫T C++Êñ∞ÂºèÁ±ªÂûãËΩ¨Êç¢C++Á±ªÂûãËΩ¨Êç¢ÊúâÂ¶Ç‰∏ãÂõõÁßç 1234const_cast&lt;T&gt;(expression)dynamic_cast&lt;T&gt;(expression)reinterpret_cast&lt;T&gt;(expression)static_cast&lt;T&gt;(expression) const_cast‰∏ÄËà¨Áî®‰∫éÁßªÈô§ÂØπË±°ÁöÑconst‰∏évolatile„ÄÇÂ¶Ç‰∏ãÂõæÊâÄÁ§∫ÔºåbÂèØ‰ª•‰øÆÊîπaÁöÑÂÄº„ÄÇ‰ΩÜÊòØÊ≥®ÊÑèÔºåÁºñËØëÂô®‰ºöËøõË°å‰ºòÂåñÔºåÂ∞ÜÊï∞Â≠óÂ∏∏Èáè1Êõø‰ª£aÂ∏∏Èáè„ÄÇÊâÄ‰ª•cout &lt;&lt; a &lt;&lt; endl;ËæìÂá∫‰∏∫1„ÄÇ 123456789#include &lt;iostream&gt;using namespace std;int main(int argc, char *argv[]) &#123; const int a = 1; int* b = const_cast&lt;int*&gt; (&amp;a); *b = 2; cout &lt;&lt; a &lt;&lt; " " &lt;&lt; *(&amp;a) &lt;&lt; " " &lt;&lt; *b &lt;&lt; endl;&#125;// ËæìÂá∫Ôºö1 2 2 dynamic_castdynamic_cast ‰∏ªË¶Å‰ΩúÁî®ÊòØÂ∞ÜÊåáÂêëÊ¥æÁîüÁ±ªÂØπË±°ÁöÑÂü∫Á±ªÊåáÈíàÊàñÂºïÁî®ÔºåÂÆâÂÖ®ÁöÑËΩ¨Êç¢‰∏∫ÊåáÂêëÊ¥æÁîüÁ±ªÂØπË±°ÁöÑÊ¥æÁîüÁ±ªÊåáÈíàÊàñÂºïÁî®ÔºåÂπ∂‰ΩøÁî®ËΩ¨Êç¢ÂêéÁöÑÊåáÈíàË∞ÉÁî®Ê¥æÁîüÁ±ªÁã¨ÊúâÁöÑÂáΩÊï∞(ÈùûËôöÂáΩÊï∞)„ÄÇÂ¶ÇÊûúËΩ¨Êç¢ÊåáÈíàËΩ¨Êç¢Â§±Ë¥•ÔºåÂàôÂ∞ÜËøîÂõûÁ©∫ÊåáÈíàÔºõÂ¶ÇÊûúËΩ¨Êç¢ÂºïÁî®Â§±Ë¥•ÔºåÂàôÂ∞Ü‰ºöÊäõÂá∫‰∏Ä‰∏™Âêç‰∏∫std::bad_castÁöÑÂºÇÂ∏∏„ÄÇÂú®Â¶Ç‰∏ã3ÁßçÊÉÖÂÜµ‰∏≠ËΩ¨Êç¢ÂèØ‰ª•ÊàêÂäü expressionÁöÑÁ±ªÂûã‰∏éÂæÖËΩ¨Êç¢Á±ªÂûãÁõ∏Âêå„ÄÇÂàôËΩ¨Êç¢ÂøÖÂÆöÊàêÂäü„ÄÇ expressionÁöÑÁ±ªÂûã‰∏∫ÂæÖËΩ¨Êç¢Á±ªÂûãÁöÑÂÖ¨ÊúâÊ¥æÁîüÁ±ª„ÄÇ(ÊåáÈíàÂêë‰∏äËΩ¨Êç¢) expressionÁöÑÁ±ªÂûã‰∏∫ÂæÖËΩ¨Êç¢Á±ªÂûãÁöÑÂÖ¨ÊúâÂü∫Á±ªÊó∂ÔºåÂøÖÈ°ªÊª°Ë∂≥‰ª•‰∏ã‰∏§‰∏™Ë¶ÅÊ±ÇÔºåÊâç‰ºöËΩ¨Êç¢ÊàêÂäüÔºåÂê¶ÂàôËΩ¨Êç¢Â§±Ë¥•„ÄÇ(ÊåáÈíàÂêë‰∏ãËΩ¨Êç¢) ÂΩìexpression‰∏∫ÊåáÂêëÊ¥æÁîüÁ±ªÁöÑÊåáÈíàÊàñÂºïÁî®Ê¥æÁîüÁ±ªÂØπË±°ÁöÑÂü∫Á±ªÂºïÁî®„ÄÇ Âü∫Á±ª‰∏≠ÂøÖÈ°ªÂåÖÂê´ËôöÂáΩÊï∞Ôºå‰πüÂ∞±ÊòØÂøÖÈ°ªÂÖ∑Â§áÂ§öÊÄÅÊÄß„ÄÇ ÂÅáËÆæÊúâÂ¶Ç‰∏ã‰∏§‰∏™Á±ª 123456789101112131415161718192021222324252627#include &lt;string&gt;#include &lt;iostream&gt;using namespace std;class Base &#123;public: Base() &#123;&#125; Base(string s) : str(s) &#123;&#125; virtual void Print() &#123;cout &lt;&lt; str &lt;&lt; endl;&#125;private: string str;&#125;;class Derived : public Base &#123;public: Derived() &#123;&#125; Derived(string s, int i) : Base(s), ival(i) &#123;&#125; void Print() &#123; Base::Print(); cout &lt;&lt; ival &lt;&lt; endl; &#125; void PrintIval() &#123; cout &lt;&lt; ival &lt;&lt; endl; &#125;private: int ival;&#125;; example: 1234567891011int main(int argc, char *argv[])&#123; //Âü∫Á±ªÊåáÈíàÊåáÂêëÊ¥æÁîüÁ±ªÂØπË±°ÔºåÂü∫Á±ª‰∏≠ÂåÖÂê´ËôöÂáΩÊï∞ÔºåÁ¨¶ÂêàÂêë‰∏ãËΩ¨Êç¢ËßÑÂàô„ÄÇ Base* b = new Derived("test", 1); //‰ΩøÁî®Âü∫Á±ªÊåáÈíàÊó†Ê≥ïË∞ÉÁî®Ê¥æÁîüÁ±ªÁã¨ÊúâÁöÑÂáΩÊï∞ÔºåÁºñËØëÊó†Ê≥ïÈÄöËøá b-&gt;PrintIval(); //Á±ªÂûãËΩ¨Êç¢Ëá≥Ê¥æÁîüÁ±ªÊåáÈíàÂ∞±ÂèØ‰ª•Ë∞ÉÁî®Âà∞Ê¥æÁîüÁ±ªÁã¨ÊúâÁöÑÂáΩÊï∞ Derived* d = dynamic_cast&lt;Derived*&gt; (b); d-&gt;PrintIval(); return 0;&#125; reinterpret_castreinterpret_cast ‰∏ªË¶ÅÁöÑ‰ΩúÁî®‰∏∫ÂÖÅËÆ∏‰ªªÊÑèÈïøÂ∫¶Áõ∏ÂêåÁöÑÂØπË±°‰πãÈó¥ËøõË°åËΩ¨Êç¢ÔºåËÄåËΩ¨Êç¢ÁöÑÂÆâÂÖ®ÊÄßÔºåÂàôÂÖ®ÈÉ®Áî±Á®ãÂ∫èÂëòÊâÄ‰øùËØÅÔºåÂÆÉÂè™ÂÖ≥Ê≥®ÂØπË±°‰πãÈó¥ÈïøÂ∫¶ÊòØÂê¶Áõ∏ÂêåÔºåÈïøÂ∫¶‰∏çÁõ∏ÂêåÂàôÊó†Ê≥ïÈÄöËøáÁºñËØë„ÄÇÊ≥®ÊÑèÔºåreinterpret_castÊó†Ê≥ïÂéªÊéâÊ∫êÂØπË±°ÁöÑconst„ÄÅvolatileÂ±ûÊÄß„ÄÇ 1234567891011int main(int argc, char *argv[])&#123; char a = 1; //Â∞ÜaÁöÑÊåáÈíàËΩ¨Âåñ‰∏∫ÈïøÊï¥ÂûãÊï∞ long b = reinterpret_cast&lt;long&gt;(&amp;a); //Â∞ÜÁ©∫ÊåáÈíàËΩ¨Âåñ‰∏∫ÈïøÊï¥ÂûãÊï∞ long d = reinterpret_cast&lt;long&gt;(NULL); //ÁºñËØëÊä•Èîô int 4Â≠óËäÇÔºåËÄåÊåáÈíà8Â≠óËäÇ int e = reinterpret_cast&lt;int&gt;(&amp;a); return 0;&#125; ÈúÄÊ≥®ÊÑèÂú®32‰ΩçÊú∫Âô®‰∏äÔºåÊåáÈíà‰∏∫4Â≠óËäÇÔºåËÄåÂú®64‰ΩçÊú∫Âô®‰∏äÔºåÊåáÈíà‰∏∫8Â≠óËäÇ„ÄÇ static_caststatic_cast Á±ª‰ººCËØ≠Ë®ÄÂº∫Âà∂Á±ªÂûãËΩ¨Êç¢ÔºåÂÆÉÂèØ‰ª•ÂÆåÊàêÂ¶Ç‰∏ã‰∏Ä‰∫õËΩ¨Êç¢ ÁºñËØëÂô®ÈöêÂºèÊâßË°åÁöÑÁ±ªÂûãËΩ¨Êç¢ÔºåÂ¶Çint‰∏éfloat„ÄÅdouble‰∏échar„ÄÅenum‰∏éint‰πãÈó¥ÁöÑËΩ¨Êç¢Á≠â„ÄÇ(Á≤æÂ∫¶Â§ß-&gt;Á≤æÂ∫¶Â∞è‰ΩøÁî®‰ΩçÊà™Êñ≠Â§ÑÁêÜ) Â∞Ü‰ªªÊÑèÁ±ªÂûãË°®ËææÂºèËΩ¨Êç¢‰∏∫voidÁ±ªÂûãÔºåÊàñ‰ªévoid*ÊåáÈíà‰∏≠ÊâæÂõûÂÖ∂‰∏≠ÁöÑÂÄº„ÄÇ Âü∫Á±ª‰∏éÊ¥æÁîüÁ±ªÊåáÈíàÊàñÂºïÁî®Á±ªÂûã‰πãÈó¥ÁöÑËΩ¨Êç¢ÔºåÊ≥®ÊÑèÔºåÁî±Ê¥æÁîüÁ±ªËΩ¨Êç¢Ëá≥Âü∫Á±ªÊó∂(Âêë‰∏äËΩ¨Êç¢)ÊòØÂÆâÂÖ®ÁöÑÔºåÁî±Âü∫Á±ªËá≥Ê¥æÁîüÁ±ªËΩ¨Êç¢Êó∂(Âêë‰∏ãËΩ¨Êç¢)ÊòØÈùûÂÆâÂÖ®ÁöÑ„ÄÇexample(‰ΩøÁî®‰∏äËø∞‰ª£Á†ÅÂÆö‰πâÁöÑÁ±ª):1234567891011121314151617181920int main(int argc, char *argv[])&#123; char a = 'a'; //Â∞Ü char -&gt; int int i = static_cast&lt;int&gt;(a); Base* b = new Base("123"); //Â∞Ü Base ËΩ¨Êç¢‰∏∫ void* void* v = static_cast&lt;void*&gt;(b); //Â∞Ü *void ËΩ¨Êç¢‰∏∫ Base b = static_cast&lt;Base*&gt;(v); Derived* d = new Derived("123", 123); //Âêë‰∏äËΩ¨Êç¢ Â∞ÜDerived* ËΩ¨Êç¢‰∏∫ Base* Base* bb = static_cast&lt;Base*&gt;(d); //Âêë‰∏ãËΩ¨Êç¢ Â∞ÜBase* ËΩ¨Êç¢‰∏∫ Derived* Derived* dd = static_cast&lt;Derived*&gt;(b); //Êú™ÂÆö‰πâÁöÑË°å‰∏∫!ÈùûÂ∏∏Âç±Èô©!Áà∂Á±ªÂØπË±°Âπ∂‰∏çÂåÖÂê´ËØ•ÂáΩÊï∞ÔºåÁºñËØë‰∏ç‰ºöÊä•Èîô! dd-&gt;PrintIval();&#125; ‰∏Ä‰∏ãÂÜÖÂÆπÂèñËá™effective C++ Â¶ÇÊûúÂèØ‰ª•ÔºåÂ∞ΩÈáèÈÅøÂÖçËΩ¨ÂûãÔºåÁâπÂà´ÊòØÂú®Ê≥®ÈáçÊïàÁéáÁöÑ‰ª£Á†Å‰∏≠ÈÅøÂÖç dynamic_cast„ÄÇÂ¶ÇÊûúÊúâ‰∏™ËÆæËÆ°ÈúÄË¶ÅËΩ¨ÂûãÁöÑÂä®‰ΩúÔºåËØïÁùÄÂèëÂ±ïÊó†ÈúÄËΩ¨ÂûãÁöÑÊõø‰ª£ËÆæËÆ°„ÄÇÂ¶ÇÊûúËΩ¨ÂûãÊòØÂøÖË¶ÅÁöÑÔºåËØïÁùÄÂ∞ÜÂÆÉÈöêËóèËá≥Êüê‰∏™ÂáΩÊï∞ËÉåÂêéÔºåÂÆ¢Êà∑ÈöèÂêéÂèØ‰ª•Ë∞ÉÁî®ËØ•ÂáΩÊï∞ÔºåËÄå‰∏çÈúÄÂ∞ÜËΩ¨ÂûãÊîæËøõ‰ªñ‰ª¨ÁöÑ‰ª£Á†ÅÂÜÖ„ÄÇÂÆÅÂèØ‰ΩøÁî®C++-style(Êñ∞ÂºèËΩ¨Âûã)Ôºå‰∏çË¶Å‰ΩøÁî®ÊóßÂºèËΩ¨Âûã„ÄÇÂâçËÄÖÂæàÂÆπÊòìËæ®ËØÜÂá∫Êù•ÔºåËÄå‰∏îÊúâÂÖ∂‰∏çÂêåÁöÑËÅåË¥£„ÄÇ]]></content>
      <categories>
        <category>C++</category>
      </categories>
      <tags>
        <tag>C++</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kafka-Áîü‰∫ßËÄÖ]]></title>
    <url>%2FKafka%2FKafka-Producer%2F</url>
    <content type="text"><![CDATA[KafkaÁîü‰∫ßËÄÖkafkaÊï∞ÊçÆÁîü‰∫ßÊµÅÁ®ãÂ¶ÇÂõæÔºö ÂàõÂª∫‰∏Ä‰∏™ ProducerRecord ÂØπË±°,ÂåÖÊã¨ÁõÆÊ†á‰∏ªÈ¢òÂíåË¶ÅÂèëÈÄÅÁöÑÂÜÖÂÆπ Â∞ÜÂØπË±°Â∫èÂàóÂåñÊàêÂ≠óËäÇÊï∞ÁªÑ Êï∞ÊçÆË¢´‰º†ÁªôÂàÜÂå∫Ôºö ÊòØÂê¶ÊåáÂÆö‰∫Üpartition -&gt; Áõ¥Êé•Âà∞ÊåáÂÆöÂàÜÂå∫ ÊòØÂê¶ÊåáÂÆö‰∫Ükey -&gt; ÂàÜÂå∫Âô®‰ΩøÁî®ËØ• key ËøõË°å hash Êìç‰ΩúÔºåÁÑ∂ÂêéÂØπ topic ÂØπÂ∫îÁöÑÂàÜÂå∫Êï∞ÈáèËøõË°åÂèñÊ®°Êìç‰ΩúÂπ∂ËøîÂõû‰∏Ä‰∏™ÂàÜÂå∫„ÄÇ Ê≤°ÊúâÊåáÂÆökey -&gt; ÂàôÈÄöËøáÂÖà‰∫ßÁîüÈöèÊú∫Êï∞Ôºå‰πãÂêéÂú®ËØ•Êï∞‰∏äËá™Â¢ûÁöÑÊñπÂºè‰∫ßÁîü‰∏Ä‰∏™Êï∞ÔºåÂπ∂ËΩ¨‰∏∫Ê≠£Êï∞‰πãÂêéËøõË°åÂèñ‰ΩôÊìç‰Ωú„ÄÇ Ê∑ªÂä†Âà∞ÊâπÊ¨°ÔºåÂπ∂ÂèëÈÄÅ ÊúçÂä°Âô®Êî∂Âà∞Ê∂àÊÅØÂêéËøîÂõûÂìçÂ∫î ÊàêÂäü -&gt; ËøîÂõû RecordMetaDataÂØπË±° Â§±Ë¥• -&gt; ËøîÂõûÈîôËØØ‰ø°ÊÅØ]]></content>
      <categories>
        <category>Kafka</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kafka-MacOsÂÆâË£Ö]]></title>
    <url>%2FKafka%2FKafka-Install%2F</url>
    <content type="text"><![CDATA[MacOS Docker ÂÆâË£ÖÂÆâË£ÖÂíåÈïúÂÉèÂä†ÈÄüÂèÇËÄÉdockerÂÆâË£ÖÊïôÁ®ã Docker ‰∏ãËΩΩZookeeper Âíå kafka ÈïúÂÉè123~ ¬ª docker pull zookeeper:latest~ ¬ª docker pull wurstmeister/kafka:latest~ ¬ª docker pull sheepkiller/kafka-manager ÂêØÂä®ÂÆπÂô®1„ÄÅÂàõÂª∫ÁΩëÁªúÔºöÁî±‰∫éË¶ÅÊ∂âÂèäÂà∞zookeeperÂíåkafka‰πãÈó¥ÁöÑÈÄö‰ø°ÔºåÊâÄ‰ª•Êàë‰ª¨ËøêÁî®dockerÂÜÖÈÉ®ÂÆπÂô®ÈÄö‰ø°Êú∫Âà∂ÂÖàÊñ∞Âª∫‰∏Ä‰∏™ÁΩëÁªú„ÄÇ 123~ ¬ª docker network create appd481270a05236007178e6ed0ce4b775c9d2aebb6c13bc050bb852bc46ca0b874 ËøêË°å docker network lsÊü•ÁúãÊñ∞Âª∫ÁöÑÁΩëÁªú 1234567~ ¬ª docker network ls NETWORK ID NAME DRIVER SCOPEd481270a0523 app bridge local0ab6b1467267 bridge bridge localcd08298f526b host host local86a734066770 none null local ËøêË°ådocker network inspect appÊü•ÁúãÁΩëÁªúËØ¶ÁªÜ‰ø°ÊÅØ 12345678910111213141516171819202122232425262728293031~ ¬ª docker network inspect app [ &#123; "Name": "app", "Id": "d481270a05236007178e6ed0ce4b775c9d2aebb6c13bc050bb852bc46ca0b874", "Created": "2019-07-19T06:57:10.768655482Z", "Scope": "local", "Driver": "bridge", "EnableIPv6": false, "IPAM": &#123; "Driver": "default", "Options": &#123;&#125;, "Config": [ &#123; "Subnet": "172.18.0.0/16", "Gateway": "172.18.0.1" &#125; ] &#125;, "Internal": false, "Attachable": false, "Ingress": false, "ConfigFrom": &#123; "Network": "" &#125;, "ConfigOnly": false, "Containers": &#123;&#125;, "Options": &#123;&#125;, "Labels": &#123;&#125; &#125;] ÂèØ‰ª•ÁúãÂà∞ÂÖ∂ËøûÊé•ÁöÑcontainers‰∏∫Á©∫ÔºåËØ¥ÊòéËøòÊ≤°ÊúâÂÆπÂô®ËøûÊé•ËøõÊù•2„ÄÅÂàõÂª∫ZookeeperÂÆπÂô® 1~ ¬ª docker run --net=app --name zookeeper -p 2181 -t zookeeper ÈÅáÂà∞‰∫ÜÂ¶Ç‰∏ãÈóÆÈ¢ò 12docker: Error response from daemon: Conflict. The container name "/zookeeper" is already in use by container "26ffbd391e8c6e5e90b8f593e354f80768f179741e1de35640efacc6303fdad0". You have to remove (or rename) that container to be able to reuse that name.See 'docker run --help'. docker ps -l Êü•ÁúãÂèëÁé∞Â∑≤ÁªèÂàõÂª∫ÁöÑzookeeper ÂèØ‰ª•‰ΩøÁî®docker rm Âà†Èô§ 12345~ ¬ª docker ps -l CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES26ffbd391e8c zookeeper "/docker-entrypoint.‚Ä¶" 8 minutes ago Created zookeeper~ ¬ª docker rm 26ffbd391e8c ÈáçÊñ∞ÊâßË°åÂàõÂª∫ÂëΩ‰ª§ runÔºåÂàõÂª∫Êñ∞ÂÆπÂô®ÔºåÂπ∂‰∏∫ÂÆπÂô®ÈÖçÁΩÆ‰∏Ä‰∫õÂèÇÊï∞„ÄÇ -tÔºåÂú®ÂÆπÂô®ÂÜÖÈÉ®ÂàõÂª∫‰∏Ä‰∏™ttyÊàñËÄÖ‰º™ÁªàÁ´Ø„ÄÇ -iÔºåÂÖÅËÆ∏‰∏ªÊú∫ÁªàÁ´ØÊåâÁÖßÂÆπÂô®ÂÜÖÈÉ®ÁöÑÊ†áÂáÜ‰∏éÂÖ∂‰∫§‰∫í„ÄÇ -dÔºåÂêéÂè∞ËøêË°åÂÆπÂô®Âπ∂ÊâìÂç∞ÂÆπÂô®ÂêçÁß∞„ÄÇ ‚ÄìnameÔºåÂÆπÂô®ÂêçÁß∞„ÄÇ -pÔºåÁ´ØÂè£Êò†Â∞ÑÔºåÂèÇÊï∞Ê†ºÂºè‰∏∫Ôºö‰∏ªÊú∫Áâ©ÁêÜÁ´ØÂè£:ÂÆπÂô®ÂÜÖÈÉ®Á´ØÂè£„ÄÇ ÊúÄÂêéË∑ü‰∏äÁöÑÂ∞±ÊòØÊàë‰ª¨Â∑≤Áªè‰∏ãËΩΩÁöÑÈïúÂÉè 3„ÄÅÂàõÂª∫KafkaÂÆπÂô® 1234567~ ¬ª docker run --net=app --name kafka -p 9092 \--env HOST_IP=127.0.0.1 \--env KAFKA_ADVERTISED_HOST_NAME=localhost \--env KAFKA_ADVERTISED_PORT=9092 \--env KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181 \--link zookeeper \wurstmeister/kafka:latest -eÔºåÈÖçÁΩÆÂÆπÂô®ÁéØÂ¢ÉÂèòÈáè„ÄÇ ‚ÄìlinkÔºåÈìæÊé•Âà∞Âè¶‰∏Ä‰∏™ÂÆπÂô®ÔºåÂèÇÊï∞Ê†ºÂºè‰∏∫ÔºöÁõÆÊ†áÂÆπÂô®ÂêçÁß∞:Âú®Êú¨ÂÆπÂô®ÂÜÖÁöÑÂà´Âêç„ÄÇ ËøôÈáåÁöÑÁéØÂ¢ÉÂèòÈáèËÆæÁΩÆÔºåÂÖ∂ÂÆûÊòØÂ∞±ÊòØÂØπÂç≥Â∞ÜÂàõÂª∫ÁöÑKafkaÈÖçÁΩÆÊñá‰ª∂server.propertiesËøõË°åÂàùÂßãÂåñ„ÄÇ 4„ÄÅÂàõÂª∫kafka-manager 12345~ ¬ª docker run --net=app \--name kafka-manager \-p 9000:9000 \-e ZK_HOSTS=zookeeper:2181 \sheepkiller/kafka-manager ËÆøÈóÆip:9000Âç≥ÂèØ 5„ÄÅÊµãËØïKafkaËøõÂÖ•kafkaÂÆπÂô® 1~ ¬ª docker exec -it kafka /bin/bash ÂèëÈÄÅÊ∂àÊÅØ 12345bash-4.4# kafka-console-producer.sh --broker-list localhost:9092 --topic test&gt;hello&gt;AAAA&gt;BBBB&gt;hey ËØªÂèñÊ∂àÊÅØ(ÈúÄË¶ÅÊâìÂºÄÂè¶‰∏Ä‰∏™ÁªàÁ´Ø) 1234567bash-4.4# kafka-console-consumer.sh \&gt; --bootstrap-server localhost:9092 \&gt; --topic test --from-beginninghelloAAAABBBBhey ÊµãËØïÊàêÂäüÔºÅ(ÔºæÔºçÔºæ)V ÂèÇËÄÉhttps://cloud.tencent.com/developer/news/371290]]></content>
      <categories>
        <category>Kafka</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Spring Boot + MyBatis Â§öÊ®°ÂùóÈ°πÁõÆÊê≠Âª∫]]></title>
    <url>%2F%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA%2FProject-Module%2F</url>
    <content type="text"><![CDATA[ÂáÜÂ§áÂºÄÂèëÂ∑•ÂÖ∑ÂèäÁ≥ªÁªüÁéØÂ¢É IDEÔºöIntelliJ IDEA 2019.1 Á≥ªÁªüÁéØÂ¢ÉÔºömac OSX È°πÁõÆÁõÆÂΩïÁªìÊûÑ bizÂ±ÇÔºö‰∏öÂä°ÈÄªËæëÂ±Ç daoÂ±ÇÔºöÊï∞ÊçÆÊåÅ‰πÖÂ±ÇÔºå‰ΩøÁî®MBÊèí‰ª∂ÁîüÊàêÁõ∏ÂÖ≥‰ª£Á†ÅÂèäxml commonÂ±ÇÔºöÊèê‰æõÂ∑•Á®ãÂ±ÇÈù¢ÁöÑÂü∫Á°ÄÂ∑•ÂÖ∑Á±ª„ÄÇ webÂ±ÇÔºöËØ∑Ê±ÇÂ§ÑÁêÜÂ±Ç Êê≠Âª∫Ê≠•È™§ Êê≠Âª∫Áà∂Â∑•Á®ã1„ÄÅ IDEA Â∑•ÂÖ∑Ê†èÈÄâÊã©ËèúÂçï File -&gt; New -&gt; Project‚Ä¶2„ÄÅÈÄâÊã©Spring InitializrÔºåInitializrÈªòËÆ§ÈÄâÊã©DefaultÔºåÁÇπÂáªNext3„ÄÅÂ°´ÂÜôÈ°πÁõÆËµÑÊñô,ÁÇπÂáªNext4„ÄÅÁõ¥Êé•ÁÇπÂáªNext5„ÄÅÂ°´ÂÜônameÔºåÁÇπÂáªFinish6„ÄÅÈ°πÁõÆÁªìÊûÑÂ¶Ç‰∏ã7„ÄÅÂà†Èô§Â§ö‰ΩôÁõÆÂΩïÔºåÂè™ÁïôÂ¶Ç‰∏ãÁªìÊûÑ ÂàõÂª∫Â≠êÊ®°Âùó8„ÄÅÈÄâÊã©È°πÁõÆÊ†πÁõÆÂΩï,Âè≥ÈîÆ-&gt;New -&gt; Module9„ÄÅÈÄâÊã©MavenÔºåÁÇπÂáªNext10„ÄÅÂ°´ÂÜôArifactIdÔºåÁÇπÂáªNext11„ÄÅÁÇπÂáªFinish12„ÄÅÂêåÁêÜÊ∑ªÂä†ÂÖ∂‰ªñÂ≠êÊ®°ÂùóÔºåÊúÄÁªàÈ°πÁõÆÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÂõæ Ê®°ÂùóÈó¥‰æùËµñÂÖ≥Á≥ªÂêÑ‰∏™Â≠êÊ®°ÂùóÁöÑ‰æùËµñÂÖ≥Á≥ªÔºö bizÂ±ÇÔºö‰æùËµñdaoÂ±ÇÔºåcommonÂ±Ç daoÂ±ÇÔºö‰∏ç‰æùËµñ commonÂ±ÇÔºö‰∏ç‰æùËµñ webÂ±ÇÔºö‰æùËµñbizÂ±ÇÔºåcommonÂ±Ç„ÄÇ 13„ÄÅÁà∂pomÊñá‰ª∂‰∏≠Â£∞ÊòéÊâÄÊúâÂ≠êÊ®°Âùó‰æùËµñ 123456789101112131415161718192021222324&lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;biz&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;common&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;dao&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;web&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/dependencyManagement&gt; 14„ÄÅbizÂ±ÇpomÊñá‰ª∂‰∏≠Ê∑ªÂä†daoÂ±ÇÔºåcommonÂ±Ç‰æùËµñ 12345678910&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;dao&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;common&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; 15„ÄÅwebÂ±ÇpomÊñá‰ª∂‰∏≠Ê∑ªÂä†bizÂ±ÇÔºåcommonÂ±Ç‰æùËµñ 12345678910&lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;biz&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;common&lt;/artifactId&gt; &lt;/dependency&gt;&lt;/dependencies&gt; ËøêË°åÈ°πÁõÆ16„ÄÅÂú®webÂ±ÇpomÊñá‰ª∂‰∏≠Ê∑ªÂä†spring-boot-starter-web 12345&lt;!-- spring-boot --&gt;&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;&lt;/dependency&gt; 17„ÄÅÂú®webÂ±ÇÂàõÂª∫com.example.test.demo.webÂåÖÂπ∂Ê∑ªÂä†ÂÖ•Âè£Á±ªAppServiceApplication.javaÔºåÁõÆÂΩïÁªìÊûÑÂ¶Ç‰∏ãÂÖ•Âè£Á±ª‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112package com.example.test.demo.web;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;@SpringBootApplicationpublic class AppServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(AppServiceApplication.class, args); &#125;&#125; 18„ÄÅÂú®com.example.test.demo.webÂåÖ‰∏ãÂàõÂª∫controllerÁõÆÂΩïÊ∑ªÂä†testÊñπÊ≥ïÊµãËØïÊé•Âè£ÊòØÂê¶ÂèØ‰ª•Ê≠£Â∏∏ËÆøÈóÆ 123456789101112131415package com.example.test.demo.web.controller;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController@RequestMapping("demo")public class DemoController &#123; @RequestMapping("test") public String test() &#123; return "Hello World!"; &#125;&#125; 19„ÄÅËøêË°åAppServiceApplication‰∏≠ÁöÑmainÊñπÊ≥ïÂêØÂä®È°πÁõÆÔºåÈªòËÆ§Á´ØÂè£‰∏∫8080ÔºåËÆøÈóÆhttp://localhost:8080/demo/testÂæóÂà∞Â¶Ç‰∏ãÊïàÊûú 20„ÄÅÂú®bizÂ±ÇÂàõÂª∫com.example.test.demo.bizÂåÖÂπ∂ÂàõÂª∫DemoServiceÊé•Âè£Á±ª‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345package com.example.test.demo.biz;public interface DemoService &#123; String test();&#125; 21„ÄÅÂú®com.example.test.demo.bizÂåÖ‰∏ãÂàõÂª∫implÁõÆÂΩïÂπ∂Ê∑ªÂä†DemoServiceImplÁ±ªÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 123456789101112131415package com.example.test.demo.biz.impl;import com.example.test.demo.biz.DemoService;import org.springframework.stereotype.Service;@Servicepublic class DemoServiceImpl implements DemoService &#123; @Override public String test() &#123; return "biz test"; &#125;&#125; 22„ÄÅDemoControllerÁ±ªÈÄöËøá@AutowiredÊ≥®Ëß£Ê≥®ÂÖ•DemoServiceÔºå‰øÆÊîπDemoControllerÁöÑtestÊñπÊ≥ïÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920package com.example.test.demo.web.controller;import com.example.test.demo.biz.DemoService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;@RestController@RequestMapping("demo")public class DemoController &#123; @Autowired private DemoService demoService; @RequestMapping("test") public String test() &#123; return demoService.test(); &#125;&#125; 23„ÄÅÂú®ÂÖ•Âè£Á±ªAppServiceApplication‰∏äÊ∑ªÂä†@ComponentScanÊ≥®Ëß£ 123456789101112131415package com.example.test.demo.web;import org.springframework.boot.SpringApplication;import org.springframework.boot.autoconfigure.SpringBootApplication;import org.springframework.context.annotation.ComponentScan;@SpringBootApplication@ComponentScan(basePackages = &#123; "com.example.test.demo.*"&#125;)public class AppServiceApplication &#123; public static void main(String[] args) &#123; SpringApplication.run(AppServiceApplication.class, args); &#125;&#125; 24„ÄÅÊõ¥ÊîπÂÆå‰πãÂêéËøêË°åmainÊñπÊ≥ïÔºåËÆøÈóÆhttp://localhost:8080/demo/testÂæóÂà∞Â¶Ç‰∏ãÊïàÊûú 25„ÄÅÂÖ∂‰ªñÂ±ÇÂêåÁêÜÈ™åËØÅ„ÄÇ ÈõÜÊàêMybatis26„ÄÅÁà∂pomÊñá‰ª∂‰∏≠Â£∞Êòémybatis-spring-boot-starter„ÄÅmysql-connector-javaÁ≠â‰æùËµñ„ÄÇ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;packaging&gt;pom&lt;/packaging&gt; &lt;modules&gt; &lt;module&gt;biz&lt;/module&gt; &lt;module&gt;dao&lt;/module&gt; &lt;module&gt;common&lt;/module&gt; &lt;module&gt;web&lt;/module&gt; &lt;/modules&gt; &lt;parent&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; &lt;version&gt;2.1.2.RELEASE&lt;/version&gt; &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt; &lt;/parent&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;demo&lt;/artifactId&gt; &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; &lt;name&gt;demo&lt;/name&gt; &lt;description&gt;Demo project for Spring Boot&lt;/description&gt; &lt;properties&gt; &lt;java.version&gt;1.8&lt;/java.version&gt; &lt;mysql-connector.version&gt;8.0.11&lt;/mysql-connector.version&gt; &lt;mybatis.version&gt;1.3.2&lt;/mybatis.version&gt; &lt;mybatis.generator.version&gt;1.3.2&lt;/mybatis.generator.version&gt; &lt;/properties&gt; &lt;build&gt; &lt;pluginManagement&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;!--mybatis--&gt; &lt;plugin&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt; &lt;version&gt;$&#123;mybatis.generator.version&#125;&lt;/version&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;$&#123;mysql-connector.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt; &lt;version&gt;$&#123;mybatis.generator.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/plugin&gt; &lt;/plugins&gt; &lt;/pluginManagement&gt; &lt;resources&gt; &lt;resource&gt; &lt;directory&gt;src/main/resources&lt;/directory&gt; &lt;filtering&gt;true&lt;/filtering&gt; &lt;/resource&gt; &lt;/resources&gt; &lt;/build&gt; &lt;dependencyManagement&gt; &lt;dependencies&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;biz&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;common&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;dao&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;com.example.test&lt;/groupId&gt; &lt;artifactId&gt;web&lt;/artifactId&gt; &lt;version&gt;$&#123;project.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt; &lt;scope&gt;test&lt;/scope&gt; &lt;/dependency&gt; &lt;!--mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt; &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt; &lt;version&gt;$&#123;mybatis.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;!-- mysql --&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;$&#123;mysql-connector.version&#125;&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; &lt;/dependencyManagement&gt;&lt;/project&gt; 27„ÄÅÂú®daoÂ±Ç‰∏≠ÁöÑpomÊñá‰ª∂‰∏≠Ê∑ªÂä†‰ª•‰∏ã‰æùËµñ 1234567891011121314151617&lt;build&gt; &lt;plugins&gt; &lt;plugin&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt; &lt;/plugin&gt; &lt;plugin&gt; &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt; &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt; &lt;configuration&gt; &lt;configurationFile&gt;$&#123;basedir&#125;/src/main/resources/mybatis-generator.xml&lt;/configurationFile&gt; &lt;overwrite&gt;true&lt;/overwrite&gt; &lt;verbose&gt;true&lt;/verbose&gt; &lt;/configuration&gt; &lt;/plugin&gt; &lt;/plugins&gt;&lt;/build&gt; 28„ÄÅÂú®web/src/main/resources‰∏ãÊ∑ªÂä†application.properties com.mysql.jdbc.Driver ÊòØ mysql-connector-java 5‰∏≠ÁöÑ com.mysql.cj.jdbc.Driver ÊòØ mysql-connector-java 6‰∏≠ÁöÑ 1234567spring.datasource.driverClassName = com.mysql.cj.jdbc.Driverspring.datasource.url = jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=UTF8&amp;connectTimeout=1000&amp;socketTimeout=3000spring.datasource.username = rootspring.datasource.password = qwertyuimybatis.type-aliases-package = com.example.test.demo.dao.pomybatis.mapper-locations = classpath:mapper/*.xml 29„ÄÅÂú®web/src/main/resources‰∏ãÊ∑ªÂä†mybatis-generator.xmlÈÖçÁΩÆÂÜÖÂÆπÂ¶Ç‰∏ã 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE generatorConfiguration PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN" "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;&lt;generatorConfiguration&gt; &lt;!-- ÂºïÂÖ•SpringBootÈÖçÁΩÆÊñá‰ª∂ --&gt; &lt;properties resource="application.properties"/&gt; &lt;context id="Mysql" targetRuntime="MyBatis3" defaultModelType="flat"&gt; &lt;!-- ÁîüÊàêÁöÑpojoÔºåÂ∞Üimplements Serializable--&gt; &lt;plugin type="org.mybatis.generator.plugins.SerializablePlugin"/&gt; &lt;commentGenerator&gt; &lt;!--*ÊòØÂê¶ÂéªÈô§Ëá™Âä®ÁîüÊàêÁöÑÊ≥®ÈáäÂåÖÂê´Êó∂Èó¥Êà≥ trueÔºöÊòØ Ôºö false:Âê¶--&gt; &lt;property name="suppressDate" value="true" /&gt; &lt;!-- ÊòØÂê¶ÂéªÈô§Ëá™Âä®ÁîüÊàêÁöÑÊ≥®Èáä trueÔºöÊòØ Ôºö false:Âê¶ --&gt; &lt;property name="suppressAllComments" value="true" /&gt; &lt;/commentGenerator&gt; &lt;jdbcConnection driverClass="$&#123;spring.datasource.driverClassName&#125;" connectionURL="$&#123;spring.datasource.url&#125;" userId="$&#123;spring.datasource.username&#125;" password="$&#123;spring.datasource.password&#125;"&gt; &lt;/jdbcConnection&gt; &lt;!-- ÁîüÊàêmodelÊ®°ÂûãÔºåÂØπÂ∫îÁöÑÂåÖË∑ØÂæÑÔºå‰ª•ÂèäÊñá‰ª∂Â≠òÊîæË∑ØÂæÑ(targetProject)ÔºåtargetProjectÂèØ‰ª•ÊåáÂÆöÂÖ∑‰ΩìÁöÑË∑ØÂæÑ,Â¶Ç./src/main/javaÔºå ‰πüÂèØ‰ª•‰ΩøÁî®‚ÄúMAVEN‚ÄùÊù•Ëá™Âä®ÁîüÊàêÔºåËøôÊ†∑ÁîüÊàêÁöÑ‰ª£Á†Å‰ºöÂú®target/generatord-sourceÁõÆÂΩï‰∏ã --&gt; &lt;javaModelGenerator targetPackage="com.example.test.demo.dao.po" targetProject="../dao/src/main/java" &gt; &lt;!-- Âú®targetPackageÁöÑÂü∫Á°Ä‰∏äÔºåÊ†πÊçÆÊï∞ÊçÆÂ∫ìÁöÑschemaÂÜçÁîüÊàê‰∏ÄÂ±ÇpackageÔºåÊúÄÁªàÁîüÊàêÁöÑÁ±ªÊîæÂú®Ëøô‰∏™package‰∏ãÔºåÈªòËÆ§‰∏∫false --&gt; &lt;property name="enableSubPackages" value="true"/&gt; &lt;!-- ‰ªéÊï∞ÊçÆÂ∫ìËøîÂõûÁöÑÂÄºË¢´Ê∏ÖÁêÜÂâçÂêéÁöÑÁ©∫Ê†º --&gt; &lt;property name="trimStrings" value="true"/&gt; &lt;/javaModelGenerator&gt; &lt;!--ÂØπÂ∫îÁöÑmapper.xmlÊñá‰ª∂ --&gt; &lt;sqlMapGenerator targetPackage="mapper" targetProject="../dao/src/main/resources"&gt; &lt;property name="enableSubPackages" value="true"/&gt; &lt;/sqlMapGenerator&gt; &lt;!-- ÂØπÂ∫îÁöÑMapperÊé•Âè£Á±ªÊñá‰ª∂ --&gt; &lt;javaClientGenerator type="XMLMAPPER" targetPackage="com.example.test.demo.dao.mapper" targetProject="../dao/src/main/java"&gt; &lt;property name="enableSubPackages" value="true"/&gt; &lt;/javaClientGenerator&gt; &lt;!-- Ë°®ÂêçÂèäÂØπÂ∫îpoÁ±ªÂêçÁß∞--&gt; &lt;table tableName="user_info" domainObjectName="UserInfoPO" enableCountByExample="true" enableUpdateByExample="true" enableDeleteByExample="true" enableSelectByExample="true" selectByExampleQueryId="false"&gt; &lt;property name="useActualColumnNames" value="false"/&gt; &lt;generatedKey column="id" identity="true" sqlStatement="MySql"/&gt; &lt;/table&gt; &lt;/context&gt;&lt;/generatorConfiguration&gt; 30„ÄÅÊ†πÊçÆË°®Ëá™Âä®ÁîüÊàêÂØπÂ∫îÁöÑMapper‰ª•ÂèäpoÁ±ª,Ê≠•È™§Â¶Ç‰∏ã„ÄÇÂæóÂà∞ÁõÆÂΩïÂ¶Ç‰∏ã 30„ÄÅbizÂ±Ç‰∏ãDemoServiceImplÈÄöËøá@AutowiredÊ≥®Ëß£Ê≥®ÂÖ•UserMapperÔºå‰øÆÊîπDemoServiceÁöÑtestÊñπÊ≥ïÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122package com.example.test.demo.biz.impl;import com.example.test.demo.biz.DemoService;import com.example.test.demo.dao.mapper.UserInfoPOMapper;import com.example.test.demo.dao.po.UserInfoPO;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;@Servicepublic class DemoServiceImpl implements DemoService &#123; @Autowired private UserInfoPOMapper userInfoPOMapper; @Override public String test() &#123; UserInfoPO po = userInfoPOMapper.selectByPrimaryKey(1L); return "UserInfo name is:" + po.getName(); &#125;&#125; 31„ÄÅÂú®ÂÖ•Âè£Á±ªAppServiceApplication‰∏ä‰∏≠Ê∑ªÂä†Ê≥®Ëß£ 1@MapperScan("com.example.test.demo.dao.mapper") 32„ÄÅËøêË°åmainÊñπÊ≥ïÂêØÂä®È°πÁõÆ ÈÅáÂà∞ÁöÑÂùëmybatis Ëá™Âä®ÁîüÊàêÊó∂ÈÅáÂà∞ Client does not support authentication protocol requested by server; consider upgrading MySQL client Ëß£ÂÜ≥ÊñπÊ≥ïÁôªÂΩïmysqlÔºö 12ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'qwertyui';SELECT plugin FROM mysql.user WHERE User = 'root';]]></content>
      <categories>
        <category>È°πÁõÆÊê≠Âª∫</category>
      </categories>
      <tags>
        <tag>MyBatis</tag>
        <tag>ÊïôÁ®ã</tag>
        <tag>Spring Boot</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[KafkaËÉåÊôØÂèäÊû∂ÊûÑ‰ªãÁªç]]></title>
    <url>%2FKafka%2FKafka-Background%2F</url>
    <content type="text"><![CDATA[KafkaÂàõÂª∫ËÉåÊôØkafkaÊúÄÂàùÊòØLinkedInÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Âü∫Á°ÄËÆæÊñΩÁ≥ªÁªü„ÄÇÊúÄÂàùÂºÄÂèëÁöÑËµ∑Âõ†ÊòØÔºåLinkedInËôΩÁÑ∂Êúâ‰∫ÜÊï∞ÊçÆÂ∫ìÂíåÂÖ∂‰ªñÁ≥ªÁªüÂèØ‰ª•Áî®Êù•Â≠òÂÇ®Êï∞ÊçÆÔºå‰ΩÜÊòØÁº∫‰πè‰∏Ä‰∏™ÂèØ‰ª•Â∏ÆÂä©Â§ÑÁêÜÊåÅÁª≠Êï∞ÊçÆÊµÅÁöÑÁªÑ‰ª∂„ÄÇÂÆÉÁöÑËÆæËÆ°ÁõÆÁöÑÊòØÊèê‰æõ‰∏Ä‰∏™È´òÊÄßËÉΩÁöÑÊ∂àÊÅØÁ≥ªÁªüÔºåÂèØ‰ª•Â§ÑÁêÜÂ§öÁßçÁ±ªÂûãÊï∞ÊçÆÔºåÂπ∂ËÉΩÂ§üÂÆûÊó∂Êèê‰æõÁ∫ØÊ¥Å‰∏îÁªìÊûÑÂåñÁöÑÁî®Êà∑Ê¥ªÂä®Êï∞ÊçÆÂíåÁ≥ªÁªüÂ∫¶ÈáèÊåáÊ†á„ÄÇ KafkaÁÆÄ‰ªãKafkaÊòØÁî±LinkedInÂºÄÂèëÔºå‰ΩøÁî®ScalaÁºñÂÜôÁöÑ‰∏Ä‰∏™ÂàÜÂ∏ÉÂºèÁöÑÊ∂àÊÅØÁ≥ªÁªüÔºåÂÖ∑ÊúâÈ´òÊÄßËÉΩ„ÄÅÊåÅ‰πÖÂåñ„ÄÅÂ§öÂâØÊú¨Â§á‰ªΩ„ÄÅÊ®™ÂêëÊâ©Â±ïËÉΩÂäõ„ÄÇÁîü‰∫ßËÄÖÂæÄÈòüÂàóÈáåÂÜôÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖ‰ªéÈòüÂàóÈáåÂèñÊ∂àÊÅØËøõË°å‰∏öÂä°ÈÄªËæë„ÄÇ‰∏ÄËà¨Âú®Êû∂ÊûÑËÆæËÆ°‰∏≠Ëµ∑Âà∞Ëß£ËÄ¶„ÄÅÂâäÂ≥∞„ÄÅÂºÇÊ≠•Â§ÑÁêÜÁöÑ‰ΩúÁî®„ÄÇ kafkaÂØπÂ§ñ‰ΩøÁî®topicÁöÑÊ¶ÇÂøµÔºåÁîü‰∫ßËÄÖÂæÄtopicÈáåÂÜôÊ∂àÊÅØÔºåÊ∂àË¥πËÄÖ‰ªéËØªÊ∂àÊÅØ„ÄÇ‰∏∫‰∫ÜÂÅöÂà∞Ê∞¥Âπ≥Êâ©Â±ïÔºå‰∏Ä‰∏™topicÂÆûÈôÖÊòØÁî±Â§ö‰∏™partitionÁªÑÊàêÁöÑÔºåÈÅáÂà∞Áì∂È¢àÊó∂ÔºåÂèØ‰ª•ÈÄöËøáÂ¢ûÂä†partitionÁöÑÊï∞ÈáèÊù•ËøõË°åÊ®™ÂêëÊâ©ÂÆπ„ÄÇÂçï‰∏™paritionÂÜÖÊòØ‰øùËØÅÊ∂àÊÅØÊúâÂ∫è„ÄÇ ÊØèÊñ∞ÂÜô‰∏ÄÊù°Ê∂àÊÅØÔºåkafkaÂ∞±ÊòØÂú®ÂØπÂ∫îÁöÑÊñá‰ª∂appendÂÜôÔºåÊâÄ‰ª•ÊÄßËÉΩÈùûÂ∏∏È´ò„ÄÇ KafkaÊû∂ÊûÑ‰∏Ä„ÄÅÂêçËØçËß£Èáä BrokerÔºöÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Â§ÑÁêÜËäÇÁÇπÔºàÊúçÂä°Âô®ÔºâÔºå‰∏Ä‰∏™ËäÇÁÇπÂ∞±ÊòØ‰∏Ä‰∏™brokerÔºå‰∏Ä‰∏™KafkaÈõÜÁæ§Áî±‰∏Ä‰∏™ÊàñÂ§ö‰∏™brokerÁªÑÊàê TopicÔºöKafkaÂØπÊ∂àÊÅØËøõË°åÂΩíÁ±ªÔºåÂèëÈÄÅÂà∞ÈõÜÁæ§ÁöÑÊØè‰∏ÄÊù°Ê∂àÊÅØÈÉΩË¶ÅÊåáÂÆö‰∏Ä‰∏™topic PartitionÔºöÁâ©ÁêÜ‰∏äÁöÑÊ¶ÇÂøµÔºåÊØè‰∏™topicÂåÖÂê´‰∏Ä‰∏™ÊàñÂ§ö‰∏™partitionÔºå‰∏Ä‰∏™partitionÂØπÂ∫î‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåËøô‰∏™Êñá‰ª∂Â§π‰∏ãÂ≠òÂÇ®partitionÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÊñá‰ª∂ÔºåÊØè‰∏™partitionÂÜÖÈÉ®ÊòØÊúâÂ∫èÁöÑ ProducerÔºöÁîü‰∫ßËÄÖÔºåË¥üË¥£ÂèëÂ∏ÉÊ∂àÊÅØÂà∞broker ConsumerÔºöÊ∂àË¥πËÄÖÔºå‰ªébrokerËØªÂèñÊ∂àÊÅØ ConsumerGroupÔºöÊØè‰∏™consumerÂ±û‰∫é‰∏Ä‰∏™ÁâπÂÆöÁöÑconsumer groupÔºåÂèØ‰∏∫ÊØè‰∏™consumerÊåáÂÆögroup nameÔºåËã•‰∏çÊåáÂÆöÔºåÂàôÂ±û‰∫éÈªòËÆ§ÁöÑgroupÔºå‰∏ÄÊù°Ê∂àÊÅØÂèØ‰ª•ÂèëÈÄÅÂà∞‰∏çÂêåÁöÑconsumer groupÔºå‰ΩÜ‰∏Ä‰∏™consumer group‰∏≠Âè™ËÉΩÊúâ‰∏Ä‰∏™consumerËÉΩÊ∂àË¥πËøôÊù°Ê∂àÊÅØ replicaÔºöpartition ÁöÑÂâØÊú¨Ôºå‰øùÈöú partition ÁöÑÈ´òÂèØÁî®„ÄÇ leaderÔºöreplica ‰∏≠ÁöÑ‰∏Ä‰∏™ËßíËâ≤Ôºå producer Âíå consumer Âè™Ë∑ü leader ‰∫§‰∫í„ÄÇ followerÔºöreplica ‰∏≠ÁöÑ‰∏Ä‰∏™ËßíËâ≤Ôºå‰ªé leader ‰∏≠Â§çÂà∂Êï∞ÊçÆ„ÄÇ controllerÔºöÊØè‰∏™ÈõÜÁæ§ÈÉΩÊúâ‰∏Ä‰∏™brokerÂêåÊó∂ÂÖÖÂΩì‰∫ÜÈõÜÁæ§ÊéßÂà∂Âô®ËßíËâ≤ÔºàËá™Âä®‰ªéÈõÜÁæ§ÁöÑÊ¥ªË∑ÉÊàêÂëò‰∏≠ÈÄâ‰∏æÂá∫Êù•ÔºâÔºåË¥üË¥£ÁÆ°ÁêÜÂ∑•‰ΩúÂåÖÊã¨ÂàÜÈÖçÂàÜÂå∫ÁªôbrokerÔºåÁõëÊéßbrokerÁ≠âÁ≠â zookeeperÔºöKafka ÈÄöËøá zookeeper Êù•Â≠òÂÇ®ÈõÜÁæ§ÁöÑ meta ‰ø°ÊÅØ„ÄÇ ‰∫å„ÄÅÊû∂ÊûÑÂõæÊÄª‰ΩìÊï∞ÊçÆÊµÅProducersÂæÄBrokersÈáåÈù¢ÁöÑÊåáÂÆöTopic‰∏≠ÂÜôÊ∂àÊÅØÔºåConsumers‰ªéBrokersÈáåÈù¢ÊãâÂéªÊåáÂÆöTopicÁöÑÊ∂àÊÅØÔºåÁÑ∂ÂêéËøõË°å‰∏öÂä°Â§ÑÁêÜ„ÄÇ Áîü‰∫ßËÄÖ‚ë†È¶ñÂÖàË¶ÅÊûÑÈÄ†‰∏Ä‰∏™ ProducerRecord ÂØπË±°ÔºåËØ•ÂØπË±°ÂèØ‰ª•Â£∞Êòé‰∏ªÈ¢òTopic„ÄÅÂàÜÂå∫Partition„ÄÅÈîÆ Key‰ª•ÂèäÂÄº ValueÔºå‰∏ªÈ¢òÂíåÂÄºÊòØÂøÖÈ°ªË¶ÅÂ£∞ÊòéÁöÑÔºåÂàÜÂå∫ÂíåÈîÆÂèØ‰ª•‰∏çÁî®ÊåáÂÆö„ÄÇ ‚ë°Ë∞ÉÁî®send() ÊñπÊ≥ïËøõË°åÊ∂àÊÅØÂèëÈÄÅ„ÄÇ ‚ë¢Âõ†‰∏∫Ê∂àÊÅØË¶ÅÂà∞ÁΩëÁªú‰∏äËøõË°å‰º†ËæìÔºåÊâÄ‰ª•ÂøÖÈ°ªËøõË°åÂ∫èÂàóÂåñÔºåÂ∫èÂàóÂåñÂô®ÁöÑ‰ΩúÁî®Â∞±ÊòØÊääÊ∂àÊÅØÁöÑ key Âíå valueÂØπË±°Â∫èÂàóÂåñÊàêÂ≠óËäÇÊï∞ÁªÑ„ÄÇ ‚ë£Êé•‰∏ãÊù•Êï∞ÊçÆ‰º†Âà∞ÂàÜÂå∫Âô®ÔºåÂ¶ÇÊûú‰πãÈó¥ÁöÑ ProducerRecord ÂØπË±°ÊåáÂÆö‰∫ÜÂàÜÂå∫ÔºåÈÇ£‰πàÂàÜÂå∫Âô®Â∞Ü‰∏çÂÜçÂÅö‰ªª‰Ωï‰∫ãÔºåÁõ¥Êé•ÊääÊåáÂÆöÁöÑÂàÜÂå∫ËøîÂõûÔºõÂ¶ÇÊûúÊ≤°ÊúâÔºåÈÇ£‰πàÂàÜÂå∫Âô®‰ºöÊ†πÊçÆ Key Êù•ÈÄâÊã©‰∏Ä‰∏™ÂàÜÂå∫ÔºåÈÄâÊã©Â•ΩÂàÜÂå∫‰πãÂêéÔºåÁîü‰∫ßËÄÖÂ∞±Áü•ÈÅìËØ•ÂæÄÂì™‰∏™‰∏ªÈ¢òÂíåÂàÜÂå∫ÂèëÈÄÅËÆ∞ÂΩï‰∫Ü„ÄÇ ‚ë§Êé•ÁùÄËøôÊù°ËÆ∞ÂΩï‰ºöË¢´Ê∑ªÂä†Âà∞‰∏Ä‰∏™ËÆ∞ÂΩïÊâπÊ¨°ÈáåÈù¢ÔºåËøô‰∏™ÊâπÊ¨°ÈáåÊâÄÊúâÁöÑÊ∂àÊÅØ‰ºöË¢´ÂèëÈÄÅÂà∞Áõ∏ÂêåÁöÑ‰∏ªÈ¢òÂíåÂàÜÂå∫„ÄÇ‰ºöÊúâ‰∏Ä‰∏™Áã¨Á´ãÁöÑÁ∫øÁ®ãÊù•ÊääËøô‰∫õËÆ∞ÂΩïÊâπÊ¨°ÂèëÈÄÅÂà∞Áõ∏Â∫îÁöÑ Broker ‰∏ä„ÄÇ ‚ë¢BrokerÊàêÂäüÊé•Êî∂Âà∞Ê∂àÊÅØÔºåË°®Á§∫ÂèëÈÄÅÊàêÂäüÔºåËøîÂõûÊ∂àÊÅØÁöÑÂÖÉÊï∞ÊçÆÔºàÂåÖÊã¨‰∏ªÈ¢òÂíåÂàÜÂå∫‰ø°ÊÅØ‰ª•ÂèäËÆ∞ÂΩïÂú®ÂàÜÂå∫ÈáåÁöÑÂÅèÁßªÈáèÔºâ„ÄÇÂèëÈÄÅÂ§±Ë¥•ÔºåÂèØ‰ª•ÈÄâÊã©ÈáçËØïÊàñËÄÖÁõ¥Êé•ÊäõÂá∫ÂºÇÂ∏∏„ÄÇ keyÁöÑ‰ΩúÁî®ÔºöÂèØ‰ª•‰∏∫Ê∂àÊÅØÁöÑÈôÑÂä†Ê∂àÊÅØÔºå‰πüÂèØ‰ª•Áî®Êù•ÂÜ≥ÂÆöÊ∂àÊÅØËØ•Ë¢´ÂÜôÂà∞Âì™‰∏™‰∏ªÈ¢òÂàÜÂå∫ÔºåÊã•ÊúâÁõ∏ÂêåkeyÁöÑÊ∂àÊÅØÂ∞Ü‰ºöË¢´ÂÜôÂà∞Âêå‰∏ÄÂàÜÂå∫ topic‰ªé‰∏äÂõæÂèØ‰ª•ÁúãÂá∫ÔºåTopic‰∏≠Êï∞ÊçÆÊòØÈ°∫Â∫è‰∏çÂèØÂèòÂ∫èÂàóÔºåÈááÁî®logËøΩÂä†ÊñπÂºèÂÜôÂÖ•ÔºåÂõ†ËÄåkafka‰∏≠Êó†Âõ†ÈöèÊú∫ÂÜôÂÖ•ÂØºËá¥ÊÄßËÉΩ‰Ωé‰∏ãÁöÑÈóÆÈ¢ò„ÄÇ TopicÁöÑÊï∞ÊçÆÂèØÂ≠òÂÇ®Âú®Â§ö‰∏™partition‰∏≠ÔºåÂç≥ÂèØÂ≠òÊîæÂú®‰∏çÂêåÁöÑÊúçÂä°Âô®‰∏ä„ÄÇËøôÂèØ‰ΩøTopicÂ§ßÂ∞è‰∏çÈôê‰∫é‰∏ÄÂè∞serverÂÆπÈáè„ÄÇÂêåÊó∂ÔºåÊ∂àÊÅØÂ≠òÂú®Â§ö‰∏™partition‰∏äÔºåÂèØ‰ª•ÂÆûÁé∞Topic‰∏äÊ∂àÊÅØÁöÑÂπ∂ÂèëËÆøÈóÆ„ÄÇ partition ÊØè‰∏™ Partition ‰∏≠ÁöÑÊ∂àÊÅØÈÉΩÊòØÊúâÂ∫èÁöÑÔºåÁîü‰∫ßÁöÑÊ∂àÊÅØË¢´‰∏çÊñ≠ËøΩÂä†Âà∞ Partition log ‰∏äÔºåÂÖ∂‰∏≠ÁöÑÊØè‰∏Ä‰∏™Ê∂àÊÅØÈÉΩË¢´Ëµã‰∫à‰∫Ü‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑ offset ÂÄº„ÄÇ Âõ†Ê≠§Êï∞ÊçÆ‰∏ç‰ºöÂõ†Ê∂àË¥πËÄå‰∏¢Â§±ÔºåÊâÄ‰ª•Âè™Ë¶ÅconsumerÊåáÂÆöoffsetÔºå‰∏Ä‰∏™Ê∂àÊÅØÂèØË¢´‰∏çÂêåÁöÑconsumerÂ§öÊ¨°Ê∂àË¥π„ÄÇ kafka‰∏≠Âè™ËÉΩ‰øùËØÅpartition‰∏≠ËÆ∞ÂΩïÊòØÊúâÂ∫èÁöÑÔºåËÄå‰∏ç‰øùËØÅtopic‰∏≠‰∏çÂêåpartitionÁöÑÈ°∫Â∫è„ÄÇ ÂàÜÂå∫ÁöÑÂéüÂõ†Ôºö Êñπ‰æøÂú®ÈõÜÁæ§‰∏≠Êâ©Â±ïÔºåÊØè‰∏™ Partition ÂèØ‰ª•ÈÄöËøáË∞ÉÊï¥‰ª•ÈÄÇÂ∫îÂÆÉÊâÄÂú®ÁöÑÊú∫Âô®ÔºåËÄå‰∏Ä‰∏™ topic ÂèàÂèØ‰ª•ÊúâÂ§ö‰∏™ Partition ÁªÑÊàêÔºåÂõ†Ê≠§Êï¥‰∏™ÈõÜÁæ§Â∞±ÂèØ‰ª•ÈÄÇÂ∫î‰ªªÊÑèÂ§ßÂ∞èÁöÑÊï∞ÊçÆ‰∫Ü; ÂèØ‰ª•ÊèêÈ´òÂπ∂ÂèëÔºåÂõ†‰∏∫ÂèØ‰ª•‰ª• Partition ‰∏∫Âçï‰ΩçËØªÂÜô‰∫Ü„ÄÇ ReplicationÂêå‰∏Ä‰∏™ partition ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™ replication(ÂØπÂ∫î server.properties ÈÖçÁΩÆ‰∏≠ÁöÑ default.replication.factor=N)„ÄÇ Ê≤°Êúâ replication ÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏ÄÊó¶ broker ÂÆïÊú∫ÔºåÂÖ∂‰∏äÊâÄÊúâ patition ÁöÑÊï∞ÊçÆÈÉΩ‰∏çÂèØË¢´Ê∂àË¥πÔºåÂêåÊó∂ producer ‰πü‰∏çËÉΩÂÜçÂ∞ÜÊï∞ÊçÆÂ≠ò‰∫éÂÖ∂‰∏äÁöÑ patition„ÄÇ ÂºïÂÖ• replication ‰πã ÂêéÔºåÂêå‰∏Ä‰∏™ partition ÂèØËÉΩ‰ºöÊúâÂ§ö‰∏™ replicationÔºåËÄåËøôÊó∂ÈúÄË¶ÅÂú®Ëøô‰∫õ replication ‰πãÈó¥ÈÄâÂá∫‰∏Ä‰∏™ leaderÔºåproducer Âíå consumer Âè™‰∏éËøô‰∏™ leader ‰∫§‰∫íÔºåÂÖ∂ÂÆÉ replication ‰Ωú‰∏∫ follower ‰ªé leader ‰∏≠Â§çÂà∂Êï∞ÊçÆ„ÄÇ Ê∂àË¥πËÄÖËÆ¢ÈòÖtopicÊòØ‰ª•‰∏Ä‰∏™Ê∂àË¥πÁªÑÊù•ËÆ¢ÈòÖÁöÑÔºå‰∏Ä‰∏™Ê∂àË¥πÁªÑÈáåÈù¢ÂèØ‰ª•ÊúâÂ§ö‰∏™Ê∂àË¥πËÄÖ„ÄÇ Âêå‰∏Ä‰∏™Ê∂àË¥πÁªÑ‰∏≠ÁöÑ‰∏§‰∏™Ê∂àË¥πËÄÖÔºå‰∏ç‰ºöÂêåÊó∂Ê∂àË¥π‰∏Ä‰∏™partition„ÄÇÊç¢Âè•ËØùÊù•ËØ¥ÔºåÂ∞±ÊòØ‰∏Ä‰∏™partitionÔºåÂè™ËÉΩË¢´Ê∂àË¥πÁªÑÈáåÁöÑ‰∏Ä‰∏™Ê∂àË¥πËÄÖÊ∂àË¥πÔºå‰ΩÜÊòØÂèØ‰ª•ÂêåÊó∂Ë¢´Â§ö‰∏™Ê∂àË¥πÁªÑÊ∂àË¥π„ÄÇ Âõ†Ê≠§ÔºåÂ¶ÇÊûúÊ∂àË¥πÁªÑÂÜÖÁöÑÊ∂àË¥πËÄÖÂ¶ÇÊûúÊØîpartitionÂ§öÁöÑËØùÔºåÈÇ£‰πàÂ∞±‰ºöÊúâ‰∏™Âà´Ê∂àË¥πËÄÖ‰∏ÄÁõ¥Á©∫Èó≤„ÄÇ Kafka Zookeeper ËäÇÁÇπ KafkaÂ∏∏ËßÅÁöÑÂ∫îÁî®Âú∫ÊôØ1.Ê∂àÊÅØÈòüÂàóÊØîËµ∑Â§ßÂ§öÊï∞ÁöÑÊ∂àÊÅØÁ≥ªÁªüÊù•ËØ¥ÔºåKafkaÊúâÊõ¥Â•ΩÁöÑÂêûÂêêÈáèÔºåÂÜÖÁΩÆÁöÑÂàÜÂå∫ÔºåÂÜó‰ΩôÂèäÂÆπÈîôÊÄßÔºåËøôËÆ©KafkaÊàê‰∏∫‰∫Ü‰∏Ä‰∏™ÂæàÂ•ΩÁöÑÂ§ßËßÑÊ®°Ê∂àÊÅØÂ§ÑÁêÜÂ∫îÁî®ÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ Ê∂àÊÅØÁ≥ªÁªü‰∏ÄËà¨ÂêûÂêêÈáèÁõ∏ÂØπËæÉ‰ΩéÔºå‰ΩÜÊòØÈúÄË¶ÅÊõ¥Â∞èÁöÑÁ´ØÂà∞Á´ØÂª∂Êó∂ÔºåÂπ∂Â∞ùÂ∞ù‰æùËµñ‰∫éKafkaÊèê‰æõÁöÑÂº∫Â§ßÁöÑÊåÅ‰πÖÊÄß‰øùÈöú„ÄÇÂú®Ëøô‰∏™È¢ÜÂüüÔºåKafkaË∂≥‰ª•Â™≤Áæé‰º†ÁªüÊ∂àÊÅØÁ≥ªÁªüÔºå Â¶ÇActiveMQÊàñRabbitMQ„ÄÇ 2.Ë°å‰∏∫Ë∑üË∏™Ë°å‰∏∫Ë∑üË∏™ÊòØkafkaÂü∫‰∫éÂèëÂ∏ÉËÆ¢ÈòÖÊ®°ÂºèÁöÑÊâ©Â±ïÂ∫îÁî®ÔºåÂΩìÊàë‰ª¨Ë∑üË∏™Áî®Êà∑ÊµèËßàÈ°µÈù¢„ÄÅÊêúÁ¥¢ÂèäÂÖ∂‰ªñË°å‰∏∫Êó∂Ôºå‰ª•ÂèëÂ∏É-ËÆ¢ÈòÖÁöÑÊ®°ÂºèÂÆûÊó∂ËÆ∞ÂΩïÂà∞ÂØπÂ∫îÁöÑtopicÈáåÈÇ£‰πàËøô‰∫õÁªìÊûúË¢´ËÆ¢ÈòÖËÄÖÊãøÂà∞ÂêéÔºåÂ∞±ÂèØ‰ª•ÂÅöËøõ‰∏ÄÊ≠•ÁöÑÂÆûÊó∂Â§ÑÁêÜÔºåÊàñÂÆûÊó∂ÁõëÊéßÔºåÊàñÊîæÂà∞hadoop/Á¶ªÁ∫øÊï∞ÊçÆ‰ªìÂ∫ìÈáåÂ§ÑÁêÜ„ÄÇ 3.ÂÖÉ‰ø°ÊÅØÁõëÊéß‰∏éË°å‰∏∫Ë∑üË∏™Áõ∏‰ººÔºå‰Ωú‰∏∫Êìç‰ΩúËÆ∞ÂΩïÁöÑÁõëÊéßÊ®°ÂùóÊù•‰ΩøÁî®ÔºåÂç≥Ê±áÈõÜËÆ∞ÂΩï‰∏Ä‰∫õÊìç‰Ωú‰ø°ÊÅØÔºåÂèØ‰ª•ÁêÜËß£‰∏∫ËøêÁª¥ÊÄßË¥®ÁöÑÊï∞ÊçÆÁõëÊéßÂêß„ÄÇ 4.Êó•ÂøóÊî∂ÈõÜÊó•ÂøóÊî∂ÈõÜÊñπÈù¢ÔºåÂÖ∂ÂÆûÂºÄÊ∫ê‰∫ßÂìÅÊúâÂæàÂ§öÔºåÂåÖÊã¨Scribe„ÄÅApache Flume„ÄÇÂæàÂ§ö‰∫∫‰ΩøÁî®Kafka‰ª£ÊõøÊó•ÂøóËÅöÂêàÔºàlog aggregationÔºâ„ÄÇÊó•ÂøóËÅöÂêà‰∏ÄËà¨Êù•ËØ¥ÊòØ‰ªéÊúçÂä°Âô®‰∏äÊî∂ÈõÜÊó•ÂøóÊñá‰ª∂ÔºåÁÑ∂ÂêéÊîæÂà∞‰∏Ä‰∏™ÈõÜ‰∏≠ÁöÑ‰ΩçÁΩÆÔºàÊñá‰ª∂ÊúçÂä°Âô®ÊàñÂàÜÂ∏ÉÂºèÊñá‰ª∂Á≥ªÁªüÔºâËøõË°åÂ§ÑÁêÜ„ÄÇÁÑ∂ËÄåKafkaÂøΩÁï•ÊéâÊñá‰ª∂ÁöÑÁªÜËäÇÔºåÂ∞ÜÂÖ∂Êõ¥Ê∏ÖÊô∞Âú∞ÊäΩË±°Êàê‰∏Ä‰∏™‰∏™Êó•ÂøóÊàñ‰∫ã‰ª∂ÁöÑÊ∂àÊÅØÊµÅ„ÄÇËøôÂ∞±ËÆ©KafkaÂ§ÑÁêÜËøáÁ®ãÂª∂ËøüÊõ¥‰ΩéÔºåÊõ¥ÂÆπÊòìÊîØÊåÅÂ§öÊï∞ÊçÆÊ∫êÂíåÂàÜÂ∏ÉÂºèÊï∞ÊçÆÂ§ÑÁêÜ„ÄÇÊØîÂÖ∂‰ªñÁ≥ªÁªüKafkaÂÖ∑ÊúâÊõ¥È´òÁöÑÊâ©Â±ïÊÄßÔºåÈ´òÊïàÁöÑÊÄßËÉΩÂíåÂõ†‰∏∫Â§çÂà∂ÂØºËá¥ÁöÑÊõ¥È´òÁöÑËÄêÁî®ÊÄß‰øùËØÅÔºå‰ª•ÂèäÊõ¥‰ΩéÁöÑÁ´ØÂà∞Á´ØÂª∂Ëøü„ÄÇ 5.ÊµÅÂ§ÑÁêÜ‰øùÂ≠òÊî∂ÈõÜ‰∏äÊ∏∏ÁöÑÊµÅÊï∞ÊçÆÔºå‰ª•Êèê‰æõÂà∞‰∏ãÊ∏∏ÁöÑStormÊàñÂÖ∂‰ªñÊµÅÂºèËÆ°ÁÆóÊ°ÜÊû∂ËøõË°åÂ§ÑÁêÜ„ÄÇÂæàÂ§öÁî®Êà∑‰ºöÂ∞ÜÈÇ£‰∫õ‰ªéÂéüÂßãtopicÊù•ÁöÑÊï∞ÊçÆËøõË°åÈò∂ÊÆµÊÄßÂ§ÑÁêÜÔºåÊ±áÊÄªÔºåÊâ©ÂÖÖÊàñËÄÖ‰ª•ÂÖ∂‰ªñÁöÑÊñπÂºèËΩ¨Êç¢Âà∞Êñ∞ÁöÑtopic‰∏ãÂÜçÁªßÁª≠ÂêéÈù¢ÁöÑÂ§ÑÁêÜ„ÄÇ‰æãÂ¶Ç‰∏Ä‰∏™ÊñáÁ´†Êé®ËçêÁöÑÂ§ÑÁêÜÊµÅÁ®ãÔºåÂèØËÉΩÊòØÂÖà‰ªéÊï∞ÊçÆÊ∫ê‰∏≠ÊäìÂèñÊñáÁ´†ÁöÑÂÜÖÂÆπÔºåÁÑ∂ÂêéÂ∞ÜÂÖ∂‰∏¢ÂÖ•‰∏Ä‰∏™Âè´ÂÅö‚ÄúÊñáÁ´†‚ÄùÁöÑtopic‰∏≠ÔºõÂêéÁª≠Êìç‰ΩúÂèØËÉΩÊòØÈúÄË¶ÅÂØπËøô‰∏™ÂÜÖÂÆπËøõË°åÊ∏ÖÁêÜÔºåÊØîÂ¶ÇÂõûÂ§çÊ≠£Â∏∏Êï∞ÊçÆÊàñËÄÖÂà†Èô§ÈáçÂ§çÊï∞ÊçÆÔºåÊúÄÂêéÂÜçÂ∞ÜÂÜÖÂÆπÂåπÈÖçÁöÑÁªìÊûúËøîËøòÁªôÁî®Êà∑„ÄÇËøôÂ∞±Âú®‰∏Ä‰∏™Áã¨Á´ãÁöÑtopic‰πãÂ§ñÔºå‰∫ßÁîü‰∫Ü‰∏ÄÁ≥ªÂàóÁöÑÂÆûÊó∂Êï∞ÊçÆÂ§ÑÁêÜÁöÑÊµÅÁ®ã„ÄÇStromÂíåSamzaÊòØÈùûÂ∏∏ËëóÂêçÁöÑÂÆûÁé∞ËøôÁßçÁ±ªÂûãÊï∞ÊçÆËΩ¨Êç¢ÁöÑÊ°ÜÊû∂„ÄÇ 6.ÊåÅ‰πÖÊÄßÊó•ÂøóÔºàcommit logÔºâKafkaÂèØ‰ª•‰∏∫‰∏ÄÁßçÂ§ñÈÉ®ÁöÑÊåÅ‰πÖÊÄßÊó•ÂøóÁöÑÂàÜÂ∏ÉÂºèÁ≥ªÁªüÊèê‰æõÊúçÂä°„ÄÇËøôÁßçÊó•ÂøóÂèØ‰ª•Âú®ËäÇÁÇπ‰πãÂ§ñËøõË°åÊåÅ‰πÖÊÄßÊó•ÂøóÁöÑËÆ∞ÂΩïÔºåËäÇÁÇπÈó¥Â§á‰ªΩÊï∞ÊçÆÔºåÂπ∂‰∏∫ÊïÖÈöúËäÇÁÇπÊï∞ÊçÆÂõûÂ§çÊèê‰æõ‰∏ÄÁßçÈáçÊñ∞ÂêåÊ≠•ÁöÑÊú∫Âà∂„ÄÇKafka‰∏≠Êèê‰æõ‰∫ÜÊó•ÂøóÂéãÁº©ÂäüËÉΩÔºåÊó•ÂøóÂéãÁº©‰πãÂêéÊï¥‰ΩìÁöÑÊó•ÂøóÁä∂ÊÄÅ‰ªçÁÑ∂‰øùÁïôÔºåÂπ∂‰∏îÈÄöËøáÊó•ÂøóÂõûÊ∫ØÂèØ‰ª•ÂÆûÁé∞ÊåÅ‰πÖÊÄßÊó•ÂøóÁöÑÂäüËÉΩ„ÄÇÂú®ËøôÁßçÁî®Ê≥ï‰∏≠ÔºåKafkaÁ±ª‰ºº‰∫éApache BookKeeperÈ°πÁõÆ„ÄÇ 7.‰∫ã‰ª∂Ê∫êÂ∞ÜÁä∂ÊÄÅËΩ¨Áßª‰Ωú‰∏∫ÊåâÊó∂Èó¥È°∫Â∫èÊéíÂàóÁöÑËÆ∞ÂΩïÂ∫èÂàóÔºåËøôÁßçÂ∫èÂàóÂèØ‰ª•ÊåâÊó∂Èó¥ÂõûÊ∫ØÊï¥‰∏™‰∫ã‰ª∂ÁöÑÁä∂ÊÄÅÂèòÊõ¥ÔºåkafkaÊú¨Ë∫´ÁöÑÊåÅ‰πÖÊÄßÔºå‰ª£Ë°®ÁùÄ‰ªñÂèØ‰ª•Â≠òÂÇ®Â§ßÈáèÁöÑÊó•ÂøóÔºåÂπ∂‰∏îËøô‰∫õÂèØ‰ª•Ê†πÊçÆËøô‰∫õÊó•ÂøóËøõË°åÊ±áÊÄªÂíåÂõûÊ∫ØÁ≠âÁ≠â„ÄÇ ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÈÄÇÁî®ÊúÄÂ§öÊúÄÂπøÊ≥õÁöÑËá™ÁÑ∂ÊòØMQÁöÑÂäüËÉΩ„ÄÇ KafkaÁî®‰ΩúMQÊó∂‰∏éÂ∏∏Áî®MQÁöÑÂØπÊØîRabbitMQ‚Äî‚ÄîRabbit Message QueueÁöÑÁÆÄÂÜôÔºå‰ΩÜ‰∏çËÉΩ‰ªÖ‰ªÖÁêÜËß£ÂÖ∂‰∏∫Ê∂àÊÅØÈòüÂàóÔºåÊ∂àÊÅØ‰ª£ÁêÜÊõ¥ÂêàÈÄÇ„ÄÇ RabbitMQÊòØ‰∏Ä‰∏™Áî±Erlang ËØ≠Ë®ÄÂºÄÂèëÁöÑAMQPÔºàÈ´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆÔºâÁöÑÂºÄÊ∫êÂÆûÁé∞„ÄÇ RabbitMQ‰Ωú‰∏∫‰∏Ä‰∏™Ê∂àÊÅØ‰ª£ÁêÜÔºå‰∏ªË¶ÅÂíåÊ∂àÊÅØÊâì‰∫§ÈÅìÔºåË¥üË¥£Êé•Êî∂Âπ∂ËΩ¨ÂèëÊ∂àÊÅØ„ÄÇ ZeroMQ‚Äî‚ÄîÊòØ‰∏Ä‰∏™Âü∫‰∫éÊ∂àÊÅØÈòüÂàóÁöÑÂ§öÁ∫øÁ®ãÁΩëÁªúÂ∫ìÔºåÂÖ∂ÂØπÂ•óÊé•Â≠óÁ±ªÂûã„ÄÅËøûÊé•Â§ÑÁêÜ„ÄÅÂ∏ß„ÄÅÁîöËá≥Ë∑ØÁî±ÁöÑÂ∫ïÂ±ÇÁªÜËäÇËøõË°åÊäΩË±°ÔºåÊèê‰æõË∑®Ë∂äÂ§öÁßç‰º†ËæìÂçèËÆÆÁöÑÂ•óÊé•Â≠ó„ÄÇÊòØÁΩëÁªúÈÄö‰ø°‰∏≠Êñ∞ÁöÑ‰∏ÄÂ±ÇÔºå‰ªã‰∫éÂ∫îÁî®Â±ÇÂíå‰º†ËæìÂ±Ç‰πãÈó¥ÔºàÊåâÁÖßTCP/IPÂàíÂàÜÔºâÔºåÂÖ∂ÊòØ‰∏Ä‰∏™ÂèØ‰º∏Áº©Â±ÇÔºåÂèØÂπ∂Ë°åËøêË°åÔºåÂàÜÊï£Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªüÈó¥„ÄÇ RocketMQ‚Äî‚ÄîÈòøÈáåÂºÄÊ∫êÁöÑ‰∏ÄÊ¨æÈ´òÊÄßËÉΩ„ÄÅÈ´òÂêûÂêêÈáèÁöÑÂàÜÂ∏ÉÂºèÊ∂àÊÅØ‰∏≠Èó¥‰ª∂„ÄÇ ActiveMQ‚Äî‚ÄîÊòØ‰∏ÄÁßçÂºÄÊ∫êÁöÑÔºåÂÆûÁé∞‰∫ÜJMS1.1ËßÑËåÉÁöÑÔºåÈù¢ÂêëÊ∂àÊÅØ(MOM)ÁöÑ‰∏≠Èó¥‰ª∂Ôºå‰∏∫Â∫îÁî®Á®ãÂ∫èÊèê‰æõÈ´òÊïàÁöÑ„ÄÅÂèØÊâ©Â±ïÁöÑ„ÄÅÁ®≥ÂÆöÁöÑÂíåÂÆâÂÖ®ÁöÑ‰ºÅ‰∏öÁ∫ßÊ∂àÊÅØÈÄö‰ø°„ÄÇ ÁâπÊÄß Kafka RabbitMQ ZeroMQ RocketMQ ActiveMQ ÂºÄÂèëËØ≠Ë®Ä Scala Erlang C Java Java ÊîØÊåÅÂçèËÆÆ Ëá™Ë°åËÆæËÆ°ÁöÑÂü∫‰∫éTCPÂ±ÇÁöÑÂçèËÆÆ AMQP TCP„ÄÅUDP Ëá™Ë°åËÆæËÆ° OpenWire„ÄÅSTOMP„ÄÅREST„ÄÅMQTT„ÄÅXMPP„ÄÅAMQP„ÄÅWS Ê∂àÊÅØÂ≠òÂÇ® ÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò„ÄÅÊï∞ÊçÆÂ∫ì„ÄÇÊîØÊåÅÂ§ßÈáèÂ†ÜÁßØ„ÄÇ ÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò„ÄÇÊîØÊåÅÂ∞ëÈáèÂ†ÜÁßØ„ÄÇ Ê∂àÊÅØÂèëÈÄÅÁ´ØÁöÑÂÜÖÂ≠òÊàñËÄÖÁ£ÅÁõò‰∏≠„ÄÇ‰∏çÊîØÊåÅÊåÅ‰πÖÂåñ„ÄÇ Á£ÅÁõò„ÄÇÊîØÊåÅÂ§ßÈáèÂ†ÜÁßØ„ÄÇ ÂÜÖÂ≠ò„ÄÅÁ£ÅÁõò„ÄÅÊï∞ÊçÆÂ∫ì„ÄÇÊîØÊåÅÂ∞ëÈáèÂ†ÜÁßØ„ÄÇ Ê∂àÊÅØ‰∫ãÂä° ÊîØÊåÅ ÊîØÊåÅ ‰∏çÊîØÊåÅ ÊîØÊåÅ ÊîØÊåÅ Ë¥üËΩΩÂùáË°° ÊîØÊåÅ ÊîØÊåÅ‰ΩÜÊîØÊåÅÁöÑ‰∏çÂ•Ω Âéª‰∏≠ÂøÉÂåñÔºå‰∏çÊîØÊåÅË¥üËΩΩÂùáË°°„ÄÇÊú¨Ë∫´Âè™ÊòØ‰∏Ä‰∏™Â§öÁ∫øÁ®ãÁΩëÁªúÂ∫ì„ÄÇ ÊîØÊåÅ ÊîØÊåÅÔºåÂèØ‰ª•Âü∫‰∫ézookeeperÂÆûÁé∞ ÈõÜÁæ§ÊñπÂºè Â§©ÁÑ∂ÁöÑ‚Äò‚ÄòLeader-Slave‚ÄôÊó†Áä∂ÊÄÅÈõÜÁæ§ÔºåÊØèÂè∞ÊúçÂä°Âô®Êó¢ÊòØMaster‰πüÊòØSlave„ÄÇ ÊîØÊåÅÁÆÄÂçïÈõÜÁæ§Ôºå‚ÄôÂ§çÂà∂‚ÄôÊ®°ÂºèÔºåÂØπÈ´òÁ∫ßÈõÜÁæ§Ê®°ÂºèÊîØÊåÅ‰∏çÂ•Ω„ÄÇ Âéª‰∏≠ÂøÉÂåñÔºå‰∏çÊîØÊåÅÈõÜÁæ§„ÄÇ ‚ÄòMaster-Slave‚Äô Ê®°ÂºèÔºåÂºÄÊ∫êÁâàÊú¨ÈúÄÊâãÂä®ÂàáÊç¢SlaveÂèòÊàêMaster ÊîØÊåÅÁÆÄÂçïÈõÜÁæ§Ê®°ÂºèÔºåÊØîÂ¶Ç‚Äô‰∏ª-Â§á‚ÄôÔºåÂØπÈ´òÁ∫ßÈõÜÁæ§Ê®°ÂºèÊîØÊåÅ‰∏çÂ•Ω„ÄÇ ÂèØÁî®ÊÄß ÈùûÂ∏∏È´òÔºàÂàÜÂ∏ÉÂºèÔºâ È´òÔºà‰∏ª‰ªéÔºâ È´ò ÈùûÂ∏∏È´òÔºàÂàÜÂ∏ÉÂºèÔºâ È´òÔºà‰∏ª‰ªéÔºâ Ê∂àÊÅØÈáçÂ§ç ÊîØÊåÅat least once„ÄÅat most once ÊîØÊåÅat least once„ÄÅat most once Âè™ÊúâÈáç‰º†Êú∫Âà∂Ôºå‰ΩÜÊòØÊ≤°ÊúâÊåÅ‰πÖÂåñÔºåÊ∂àÊÅØ‰∏¢‰∫ÜÈáç‰º†‰πüÊ≤°ÊúâÁî®„ÄÇÊó¢‰∏çÊòØat least once„ÄÅ‰πü‰∏çÊòØat most once„ÄÅÊõ¥‰∏çÊòØexactly only once ÊîØÊåÅat least once ÊîØÊåÅat least once ÂêûÂêêÈáèTPS ÊûÅÂ§ß ÊØîËæÉÂ§ß ÊûÅÂ§ß Â§ßÔºàÂèëÈÄÅÁ´Ø‰∏çÊòØÊâπÈáèÂèëÈÄÅÔºâ ÊØîËæÉÂ§ß Êó∂ÊïàÊÄß ms‰ª•ÂÜÖ usÁ∫ß msÁ∫ß msÁ∫ß ËÆ¢ÈòÖÂΩ¢ÂºèÂíåÊ∂àÊÅØÂàÜÂèë Âü∫‰∫étopic‰ª•ÂèäÊåâÁÖßtopicËøõË°åÊ≠£ÂàôÂåπÈÖçÁöÑÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè„ÄÇ Êèê‰æõ‰∫Ü4ÁßçÊñπÂºèÔºödirect, topic ,HeadersÂíåfanout„ÄÇ ÁÇπÂØπÁÇπ(p2p) Âü∫‰∫étopic/messageTag‰ª•ÂèäÊåâÁÖßÊ∂àÊÅØÁ±ªÂûã„ÄÅÂ±ûÊÄßËøõË°åÊ≠£ÂàôÂåπÈÖçÁöÑÂèëÂ∏ÉËÆ¢ÈòÖÊ®°Âºè ÁÇπÂØπÁÇπ(p2p)„ÄÅÂπøÊí≠ÔºàÂèëÂ∏É-ËÆ¢ÈòÖÔºâ È°∫Â∫èÊ∂àÊÅØ ÊîØÊåÅ ‰∏çÊîØÊåÅ ‰∏çÊîØÊåÅ ÊîØÊåÅ ‰∏çÊîØÊåÅ Ê∂àÊÅØÁ°ÆËÆ§ ÊîØÊåÅ ÊîØÊåÅ ÊîØÊåÅ ÊîØÊåÅ ÊîØÊåÅ Ê∂àÊÅØÂõûÊ∫Ø ÊîØÊåÅÊåáÂÆöÂàÜÂå∫offset‰ΩçÁΩÆÁöÑÂõûÊ∫Ø ‰∏çÊîØÊåÅ ‰∏çÊîØÊåÅ ÊîØÊåÅÊåáÂÆöÊó∂Èó¥ÁÇπÁöÑÂõûÊ∫Ø ‰∏çÊîØÊåÅ Ê∂àË¥πÂ§±Ë¥•ÈáçËØï ‰∏çÊîØÊåÅÔºå‰ΩÜÂèØ‰ª•ÈÄöËøáÊåáÂÆöÂàÜÂå∫offset‰ΩçÁΩÆÂÆûÁé∞„ÄÇ ‰∏çÊîØÊåÅÔºå‰ΩÜÊòØÂèØ‰ª•Âà©Áî®Ê∂àÊÅØÁ°ÆËÆ§Êú∫Âà∂ÂÆûÁé∞„ÄÇ ‰∏çÊîØÊåÅ ÊîØÊåÅ ‰∏çÊîØÊåÅ Âπ∂ÂèëÂ∫¶ È´ò ÊûÅÈ´ò È´ò È´ò È´ò ËµÑÊñôÊñáÊ°£ ‰∏≠„ÄÇÊúâkafka‰ΩúËÄÖËá™Â∑±ÂÜôÁöÑ‰π¶ÔºåÁΩë‰∏äËµÑÊñô‰πüÊúâ‰∏Ä‰∫õ„ÄÇ Â§ö„ÄÇÊúâ‰∏Ä‰∫õ‰∏çÈîôÁöÑ‰π¶ÔºåÁΩë‰∏äËµÑÊñôÂ§ö„ÄÇ Â∞ë„ÄÇÊ≤°Êúâ‰∏ìÈó®ÂÜôzeromqÁöÑ‰π¶ÔºåÁΩë‰∏äÁöÑËµÑÊñôÂ§öÊòØ‰∏Ä‰∫õ‰ª£Á†ÅÁöÑÂÆûÁé∞ÂíåÁÆÄÂçï‰ªãÁªç„ÄÇ Â∞ë„ÄÇÊ≤°Êúâ‰∏ìÈó®ÂÜôrocketmqÁöÑ‰π¶ÔºåÁΩë‰∏äÁöÑËµÑÊñôËâØËé†‰∏çÈΩêÔºåÂÆòÊñπÊñáÊ°£ÂæàÁÆÄÊ¥ÅÔºå‰ΩÜÊòØÂØπÊäÄÊúØÁªÜËäÇÊ≤°ÊúâËøáÂ§öÁöÑÊèèËø∞„ÄÇ Â§ö„ÄÇÊ≤°Êúâ‰∏ìÈó®ÂÜôactivemqÁöÑ‰π¶ÔºåÁΩë‰∏äËµÑÊñôÂ§ö„ÄÇ Â∏∏Áî®MQÁöÑ‰ºòÁº∫ÁÇπKafka‰ºòÁÇπ ÊÄßËÉΩÂçìË∂äÔºåÂçïÊú∫ÂÜôÂÖ•TPSÁ∫¶Âú®Áôæ‰∏áÊù°/ÁßíÔºåÊúÄÂ§ßÁöÑ‰ºòÁÇπÔºåÂ∞±ÊòØÂêûÂêêÈáèÈ´ò„ÄÇ Êó∂ÊïàÊÄßÔºömsÁ∫ß ÂèØÁî®ÊÄßÔºöÈùûÂ∏∏È´òÔºåkafkaÊòØÂàÜÂ∏ÉÂºèÁöÑÔºå‰∏Ä‰∏™Êï∞ÊçÆÂ§ö‰∏™ÂâØÊú¨ÔºåÂ∞ëÊï∞Êú∫Âô®ÂÆïÊú∫Ôºå‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆÔºå‰∏ç‰ºöÂØºËá¥‰∏çÂèØÁî® Ê∂àË¥πËÄÖÈááÁî®PullÊñπÂºèËé∑ÂèñÊ∂àÊÅØ, Ê∂àÊÅØÊúâÂ∫è, ÈÄöËøáÊéßÂà∂ËÉΩÂ§ü‰øùËØÅÊâÄÊúâÊ∂àÊÅØË¢´Ê∂àË¥π‰∏î‰ªÖË¢´Ê∂àË¥π‰∏ÄÊ¨°; Êúâ‰ºòÁßÄÁöÑÁ¨¨‰∏âÊñπKafka WebÁÆ°ÁêÜÁïåÈù¢Kafka-ManagerÔºõ Âú®Êó•ÂøóÈ¢ÜÂüüÊØîËæÉÊàêÁÜüÔºåË¢´Â§öÂÆ∂ÂÖ¨Âè∏ÂíåÂ§ö‰∏™ÂºÄÊ∫êÈ°πÁõÆ‰ΩøÁî®Ôºõ ÂäüËÉΩÊîØÊåÅÔºöÂäüËÉΩËæÉ‰∏∫ÁÆÄÂçïÔºå‰∏ªË¶ÅÊîØÊåÅÁÆÄÂçïÁöÑMQÂäüËÉΩÔºåÂú®Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑÂÆûÊó∂ËÆ°ÁÆó‰ª•ÂèäÊó•ÂøóÈááÈõÜË¢´Â§ßËßÑÊ®°‰ΩøÁî® Áº∫ÁÇπ KafkaÂçïÊú∫Ë∂ÖËøá64‰∏™ÈòüÂàó/ÂàÜÂå∫ÔºåLoad‰ºöÂèëÁîüÊòéÊòæÁöÑÈ£ôÈ´òÁé∞Ë±°ÔºåÈòüÂàóË∂äÂ§öÔºåloadË∂äÈ´òÔºåÂèëÈÄÅÊ∂àÊÅØÂìçÂ∫îÊó∂Èó¥ÂèòÈïø ‰ΩøÁî®Áü≠ËΩÆËØ¢ÊñπÂºèÔºåÂÆûÊó∂ÊÄßÂèñÂÜ≥‰∫éËΩÆËØ¢Èó¥ÈöîÊó∂Èó¥Ôºõ Ê∂àË¥πÂ§±Ë¥•‰∏çÊîØÊåÅÈáçËØïÔºõ ÊîØÊåÅÊ∂àÊÅØÈ°∫Â∫èÔºå‰ΩÜÊòØ‰∏ÄÂè∞‰ª£ÁêÜÂÆïÊú∫ÂêéÔºåÂ∞±‰ºö‰∫ßÁîüÊ∂àÊÅØ‰π±Â∫èÔºõ Á§æÂå∫Êõ¥Êñ∞ËæÉÊÖ¢Ôºõ RabbitMQ‰ºòÁÇπ Áî±‰∫éerlangËØ≠Ë®ÄÁöÑÁâπÊÄßÔºåmq ÊÄßËÉΩËæÉÂ•ΩÔºåÈ´òÂπ∂ÂèëÔºõ ÂêûÂêêÈáèÂà∞‰∏áÁ∫ßÔºåMQÂäüËÉΩÊØîËæÉÂÆåÂ§á ÂÅ•Â£Æ„ÄÅÁ®≥ÂÆö„ÄÅÊòìÁî®„ÄÅË∑®Âπ≥Âè∞„ÄÅÊîØÊåÅÂ§öÁßçËØ≠Ë®Ä„ÄÅÊñáÊ°£ÈΩêÂÖ®Ôºõ ÂºÄÊ∫êÊèê‰æõÁöÑÁÆ°ÁêÜÁïåÈù¢ÈùûÂ∏∏Ê£íÔºåÁî®Ëµ∑Êù•ÂæàÂ•ΩÁî® Á§æÂå∫Ê¥ªË∑ÉÂ∫¶È´òÔºõ Áº∫ÁÇπ erlangÂºÄÂèëÔºåÂæàÈöæÂéªÁúãÊáÇÊ∫êÁ†ÅÔºåÂü∫Êú¨ËÅåËÉΩ‰æùËµñ‰∫éÂºÄÊ∫êÁ§æÂå∫ÁöÑÂø´ÈÄüÁª¥Êä§Âíå‰øÆÂ§çbugÔºå‰∏çÂà©‰∫éÂÅö‰∫åÊ¨°ÂºÄÂèëÂíåÁª¥Êä§„ÄÇ RabbitMQÁ°ÆÂÆûÂêûÂêêÈáè‰ºö‰Ωé‰∏Ä‰∫õÔºåËøôÊòØÂõ†‰∏∫‰ªñÂÅöÁöÑÂÆûÁé∞Êú∫Âà∂ÊØîËæÉÈáç„ÄÇ ÈúÄË¶ÅÂ≠¶‰π†ÊØîËæÉÂ§çÊùÇÁöÑÊé•Âè£ÂíåÂçèËÆÆÔºåÂ≠¶‰π†ÂíåÁª¥Êä§ÊàêÊú¨ËæÉÈ´ò„ÄÇ ZeroMQ‰ºòÁÇπ ÂêûÂêêÈáèÔºöÁôæ‰∏áÁ∫ß Êâ©Â±ïÊÄßÂº∫ÔºåÂÖ∂‰ªñMQÈÉΩÂ∑≤ÁªèÊòØÊàêÂΩ¢ÁöÑ‰∫ßÂìÅÔºåÂ∑≤ÁªèÊòØ‰∏ÄÊ¨æÂ∫îÁî®Á®ãÂ∫è‰∫Ü„ÄÇËÄåZeroMQËØ¥ÁôΩ‰∫ÜÂ∞±ÊòØ‰∏ÄÁªÑÂ∫ìÂáΩÊï∞„ÄÇ Áº∫ÁÇπ ÂéüÁîü‰∏çÊîØÊåÅÊåÅ‰πÖÂåñÔºå‰ªÖÊîØÊåÅÁõ∏ÂΩìÊúâÈôêÁöÑÊú¨Âú∞ÁºìÂ≠òÔºåÂ¶ÇÈúÄË¶ÅÊ∂àÊÅØÊåÅ‰πÖÂåñÈúÄË¶ÅËá™Â∑±ËøõË°åÊâ©Â±ï„ÄÇ Âú®È´òÂπ∂ÂèëÁéØÂ¢É‰∏ã‰∏ç‰ºöÂá∫ÈóÆÈ¢òÔºå‰ΩÜÊòØÊúâÂèØËÉΩ‰ºöÂØºËá¥Êú¨Âú∞ÁöÑÁºìÂ≠òÂå∫Ë¢´Â°ûÊª°ËÄåÂØºËá¥Ê∂àÊÅØ‰∏¢Â§±ÁöÑÊÉÖÂÜµ„ÄÇ RocketMQ‰ºòÁÇπ ÂçïÊú∫ÂêûÂêêÈáèÔºöÂçÅ‰∏áÁ∫ß ÂèØÁî®ÊÄßÔºöÈùûÂ∏∏È´òÔºåÂàÜÂ∏ÉÂºèÊû∂ÊûÑ Ê∂àÊÅØÂèØÈù†ÊÄßÔºöÁªèËøáÂèÇÊï∞‰ºòÂåñÈÖçÁΩÆÔºåÊ∂àÊÅØÂèØ‰ª•ÂÅöÂà∞0‰∏¢Â§± ÂäüËÉΩÊîØÊåÅÔºöMQÂäüËÉΩËæÉ‰∏∫ÂÆåÂñÑÔºåËøòÊòØÂàÜÂ∏ÉÂºèÁöÑÔºåÊâ©Â±ïÊÄßÂ•Ω ÊîØÊåÅ10‰∫øÁ∫ßÂà´ÁöÑÊ∂àÊÅØÂ†ÜÁßØÔºå‰∏ç‰ºöÂõ†‰∏∫Â†ÜÁßØÂØºËá¥ÊÄßËÉΩ‰∏ãÈôç Ê∫êÁ†ÅÊòØjavaÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÈòÖËØªÊ∫êÁ†ÅÔºåÂÆöÂà∂Ëá™Â∑±ÂÖ¨Âè∏ÁöÑMQÔºåÂèØ‰ª•ÊéåÊéß Áº∫ÁÇπ ÊîØÊåÅÁöÑÂÆ¢Êà∑Á´ØËØ≠Ë®Ä‰∏çÂ§öÔºåÁõÆÂâçÊòØjavaÂèäc++ÔºåÂÖ∂‰∏≠c++‰∏çÊàêÁÜüÔºõ Á§æÂå∫Ê¥ªË∑ÉÂ∫¶‰∏ÄËà¨ MQÊ†∏ÂøÉ‰ª£Á†ÅÊú™ÈÅµÂæ™JMSËßÑËåÉÔºåÊúâ‰∫õÁ≥ªÁªüË¶ÅËøÅÁßªÈúÄË¶Å‰øÆÊîπÂ§ßÈáè‰ª£Á†Å RocketMQ‰ºòÁÇπ ÂçïÊú∫ÂêûÂêêÈáèÔºö‰∏áÁ∫ß topicÊï∞ÈáèÈÉΩÂêûÂêêÈáèÁöÑÂΩ±ÂìçÔºö Êó∂ÊïàÊÄßÔºömsÁ∫ß ÂèØÁî®ÊÄßÔºöÈ´òÔºåÂü∫‰∫é‰∏ª‰ªéÊû∂ÊûÑÂÆûÁé∞È´òÂèØÁî®ÊÄß Ê∂àÊÅØÂèØÈù†ÊÄßÔºöÊúâËæÉ‰ΩéÁöÑÊ¶ÇÁéá‰∏¢Â§±Êï∞ÊçÆ ÂäüËÉΩÊîØÊåÅÔºöMQÈ¢ÜÂüüÁöÑÂäüËÉΩÊûÅÂÖ∂ÂÆåÂ§á ÈÅµÂæ™JMSËßÑËåÉÂÆâË£ÖÈÉ®ÁΩ≤Êñπ‰æø Áº∫ÁÇπ Âú®Âπ∂ÂèëËæÉÂ§öÊó∂ÔºåÊ∂àË¥πÁ´ØÂè™ËÉΩÊé•Êî∂‰∏ÄÈÉ®ÂàÜÔºå‰ºöÂá∫Áé∞‰∏¢Â§±Ê∂àÊÅØÊÉÖÂÜµÔºåÈúÄÈáçÂêØÊ∂àË¥πÁ´ØÊâçËÉΩÊé•Êî∂Âà∞ÈÇ£ÈÉ®ÂàÜÂâ©‰∏ãÁöÑÊ∂àÊÅØ„ÄÇ ÂÆòÊñπÁ§æÂå∫Áé∞Âú®ÂØπActiveMQ 5.xÁª¥Êä§Ë∂äÊù•Ë∂äÂ∞ëÔºåËæÉÂ∞ëÂú®Â§ßËßÑÊ®°ÂêûÂêêÁöÑÂú∫ÊôØ‰∏≠‰ΩøÁî®„ÄÇ]]></content>
      <categories>
        <category>Kafka</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redis-listÂèåÂêëÈìæË°®„ÄêÂ≠¶‰π†Á¨îËÆ∞„Äë]]></title>
    <url>%2Fredis%2FRedis-adlist%2F</url>
    <content type="text"><![CDATA[listÂÆö‰πâ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/* * ÂèåÁ´ØÈìæË°®ËäÇÁÇπ */typedef struct listNode &#123; // ÂâçÁΩÆËäÇÁÇπ struct listNode *prev; // ÂêéÁΩÆËäÇÁÇπ struct listNode *next; // ËäÇÁÇπÁöÑÂÄº void *value;&#125; listNode;/* * ÂèåÁ´ØÈìæË°®Ëø≠‰ª£Âô® */typedef struct listIter &#123; // ÂΩìÂâçËø≠‰ª£Âà∞ÁöÑËäÇÁÇπ listNode *next; // Ëø≠‰ª£ÁöÑÊñπÂêë int direction;&#125; listIter;/* * ÂèåÁ´ØÈìæË°®ÁªìÊûÑ */typedef struct list &#123; // Ë°®Â§¥ËäÇÁÇπ listNode *head; // Ë°®Â∞æËäÇÁÇπ listNode *tail; // ËäÇÁÇπÂÄºÂ§çÂà∂ÂáΩÊï∞ void *(*dup)(void *ptr); // ËäÇÁÇπÂÄºÈáäÊîæÂáΩÊï∞ void (*free)(void *ptr); // ËäÇÁÇπÂÄºÂØπÊØîÂáΩÊï∞ int (*match)(void *ptr, void *key); // ÈìæË°®ÊâÄÂåÖÂê´ÁöÑËäÇÁÇπÊï∞Èáè unsigned long len;&#125; list; listÂ∏∏Áî®ÂáΩÊï∞listCreate-ÂàõÂª∫Êñ∞ÈìæË°®12345678910111213141516171819202122/** * ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈìæË°® * @return ÂàõÂª∫ÊàêÂäüËøîÂõûÈìæË°®ÔºåÂ§±Ë¥•ËøîÂõû NULL * T = O(1) */list *listCreate(void)&#123; struct list *list; // ÂàÜÈÖçÂÜÖÂ≠ò if ((list = zmalloc(sizeof(*list))) == NULL) return NULL; // ÂàùÂßãÂåñÂ±ûÊÄß list-&gt;head = list-&gt;tail = NULL; list-&gt;len = 0; list-&gt;dup = NULL; list-&gt;free = NULL; list-&gt;match = NULL; return list;&#125; listRelease-ÈáäÊîæÊï¥‰∏™ÈìæË°®1234567891011121314151617181920212223242526272829/** * ÈáäÊîæÊï¥‰∏™ÈìæË°®Ôºå‰ª•ÂèäÈìæË°®‰∏≠ÊâÄÊúâËäÇÁÇπ * @param list * T = O(N) */void listRelease(list *list)&#123; unsigned long len; listNode *current, *next; // ÊåáÂêëÂ§¥ÊåáÈíà current = list-&gt;head; // ÈÅçÂéÜÊï¥‰∏™ÈìæË°® len = list-&gt;len; while(len--) &#123; next = current-&gt;next; // Â¶ÇÊûúÊúâËÆæÁΩÆÂÄºÈáäÊîæÂáΩÊï∞ÔºåÈÇ£‰πàË∞ÉÁî®ÂÆÉ if (list-&gt;free) list-&gt;free(current-&gt;value); // ÈáäÊîæËäÇÁÇπÁªìÊûÑ zfree(current); current = next; &#125; // ÈáäÊîæÈìæË°®ÁªìÊûÑ zfree(list);&#125; listAddNodeHead-Ê∑ªÂä†Êñ∞ËäÇÁÇπÂà∞ÈìæË°®Â§¥1234567891011121314151617181920212223242526272829303132333435/** * Â∞Ü‰∏Ä‰∏™ÂåÖÂê´ÊúâÁªôÂÆöÂÄºÊåáÈíà value ÁöÑÊñ∞ËäÇÁÇπÊ∑ªÂä†Âà∞ÈìæË°®ÁöÑË°®Â§¥ * @param list * @param value * @return Â¶ÇÊûú‰∏∫Êñ∞ËäÇÁÇπÂàÜÈÖçÂÜÖÂ≠òÂá∫ÈîôÔºåÈÇ£‰πà‰∏çÊâßË°å‰ªª‰ΩïÂä®‰ΩúÔºå‰ªÖËøîÂõû NULLÔºåÂ¶ÇÊûúÊâßË°åÊàêÂäüÔºåËøîÂõû‰º†ÂÖ•ÁöÑÈìæË°®ÊåáÈíà * T = O(1) */list *listAddNodeHead(list *list, void *value)&#123; listNode *node; // ‰∏∫ËäÇÁÇπÂàÜÈÖçÂÜÖÂ≠ò if ((node = zmalloc(sizeof(*node))) == NULL) return NULL; // ‰øùÂ≠òÂÄºÊåáÈíà node-&gt;value = value; // Ê∑ªÂä†ËäÇÁÇπÂà∞Á©∫ÈìæË°® if (list-&gt;len == 0) &#123; list-&gt;head = list-&gt;tail = node; node-&gt;prev = node-&gt;next = NULL; // Ê∑ªÂä†ËäÇÁÇπÂà∞ÈùûÁ©∫ÈìæË°® &#125; else &#123; node-&gt;prev = NULL; node-&gt;next = list-&gt;head; list-&gt;head-&gt;prev = node; list-&gt;head = node; &#125; // Êõ¥Êñ∞ÈìæË°®ËäÇÁÇπÊï∞ list-&gt;len++; return list;&#125; listAddNodeTail-Ê∑ªÂä†Êñ∞ËäÇÁÇπÂà∞ÈìæË°®Â∞æ1234567891011121314151617181920212223242526272829303132333435/** * Â∞Ü‰∏Ä‰∏™ÂåÖÂê´ÊúâÁªôÂÆöÂÄºÊåáÈíà value ÁöÑÊñ∞ËäÇÁÇπÊ∑ªÂä†Âà∞ÈìæË°®ÁöÑË°®Â∞æ * @param list * @param value Êñ∞ËäÇÁÇπ * @return Â¶ÇÊûú‰∏∫Êñ∞ËäÇÁÇπÂàÜÈÖçÂÜÖÂ≠òÂá∫ÈîôÔºåÈÇ£‰πà‰∏çÊâßË°å‰ªª‰ΩïÂä®‰ΩúÔºå‰ªÖËøîÂõû NULLÔºåÂ¶ÇÊûúÊâßË°åÊàêÂäüÔºåËøîÂõû‰º†ÂÖ•ÁöÑÈìæË°®ÊåáÈíà * T = O(1) */list *listAddNodeTail(list *list, void *value)&#123; listNode *node; // ‰∏∫Êñ∞ËäÇÁÇπÂàÜÈÖçÂÜÖÂ≠ò if ((node = zmalloc(sizeof(*node))) == NULL) return NULL; // ‰øùÂ≠òÂÄºÊåáÈíà node-&gt;value = value; // ÁõÆÊ†áÈìæË°®‰∏∫Á©∫ if (list-&gt;len == 0) &#123; list-&gt;head = list-&gt;tail = node; node-&gt;prev = node-&gt;next = NULL; // ÁõÆÊ†áÈìæË°®ÈùûÁ©∫ &#125; else &#123; node-&gt;prev = list-&gt;tail; node-&gt;next = NULL; list-&gt;tail-&gt;next = node; list-&gt;tail = node; &#125; // Êõ¥Êñ∞ÈìæË°®ËäÇÁÇπÊï∞ list-&gt;len++; return list;&#125; listInsertNode-Â∞ÜÊñ∞ËäÇÁÇπÊ∑ªÂä†Âà∞ËÄÅËäÇÁÇπ‰πãÂâçÊàñ‰πãÂêé1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/** * ÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ÂÄº value ÁöÑÊñ∞ËäÇÁÇπÔºåÂπ∂Â∞ÜÂÆÉÊèíÂÖ•Âà∞ old_node ÁöÑ‰πãÂâçÊàñ‰πãÂêé * Â¶ÇÊûú after ‰∏∫ 0 ÔºåÂ∞ÜÊñ∞ËäÇÁÇπÊèíÂÖ•Âà∞ old_node ‰πãÂâç„ÄÇ * Â¶ÇÊûú after ‰∏∫ 1 ÔºåÂ∞ÜÊñ∞ËäÇÁÇπÊèíÂÖ•Âà∞ old_node ‰πãÂêé„ÄÇ * @param list ÈìæË°® * @param old_node ËÄÅËäÇÁÇπ * @param value ÂÄº * @param after * @return Â¶ÇÊûú‰∏∫Êñ∞ËäÇÁÇπÂàÜÈÖçÂÜÖÂ≠òÂá∫ÈîôÔºåÈÇ£‰πà‰∏çÊâßË°å‰ªª‰ΩïÂä®‰ΩúÔºå‰ªÖËøîÂõû NULLÔºåÂ¶ÇÊûúÊâßË°åÊàêÂäüÔºåËøîÂõû‰º†ÂÖ•ÁöÑÈìæË°®ÊåáÈíà * T = O(1) */list *listInsertNode(list *list, listNode *old_node, void *value, int after) &#123; listNode *node; // ÂàõÂª∫Êñ∞ËäÇÁÇπ if ((node = zmalloc(sizeof(*node))) == NULL) return NULL; // ‰øùÂ≠òÂÄº node-&gt;value = value; // Â∞ÜÊñ∞ËäÇÁÇπÊ∑ªÂä†Âà∞ÁªôÂÆöËäÇÁÇπ‰πãÂêé if (after) &#123; node-&gt;prev = old_node; node-&gt;next = old_node-&gt;next; // ÁªôÂÆöËäÇÁÇπÊòØÂéüË°®Â∞æËäÇÁÇπ if (list-&gt;tail == old_node) &#123; list-&gt;tail = node; &#125; // Â∞ÜÊñ∞ËäÇÁÇπÊ∑ªÂä†Âà∞ÁªôÂÆöËäÇÁÇπ‰πãÂâç &#125; else &#123; node-&gt;next = old_node; node-&gt;prev = old_node-&gt;prev; // ÁªôÂÆöËäÇÁÇπÊòØÂéüË°®Â§¥ËäÇÁÇπ if (list-&gt;head == old_node) &#123; list-&gt;head = node; &#125; &#125; // Êõ¥Êñ∞Êñ∞ËäÇÁÇπÁöÑÂâçÁΩÆÊåáÈíà if (node-&gt;prev != NULL) &#123; node-&gt;prev-&gt;next = node; &#125; // Êõ¥Êñ∞Êñ∞ËäÇÁÇπÁöÑÂêéÁΩÆÊåáÈíà if (node-&gt;next != NULL) &#123; node-&gt;next-&gt;prev = node; &#125; // Êõ¥Êñ∞ÈìæË°®ËäÇÁÇπÊï∞ list-&gt;len++; return list;&#125; listDelNode-Âà†Èô§ÊåáÂÆöËäÇÁÇπ123456789101112131415161718192021222324252627282930/** * ‰ªéÈìæË°® list ‰∏≠Âà†Èô§ÁªôÂÆöËäÇÁÇπ node * ÂØπËäÇÁÇπÁßÅÊúâÂÄº(private value of the node)ÁöÑÈáäÊîæÂ∑•‰ΩúÁî±Ë∞ÉÁî®ËÄÖËøõË°å„ÄÇ * @param list * @param node * T = O(1) */void listDelNode(list *list, listNode *node)&#123; // Ë∞ÉÊï¥ÂâçÁΩÆËäÇÁÇπÁöÑÊåáÈíà if (node-&gt;prev) node-&gt;prev-&gt;next = node-&gt;next; else list-&gt;head = node-&gt;next; // Ë∞ÉÊï¥ÂêéÁΩÆËäÇÁÇπÁöÑÊåáÈíà if (node-&gt;next) node-&gt;next-&gt;prev = node-&gt;prev; else list-&gt;tail = node-&gt;prev; // ÈáäÊîæÂÄº if (list-&gt;free) list-&gt;free(node-&gt;value); // ÈáäÊîæËäÇÁÇπ zfree(node); // ÈìæË°®Êï∞Âáè‰∏Ä list-&gt;len--;&#125; listGetIterator-ÁîüÊàêÈìæË°®ÁöÑËø≠‰ª£Âô®123456789101112131415161718192021222324252627/** * ‰∏∫ÁªôÂÆöÈìæË°®ÂàõÂª∫‰∏Ä‰∏™Ëø≠‰ª£Âô®Ôºå * ‰πãÂêéÊØèÊ¨°ÂØπËøô‰∏™Ëø≠‰ª£Âô®Ë∞ÉÁî® listNext ÈÉΩËøîÂõûË¢´Ëø≠‰ª£Âà∞ÁöÑÈìæË°®ËäÇÁÇπ * @param list ÈìæË°® * @param direction Ëø≠‰ª£ÊñπÂêë * AL_START_HEAD Ôºö‰ªéË°®Â§¥ÂêëË°®Â∞æËø≠‰ª£ * AL_START_TAIL Ôºö‰ªéË°®Â∞æÊÉ≥Ë°®Â§¥Ëø≠‰ª£ * @return Ëø≠‰ª£Âô® * T = O(1) */listIter *listGetIterator(list *list, int direction)&#123; // ‰∏∫Ëø≠‰ª£Âô®ÂàÜÈÖçÂÜÖÂ≠ò listIter *iter; if ((iter = zmalloc(sizeof(*iter))) == NULL) return NULL; // Ê†πÊçÆËø≠‰ª£ÊñπÂêëÔºåËÆæÁΩÆËø≠‰ª£Âô®ÁöÑËµ∑ÂßãËäÇÁÇπ if (direction == AL_START_HEAD) iter-&gt;next = list-&gt;head; else iter-&gt;next = list-&gt;tail; // ËÆ∞ÂΩïËø≠‰ª£ÊñπÂêë iter-&gt;direction = direction; return iter;&#125; listNext-ËøîÂõûËø≠‰ª£Âô®ÂΩìÂâçÊâÄÊåáÂêëÁöÑËäÇÁÇπ1234567891011121314151617181920212223/** * ËøîÂõûËø≠‰ª£Âô®ÂΩìÂâçÊâÄÊåáÂêëÁöÑËäÇÁÇπ„ÄÇ * Âà†Èô§ÂΩìÂâçËäÇÁÇπÊòØÂÖÅËÆ∏ÁöÑÔºå‰ΩÜ‰∏çËÉΩ‰øÆÊîπÈìæË°®ÈáåÁöÑÂÖ∂‰ªñËäÇÁÇπ„ÄÇ * @param iter Ëø≠‰ª£Âô® * @return ÂáΩÊï∞Ë¶Å‰πàËøîÂõû‰∏Ä‰∏™ËäÇÁÇπÔºåË¶Å‰πàËøîÂõû NULL * T = O(1) */listNode *listNext(listIter *iter)&#123; listNode *current = iter-&gt;next; if (current != NULL) &#123; // Ê†πÊçÆÊñπÂêëÈÄâÊã©‰∏ã‰∏Ä‰∏™ËäÇÁÇπ if (iter-&gt;direction == AL_START_HEAD) // ‰øùÂ≠ò‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÈò≤Ê≠¢ÂΩìÂâçËäÇÁÇπË¢´Âà†Èô§ËÄåÈÄ†ÊàêÊåáÈíà‰∏¢Â§± iter-&gt;next = current-&gt;next; else // ‰øùÂ≠ò‰∏ã‰∏Ä‰∏™ËäÇÁÇπÔºåÈò≤Ê≠¢ÂΩìÂâçËäÇÁÇπË¢´Âà†Èô§ËÄåÈÄ†ÊàêÊåáÈíà‰∏¢Â§± iter-&gt;next = current-&gt;prev; &#125; return current;&#125; listDup-Â§çÂà∂Êï¥‰∏™ÈìæË°®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * Â§çÂà∂Êï¥‰∏™ÈìæË°®„ÄÇ * Êó†ËÆ∫Â§çÂà∂ÊòØÊàêÂäüËøòÊòØÂ§±Ë¥•ÔºåËæìÂÖ•ËäÇÁÇπÈÉΩ‰∏ç‰ºö‰øÆÊîπ„ÄÇ * Â¶ÇÊûúÈìæË°®ÊúâËÆæÁΩÆÂÄºÂ§çÂà∂ÂáΩÊï∞ dup ÔºåÈÇ£‰πàÂØπÂÄºÁöÑÂ§çÂà∂Â∞Ü‰ΩøÁî®Â§çÂà∂ÂáΩÊï∞ËøõË°åÔºå * Âê¶ÂàôÔºåÊñ∞ËäÇÁÇπÂ∞ÜÂíåÊóßËäÇÁÇπÂÖ±‰∫´Âêå‰∏Ä‰∏™ÊåáÈíà„ÄÇ * @param orig * @return Â§çÂà∂ÊàêÂäüËøîÂõûËæìÂÖ•ÈìæË°®ÁöÑÂâØÊú¨ÔºåÂ¶ÇÊûúÂõ†‰∏∫ÂÜÖÂ≠ò‰∏çË∂≥ËÄåÈÄ†ÊàêÂ§çÂà∂Â§±Ë¥•ÔºåËøîÂõû NULL „ÄÇ * T = O(N) */list *listDup(list *orig)&#123; list *copy; listIter *iter; listNode *node; // ÂàõÂª∫Êñ∞ÈìæË°® if ((copy = listCreate()) == NULL) return NULL; // ËÆæÁΩÆËäÇÁÇπÂÄºÂ§ÑÁêÜÂáΩÊï∞ copy-&gt;dup = orig-&gt;dup; copy-&gt;free = orig-&gt;free; copy-&gt;match = orig-&gt;match; // Ëø≠‰ª£Êï¥‰∏™ËæìÂÖ•ÈìæË°® iter = listGetIterator(orig, AL_START_HEAD); while((node = listNext(iter)) != NULL) &#123; void *value; // Â§çÂà∂ËäÇÁÇπÂÄºÂà∞Êñ∞ËäÇÁÇπ if (copy-&gt;dup) &#123; value = copy-&gt;dup(node-&gt;value); if (value == NULL) &#123; listRelease(copy); listReleaseIterator(iter); return NULL; &#125; &#125; else value = node-&gt;value; // Â∞ÜËäÇÁÇπÊ∑ªÂä†Âà∞ÈìæË°® if (listAddNodeTail(copy, value) == NULL) &#123; listRelease(copy); listReleaseIterator(iter); return NULL; &#125; &#125; // ÈáäÊîæËø≠‰ª£Âô® listReleaseIterator(iter); // ËøîÂõûÂâØÊú¨ return copy;&#125; listSearchKey-Êü•ÊâæÂÄº‰∏∫keyÁöÑËäÇÁÇπ123456789101112131415161718192021222324252627282930313233343536373839/** * Êü•ÊâæÈìæË°® list ‰∏≠ÂÄºÂíå key ÂåπÈÖçÁöÑËäÇÁÇπ„ÄÇ * ÂØπÊØîÊìç‰ΩúÁî±ÈìæË°®ÁöÑ match ÂáΩÊï∞Ë¥üË¥£ËøõË°åÔºåÂ¶ÇÊûúÊ≤°ÊúâËÆæÁΩÆ match ÂáΩÊï∞Ôºå * ÈÇ£‰πàÁõ¥Êé•ÈÄöËøáÂØπÊØîÂÄºÁöÑÊåáÈíàÊù•ÂÜ≥ÂÆöÊòØÂê¶ÂåπÈÖç„ÄÇ * @param list ÈìæË°® * @param key ÂÄº * @return Â¶ÇÊûúÂåπÈÖçÊàêÂäüÔºåÈÇ£‰πàÁ¨¨‰∏Ä‰∏™ÂåπÈÖçÁöÑËäÇÁÇπ‰ºöË¢´ËøîÂõû„ÄÇ * Â¶ÇÊûúÊ≤°ÊúâÂåπÈÖç‰ªª‰ΩïËäÇÁÇπÔºåÈÇ£‰πàËøîÂõû NULL „ÄÇ */listNode *listSearchKey(list *list, void *key)&#123; listIter *iter; listNode *node; // Ëø≠‰ª£Êï¥‰∏™ÈìæË°® iter = listGetIterator(list, AL_START_HEAD); while((node = listNext(iter)) != NULL) &#123; // ÂØπÊØî if (list-&gt;match) &#123; if (list-&gt;match(node-&gt;value, key)) &#123; listReleaseIterator(iter); // ÊâæÂà∞ return node; &#125; &#125; else &#123; if (key == node-&gt;value) &#123; listReleaseIterator(iter); // ÊâæÂà∞ return node; &#125; &#125; &#125; listReleaseIterator(iter); // Êú™ÊâæÂà∞ return NULL;&#125; listIndex-ËøîÂõûÈìæË°®Âú®ÊåáÂÆöÁ¥¢Âºï‰∏äÁöÑÂÄº1234567891011121314151617181920212223/** * ËøîÂõûÈìæË°®Âú®ÁªôÂÆöÁ¥¢Âºï‰∏äÁöÑÂÄº„ÄÇ * @param list * @param index Á¥¢Âºï‰ª• 0 ‰∏∫Ëµ∑ÂßãÔºå‰πüÂèØ‰ª•ÊòØË¥üÊï∞Ôºå -1 Ë°®Á§∫ÈìæË°®ÊúÄÂêé‰∏Ä‰∏™ËäÇÁÇπÔºåËØ∏Â¶ÇÊ≠§Á±ª„ÄÇ * @return Â¶ÇÊûúÁ¥¢ÂºïË∂ÖÂá∫ËåÉÂõ¥Ôºàout of rangeÔºâÔºåËøîÂõû NULL „ÄÇ * T = O(N) */listNode *listIndex(list *list, long index) &#123; listNode *n; // Â¶ÇÊûúÁ¥¢Âºï‰∏∫Ë¥üÊï∞Ôºå‰ªéË°®Â∞æÂºÄÂßãÊü•Êâæ if (index &lt; 0) &#123; index = (-index)-1; n = list-&gt;tail; while(index-- &amp;&amp; n) n = n-&gt;prev; // Â¶ÇÊûúÁ¥¢Âºï‰∏∫Ê≠£Êï∞Ôºå‰ªéË°®Â§¥ÂºÄÂßãÊü•Êâæ &#125; else &#123; n = list-&gt;head; while(index-- &amp;&amp; n) n = n-&gt;next; &#125; return n;&#125; listRewind-ËÆæÁΩÆÊ≠£ÂêëËø≠‰ª£Âô®12345678910/** * Â∞ÜËø≠‰ª£Âô®ÁöÑÊñπÂêëËÆæÁΩÆ‰∏∫ AL_START_HEAD ÔºåÂπ∂Â∞ÜËø≠‰ª£ÊåáÈíàÈáçÊñ∞ÊåáÂêëË°®Â§¥ËäÇÁÇπ„ÄÇ * @param list ÈìæË°® * @param li Ëø≠‰ª£Âô® * T = O(1) */void listRewind(list *list, listIter *li) &#123; li-&gt;next = list-&gt;head; li-&gt;direction = AL_START_HEAD;&#125; listRewindTail-ËÆæÁΩÆÂèçÂêëËø≠‰ª£Âô®12345678910/** * Â∞ÜËø≠‰ª£Âô®ÁöÑÊñπÂêëËÆæÁΩÆ‰∏∫ AL_START_TAIL, Âπ∂Â∞ÜËø≠‰ª£ÊåáÈíàÈáçÊñ∞ÊåáÂêëË°®Â∞æËäÇÁÇπ„ÄÇ * @param list ÈìæË°® * @param li Ëø≠‰ª£Âô® * T = O(1) */void listRewindTail(list *list, listIter *li) &#123; li-&gt;next = list-&gt;tail; li-&gt;direction = AL_START_TAIL;&#125; listRotate-Â∞ÜÈìæË°®Â∞æÁßªÂä®Âà∞Ë°®Â§¥1234567891011121314151617181920/ * ÂèñÂá∫ÈìæË°®ÁöÑË°®Â∞æËäÇÁÇπÔºåÂπ∂Â∞ÜÂÆÉÁßªÂä®Âà∞Ë°®Â§¥ÔºåÊàê‰∏∫Êñ∞ÁöÑË°®Â§¥ËäÇÁÇπ„ÄÇ * @param list * T = O(1) */void listRotate(list *list) &#123; listNode *tail = list-&gt;tail; if (listLength(list) &lt;= 1) return; // ÂèñÂá∫Ë°®Â∞æËäÇÁÇπ list-&gt;tail = tail-&gt;prev; list-&gt;tail-&gt;next = NULL; // ÊèíÂÖ•Âà∞Ë°®Â§¥ list-&gt;head-&gt;prev = tail; tail-&gt;prev = NULL; tail-&gt;next = list-&gt;head; list-&gt;head = tail;&#125;]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>Ê∫êÁ†Å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[redis-sdsÂä®ÊÄÅÂ≠óÁ¨¶‰∏≤„ÄêÂ≠¶‰π†Á¨îËÆ∞„Äë]]></title>
    <url>%2Fredis%2FRedis-sds%2F</url>
    <content type="text"><![CDATA[SDSÂÆö‰πâ12345678910111213141516171819/* * Á±ªÂûãÂà´ÂêçÔºåÁî®‰∫éÊåáÂêë sdshdr ÁöÑ buf Â±ûÊÄß */typedef char *sds;/* * ‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÂØπË±°ÁöÑÁªìÊûÑ */struct sdshdr &#123; // buf ‰∏≠Â∑≤Âç†Áî®Á©∫Èó¥ÁöÑÈïøÂ∫¶ int len; // buf ‰∏≠Ââ©‰ΩôÂèØÁî®Á©∫Èó¥ÁöÑÈïøÂ∫¶ int free; // Êï∞ÊçÆÁ©∫Èó¥ char buf[];&#125;; SDSÂ∏∏Áî®ÂáΩÊï∞sdslen-sdsÈïøÂ∫¶123456789/* * ËøîÂõû sds ÂÆûÈôÖ‰øùÂ≠òÁöÑÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ * * T = O(1) */static inline size_t sdslen(const sds s) &#123; struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr))); return sh-&gt;len;&#125; s ÂÆûÈôÖ‰∏äÂ≠òÁöÑÊòØbufÈ¶ñ‰∏™charÊï∞ÊçÆÁöÑÂú∞ÂùÄÔºå‰πüÂ∞±ÊòØÂêëÂâçÁßªÂä®8‰∏™Â≠óËäÇÔºåÂ∞±ËÉΩÂà∞sdshdrÁöÑlenÁöÑÈ¶ñÂú∞ÂùÄchar buf[]Ëøô‰∏™Êï∞ÁªÑÊ≤°ÊúâÂ§ßÂ∞èÔºåÊòØÊâÄË∞ìÁöÑÊüîÊÄßÊï∞ÁªÑÔºåÊòØ‰∏çÂç†ÊçÆÂÜÖÂ≠òÂ§ßÂ∞èÁöÑÔºåÊâÄ‰ª•sizeof(struct sdshdr)‰∏∫8„ÄÇÂÖ∑‰ΩìÁªìÊûÑÂ¶Ç‰∏ãÂõæ sdsavail-sdsÂèØÁî®freeÁ©∫Èó¥ÈïøÂ∫¶123456789/* * ËøîÂõû sds ÂèØÁî®Á©∫Èó¥ÁöÑÈïøÂ∫¶ * * T = O(1) */static inline size_t sdsavail(const sds s) &#123; struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr))); return sh-&gt;free;&#125; sdsnewlen-Ê†πÊçÆÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÂàõÂª∫sds1234567891011121314151617181920212223242526272829303132333435363738/** * Ê†πÊçÆÁªôÂÆöÁöÑÂàùÂßãÂåñÂ≠óÁ¨¶‰∏≤ init ÂíåÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ initlen,ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑ sds * @param init ÂàùÂßãÂåñÂ≠óÁ¨¶‰∏≤ÊåáÈíà * @param initlen ÂàùÂßãÂåñÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ * @return ÂàõÂª∫ÊàêÂäüËøîÂõû sdshdr Áõ∏ÂØπÂ∫îÁöÑ sds,ÂàõÂª∫Â§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdsnewlen(const void *init, size_t initlen) &#123; struct sdshdr *sh; // Ê†πÊçÆÊòØÂê¶ÊúâÂàùÂßãÂåñÂÜÖÂÆπÔºåÈÄâÊã©ÈÄÇÂΩìÁöÑÂÜÖÂ≠òÂàÜÈÖçÊñπÂºè // T = O(N) if (init) &#123; // zmalloc ‰∏çÂàùÂßãÂåñÊâÄÂàÜÈÖçÁöÑÂÜÖÂ≠ò sh = zmalloc(sizeof(struct sdshdr)+initlen+1); &#125; else &#123; // zcalloc Â∞ÜÂàÜÈÖçÁöÑÂÜÖÂ≠òÂÖ®ÈÉ®ÂàùÂßãÂåñ‰∏∫ 0 sh = zcalloc(sizeof(struct sdshdr)+initlen+1); &#125; // ÂÜÖÂ≠òÂàÜÈÖçÂ§±Ë¥•ÔºåËøîÂõû if (sh == NULL) return NULL; // ËÆæÁΩÆÂàùÂßãÂåñÈïøÂ∫¶ sh-&gt;len = initlen; // Êñ∞ sds ‰∏çÈ¢ÑÁïô‰ªª‰ΩïÁ©∫Èó¥ sh-&gt;free = 0; // Â¶ÇÊûúÊúâÊåáÂÆöÂàùÂßãÂåñÂÜÖÂÆπÔºåÂ∞ÜÂÆÉ‰ª¨Â§çÂà∂Âà∞ sdshdr ÁöÑ buf ‰∏≠ // T = O(N) if (initlen &amp;&amp; init) memcpy(sh-&gt;buf, init, initlen); // ‰ª• \0 ÁªìÂ∞æ sh-&gt;buf[initlen] = '\0'; // ËøîÂõû buf ÈÉ®ÂàÜÔºåËÄå‰∏çÊòØÊï¥‰∏™ sdshdr return (char*)sh-&gt;buf;&#125; sdsnew-ÂàõÂª∫sds12345678910/** * Ê†πÊçÆÁªôÂÆöÂ≠óÁ¨¶‰∏≤ init ÔºåÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ÂêåÊ†∑Â≠óÁ¨¶‰∏≤ÁöÑ sds * @param init Â¶ÇÊûúËæìÂÖ•‰∏∫ NULL ÔºåÈÇ£‰πàÂàõÂª∫‰∏Ä‰∏™Á©∫ÁôΩ sds * @return ÂàõÂª∫ÊàêÂäüËøîÂõû sdshdr Áõ∏ÂØπÂ∫îÁöÑ sdsÔºåÂàõÂª∫Â§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdsnew(const char *init) &#123; size_t initlen = (init == NULL) ? 0 : strlen(init); return sdsnewlen(init, initlen);&#125; sdsempty-ÂàõÂª∫Á©∫sds12345678/** * ÂàõÂª∫Âπ∂ËøîÂõû‰∏Ä‰∏™Âè™‰øùÂ≠ò‰∫ÜÁ©∫Â≠óÁ¨¶‰∏≤ "" ÁöÑ sds * @return ÂàõÂª∫ÊàêÂäüËøîÂõû sdshdr Áõ∏ÂØπÂ∫îÁöÑ sds,ÂàõÂª∫Â§±Ë¥•ËøîÂõû NULL * T = O(1) */sds sdsempty(void) &#123; return sdsnewlen("",0);&#125; sdsdup-Â§çÂà∂sdsÂàõÂª∫ÂâØÊú¨123456789/** * Â§çÂà∂ÁªôÂÆö sds ÂàõÂª∫ÂâØÊú¨ * @param s sds * @return ÂàõÂª∫ÊàêÂäüËøîÂõûËæìÂÖ• sds ÁöÑÂâØÊú¨ * T = O(N) */sds sdsdup(const sds s) &#123; return sdsnewlen(s, sdslen(s));&#125; sdsfree-ÈáäÊîæsds123456789/** * ÈáäÊîæÁªôÂÆöÁöÑ sds * @param s * T = O(N) */void sdsfree(sds s) &#123; if (s == NULL) return; zfree(s-sizeof(struct sdshdr));&#125; sdsgrowzero-Êâ©ÂÖÖsdsÊú™‰ΩøÁî®Á©∫Èó¥Ë°•0123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687/** * Â∞Ü sds Êâ©ÂÖÖËá≥ÊåáÂÆöÈïøÂ∫¶ÔºåÊú™‰ΩøÁî®ÁöÑÁ©∫Èó¥‰ª• 0 Â≠óËäÇÂ°´ÂÖÖ„ÄÇ * @param s * @param len ÊåáÂÆöÈïøÂ∫¶ * @return Êâ©ÂÖÖÊàêÂäüËøîÂõûÊñ∞ sds ÔºåÂ§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdsgrowzero(sds s, size_t len) &#123; struct sdshdr *sh = (void*)(s-(sizeof(struct sdshdr))); size_t totlen, curlen = sh-&gt;len; // Â¶ÇÊûú len ÊØîÂ≠óÁ¨¶‰∏≤ÁöÑÁé∞ÊúâÈïøÂ∫¶Â∞èÔºå // ÈÇ£‰πàÁõ¥Êé•ËøîÂõûÔºå‰∏çÂÅöÂä®‰Ωú if (len &lt;= curlen) return s; // Êâ©Â±ï sds // T = O(N) s = sdsMakeRoomFor(s,len-curlen); // Â¶ÇÊûúÂÜÖÂ≠ò‰∏çË∂≥ÔºåÁõ¥Êé•ËøîÂõû if (s == NULL) return NULL; // Â∞ÜÊñ∞ÂàÜÈÖçÁöÑÁ©∫Èó¥Áî® 0 Â°´ÂÖÖÔºåÈò≤Ê≠¢Âá∫Áé∞ÂûÉÂúæÂÜÖÂÆπ // T = O(N) sh = (void*)(s-(sizeof(struct sdshdr))); memset(s+curlen,0,(len-curlen+1)); // Êõ¥Êñ∞Â±ûÊÄß totlen = sh-&gt;len+sh-&gt;free; sh-&gt;len = len; sh-&gt;free = totlen-sh-&gt;len; // ËøîÂõûÊñ∞ÁöÑ sds return s;&#125;/** * ÂØπ sds ‰∏≠ buf ÁöÑÈïøÂ∫¶ËøõË°åÊâ©Â±ïÔºåÁ°Æ‰øùÂú®ÂáΩÊï∞ÊâßË°å‰πãÂêéÔºå * buf Ëá≥Â∞ë‰ºöÊúâ addlen + 1 ÈïøÂ∫¶ÁöÑÁ©∫‰ΩôÁ©∫Èó¥ÔºàÈ¢ùÂ§ñÁöÑ 1 Â≠óËäÇÊòØ‰∏∫ \0 ÂáÜÂ§áÁöÑÔºâ * @param s * @param addlen * @return Êâ©Â±ïÊàêÂäüËøîÂõûÊâ©Â±ïÂêéÁöÑ sdsÔºåÊâ©Â±ïÂ§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdsMakeRoomFor(sds s, size_t addlen) &#123; struct sdshdr *sh, *newsh; // Ëé∑Âèñ s ÁõÆÂâçÁöÑÁ©∫‰ΩôÁ©∫Èó¥ÈïøÂ∫¶ size_t free = sdsavail(s); size_t len, newlen; // s ÁõÆÂâçÁöÑÁ©∫‰ΩôÁ©∫Èó¥Â∑≤ÁªèË∂≥Â§üÔºåÊó†È°ªÂÜçËøõË°åÊâ©Â±ïÔºåÁõ¥Êé•ËøîÂõû if (free &gt;= addlen) return s; // Ëé∑Âèñ s ÁõÆÂâçÂ∑≤Âç†Áî®Á©∫Èó¥ÁöÑÈïøÂ∫¶ len = sdslen(s); sh = (void*) (s-(sizeof(struct sdshdr))); // s ÊúÄÂ∞ëÈúÄË¶ÅÁöÑÈïøÂ∫¶ newlen = (len+addlen); // Ê†πÊçÆÊñ∞ÈïøÂ∫¶Ôºå‰∏∫ s ÂàÜÈÖçÊñ∞Á©∫Èó¥ÊâÄÈúÄÁöÑÂ§ßÂ∞è if (newlen &lt; SDS_MAX_PREALLOC) // Â¶ÇÊûúÊñ∞ÈïøÂ∫¶Â∞è‰∫é SDS_MAX_PREALLOC // ÈÇ£‰πà‰∏∫ÂÆÉÂàÜÈÖç‰∏§ÂÄç‰∫éÊâÄÈúÄÈïøÂ∫¶ÁöÑÁ©∫Èó¥ newlen *= 2; else // Âê¶ÂàôÔºåÂàÜÈÖçÈïøÂ∫¶‰∏∫ÁõÆÂâçÈïøÂ∫¶Âä†‰∏ä SDS_MAX_PREALLOC newlen += SDS_MAX_PREALLOC; // T = O(N) newsh = zrealloc(sh, sizeof(struct sdshdr)+newlen+1); // ÂÜÖÂ≠ò‰∏çË∂≥ÔºåÂàÜÈÖçÂ§±Ë¥•ÔºåËøîÂõû if (newsh == NULL) return NULL; // Êõ¥Êñ∞ sds ÁöÑÁ©∫‰ΩôÈïøÂ∫¶ newsh-&gt;free = newlen - len; // ËøîÂõû sds return newsh-&gt;buf;&#125;/* * ÊúÄÂ§ßÈ¢ÑÂàÜÈÖçÈïøÂ∫¶ */#define SDS_MAX_PREALLOC (1024*1024) sdscatlen-Ê†πÊçÆÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶Â∞ÜÂ≠óÁ¨¶‰∏≤ËøΩÂä†Âà∞sdsÊú´Â∞æ12345678910111213141516171819202122232425262728293031323334353637/** * Â∞ÜÈïøÂ∫¶‰∏∫ len ÁöÑÂ≠óÁ¨¶‰∏≤ t ËøΩÂä†Âà∞ sds ÁöÑÂ≠óÁ¨¶‰∏≤Êú´Â∞æ * @param s * @param t Â≠óÁ¨¶‰∏≤t * @param len tÁöÑÈïøÂ∫¶ * @return ËøΩÂä†ÊàêÂäüËøîÂõûÊñ∞ sds ÔºåÂ§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdscatlen(sds s, const void *t, size_t len) &#123; struct sdshdr *sh; // ÂéüÊúâÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ size_t curlen = sdslen(s); // Êâ©Â±ï sds Á©∫Èó¥ // T = O(N) s = sdsMakeRoomFor(s,len); // ÂÜÖÂ≠ò‰∏çË∂≥ÔºüÁõ¥Êé•ËøîÂõû if (s == NULL) return NULL; // Â§çÂà∂ t ‰∏≠ÁöÑÂÜÖÂÆπÂà∞Â≠óÁ¨¶‰∏≤ÂêéÈÉ® // T = O(N) sh = (void*) (s-(sizeof(struct sdshdr))); memcpy(s+curlen, t, len); // Êõ¥Êñ∞Â±ûÊÄß sh-&gt;len = curlen+len; sh-&gt;free = sh-&gt;free-len; // Ê∑ªÂä†Êñ∞ÁªìÂ∞æÁ¨¶Âè∑ s[curlen+len] = '\0'; // ËøîÂõûÊñ∞ sds return s;&#125; sdscat-Â∞ÜÂ≠óÁ¨¶‰∏≤ËøΩÂä†Âà∞sdsÊú´Â∞æ12345678/** * Â∞ÜÁªôÂÆöÂ≠óÁ¨¶‰∏≤ t ËøΩÂä†Âà∞ sds ÁöÑÊú´Â∞æ * @return ËøΩÂä†ÊàêÂäüËøîÂõûÊñ∞ sds ÔºåÂ§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdscat(sds s, const char *t) &#123; return sdscatlen(s, t, strlen(t));&#125; sdscatsds-Â∞ÜsdsËøΩÂä†Âà∞Âè¶‰∏Ä‰∏™sdsÊú´Â∞æ12345678/** * Â∞ÜÂè¶‰∏Ä‰∏™ sds ËøΩÂä†Âà∞‰∏Ä‰∏™ sds ÁöÑÊú´Â∞æ * @return ËøΩÂä†ÊàêÂäüËøîÂõûÊñ∞ sds ÔºåÂ§±Ë¥•ËøîÂõû NULL * T = O(N) */sds sdscatsds(sds s, const sds t) &#123; return sdscatlen(s, t, sdslen(t));&#125; sdscpylen-Â∞ÜÂ≠óÁ¨¶‰∏≤ÂâçlenÂ§çÂà∂Âà∞sds123456789101112131415161718192021222324252627282930313233343536/** * Â∞ÜÂ≠óÁ¨¶‰∏≤ t ÁöÑÂâç len ‰∏™Â≠óÁ¨¶Â§çÂà∂Âà∞ sds s ÂΩì‰∏≠,Ë¶ÜÁõñÂéüÊúâÁöÑÂ≠óÁ¨¶ * Â¶ÇÊûú sds ÁöÑÈïøÂ∫¶Â∞ë‰∫é len ‰∏™Â≠óÁ¨¶ÔºåÈÇ£‰πàÊâ©Â±ï sds * @return Â§çÂà∂ÊàêÂäüËøîÂõûÊñ∞ÁöÑ sds ÔºåÂê¶ÂàôËøîÂõû NULL * T = O(N) */sds sdscpylen(sds s, const char *t, size_t len) &#123; struct sdshdr *sh = (void*) (s-(sizeof(struct sdshdr))); // sds Áé∞Êúâ buf ÁöÑÈïøÂ∫¶ size_t totlen = sh-&gt;free+sh-&gt;len; // Â¶ÇÊûú s ÁöÑ buf ÈïøÂ∫¶‰∏çÊª°Ë∂≥ len ÔºåÈÇ£‰πàÊâ©Â±ïÂÆÉ if (totlen &lt; len) &#123; // T = O(N) s = sdsMakeRoomFor(s,len-sh-&gt;len); if (s == NULL) return NULL; sh = (void*) (s-(sizeof(struct sdshdr))); totlen = sh-&gt;free+sh-&gt;len; &#125; // Â§çÂà∂ÂÜÖÂÆπ // T = O(N) memcpy(s, t, len); // Ê∑ªÂä†ÁªàÁªìÁ¨¶Âè∑ s[len] = '\0'; // Êõ¥Êñ∞Â±ûÊÄß sh-&gt;len = len; sh-&gt;free = totlen-len; // ËøîÂõûÊñ∞ÁöÑ sds return s;&#125; sdscpy-Â∞ÜÂ≠óÁ¨¶‰∏≤Â§çÂà∂Âà∞ sds ÂΩì‰∏≠12345678/** * Â∞ÜÂ≠óÁ¨¶‰∏≤Â§çÂà∂Âà∞ sds ÂΩì‰∏≠,Ë¶ÜÁõñÂéüÊúâÁöÑÂ≠óÁ¨¶ * @return Â§çÂà∂ÊàêÂäüËøîÂõûÊñ∞ÁöÑ sds ÔºåÂê¶ÂàôËøîÂõû NULL * T = O(N) */sds sdscpy(sds s, const char *t) &#123; return sdscpylen(s, t, strlen(t));&#125;]]></content>
      <categories>
        <category>redis</category>
      </categories>
      <tags>
        <tag>redis</tag>
        <tag>Ê∫êÁ†Å</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäËá™Â∑±Âä®ÊâãÂÜôJAVAËôöÊãüÊú∫„ÄãÂ≠¶‰π†Á¨îËÆ∞‰∏â„ÄêËß£ÊûêclassÊñá‰ª∂„Äë]]></title>
    <url>%2FJVM%2FJVM3%2F</url>
    <content type="text"><![CDATA[javaËôöÊãüÊú∫ËßÑËåÉ‰∏≠‰ΩøÁî®‰∏ÄÁßçÁ±ª‰ººCËØ≠Ë®ÄÁªìÊûÑ‰ΩìÊù•ÊèèËø∞ClassÊñá‰ª∂ÁöÑÂü∫Êú¨ÁªìÊûÑÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö 123456789101112131415161718ClassFile &#123; u4 magic;//È≠îÊï∞ u2 minor_version;//‰∏ªÁâàÊú¨Âè∑ u2 major_version;//Ê¨°ÁâàÊú¨Âè∑ u2 constant_pool_count;//Â∏∏ÈáèÊ±†ÈïøÂ∫¶ cp_info constant_pool[constant_pool_count-1];//Â∏∏ÈáèÊ±†‰ø°ÊÅØ u2 access_flags;//ËØ•Á±ªÁöÑËÆøÈóÆ‰øÆÈ•∞Á¨¶ u2 this_class;//Á±ªÁ¥¢Âºï u2 super_class;//Áà∂Á±ªÁ¥¢Âºï u2 interfaces_count;//Êé•Âè£‰∏™Êï∞ u2 interfaces[interfaces_count];//Êé•Âè£ËØ¶ÁªÜ‰ø°ÊÅØ u2 fields_count;//Â±ûÊÄß‰∏™Êï∞ field_info fields[fields_count];//Â±ûÊÄßËØ¶ÁªÜ‰ø°ÊÅØ u2 methods_count;//ÊñπÊ≥ï‰∏™Êï∞ method_info methods[methods_count];//ÊñπÊ≥ïËØ¶ÊÉÖ u2 attributes_count;//Á±ªÊñá‰ª∂Â±ûÊÄß‰∏™Êï∞ attribute_info attributes[attributes_count];//Á±ªÊñá‰ª∂Â±ûÊÄßËØ¶ÁªÜ‰ø°ÊÅØ&#125; ÂáÜÂ§áÂ∑•‰ΩúÊääch02ÁöÑÁõÆÂΩïÁªìÊûÑÂ§çÂà∂‰∏Ä‰ªΩÊîπÂêçch03ÔºåÂú®ch03ÁöÑÁõÆÂΩï‰∏≠ÂàõÂª∫‰∏Ä‰∏™classfileÂ≠êÁõÆÂΩï„ÄÇ 12345678|-jvmgo |-ch01 |-ch01 |-ch03 |-classfile |-classpath |-cmd.go |-main.go ‰∏∫‰∫ÜÂ≠¶‰π†ÁºñËØëÂêéÁöÑclassÊñá‰ª∂ÔºåÊñ∞Âª∫‰∏Ä‰∏™classFileTest.javaÁÑ∂ÂêéÁºñËØë 12345678910111213public class ClassFileTest &#123; public static final boolean FLAG = true; public static final byte BYTE = 123; public static final char X = 'X'; public static final short SHORT = 12345; public static final int INT = 123456789; public static final long LONG = 12345678901L; public static final float PI = 3.14f; public static final double E = 2.71828; public static void main(String[] args) throws RuntimeException &#123; System.out.println("Hello, World!"); &#125;&#125; Áî®‰ΩúËÄÖÊèê‰æõÁöÑclasspyÁöÑÂõæÂΩ¢ÂåñÂ∑•ÂÖ∑ÔºåÂèØ‰ª•Êü•ÁúãÂèçÁºñËØëÂêéÁöÑclassÊñá‰ª∂„ÄÇ]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>JVM</tag>
        <tag>GO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäËá™Â∑±Âä®ÊâãÂÜôJAVAËôöÊãüÊú∫„ÄãÂ≠¶‰π†Á¨îËÆ∞‰∫å„ÄêÊêúÁ¥¢classÊñá‰ª∂„Äë]]></title>
    <url>%2FJVM%2FJVM2%2F</url>
    <content type="text"><![CDATA[12345public class HelloWorld &#123; public static void main(String[] args)&#123; System.out.println("Hello, world!"); &#125;&#125; ËøêË°å‰∏äÈù¢ÁöÑjavaÁ®ãÂ∫èÊó∂ÔºåÊàë‰ª¨Áü•ÈÅìÈ¶ñÂÖàË¶ÅÂêØÂä®javaËôöÊãüÊú∫ÔºåÁÑ∂ÂêéÂä†ËΩΩ‰∏ªÁ±ªÔºåÊúÄÂêéË∞ÉÁî®‰∏ªÁ±ªÁöÑmainÊñπÊ≥ï„ÄÇ‰ΩÜÊòØÂú®Âä†ËΩΩHelloWorldÁ±ª‰πãÂâçÔºåÈ¶ñÂÖàË¶ÅÂä†ËΩΩÂÆÉÁöÑË∂ÖÁ±ªjava.lang.ObjectÔºåÂú®Ë∞ÉÁî®main()ÂáΩÊï∞‰πãÂâçÔºåËôöÊãüÊú∫Ë¶ÅÂáÜÂ§áÂ•ΩÂèÇÊï∞Êï∞ÁªÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÂä†ËΩΩjava.lang.StringÂíåjava.lang.String[]Á±ª„ÄÇÊääÂ≠óÁ¨¶‰∏≤ÊâìÂç∞Âà∞ÊéßÂà∂Âè∞ËøòÈúÄË¶ÅÂä†ËΩΩjava.lang.SystemÁ±ªÔºåÁ≠âÁ≠â„ÄÇ„ÄÇÈÇ£‰πàjavaËôöÊãüÊú∫Â¶Ç‰ΩïÂØªÊâæËøô‰∫õÁ±ªÁöÑÂë¢Ôºü Á±ªË∑ØÂæÑÁ±ªË∑ØÂæÑÂèØ‰ª•ÂàÜ‰∏∫‰ª•‰∏ã‰∏âÁßçÔºö ÂêØÂä®Á±ªË∑ØÂæÑ(bootstrap classpath)ÔºöÂêØÂä®Á±ªË∑ØÂæÑÈªòËÆ§ÂØπÂ∫îjre/libÁõÆÂΩïÔºåJavaÊ†áÂáÜÂ∫ì‰Ωç‰∫éËØ•Ë∑ØÂæÑ„ÄÇ Êâ©Â±ïÁ±ªË∑ØÂæÑ(extention classpath)ÔºöÊâ©Â±ïÁ±ªË∑ØÂæÑÈªòËÆ§ÂØπÂ∫îjre/lib/extÁõÆÂΩïÔºå‰ΩøÁî®JavaÊâ©Â±ïÊú∫Âà∂ÁöÑÁ±ª‰Ωç‰∫éËØ•Ë∑ØÂæÑ„ÄÇ Áî®Êà∑Á±ªË∑ØÂæÑ(user classpath)ÔºöÊàë‰ª¨Ëá™Â∑±ÂÆûÁé∞ÁöÑÁ±ªÔºå‰ª•ÂèäÁ¨¨‰∏âÊñπÁ±ªÂ∫ìÂàô‰Ωç‰∫éÁî®Êà∑Á±ªË∑ØÂæÑ„ÄÇÁî®Êà∑Á±ªË∑ØÂæÑÁöÑÈªòËÆ§ÂÄºÊòØÂΩìÂâçË∑ØÂæÑÔºå‰πüÂ∞±ÊòØ‚Äù.‚ÄùÔºåÂèØ‰ª•ÁªôjavaÂëΩ‰ª§‰º†ÈÄí-classpathÈÄâÈ°πÊù•ÊåáÂÆö„ÄÇ ÂáÜÂ§áÂ∑•‰ΩúÊääch01ÁöÑÁõÆÂΩïÁªìÊûÑÂ§çÂà∂‰∏Ä‰ªΩÊîπÂêçch02ÔºåÂú®ch02ÁöÑÁõÆÂΩï‰∏≠ÂàõÂª∫‰∏Ä‰∏™classpathÂ≠êÁõÆÂΩï„ÄÇ 123456|-jvmgo |-ch01 |-ch01 |-classpath |-cmd.go |-main.go ‰øÆÊîπcmdÁªìÊûÑ‰ΩìÔºåÊ∑ªÂä†XjreOptionÂ≠óÊÆµ 12345678type Cmd struct &#123; helpFlag bool versionFlag bool cpOption string XjreOption string class string args []string&#125; parseCmd()ÂáΩÊï∞‰πüÂØπÂ∫îÊ∑ªÂä†Xjre 123456789//ÂëΩ‰ª§Ëß£Êûêfunc parseCmd() *Cmd &#123; ...//ÂÖ∂‰ªñ‰ª£Á†Å‰∏çÂèò flag.StringVar(&amp;cmd.cpOption,"cp","","classpath") flag.StringVar(&amp;cmd.XjreOption,"Xjre","","path to jre") //Ëß£ÊûêÂëΩ‰ª§Ë°åÂèÇÊï∞Âà∞ÂÆö‰πâÁöÑflag flag.Parse() ...//ÂÖ∂‰ªñ‰ª£Á†Å‰∏çÂèò&#125; ÂÆûÁé∞Á±ªË∑ØÂæÑÈááÁî®ÁªÑÂêàÊ®°ÂºèÊù•ÂÆûÁé∞Á±ªË∑ØÂæÑÔºåÊääÁ±ªË∑ØÂæÑÂΩìÊàê‰∏Ä‰∏™Â§ßÁöÑÊï¥‰ΩìÔºåÁî±ÂêØÂä®Á±ªË∑ØÂæÑ„ÄÅÊâ©Â±ïÁ±ªË∑ØÂæÑÂíåÁî®Êà∑Á±ªË∑ØÂæÑ‰∏â‰∏™Â∞èË∑ØÂæÑÊûÑÊàêÔºå‰∏â‰∏™Â∞èË∑ØÂæÑÂèàÂàÜÂà´Áî±Êõ¥Â∞èÁöÑË∑ØÂæÑÊûÑÊàê„ÄÇ È¶ñÂÖàÂÆö‰πâ‰∏Ä‰∏™EntryÊé•Âè£ 1234567891011//Ëé∑ÂèñÁ≥ªÁªüÂàÜÈöîÁ¨¶ÔºåwindowsÊòØ;Á±ªUNIXÁ≥ªÁªüÊòØ:Âè∑const pathListSeparator = string(os.PathListSeparator)type Entry interface &#123; //ÂØªÊâæÂíåÂä†ËΩΩclassÊñá‰ª∂ ÂèÇÊï∞ÔºöclassÊñá‰ª∂Áõ∏ÂØπË∑ØÂæÑÔºåË∑ØÂæÑ‰πãÈó¥Áî®/ÔºåÊñá‰ª∂ÂêçÊúâ.classÂêéÁºÄ //‰æãÂ¶ÇËØªÂèñjava.lang.ObjectÂÖ•ÂèÇÊòØjava/lang/Object.class readClass(classname string) ([]byte, Entry, error) //toString String() string&#125; EntryÊé•Âè£‰∏ÄÂÖ±ÊúâÂõõÁßçÂÆûÁé∞ÔºåCompositeEntryÔºåWildcardEntryÔºåZipEntryÔºåDirEntry DirEntryDirEntryÁõ∏ÂØπÁÆÄÂçï‰∫õÔºåË°®Á§∫ÁõÆÂΩïÂΩ¢ÂºèÁöÑÁ±ªË∑ØÂæÑ 12345678910111213141516171819202122232425262728293031323334package classpathimport ( "path/filepath" "io/ioutil")type DirEntry struct &#123; //Â≠òÊîæÁõÆÂΩïÁöÑÁªùÂØπË∑ØÂæÑ absDir string&#125;//Áõ∏ÂΩì‰∫éÊûÑÈÄ†ÂáΩÊï∞func newDirEntry(path string) *DirEntry &#123; //Â∞ÜÂèÇÊï∞ËΩ¨Êç¢ÊàêÁªùÂØπË∑ØÂæÑ absDir, err := filepath.Abs(path) if err != nil &#123; panic(err) &#125; return &amp;DirEntry&#123;absDir&#125;&#125;//ËØªÂèñclassÊñá‰ª∂func (self *DirEntry) readClass (className string) ([]byte, Entry, error) &#123; //ÊääÁõÆÂΩïÂíåclassÂêçÊãºÊàêÂÆåÊàêË∑ØÂæÑ fileName := filepath.Join(self.absDir,className) //ËØªÂèñclassÊñá‰ª∂ÂÜÖÂÆπ data, err := ioutil.ReadFile(fileName) return data,self,err&#125;//Áõ¥Êé•ËøîÂõûÁõÆÂΩïfunc (self *DirEntry) String() string&#123; return self.absDir&#125; ZipEntryZipEntryË°®Á§∫ZIPÊàñËÄÖJARÊñá‰ª∂ÂΩ¢ÂºèÁöÑÁ±ªË∑ØÂæÑ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859package classpathimport ( "path/filepath" "archive/zip" "io/ioutil" "errors")type ZipEntry struct &#123; //Â≠òÊîæÁõÆÂΩïÁöÑÁªùÂØπË∑ØÂæÑ absPath string&#125;//Áõ∏ÂΩì‰∫éÊûÑÈÄ†ÂáΩÊï∞func newZipEntry(path string) *ZipEntry &#123; //Â∞ÜÂèÇÊï∞ËΩ¨Êç¢ÊàêÁªùÂØπË∑ØÂæÑ absPath, err := filepath.Abs(path) if err != nil &#123; panic(err) &#125; return &amp;ZipEntry&#123;absPath&#125;&#125;//ËØªÂèñclassÊñá‰ª∂func (self *ZipEntry) readClass(classname string) ([]byte, Entry, error) &#123; //ÊâìÂºÄzipÊñá‰ª∂ r, err := zip.OpenReader(self.absPath) if err != nil &#123; return nil,nil,err &#125; defer r.Close() //ÈÅçÂéÜzipÂåÖÈáåÁöÑÊñá‰ª∂ for _, f := range r.File &#123; //ÊâæÂà∞classÊñá‰ª∂ if f.Name == classname &#123; //ÊâìÂºÄclassÊñá‰ª∂ rc , err := f.Open() if err != nil &#123; return nil,nil,err &#125; defer rc.Close() //ËØªÂèñclassÊñá‰ª∂ÂÜÖÂÆπ data, err := ioutil.ReadAll(rc) if err != nil &#123; return nil,nil,err &#125; return data,self,err &#125; &#125; //Êú™ÊâæÂà∞classÊñá‰ª∂ return nil,nil,errors.New("class not found :" +classname)&#125;//Áõ¥Êé•ËøîÂõûÁõÆÂΩïfunc (self *ZipEntry) String() string &#123; return self.absPath&#125; CompositeEntryCompositeEntryË°®Á§∫ÊúâÂàÜÈöîÁ¨¶ÁöÑÁ±ªË∑ØÂæÑÔºåCompositeEntryÁî±Êõ¥Â∞èÁöÑEntryÁªÑÊàêÔºåÂèØ‰ª•Ë°®Á§∫Êàê[]EntryÔºågoËØ≠Ë®Ä‰∏≠Âàô‰ΩøÁî®‰æøÂà©ÁöÑslice 12345678910111213141516171819202122232425262728293031323334353637383940package classpathimport ( "strings" "errors")type CompositeEntry []Entry//Â∞ÜÊØè‰∏™Â∞èË∑ØÂæÑËΩ¨Êç¢ÊàêÂÖ∑‰ΩìÁöÑEntryfunc newCompositeEntry(pathList string) CompositeEntry &#123; var compositeEntry []Entry //Â∞ÜË∑ØÂæÑÊåâÁÖßÂàÜÈöîÁ¨¶ËøõË°åÂàÜÂâ≤ for _, path := range strings.Split(pathList,pathListSeparator)&#123; entry := newEntry(path) compositeEntry = append(compositeEntry,entry) &#125; return compositeEntry&#125;func (self CompositeEntry) readClass(classname string) ([]byte, Entry, error) &#123; //ÈÅçÂéÜentryÊï∞ÊçÆ for _, entry := range self&#123; //ËØªÂèñclassÊñá‰ª∂Ôºå‰æùÊ¨°Ë∞ÉÁî®ÊØè‰∏Ä‰∏™Â≠êË∑ØÂæÑÁöÑreadClassÊñπÊ≥ï data, from, err := entry.readClass(classname) if err == nil&#123; return data,from,err &#125; &#125; return nil,nil,errors.New("class not found :" +classname)&#125;//Ë∞ÉÁî®ÊØè‰∏™Â≠êË∑ØÂæÑÁöÑStringÊñπÊ≥ïÔºåÁî®ÂàÜÈöîÁ¨¶ÊãºÊé•Ëµ∑Êù•func (self CompositeEntry) String() string &#123; strs := make([]string,len(self)) for i, entry := range self&#123; strs[i] = entry.String() &#125; return strings.Join(strs,pathListSeparator)&#125; WildcardEntryWildcardEntryË°®Á§∫‰ª•*ÁªìÂ∞æÁöÑÁ±ªË∑ØÂæÑÔºåÂÆûÈôÖ‰∏ä‰πüÊòØCompositeEntryÔºåÂõ†Ê≠§Â∞±‰∏çÂÜçÊñ∞ÂÆö‰πâÁ±ªÂûãÁ±ª 1234567891011121314151617181920212223242526272829303132package classpathimport ( "strings" "os" "path/filepath")func newWildcardEntry(path string) CompositeEntry &#123; //ÂéªÊéâÂ∞æÈÉ®ÁöÑ* baseDir := path[:len(path)-1] var compositeEntry []Entry walkFn := func(path string, info os.FileInfo, err error) error&#123; if err != nil&#123; return err &#125; //Â¶ÇÊûú‰∏çÊòØÁõÆÂΩïÔºåËøîÂõûË∑≥ËøáÊ†áËØÜ if info.IsDir() &amp;&amp; path != baseDir &#123; return filepath.SkipDir &#125; //ÈÄâÂá∫jarÊñá‰ª∂ if strings.HasSuffix(path,".jar") || strings.HasSuffix(path,".JAR")&#123; jarEntry := newZipEntry(path) compositeEntry = append(compositeEntry,jarEntry) &#125; return nil &#125; //ÈÅçÂéÜbaseDirË∑ØÂæÑÔºåÂàõÂª∫zipEntry filepath.Walk(baseDir,walkFn) //fmt.Printf("compositeEntry : %s\n",compositeEntry) return compositeEntry&#125; EntryÂõõÁßçÁ±ªË∑ØÂæÑÈÉΩÂÆûÁé∞ÂÆå‰πãÂêéÔºåÂÜçÊù•ÂÆåÂñÑ‰∏ãEntryÊé•Âè£ÔºåÊ∑ªÂä†EntryÂÆû‰æãÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇ 12345678910111213141516func newEntry(path string) Entry &#123; //Â¶ÇÊûúË∑ØÂæÑ‰∏≠Âê´ÊúâÂàÜÈöîÁ¨¶ if strings.Contains(path,pathListSeparator)&#123; return newCompositeEntry(path) &#125; //Â¶ÇÊûúË∑ØÂæÑÊú´Â∞æÊòØ* if strings.HasSuffix(path,"*")&#123; return newWildcardEntry(path) &#125; //Â¶ÇÊûúË∑ØÂæÑ‰ª•jarÊàñËÄÖzipÁªìÂ∞æ if strings.HasSuffix(path,".jar") || strings.HasSuffix(path,".JAR")|| strings.HasSuffix(path,".zip") || strings.HasSuffix(path,".ZIP")&#123; return newZipEntry(path) &#125; return newDirEntry(path)&#125; ÂÆûÁé∞Classpath1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889package classpathimport ( "path/filepath" "os" "fmt")type Classpath struct &#123; bootClasspath Entry extClasspath Entry userClasspath Entry&#125;//‰ΩøÁî®-XjreÈÄâÈ°πËß£ÊûêÂêØÂä®Á±ªË∑ØÂæÑÂíåÊâ©Â±ïÁ±ªË∑ØÂæÑÔºå‰ΩøÁî®-classpath/-cpÈÄâÈ°πËß£ÊûêÁî®Êà∑Á±ªË∑ØÂæÑfunc Parse(jreOption,cpOption string) *Classpath &#123; cp := &amp;Classpath&#123;&#125; //Ëß£ÊûêÂêØÂä®Á±ªË∑ØÂæÑÂíåÊâ©Â±ïÁ±ªË∑ØÂæÑ cp.parseBootAndExtClasspath(jreOption) //Ëß£ÊûêÁî®Êà∑Á±ªË∑ØÂæÑ cp.parseUserClasspath(cpOption) return cp&#125;func getJreDir(jreOption string) string &#123; //‰ºòÂÖà‰ΩøÁî®Áî®Êà∑ËæìÂÖ•ÁöÑ-Xjre‰Ωú‰∏∫ÁõÆÂΩï if jreOption != "" &amp;&amp; exists(jreOption)&#123; return jreOption &#125; //Âú®ÂΩìÂâçÁõÆÂΩï‰∏ãÂØªÊâæjreÁõÆÂΩï if exists("./jre") &#123; return "./jre" &#125; //Â∞ùËØï‰ΩøÁî®JAVA_HOMEÁéØÂ¢ÉÂèòÈáè if jh := os.Getenv("JAVA_HOME"); jh != ""&#123; return filepath.Join(jh,"jre") &#125; panic("Can not find jre folder")&#125;//Âà§Êñ≠ÁõÆÂΩïÊòØÂê¶Â≠òÂú®func exists(path string) bool &#123; if _, err := os.Stat(path); err != nil&#123; if os.IsNotExist(err)&#123; return false &#125; &#125; return true&#125;func (self *Classpath) parseBootAndExtClasspath(jreOption string) &#123; // Ëé∑ÂèñjreÁõÆÂΩï jreDir := getJreDir(jreOption) //jre/lib/* jreLibPath := filepath.Join(jreDir,"lib","*") self.bootClasspath = newWildcardEntry(jreLibPath) //jre/lib/ext/* jreExtPath := filepath.Join(jreDir,"lib","ext","*") self.extClasspath = newWildcardEntry(jreExtPath)&#125;//Ëß£ÊûêÁî®Êà∑Á±ªË∑ØÂæÑfunc (self *Classpath) parseUserClasspath(cpOption string) &#123; // Â¶ÇÊûúÁî®Êà∑Ê≤°ÊúâÊèê‰æõ-classpath/-cpÈÄâÈ°πÔºåÂàô‰ΩøÁî®ÂΩìÂâçÁõÆÂΩï‰Ωú‰∏∫Áî®Êà∑Á±ªË∑ØÂæÑ if cpOption == ""&#123; cpOption = "." &#125; self.userClasspath = newEntry(cpOption)&#125;//ÂØªÊâæclassÊñπÊ≥ïfunc (self *Classpath) ReadClass(classname string) ([]byte, Entry, error) &#123; //ËÆøÈóÆReadClassÊñπÊ≥ïÂè™ÈúÄ‰º†ÈÄíÁ±ªÂêçÔºå‰∏çÁî®ÂåÖÂê´".class"ÂêéÁºÄ classname = classname + ".class" // ‰ªébootClasspathÂØªÊâæclassÊñá‰ª∂ if data, entry, err := self.bootClasspath.readClass(classname); err == nil&#123; return data, entry, err &#125; // ‰ªéextClasspathÂØªÊâæclassÊñá‰ª∂ if data, entry, err := self.extClasspath.readClass(classname); err == nil&#123; return data, entry, err &#125; // ‰ªéuserClasspathÂØªÊâæclassÊñá‰ª∂ return self.userClasspath.readClass(classname)&#125;func (self *Classpath) String() string &#123; return self.userClasspath.String()&#125; ÊµãËØï‰ª£Á†ÅÂÆåÂñÑmain.go‰∏≠ÁöÑstartJVM 123456789101112131415//Ê®°ÊãüÂêØÂä®jvmfunc startJVM(cmd *Cmd) &#123; // Ëé∑ÂèñClasspath cp := classpath.Parse(cmd.XjreOption,cmd.cpOption) fmt.Printf("classpath:%s class:%s args:%v\n",cp,cmd.class,cmd.args) // Â∞Ü.ÊõøÊç¢Êàê/(java.lang.String -&gt; java/lang/String) className := strings.Replace(cmd.class,".","/",-1) // ËØªÂèñclass classData, _, err := cp.ReadClass(className) if err != nil &#123; fmt.Printf("Could not find or load main class %s\n",cmd.class) return &#125; fmt.Printf("class data : %v\n",classData)&#125; ÁºñËØëmain.goÔºåÂπ∂ÊµãËØï-version 12345$ go install jvmgo/ch02 $ ch02 java.lang.String# Ê≤°Êúâ‰º†ÈÄí-XjreÔºå‰ºöÂéªËØªÂèñ$JAVA_HOMEÔºåÊàêÂäüÊâìÂç∞Âá∫String.classÁöÑÂÜÖÂÆπ$ ch02 -Xjre /opt java.lang.Object # ‰º†ÈÄíÈîôËØØ-Xjre‰ºöÊâìÂç∞Âá∫Could not find or load main class java.lang.Object]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>JVM</tag>
        <tag>GO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[„ÄäËá™Â∑±Âä®ÊâãÂÜôJAVAËôöÊãüÊú∫„ÄãÂ≠¶‰π†Á¨îËÆ∞‰∏Ä„ÄêÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑„Äë]]></title>
    <url>%2FJVM%2FJVM1%2F</url>
    <content type="text"><![CDATA[ÊúÄËøëÊ≠£Âú®ÁúãÂº†ÁßÄÂÆèËëóÁöÑ„ÄäËá™Â∑±Âä®ÊâãÂÜôJavaËôöÊãüÊú∫„ÄãÔºåËøôÊú¨‰π¶ÈÄÇÂêàÂàùÂ≠¶ËÄÖÊõ¥Ê∑±ÂÖ•ÁöÑÁêÜËß£javaËôöÊãüÊú∫ÁöÑÂê´‰πâÔºå‰πüÂèØ‰ª•ÁÆÄÂçïÂ≠¶‰π†goËØ≠Ë®ÄÁöÑÂü∫Êú¨‰ΩøÁî®„ÄÇ ÂáÜÂ§áÂ∑•‰ΩúÂÆâË£ÖJDK‰ªéOracleÂÆòÁΩë‰∏ãËΩΩÊúÄÊñ∞ÁöÑJDKÔºåÂèåÂáªËøêË°åÂç≥ÂèØ„ÄÇÊàë‰ΩøÁî®ÁöÑÊòØ1.8.0_161 ÂÆâË£ÖGO‰ªéGOËØ≠Ë®ÄÂÆòÁΩë‰∏ãËΩΩÊúÄÊñ∞ÁâàÊú¨ÁöÑGOÂÆâË£ÖÊñá‰ª∂ÔºåÂèåÂáªËøêË°åÂç≥ÂèØ,Êàë‰ΩøÁî®ÁöÑÊòØ1.11.2„ÄÇÊµãËØïGoÁéØÂ¢ÉÊòØÂê¶ÂÆâË£ÖÊàêÂäü 12ÔΩû$ go versiongo version go1.11.2 darwin/amd64 ËÆæÁΩÆÁéØÂ¢ÉÂèòÈáè 1234#Ê∑ªÂä†GoÁöÑËøêË°åÁéØÂ¢ÉË∑ØÂæÑexport PATH=$PATH:/usr/local/go/bin#Ê∑ªÂä†GoÂ∑•Á®ãÁöÑÂ∑•‰ΩúÁ©∫Èó¥,ÂèØËá™Ë°å‰øÆÊîπexport GOPATH=/home/XXX/XXX/jvmgo/go ÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÔºåÂ¶ÇÊûúGOPATH‰∏é‰Ω†ËÆæÁΩÆÁöÑÁõ∏ÂêåÁéØÂ¢ÉÂèòÈáèËÆæÁΩÆÊàêÂäü, 1ÔΩû$ go env ÂÆûÁé∞JAVAÂëΩ‰ª§javaÂëΩ‰ª§Â∏∏Áî®ÈÄâÈ°πÂèäÂÖ∂Áî®ÈÄî ÈÄâÈ°π Áî®ÈÄî -version ËæìÂá∫ÁâàÊú¨‰ø°ÊÅØÔºåÁÑ∂ÂêéÈÄÄÂá∫ -?/-help ËæìÂá∫Â∏ÆÂä©‰ø°ÊÅØÔºåÁÑ∂ÂêéÈÄÄÂá∫ -cp/-classpath ÊåáÂÆöÁî®Êà∑Á±ªË∑ØÂæÑ -Dproperty=value ËÆæÁΩÆJavaÁ≥ªÁªüÂ±ûÊÄß -Xms ËÆæÁΩÆÂàùÂßãÂ†ÜÁ©∫Èó¥Â§ßÂ∞è -Xmx ËÆæÁΩÆÊúÄÂ§ßÂ†ÜÁ©∫Èó¥Â§ßÂ∞è -Xss ËÆæÁΩÆÁ∫øÁ®ãÊ†àÁ©∫Èó¥Â§ßÂ∞è ÁºñÂÜôÂëΩ‰ª§Ë°åÂ∑•ÂÖ∑È¶ñÂÖàÂàõÂª∫È°πÁõÆÁªìÊûÑ 12|-jvmgo |-ch01 Âú®ch01ÁõÆÂΩï‰∏ãÂàõÂª∫cmd.goÊñá‰ª∂ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748package mainimport "flag"import "fmt"import "os"//Áî®Ê≥ï: java [-options] class [args...] (ÊâßË°åÁ±ª)//Êàñ java [-options] -jar jarfile [args...] (ÊâßË°å jar Êñá‰ª∂)type Cmd struct &#123; helpFlag bool versionFlag bool cpOption string class string args []string&#125;//ÊääÂëΩ‰ª§ÁöÑÁî®Ê≥ïÊâìÂç∞Âà∞ÊéßÂà∂Âè∞func printUsage() &#123; fmt.Printf("UsageÔºö%s [-options] class [args...]\n",os.Args[0])&#125;//ÂëΩ‰ª§Ëß£Êûêfunc parseCmd() *Cmd &#123; //Â£∞Êòécmd‰∏∫ÊåáÂêëÁ©∫ÁöÑCmdÂØπË±°ÁöÑÊåáÈíà cmd := &amp;Cmd&#123;&#125; //ÂÆö‰πâflagÂèÇÊï∞ //UsageÊòØ‰∏Ä‰∏™ÂáΩÊï∞ÔºåÈªòËÆ§ËæìÂá∫ÊâÄÊúâÂÆö‰πâ‰∫ÜÁöÑÂëΩ‰ª§Ë°åÂèÇÊï∞ÂíåÂ∏ÆÂä©‰ø°ÊÅØ flag.Usage = printUsage flag.BoolVar(&amp;cmd.helpFlag,"help",false,"print help message") flag.BoolVar(&amp;cmd.helpFlag,"?",false,"print help message") flag.BoolVar(&amp;cmd.versionFlag,"version",false,"print version and exit") flag.StringVar(&amp;cmd.cpOption,"classpath","","classpath") flag.StringVar(&amp;cmd.cpOption,"cp","","classpath") //Âú®ÊâÄÊúâÁöÑflagÂÆö‰πâÂÆåÊàê‰πãÂêéÔºåÂèØ‰ª•ÈÄöËøáË∞ÉÁî®flag.Parse()ËøõË°åËß£Êûê„ÄÇ flag.Parse() //flag.Args()ÂèØ‰ª•ÊçïËé∑Êú™Ë¢´Ëß£ÊûêÁöÑÂèÇÊï∞ args := flag.Args() if len(args) &gt; 0&#123; cmd.class = args[0] cmd.args = args[1:] &#125; return cmd&#125; ÊµãËØï‰ª£Á†ÅÂú®ch01ÁõÆÂΩï‰∏ãÂàõÂª∫main.goÊñá‰ª∂ 12345678910111213141516171819package mainimport "fmt"func main() &#123; cmd := parseCmd() if cmd.versionFlag &#123; fmt.Println("version 0.0.1") &#125;else if cmd.helpFlag || cmd.class == ""&#123; printUsage() &#125;else &#123; startJVM(cmd) &#125;&#125;//Ê®°ÊãüÂêØÂä®jvmfunc startJVM(cmd *Cmd) &#123; //ËøòÊú™ÂºÄÂßãÂÜôÔºåÊöÇÊó∂ÊâìÂç∞ fmt.Printf("classpath:%s class:%s args:%v\n",cmd.cpOption,cmd.class,cmd.args)&#125; ÁºñËØëmain.goÔºåÂπ∂ÊµãËØï-version 123$ go install jvmgo/ch01 $ ch01 -versionversion 0.0.1]]></content>
      <categories>
        <category>JVM</category>
      </categories>
      <tags>
        <tag>Â≠¶‰π†Á¨îËÆ∞</tag>
        <tag>JAVA</tag>
        <tag>JVM</tag>
        <tag>GO</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Mac‰∏ãÂà©Áî®Github PagesÂø´ÈÄüÊê≠Âª∫ÂÖçË¥πÂçöÂÆ¢]]></title>
    <url>%2Fblog%2FGithub-Pages-Blog%2F</url>
    <content type="text"><![CDATA[Êú¨ÂçöÂÆ¢Âà©Áî®Hexo + Next + GitHubPages Êê≠Âª∫ÂçöÂÆ¢„ÄÇ ÂáÜÂ§áÂ∑•‰ΩúÂÆâË£Önode.js1$ brew install node ÂÆâË£Ö git1$ brew install git ÂÆâË£Öyarn1$ npm install yarn Â¶ÇÊûúÂÆâË£ÖÂ§±Ë¥•Áî® 1$ brew install yarn ÂÆâË£ÖhexoËøõÂÖ•‰Ω†ÁöÑÈ°πÁõÆÁõÆÂΩïÔºå‰∏æ‰∏™‰æãÂ≠êÊàëÁöÑÁõÆÂΩïÊòØblog 1$ cd blog ÁÑ∂ÂêéÁî® yarn ÂÆâË£Ö hexo 1$ yarn add hexo -S Â¶ÇÊûúÂÆâË£ÖÂ§±Ë¥•Áî® 12$ npm install hexo-cli -g$ npm install hexo-server --save ËØ¶ÁªÜÂèØËßÅÂÆòÊñπÊñáÊ°£ Êê≠Âª∫Êú¨Âú∞ÂçöÂÆ¢È°πÁõÆÂàùÂßãÂåñËøõÂÖ•‰Ω†ÁöÑÈ°πÁõÆÁõÆÂΩï,ÂàùÂßãÂåñhexo 12$ cd blog$ hexo init ÂÆâË£Ö‰æùËµñ1$ yarn install ÂêØÂä®Êú¨Âú∞ÊúçÂä°1$ hexo server Âú®ÊµèËßàÂô®ËæìÂÖ• localhost:4000 Âç≥ÂèØ ÂÖ≥ËÅî GitHubÂàõÂª∫È°πÁõÆ È°πÁõÆÂêçÁß∞‰∏ÄÂÆö‰∏ÄÂÆöÊòØ [Áî®Êà∑Âêç].github.io ËÆæÁΩÆ Âú®ËÆæÁΩÆ‰∏≠ÊâæÂà∞GitHub Pages ÔºåÂàÜÊîØÈÄâÊã©masterÔºåÁÇπÂáªchoose a theme ÈÄâÊã©ÂñúÊ¨¢ÁöÑ‰∏ªÈ¢òÔºåÁÇπÂáªselect themeÂç≥ÂèØ Âà∞ËøôÈáåÂ∞±ÂèØ‰ª•ËÆøÈóÆ‰Ω†ÁöÑ‰∏ªÈ°µÂï¶ https://[Áî®Êà∑Âêç].github.io/,Êé•‰∏ãÊù•Â§çÂà∂‰Ω†ÁöÑÈ°πÁõÆÈìæÊé• Âà∞‰Ω†ÁöÑÊú¨Âú∞È°πÁõÆÊ†πÁõÆÂΩïÊâæÂà∞ _config.yml Êñá‰ª∂ÔºåÁ≤òË¥¥Âà∞‰ª•‰∏ã‰ΩçÁΩÆ Á´ôÁÇπÈÖçÁΩÆÁ´ôÁÇπÈÖçÁΩÆÂåÖÊã¨‰øÆÊîπÂçöÂÆ¢ÂêçÁß∞ÔºåÊèèËø∞Ôºå‰ΩúËÄÖÁ≠âÁ≠âÔºåÂª∫ËÆÆÁõ¥Êé•Êü•ÁúãÂÆòÊñπÊïôÁ®ã ÂÖ≥ËÅîÂÆâË£Ö hexo-deployer-git Êèí‰ª∂ 1$ yarn add hexo-deployer-git -S Â¶ÇÊûúÂ§±Ë¥•ÁöÑËØùÂ∞ùËØï‰∏ãÈù¢ÁöÑÊñπÊ≥ï 1$ npm install --save hexo-deployer-git Âú®‰Ω†ÁöÑÈ°πÁõÆÊñá‰ª∂Â§π‰∏ãËøêË°å hexo d -g ÔºàÁîüÊàêÊú¨Âú∞Êñá‰ª∂Âπ∂Â∞ÜÊú¨Âú∞Êñá‰ª∂Êé®ÈÄÅÂà∞ GitHub ÔºåÂíå git push ÂäüËÉΩÁõ∏ÂêåÔºâ,Â¶ÇÊûúÂ§±Ë¥•ÁöÑËØùÂâçÈù¢Âä†sudo 1$ hexo d -g ËøôÊó∂ËÆøÈóÆ‰Ω†ÁöÑgithub‰∏ªÈ°µhttps://[Áî®Êà∑Âêç].github.io/Â∞±ÂèØ‰ª•Âï¶ NexT‰∏ªÈ¢òÈÖçÁΩÆNexT ÊòØ‰∏Ä‰∏™È´òË¥®ÈáèÂπ∂‰∏î‰ºòÈõÖÁöÑHexo ‰∏ªÈ¢ò„ÄÇËØ¶ÁªÜÂèØËßÅÂÆòÊñπÊñáÊ°£ ÂÆâË£ÖNexT‰∏ªÈ¢òÂú®‰Ω†ÁöÑÈ°πÁõÆÊñá‰ª∂Â§π‰∏ãÔºåÊâßË°å‰ª•‰∏ãÂëΩ‰ª§ÔºåÂÆâË£ÖNexT‰∏ªÈ¢ò 1$ git clone https://github.com/iissnan/hexo-theme-next.git themes/next Êõ¥ÊîπÈ°πÁõÆÊ†πÁõÆÂΩï‰∏ã_config.yml Êñá‰ª∂ÔºåÂ¶Ç‰∏ã ÈáçÊñ∞ÁîüÊàêÊú¨Âú∞Êñá‰ª∂Âπ∂Êé®ÈÄÅÂà∞github 1$ hexo d -g ËÆøÈóÆ‰Ω†ÁöÑgithub‰∏ªÈ°µhttps://[Áî®Êà∑Âêç].github.io/Â∞±ÂèØ‰ª•ÁúãÂà∞Âï¶ ‰∏ªÈ¢òÈÖçÁΩÆthemes/nextÊñá‰ª∂Â§π‰∏ãÁöÑ_config.ymlÊòØ‰∏ªÈ¢òÁöÑÈÖçÁΩÆÊñá‰ª∂nextÂÜÖÁΩÆ‰∫Ü4Áßç‰∏ªÈ¢òÊñπÊ°àÔºåÈÄâÊã©‰Ω†ÂñúÊ¨¢ÁöÑÊñπÊ°àËß£ÂºÄÊ≥®ÈáäÂç≥ÂèØ 123456789# ---------------------------------------------------------------# Scheme Settings# ---------------------------------------------------------------# Schemes#scheme: Musescheme: Mist#scheme: Pisces#scheme: Gemini Menu SettingsÊòØÊéßÂà∂Âõæ‰∏≠ËèúÂçïÁöÑ‰ΩçÁΩÆÔºåÊ†πÊçÆÈúÄË¶ÅËß£ÂºÄÊ≥®ÈáäÂç≥ÂèØ 123456789101112# ---------------------------------------------------------------# Menu Settings# ---------------------------------------------------------------menu: home: / || home# about: /about/ || user tags: /tags/ || tags categories: /categories/ || th# archives: /archives/ || archive# schedule: /schedule/ || calendar# sitemap: /sitemap.xml || sitemap# commonweal: /404.html || heartbeat ËøòÊúâÂæàÂ§öÂæàÂ§öÁöÑÈÖçÁΩÆËØ∑ÂèÇËÄÉÂÆòÊñπÊïôÁ®ã,‰∏ªÈ¢ò‰∏™ÊÄßÈÖçÁΩÆÊïôÁ®ã,‰∏ªÈ¢òÁæéÂåñ ‰øÆÊîπ‰πãÂêéÔºåËøêË°å‰ª•‰∏ãÂëΩ‰ª§Â∞±ÂèØ‰ª•ÂÜç‰Ω†ÁöÑ‰∏ªÈ°µÁúãÂà∞Âï¶ 12$ hexo clean$ hexo d -g ‰πüÂèØ‰ª•Âú®Êú¨Âú∞ÂêØÂä®ÊúçÂä°Âô®ÔºåÂú®ÊµèËßàÂô®ËæìÂÖ• localhost:4000 ËßÇÁúãÊïàÊûú 1$ hexo server ÂàõÂª∫ÊñáÁ´†Ê∑ªÂä†„ÄêÊ†áÁ≠æ„ÄëÈ°µÈù¢Êñ∞Âª∫Ê†áÁ≠æÈ°µÈù¢ 1$ hexo new page tags ‰øÆÊîπÈ°πÁõÆÊ†πÁõÆÂΩï‰∏ã source/tags ÁöÑ index.md Êñá‰ª∂Â¶Ç‰∏ãÔºö 1234title: tagstype: "tags"comments: false--- ‰øÆÊîπthemes/nextÊñá‰ª∂Â§π‰∏ãÁöÑ_config.yml‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÂèñÊ∂à tags: /tags/ || tags ËøôË°åÊ≥®ÈáäÊñ∞Âª∫ÊµãËØïÊñáÁ´† 1$ hexo new 'test' Âú®ÊµãËØïÊñáÁ´†ÁöÑÂ§¥ÈÉ®Ê∑ªÂä†tags‰ø°ÊÅØÔºåÂ¶Ç‰∏ãÔºö 12345title: ÊµãËØïÊñáÁ´†tags: - Testing - Another Tag--- ÂêØÂä®Êú¨Âú∞ÊúçÂä°ÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞Ê†áÁ≠æËèúÂçïÔºåÁÇπÂáªÂèØËøõÂÖ•Ê†áÁ≠æÈ°µÔºåÁúãÂà∞ Â¶ÇÂõæÊâÄÁ§∫ ËØÅÊòéÊ†áÁ≠æÈ°µÈù¢Ê∑ªÂä†ÊàêÂäü„ÄÇ Ê∑ªÂä†„ÄêÂàÜÁ±ª„ÄëÈ°µÈù¢Êñ∞Âª∫Ê†áÁ≠æÈ°µÈù¢ 1$ hexo new page categories ‰øÆÊîπÈ°πÁõÆÊ†πÁõÆÂΩï‰∏ã source/tags ÁöÑ index.md Êñá‰ª∂Â¶Ç‰∏ãÔºö 1234title: categoriestype: "categories"comments: false--- ‰øÆÊîπthemes/nextÊñá‰ª∂Â§π‰∏ãÁöÑ_config.yml‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÂèñÊ∂à categories: /categories/ || th ËøôË°åÊ≥®ÈáäÂú®ÊµãËØïÊñáÁ´†ÁöÑÂ§¥ÈÉ®Ê∑ªÂä†categories‰ø°ÊÅØÔºåÂ¶Ç‰∏ãÔºö 123456title: ÊµãËØïÊñáÁ´†tags: - Testing - Another Tag---categories: Testing ÂêØÂä®Êú¨Âú∞ÊúçÂä°ÔºåÂ∞±ÂèØ‰ª•ÁúãÂà∞Ê†áÁ≠æËèúÂçïÔºåÁÇπÂáªÂèØËøõÂÖ•Ê†áÁ≠æÈ°µÔºåÁúãÂà∞ Â¶ÇÂõæÊâÄÁ§∫ ËØÅÊòéÂàÜÁ±ªÈ°µÈù¢Ê∑ªÂä†ÊàêÂäü„ÄÇ ÁªôÂçöÂÆ¢Ê∑ªÂä†ÂõæÁâáÂú®È°πÁõÆÁõÆÂΩï‰∏ãÊâßË°å 1$ npm install hexo-asset-image --save Âú®Áî®‰∏ãÈù¢ÂëΩ‰ª§ÁîüÊàêmdÊñáÁ´†Êó∂Ôºå‰ºöÂú®_postÁõÆÂΩï‰∏ãÁúãÂà∞‰∏Ä‰∏™‰∏éÊñáÁ´†ÂêåÂêçÁöÑÊñá‰ª∂Â§π 1$ hexo new 'ÊñáÁ´†Âêç' Â∞ÜÊÉ≥Ë¶Å‰∏ä‰º†ÁöÑÂõæÁâáÂÖàÊîæÂà∞Êñá‰ª∂Â§π‰∏ãÔºåÁÑ∂ÂêéÂú®ÂçöÂÆ¢‰∏≠‰ΩøÁî®markdownÁöÑÊ†ºÂºèÂºïÂÖ•ÂõæÁâáÔºö 1![ÊñáÂ≠ó](xxxx/ÂõæÁâáÂêç.jpg) ÊñáÁ´†ÂêçÂíåÊñá‰ª∂Â§πÂêçÂ≠óÁõ∏ÂêåÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÁªùÂØπË∑ØÂæÑÔºåÂè™Ë¶ÅxxxxÊòØÊñá‰ª∂Â§πÁöÑÂêçÂ≠óÂ∞±ÂèØ‰ª•‰∫Ü„ÄÇ Ê∑ªÂä†ValineËØÑËÆ∫Á≥ªÁªüÈ¶ñÂÖàÈúÄË¶ÅÂéªÊ≥®ÂÜå‰∏Ä‰∏™LeancloudË¥¶Âè∑,È™åËØÅÈÇÆÁÆ±ÁÑ∂ÂêéÈöè‰æøÂàõÂª∫‰∏Ä‰∏™Â∫îÁî®ÔºåÊåâÂ¶ÇÂõæÊâÄÁ§∫ÊâæÂà∞appidÔºåappkey Êåâ‰∏ãÂõæ‰øÆÊîπthemes/nextÊñá‰ª∂Â§π‰∏ãÁöÑ_config.yml‰∏ªÈ¢òÈÖçÁΩÆÊñá‰ª∂ÔºåÈáçÊñ∞ÂêØÂä®ÊúçÂä°Âô®Â∞±ÂèØ‰ª•Âï¶ 12345678910111213# Valine.# You can get your appid and appkey from https://leancloud.cn# more info please open https://valine.js.orgvaline: enable: true appid: your appid # your leancloud application appid appkey: your appkey # your leancloud application appkey notify: false # mail notifier , https://github.com/xCss/Valine/wiki verify: false # Verification code placeholder: ÊèèËø∞ # comment box placeholder avatar: monsterid # gravatar style guest_info: nick,mail # custom comment header pageSize: 10 # pagination size Â¶ÇÊûúË¶ÅÂà†Èô§ËØÑËÆ∫ËØ∑Âà∞LeancloudÈáåÂà†Èô§Âì¶ hexoÊ∑ªÂä†Â§ö‰ΩúËÄÖÂú®È°πÁõÆÁõÆÂΩï‰∏ãÊâßË°å 1$ npm install hexo-generator-author --save Âú®ÊñáÁ´†ÁöÑÂ§¥ÈÉ®Ê∑ªÂä†author‰ø°ÊÅØÔºåÂ¶Ç‰∏ãÔºö 123456title: ÊµãËØïÊñáÁ´†tags: - Testing - Another Tag---author: Alice ‰øÆÊîπ/layout/_macro/‰∏ãÁöÑpost.swigÊñá‰ª∂ +‰∏∫Êñ∞Ê∑ªÂä†ÁöÑË°å 123456789 &lt;div class=&quot;post-meta&quot;&gt;+ &lt;span itemprop=&quot;about&quot; itemscope itemtype=&quot;https://schema.org/Thing&quot;&gt;+ &lt;a href=&quot;/authors/&#123;&#123; post.author &#125;&#125;&quot; itemprop=&quot;url&quot; rel=&quot;index&quot;&gt;+ &lt;span itemprop=&quot;name&quot;&gt;&#123;&#123; post.author &#125;&#125;&lt;/span&gt;+ &lt;/a&gt;+ &lt;/span&gt; &lt;span class=&quot;post-time&quot;&gt; &lt;span class=&quot;post-meta-item-icon&quot;&gt; &lt;i class=&quot;fa fa-calendar-o&quot;&gt;&lt;/i&gt; Âú®/layout‰∏ãÊñ∞ÂàõÂª∫author.swigÊñá‰ª∂ 12345678910111213141516171819202122232425262728293031323334&#123;% extends &apos;_layout.swig&apos; %&#125;&#123;% import &apos;_macro/post-collapse.swig&apos; as post_template %&#125;&#123;% import &apos;_macro/sidebar.swig&apos; as sidebar_template %&#125;&#123;% block title %&#125; &#123;&#123; __(&apos;title.author&apos;) &#125;&#125;: &#123;&#123; page.author &#125;&#125; | &#123;&#123; config.title &#125;&#125; &#123;% endblock %&#125;&#123;% block content %&#125; &lt;div class=&quot;post-block category&quot;&gt; &lt;div id=&quot;posts&quot; class=&quot;posts-collapse&quot;&gt; &lt;div class=&quot;collection-title&quot;&gt; &lt;&#123;% if theme.seo %&#125;h2&#123;% else %&#125;h1&#123;% endif %&#125;&gt;&#123;# #&#125;&#123;&#123; page.author &#125;&#125;&#123;# #&#125;&lt;small&gt;&#123;&#123; __(&apos;title.author&apos;) &#125;&#125;&lt;/small&gt; &lt;/&#123;% if theme.seo %&#125;h2&#123;% else %&#125;h1&#123;% endif %&#125;&gt; &lt;/div&gt; &#123;% for post in page.posts %&#125; &#123;&#123; post_template.render(post) &#125;&#125; &#123;% endfor %&#125; &lt;/div&gt; &lt;/div&gt; &#123;% include &apos;_partials/pagination.swig&apos; %&#125;&#123;% endblock %&#125;&#123;% block sidebar %&#125; &#123;&#123; sidebar_template.render(false) &#125;&#125;&#123;% endblock %&#125; ‰øÆÊîπ/layout‰∏ãpage.swigÊñá‰ª∂ 1234567891011121314151617181920212223242526 &#123;&#123; __(&apos;title.category&apos;) + page_title_suffix &#125;&#125; &#123;% elif page.type === &quot;tags&quot; %&#125; &#123;&#123; __(&apos;title.tag&apos;) + page_title_suffix &#125;&#125;+ &#123;% elif page.type === &quot;authors&quot; %&#125;+ &#123;&#123; __(&apos;title.author&apos;) + page_title_suffix &#125;&#125; &#123;% else %&#125; &#123;&#123; page.title + page_title_suffix &#125;&#125; &#123;% endif %&#125;„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ &#123;&#123; list_categories() &#125;&#125; &lt;/div&gt; &lt;/div&gt;+ &#123;% elif page.type === &apos;authors&apos; %&#125;+ &lt;div class=&quot;author-all-page&quot;&gt;+ &lt;div class=&quot;author-all-title&quot;&gt;+ &#123;&#123; _p(&apos;counter.authors&apos;, site.authors.length) &#125;&#125;+ &lt;/div&gt;+ &lt;div class=&quot;author-all&quot;&gt;+ &#123;&#123; list_authors() &#125;&#125;+ &lt;/div&gt;+ &lt;/div&gt; &#123;% else %&#125; &#123;&#123; page.content &#125;&#125; &#123;% endif %&#125; ‰øÆÊîπ{È°πÁõÆÂêçÁß∞}/themes/next‰∏ãzh-Hans.ymlÊñá‰ª∂ 123456789101112131415title: archive: ÂΩíÊ°£ category: ÂàÜÁ±ª tag: Ê†áÁ≠æ schedule: Êó•Á®ãË°® author : ‰ΩúËÄÖ „ÄÇ„ÄÇ„ÄÇcounter: authors: zero: ÊöÇÊó†ÂàÜÁ±ª one: ÁõÆÂâçÂÖ±ËÆ° 1 ‰∏™ÂàÜÁ±ª other: "ÁõÆÂâçÂÖ±ËÆ° %d ‰∏™‰ΩúËÄÖ" Âú®{È°πÁõÆÂêçÁß∞}/themes/next/source/css/_common/components/pages/Ê∑ªÂä†authors.stylÔºåÂ§çÂà∂categories.stylÂÜÖÂÆπÂ∞ÜcategorieÊîπÊàêauthor Âú®ÂêåÁ∫ßÊñá‰ª∂pages.styl‰∏≠Ê∑ªÂä†@import ‚Äúauthors‚Äù; ‰øÆÊîπ‰πãÂêéÔºåËøêË°å‰ª•‰∏ãÂëΩ‰ª§Â∞±ÂèØ‰ª•ÂÜç‰Ω†ÁöÑ‰∏ªÈ°µÁúãÂà∞Âï¶ 12$ hexo clean$ hexo d -g ###ÂçöÊñáÂéãÁº© 12$ npm install gulp -g$ npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean gulp --save Âú®È°πÁõÆÊ†πÁõÆÂΩï‰∏ãÂàõÂª∫gulpfile.jsÂπ∂Â°´ÂÖ•‰ª•‰∏ãÂÜÖÂÆπÔºö 123456789101112131415161718192021222324252627282930313233var gulp = require('gulp');var minifycss = require('gulp-minify-css');var uglify = require('gulp-uglify');var htmlmin = require('gulp-htmlmin');var htmlclean = require('gulp-htmlclean');// ÂéãÁº© public ÁõÆÂΩï cssgulp.task('minify-css', function() &#123; return gulp.src('./public/**/*.css') .pipe(minifycss()) .pipe(gulp.dest('./public'));&#125;);// ÂéãÁº© public ÁõÆÂΩï htmlgulp.task('minify-html', function() &#123; return gulp.src('./public/**/*.html') .pipe(htmlclean()) .pipe(htmlmin(&#123; removeComments: true, minifyJS: true, minifyCSS: true, minifyURLs: true, &#125;)) .pipe(gulp.dest('./public'))&#125;);// ÂéãÁº© public/js ÁõÆÂΩï jsgulp.task('minify-js', function() &#123; return gulp.src('./public/**/*.js') .pipe(uglify()) .pipe(gulp.dest('./public'));&#125;);// ÊâßË°å gulp ÂëΩ‰ª§Êó∂ÊâßË°åÁöÑ‰ªªÂä°gulp.task('default', [ 'minify-html','minify-css','minify-js']); ÁîüÊàêÂçöÊñáÊòØÊâßË°å hexo g &amp;&amp; gulp Â∞±‰ºöÊ†πÊçÆ gulpfile.js ‰∏≠ÁöÑÈÖçÁΩÆÔºåÂØπ public ÁõÆÂΩï‰∏≠ÁöÑÈùôÊÄÅËµÑÊ∫êÊñá‰ª∂ËøõË°åÂéãÁº©„ÄÇ]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>ÊïôÁ®ã</tag>
        <tag>github</tag>
        <tag>hexo</tag>
        <tag>blog</tag>
      </tags>
  </entry>
</search>
