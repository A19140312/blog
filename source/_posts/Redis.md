---
title: redis常见面试题
date: 2019-03-13 22:33:04
tags:
    - redis
    - 面试总结
categories: redis
copyright: true
comments: false
---
#### 什么是redis?
```bash
Redis 是一个基于内存的高性能key-value数据库。
```

#### Redis支持哪几种数据结构
``` bash
String（字符串）: set key value
Hash（哈希）: hmset name  key1 value1 key2 value2
List（列表）：lpush  name  value
Set（集合）：sadd  name  value
zset(sorted set：有序集合)： zadd  name score value
```
#### Redis为什么这么快？redis采用多线程会有哪些问题？
```bash
Redis效率高的主要原因有下面几个：

    （1）基于内存操作，速度非常快
    （2）采用单线程，避免了上下文的切换导致消耗CPU
    （3）采用单线程，不用去考虑各种加锁释放锁的问题
    （4）使用IO多路复用模型，非阻塞IO
```
#### 什么是Redis持久化？Redis有哪几种持久化方式？优缺点是什么？
```bash
Redis 提供了两种持久化方式:RDB（默认） 和AOF 
RDB:当前内存中的数据集快照写入磁盘,恢复时是将快照文件直接读到内存里。
AOF:将Redis执行的每次写命令记录到单独的日志文件中,当Redis重启时再次执行AOF文件中的命令来恢复数据。
```
#### 一个字符串类型的值能存储最大容量是多少？
```bash
512M
```
#### Redis集群方案什么情况下会导致整个集群不可用？
```bash
有A，B，C三个节点的集群,在没有<复制模型>的情况下.
如果节点B失败了，那么整个集群就会以为缺少5501-11000这个范围的槽而不可用。
```
#### Redis哈希槽的概念？
```bash
Redis集群没有使用一致性hash,而是引入了哈希槽的概念.
Redis集群有 16384 个哈希槽，每个key通过CRC16校验后对16384取模来决定放置哪个槽.
集群的每个节点负责一部分hash槽。
```
#### Redis集群的主从复制模型？
```bash
为了使在部分节点失败或者大部分节点无法通信的情况下集群仍然可用，
所以集群使用了主从复制模型,每个节点都会有N-1个复制品.
```
#### Redis事务相关的命令有哪几个？
```bash
discard命令-取消事务,发起执行事务块里的所有命令.
exec命令-执行所有事务块内的命令.
multi命令-标记一个事务块的开始.
watch命令-监视一个（或多个）key，如果在执行事务之前这些key被其他命令所改动，事务将被打断.
unwatch命令-取消watch命令对所有key的监视.
```

#### redis的过期策略
```bash
redis采用的是定期删除+惰性删除策略。

定期删除：redis默认每个100ms检查，是否有过期的key（随机抽取key进行检查）,有过期key则删除。
因此，如果只采用定期删除策略，会导致很多key到时间没有删除。

惰性删除：在你获取某个key的时候，redis会检查一下，这个key如果设置了过期时间那么是否过期了？如果过期了此时就会删除。
```
#### 为什么不用定时删除策略?
```bash
定时删除,用一个定时器来负责监视key,过期则自动删除。
虽然内存及时释放，但是十分消耗CPU资源。
在大并发请求下，CPU要将时间应用在处理请求，而不是删除key,因此没有采用这一策略.
```
